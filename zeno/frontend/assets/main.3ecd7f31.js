var kte=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var U$e=kte((W$e,uN)=>{const Mte=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};Mte();function xt(){}const sj=e=>e;function Q(e,t){for(const n in t)e[n]=t[n];return e}function aj(e){return e()}function bN(){return Object.create(null)}function pt(e){e.forEach(aj)}function rt(e){return typeof e=="function"}function He(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Py;function mu(e,t){return Py||(Py=document.createElement("a")),Py.href=t,e===Py.href}function Dte(e){return Object.keys(e).length===0}function tT(e,...t){if(e==null)return xt;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function nc(e){let t;return tT(e,n=>t=n)(),t}function Qe(e,t,n){e.$$.on_destroy.push(tT(t,n))}function Ue(e,t,n,i){if(e){const r=oj(e,t,n,i);return e[0](r)}}function oj(e,t,n,i){return e[1]&&i?Q(n.ctx.slice(),e[1](i(t))):n.ctx}function ze(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const s=[],a=Math.max(t.dirty.length,r.length);for(let o=0;o<a;o+=1)s[o]=t.dirty[o]|r[o];return s}return t.dirty|r}return t.dirty}function Ve(e,t,n,i,r,s){if(r){const a=oj(t,n,i,s);e.p(a,r)}}function $e(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function vt(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Ce(e,t){const n={};t=new Set(t);for(const i in e)!t.has(i)&&i[0]!=="$"&&(n[i]=e[i]);return n}function q2(e){const t={};for(const n in e)t[n]=!0;return t}function yu(e,t,n){return e.set(n),t}function Ee(e){return e&&rt(e.destroy)?e.destroy:xt}const lj=typeof window<"u";let uj=lj?()=>window.performance.now():()=>Date.now(),nT=lj?e=>requestAnimationFrame(e):xt;const hp=new Set;function cj(e){hp.forEach(t=>{t.c(e)||(hp.delete(t),t.f())}),hp.size!==0&&nT(cj)}function fj(e){let t;return hp.size===0&&nT(cj),{promise:new Promise(n=>{hp.add(t={c:e,f:n})}),abort(){hp.delete(t)}}}function G(e,t){e.appendChild(t)}function dj(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Rte(e){const t=K("style");return Lte(dj(e),t),t.sheet}function Lte(e,t){G(e.head||e,t)}function U(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode.removeChild(e)}function Rn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function K(e){return document.createElement(e)}function $r(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ye(e){return document.createTextNode(e)}function ae(){return ye(" ")}function _t(){return ye("")}function Ke(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Nte(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Fte(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function J(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Se(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)t[i]==null?e.removeAttribute(i):i==="style"?e.style.cssText=t[i]:i==="__value"?e.value=e[i]=t[i]:n[i]&&n[i].set?e[i]=t[i]:J(e,i,t[i])}function Sv(e,t){for(const n in t)J(e,n,t[n])}function Pte(e){return Array.from(e.childNodes)}function et(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function vN(e,t){e.value=t??""}function vn(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function hj(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}const Ev=new Map;let Av=0;function Bte(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function jte(e,t){const n={stylesheet:Rte(t),rules:{}};return Ev.set(e,n),n}function pj(e,t,n,i,r,s,a,o=0){const l=16.666/i;let u=`{
`;for(let m=0;m<=1;m+=l){const y=t+(n-t)*s(m);u+=m*100+`%{${a(y,1-y)}}
`}const c=u+`100% {${a(n,1-n)}}
}`,f=`__svelte_${Bte(c)}_${o}`,d=dj(e),{stylesheet:h,rules:p}=Ev.get(d)||jte(d,e);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${c}`,h.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${f} ${i}ms linear ${r}ms 1 both`,Av+=1,f}function tC(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),r=n.length-i.length;r&&(e.style.animation=i.join(", "),Av-=r,Av||Ute())}function Ute(){nT(()=>{Av||(Ev.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),Ev.clear())})}let N0;function y0(e){N0=e}function ft(){if(!N0)throw new Error("Function called outside component initialization");return N0}function Zn(e){ft().$$.on_mount.push(e)}function zte(e){ft().$$.after_update.push(e)}function na(e){ft().$$.on_destroy.push(e)}function gj(){const e=ft();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=hj(t,n,{cancelable:i});return r.slice().forEach(a=>{a.call(e,s)}),!s.defaultPrevented}return!0}}function Tt(e,t){return ft().$$.context.set(e,t),t}function Zt(e){return ft().$$.context.get(e)}function lo(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const qm=[],be=[],$b=[],nC=[],mj=Promise.resolve();let iC=!1;function yj(){iC||(iC=!0,mj.then(vj))}function bj(){return yj(),mj}function Rp(e){$b.push(e)}function Cn(e){nC.push(e)}const ZE=new Set;let By=0;function vj(){const e=N0;do{for(;By<qm.length;){const t=qm[By];By++,y0(t),Vte(t.$$)}for(y0(null),qm.length=0,By=0;be.length;)be.pop()();for(let t=0;t<$b.length;t+=1){const n=$b[t];ZE.has(n)||(ZE.add(n),n())}$b.length=0}while(qm.length);for(;nC.length;)nC.pop()();iC=!1,ZE.clear(),y0(e)}function Vte(e){if(e.fragment!==null){e.update(),pt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Rp)}}let gm;function _j(){return gm||(gm=Promise.resolve(),gm.then(()=>{gm=null})),gm}function Ov(e,t,n){e.dispatchEvent(hj(`${t?"intro":"outro"}${n}`))}const Hb=new Set;let ac;function Be(){ac={r:0,c:[],p:ac}}function je(){ac.r||pt(ac.c),ac=ac.p}function F(e,t){e&&e.i&&(Hb.delete(e),e.i(t))}function P(e,t,n,i){if(e&&e.o){if(Hb.has(e))return;Hb.add(e),ac.c.push(()=>{Hb.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}const wj={duration:0};function $te(e,t,n){let i=t(e,n),r=!1,s,a,o=0;function l(){s&&tC(e,s)}function u(){const{delay:f=0,duration:d=300,easing:h=sj,tick:p=xt,css:g}=i||wj;g&&(s=pj(e,0,1,d,f,h,g,o++)),p(0,1);const m=uj()+f,y=m+d;a&&a.abort(),r=!0,Rp(()=>Ov(e,!0,"start")),a=fj(b=>{if(r){if(b>=y)return p(1,0),Ov(e,!0,"end"),l(),r=!1;if(b>=m){const v=h((b-m)/d);p(v,1-v)}}return r})}let c=!1;return{start(){c||(c=!0,tC(e),rt(i)?(i=i(),_j().then(u)):u())},invalidate(){c=!1},end(){r&&(l(),r=!1)}}}function Hte(e,t,n){let i=t(e,n),r=!0,s;const a=ac;a.r+=1;function o(){const{delay:l=0,duration:u=300,easing:c=sj,tick:f=xt,css:d}=i||wj;d&&(s=pj(e,1,0,u,l,c,d));const h=uj()+l,p=h+u;Rp(()=>Ov(e,!1,"start")),fj(g=>{if(r){if(g>=p)return f(0,1),Ov(e,!1,"end"),--a.r||pt(a.c),!1;if(g>=h){const m=c((g-h)/u);f(1-m,m)}}return r})}return rt(i)?_j().then(()=>{i=i(),o()}):o(),{end(l){l&&i.tick&&i.tick(1,0),r&&(s&&tC(e,s),r=!1)}}}const Wte=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function qte(e,t){P(e,1,1,()=>{t.delete(e.key)})}function Gte(e,t,n,i,r,s,a,o,l,u,c,f){let d=e.length,h=s.length,p=d;const g={};for(;p--;)g[e[p].key]=p;const m=[],y=new Map,b=new Map;for(p=h;p--;){const E=f(r,s,p),w=n(E);let O=a.get(w);O?i&&O.p(E,t):(O=u(w,E),O.c()),y.set(w,m[p]=O),w in g&&b.set(w,Math.abs(p-g[w]))}const v=new Set,_=new Set;function S(E){F(E,1),E.m(o,c),a.set(E.key,E),c=E.first,h--}for(;d&&h;){const E=m[h-1],w=e[d-1],O=E.key,D=w.key;E===w?(c=E.first,d--,h--):y.has(D)?!a.has(O)||v.has(O)?S(E):_.has(D)?d--:b.get(O)>b.get(D)?(_.add(O),S(E)):(v.add(D),d--):(l(w,a),d--)}for(;d--;){const E=e[d];y.has(E.key)||l(E,a)}for(;h;)S(m[h-1]);return m}function Le(e,t){const n={},i={},r={$$scope:1};let s=e.length;for(;s--;){const a=e[s],o=t[s];if(o){for(const l in a)l in o||(i[l]=1);for(const l in o)r[l]||(n[l]=o[l],r[l]=1);e[s]=o}else for(const l in a)r[l]=1}for(const a in i)a in n||(n[a]=void 0);return n}function kt(e){return typeof e=="object"&&e!==null?e:{}}function In(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function ie(e){e&&e.c()}function te(e,t,n,i){const{fragment:r,on_mount:s,on_destroy:a,after_update:o}=e.$$;r&&r.m(t,n),i||Rp(()=>{const l=s.map(aj).filter(rt);a?a.push(...l):pt(l),e.$$.on_mount=[]}),o.forEach(Rp)}function ne(e,t){const n=e.$$;n.fragment!==null&&(pt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Yte(e,t){e.$$.dirty[0]===-1&&(qm.push(e),yj(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function We(e,t,n,i,r,s,a,o=[-1]){const l=N0;y0(e);const u=e.$$={fragment:null,ctx:null,props:s,update:xt,not_equal:r,bound:bN(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:bN(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(f,d,...h)=>{const p=h.length?h[0]:d;return u.ctx&&r(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&Yte(e,f)),d}):[],u.update(),c=!0,pt(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const f=Pte(t.target);u.fragment&&u.fragment.l(f),f.forEach(j)}else u.fragment&&u.fragment.c();t.intro&&F(e.$$.fragment),te(e,t.target,t.anchor,t.customElement),vj()}y0(l)}class qe{$destroy(){ne(this,1),this.$destroy=xt}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Dte(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Xte="M7 7H5A2 2 0 0 0 3 9V17H5V13H7V17H9V9A2 2 0 0 0 7 7M7 11H5V9H7M14 7H10V17H12V13H14A2 2 0 0 0 16 11V9A2 2 0 0 0 14 7M14 11H12V9H14M20 9V15H21V17H17V15H18V9H17V7H21V9Z",Kte="M11,2V22C5.9,21.5 2,17.2 2,12C2,6.8 5.9,2.5 11,2M13,2V11H22C21.5,6.2 17.8,2.5 13,2M13,13V22C17.7,21.5 21.5,17.8 22,13H13Z",Jte="M14,2A8,8 0 0,0 6,10A8,8 0 0,0 14,18A8,8 0 0,0 22,10H20C20,13.32 17.32,16 14,16A6,6 0 0,1 8,10A6,6 0 0,1 14,4C14.43,4 14.86,4.05 15.27,4.14L16.88,2.54C15.96,2.18 15,2 14,2M20.59,3.58L14,10.17L11.62,7.79L10.21,9.21L14,13L22,5M4.93,5.82C3.08,7.34 2,9.61 2,12A8,8 0 0,0 10,20C10.64,20 11.27,19.92 11.88,19.77C10.12,19.38 8.5,18.5 7.17,17.29C5.22,16.25 4,14.21 4,12C4,11.7 4.03,11.41 4.07,11.11C4.03,10.74 4,10.37 4,10C4,8.56 4.32,7.13 4.93,5.82Z",_N="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",wN="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",Qte="M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Zte="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z",SN="M14,19H18V5H14M6,19H10V5H6V19Z",EN="M8,5.14V19.14L19,12.14L8,5.14Z",ene="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z";function xe(e){return Object.entries(e).filter(([t,n])=>t!==""&&n).map(([t])=>t).join(" ")}function yt(e,t,n,i={bubbles:!0},r=!1){if(typeof Event<"u"&&e){const s=new CustomEvent(t,Object.assign(Object.assign({},i),{detail:n}));if(e?.dispatchEvent(s),r&&t.startsWith("SMUI")){const a=new CustomEvent(t.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},i),{detail:n}));e?.dispatchEvent(a),a.defaultPrevented&&s.preventDefault()}return s}}function ys(e,t){let n=Object.getOwnPropertyNames(e);const i={};for(let r=0;r<n.length;r++){const s=n[r],a=s.indexOf("$");a!==-1&&t.indexOf(s.substring(0,a+1))!==-1||t.indexOf(s)===-1&&(i[s]=e[s])}return i}const AN=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,tne=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function St(e){let t,n=[];e.$on=(r,s)=>{let a=r,o=()=>{};return t?o=t(a,s):n.push([a,s]),a.match(AN)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',a),()=>{o()}};function i(r){lo(e,r)}return r=>{const s=[],a={};t=(o,l)=>{let u=o,c=l,f=!1;const d=u.match(AN),h=u.match(tne),p=d||h;if(u.match(/^SMUI:\w+:/)){const y=u.split(":");let b="";for(let v=0;v<y.length;v++)b+=v===y.length-1?":"+y[v]:y[v].split("-").map(_=>_.slice(0,1).toUpperCase()+_.slice(1)).join("");console.warn(`The event ${u.split("$")[0]} has been renamed to ${b.split("$")[0]}.`),u=b}if(p){const y=u.split(d?":":"$");u=y[0];const b=Object.fromEntries(y.slice(1).map(v=>[v,!0]));b.passive&&(f=f||{},f.passive=!0),b.nonpassive&&(f=f||{},f.passive=!1),b.capture&&(f=f||{},f.capture=!0),b.once&&(f=f||{},f.once=!0),b.preventDefault&&(c=Nte(c)),b.stopPropagation&&(c=Fte(c))}const g=Ke(r,u,c,f),m=()=>{g();const y=s.indexOf(m);y>-1&&s.splice(y,1)};return s.push(m),u in a||(a[u]=Ke(r,u,i)),m};for(let o=0;o<n.length;o++)t(n[o][0],n[o][1]);return{destroy:()=>{for(let o=0;o<s.length;o++)s[o]();for(let o of Object.entries(a))o[1]()}}}}function mt(e,t){let n=Object.getOwnPropertyNames(e);const i={};for(let r=0;r<n.length;r++){const s=n[r];s.substring(0,t.length)===t&&(i[s.substring(t.length)]=e[s])}return i}function wt(e,t){let n=[];if(t)for(let i=0;i<t.length;i++){const r=t[i],s=Array.isArray(r)?r[0]:r;Array.isArray(r)&&r.length>1?n.push(s(e,r[1])):n.push(s(e))}return{update(i){if((i&&i.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(i)for(let r=0;r<i.length;r++){const s=n[r];if(s&&s.update){const a=i[r];Array.isArray(a)&&a.length>1?s.update(a[1]):s.update()}}},destroy(){for(let i=0;i<n.length;i++){const r=n[i];r&&r.destroy&&r.destroy()}}}}function nne(e){let t,n,i,r,s;const a=e[7].default,o=Ue(a,e,e[6],null);let l=[{href:e[1]},e[4]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("a"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[8](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[3].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&64)&&Ve(o,a,c,c[6],i?ze(a,c[6],f,null):$e(c[6]),null),Se(t,u=Le(l,[(!i||f&2)&&{href:c[1]},f&16&&c[4]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[8](null),r=!1,pt(s)}}}function ine(e,t,n){const i=["use","href","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t,{href:l="javascript:void(0);"}=t;const u=St(ft());let c;function f(){return c}function d(h){be[h?"unshift":"push"](()=>{c=h,n(2,c)})}return e.$$set=h=>{t=Q(Q({},t),vt(h)),n(4,r=Ce(t,i)),"use"in h&&n(0,o=h.use),"href"in h&&n(1,l=h.href),"$$scope"in h&&n(6,a=h.$$scope)},[o,l,c,u,r,f,a,s,d]}class rne extends qe{constructor(t){super(),We(this,t,ine,nne,He,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function sne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("button"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),t.autofocus&&t.focus(),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function ane(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class one extends qe{constructor(t){super(),We(this,t,ane,sne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function lne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("div"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function une(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class Sj extends qe{constructor(t){super(),We(this,t,une,lne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function cne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("h2"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function fne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class dne extends qe{constructor(t){super(),We(this,t,fne,cne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function hne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("h3"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function pne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class gne extends qe{constructor(t){super(),We(this,t,pne,hne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function mne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("h5"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function yne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class bne extends qe{constructor(t){super(),We(this,t,yne,mne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function vne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("h6"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function _ne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class wne extends qe{constructor(t){super(),We(this,t,_ne,vne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Sne(e){let t,n,i,r,s,a,o=[e[3]],l={};for(let f=0;f<o.length;f+=1)l=Q(l,o[f]);const u=e[6].default,c=Ue(u,e,e[5],null);return{c(){t=K("hr"),i=ae(),c&&c.c(),Se(t,l)},m(f,d){U(f,t,d),e[7](t),U(f,i,d),c&&c.m(f,d),r=!0,s||(a=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],s=!0)},p(f,[d]){Se(t,l=Le(o,[d&8&&f[3]])),n&&rt(n.update)&&d&1&&n.update.call(null,f[0]),c&&c.p&&(!r||d&32)&&Ve(c,u,f,f[5],r?ze(u,f[5],d,null):$e(f[5]),null)},i(f){r||(F(c,f),r=!0)},o(f){P(c,f),r=!1},d(f){f&&j(t),e[7](null),f&&j(i),c&&c.d(f),s=!1,pt(a)}}}function Ene(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class Ane extends qe{constructor(t){super(),We(this,t,Ene,Sne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function One(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("i"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function Cne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class Ine extends qe{constructor(t){super(),We(this,t,Cne,One,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function xne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("li"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function Tne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class kne extends qe{constructor(t){super(),We(this,t,Tne,xne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Mne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("nav"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function Dne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class Rne extends qe{constructor(t){super(),We(this,t,Dne,Mne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Lne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("span"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function Nne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class Ej extends qe{constructor(t){super(),We(this,t,Nne,Lne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Fne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=$r("svg"),o&&o.c(),Sv(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Sv(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function Pne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class rC extends qe{constructor(t){super(),We(this,t,Pne,Fne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Bne(e){let t,n,i,r,s;const a=e[6].default,o=Ue(a,e,e[5],null);let l=[e[3]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("ul"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[7](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[2].call(null,t))],r=!0)},p(c,[f]){o&&o.p&&(!i||f&32)&&Ve(o,a,c,c[5],i?ze(a,c[5],f,null):$e(c[5]),null),Se(t,u=Le(l,[f&8&&c[3]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[7](null),r=!1,pt(s)}}}function jne(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t;const l=St(ft());let u;function c(){return u}function f(d){be[d?"unshift":"push"](()=>{u=d,n(1,u)})}return e.$$set=d=>{t=Q(Q({},t),vt(d)),n(3,r=Ce(t,i)),"use"in d&&n(0,o=d.use),"$$scope"in d&&n(5,a=d.$$scope)},[o,u,l,r,c,a,s,f]}class Une extends qe{constructor(t){super(),We(this,t,jne,Bne,He,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const G2=rne,Aj=one,C1=Sj,zne=dne,Vne=gne,$ne=bne,Hne=wne,Wne=Ane,Oj=kne,qne=Rne,uh=Ej,of=rC,Gne=Une;var sC=function(e,t){return sC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},sC(e,t)};function ur(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");sC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var en=function(){return en=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},en.apply(this,arguments)};function At(e,t,n,i){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(f){a(f)}}function l(c){try{u(i.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((i=i.apply(e,t||[])).next())})}function Yne(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(c){return l([u,c])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,r=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wi(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gt(e){return this instanceof Gt?(this.v=e,this):new Gt(e)}function Qo(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(d){i[d]&&(r[d]=function(h){return new Promise(function(p,g){s.push([d,h,p,g])>1||o(d,h)})})}function o(d,h){try{l(i[d](h))}catch(p){f(s[0][3],p)}}function l(d){d.value instanceof Gt?Promise.resolve(d.value.v).then(u,c):f(s[0][2],d)}function u(d){o("next",d)}function c(d){o("throw",d)}function f(d,h){d(h),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Wb(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,s){t[r]=e[r]?function(a){return(n=!n)?{value:Gt(e[r](a)),done:r==="return"}:s?s(a):a}:s}}function Sd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof wi=="function"?wi(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(a){return new Promise(function(o,l){a=e[s](a),r(o,l,a.done,a.value)})}}function r(s,a,o,l){Promise.resolve(l).then(function(u){s({value:u,done:o})},a)}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cr=function(){function e(t){t===void 0&&(t={}),this.adapter=t}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Xne(e){return e===void 0&&(e=window),Kne(e)?{passive:!0}:!1}function Kne(e){e===void 0&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},i=function(){};e.document.addEventListener("test",i,n),e.document.removeEventListener("test",i,n)}catch{t=!1}return t}var Cj=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:Xne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Jne(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(Ij(n,t))return n;n=n.parentElement}return null}function Ij(e,t){var n=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return n.call(e,t)}function Qne(e){var t=e;if(t.offsetParent!==null)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var i=n.scrollWidth;return document.documentElement.removeChild(n),i}var Y2=Object.freeze(Object.defineProperty({__proto__:null,closest:Jne,matches:Ij,estimateScrollWidth:Qne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Zne={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},eie={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},ON={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},jy;function tie(e,t){t===void 0&&(t=!1);var n=e.CSS,i=jy;if(typeof jy=="boolean"&&!t)return jy;var r=n&&typeof n.supports=="function";if(!r)return!1;var s=n.supports("--css-vars","yes"),a=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return i=s||a,t||(jy=i),i}function nie(e,t,n){if(!e)return{x:0,y:0};var i=t.x,r=t.y,s=i+n.left,a=r+n.top,o,l;if(e.type==="touchstart"){var u=e;o=u.changedTouches[0].pageX-s,l=u.changedTouches[0].pageY-a}else{var c=e;o=c.pageX-s,l=c.pageY-a}return{x:o,y:l}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var CN=["touchstart","pointerdown","mousedown","keydown"],IN=["touchend","pointerup","mouseup","contextmenu"],Uy=[],iie=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.activationAnimationHasEnded=!1,i.activationTimer=0,i.fgDeactivationRemovalTimer=0,i.fgScale="0",i.frame={width:0,height:0},i.initialSize=0,i.layoutFrame=0,i.maxRadius=0,i.unboundedCoords={left:0,top:0},i.activationState=i.defaultActivationState(),i.activationTimerCallback=function(){i.activationAnimationHasEnded=!0,i.runDeactivationUXLogicIfReady()},i.activateHandler=function(r){i.activateImpl(r)},i.deactivateHandler=function(){i.deactivateImpl()},i.focusHandler=function(){i.handleFocus()},i.blurHandler=function(){i.handleBlur()},i.resizeHandler=function(){i.layout()},i}return Object.defineProperty(t,"cssClasses",{get:function(){return Zne},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return eie},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ON},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var n=this,i=this.supportsPressRipple();if(this.registerRootHandlers(i),i){var r=t.cssClasses,s=r.ROOT,a=r.UNBOUNDED;requestAnimationFrame(function(){n.adapter.addClass(s),n.adapter.isUnbounded()&&(n.adapter.addClass(a),n.layoutInternal())})}},t.prototype.destroy=function(){var n=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var i=t.cssClasses,r=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame(function(){n.adapter.removeClass(r),n.adapter.removeClass(s),n.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(n){this.activateImpl(n)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var n=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){n.layoutInternal(),n.layoutFrame=0})},t.prototype.setUnbounded=function(n){var i=t.cssClasses.UNBOUNDED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.handleFocus=function(){var n=this;requestAnimationFrame(function(){return n.adapter.addClass(t.cssClasses.BG_FOCUSED)})},t.prototype.handleBlur=function(){var n=this;requestAnimationFrame(function(){return n.adapter.removeClass(t.cssClasses.BG_FOCUSED)})},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(n){var i,r;if(n){try{for(var s=wi(CN),a=s.next();!a.done;a=s.next()){var o=a.value;this.adapter.registerInteractionHandler(o,this.activateHandler)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(n){var i,r;if(n.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var s=wi(IN),a=s.next();!a.done;a=s.next()){var o=a.value;this.adapter.registerDocumentInteractionHandler(o,this.deactivateHandler)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},t.prototype.deregisterRootHandlers=function(){var n,i;try{for(var r=wi(CN),s=r.next();!s.done;s=r.next()){var a=s.value;this.adapter.deregisterInteractionHandler(a,this.activateHandler)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var n,i;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var r=wi(IN),s=r.next();!s.done;s=r.next()){var a=s.value;this.adapter.deregisterDocumentInteractionHandler(a,this.deactivateHandler)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.removeCssVars=function(){var n=this,i=t.strings,r=Object.keys(i);r.forEach(function(s){s.indexOf("VAR_")===0&&n.adapter.updateCssVariable(i[s],null)})},t.prototype.activateImpl=function(n){var i=this;if(!this.adapter.isSurfaceDisabled()){var r=this.activationState;if(!r.isActivated){var s=this.previousActivationEvent,a=s&&n!==void 0&&s.type!==n.type;if(!a){r.isActivated=!0,r.isProgrammatic=n===void 0,r.activationEvent=n,r.wasActivatedByPointer=r.isProgrammatic?!1:n!==void 0&&(n.type==="mousedown"||n.type==="touchstart"||n.type==="pointerdown");var o=n!==void 0&&Uy.length>0&&Uy.some(function(l){return i.adapter.containsEventTarget(l)});if(o){this.resetActivationState();return}n!==void 0&&(Uy.push(n.target),this.registerDeactivationHandlers(n)),r.wasElementMadeActive=this.checkElementMadeActive(n),r.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){Uy=[],!r.wasElementMadeActive&&n!==void 0&&(n.key===" "||n.keyCode===32)&&(r.wasElementMadeActive=i.checkElementMadeActive(n),r.wasElementMadeActive&&i.animateActivation()),r.wasElementMadeActive||(i.activationState=i.defaultActivationState())})}}}},t.prototype.checkElementMadeActive=function(n){return n!==void 0&&n.type==="keydown"?this.adapter.isSurfaceActive():!0},t.prototype.animateActivation=function(){var n=this,i=t.strings,r=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,a=t.cssClasses,o=a.FG_DEACTIVATION,l=a.FG_ACTIVATION,u=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var c="",f="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates(),h=d.startPoint,p=d.endPoint;c=h.x+"px, "+h.y+"px",f=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(r,c),this.adapter.updateCssVariable(s,f),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(o),this.adapter.computeBoundingRect(),this.adapter.addClass(l),this.activationTimer=setTimeout(function(){n.activationTimerCallback()},u)},t.prototype.getFgTranslationCoordinates=function(){var n=this.activationState,i=n.activationEvent,r=n.wasActivatedByPointer,s;r?s=nie(i,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):s={x:this.frame.width/2,y:this.frame.height/2},s={x:s.x-this.initialSize/2,y:s.y-this.initialSize/2};var a={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:s,endPoint:a}},t.prototype.runDeactivationUXLogicIfReady=function(){var n=this,i=t.cssClasses.FG_DEACTIVATION,r=this.activationState,s=r.hasDeactivationUXRun,a=r.isActivated,o=s||!a;o&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(i),this.fgDeactivationRemovalTimer=setTimeout(function(){n.adapter.removeClass(i)},ON.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var n=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(n),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var n=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return n.previousActivationEvent=void 0},t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var n=this,i=this.activationState;if(!!i.isActivated){var r=en({},i);i.isProgrammatic?(requestAnimationFrame(function(){n.animateDeactivation(r)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){n.activationState.hasDeactivationUXRun=!0,n.animateDeactivation(r),n.resetActivationState()}))}},t.prototype.animateDeactivation=function(n){var i=n.wasActivatedByPointer,r=n.wasElementMadeActive;(i||r)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var n=this;this.frame=this.adapter.computeBoundingRect();var i=Math.max(this.frame.height,this.frame.width),r=function(){var a=Math.sqrt(Math.pow(n.frame.width,2)+Math.pow(n.frame.height,2));return a+t.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?i:r();var s=Math.floor(i*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&s%2!==0?this.initialSize=s-1:this.initialSize=s,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var n=t.strings,i=n.VAR_FG_SIZE,r=n.VAR_LEFT,s=n.VAR_TOP,a=n.VAR_FG_SCALE;this.adapter.updateCssVariable(i,this.initialSize+"px"),this.adapter.updateCssVariable(a,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(r,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(s,this.unboundedCoords.top+"px"))},t}(cr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var zy={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},jl={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rie=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.hasToggledAriaLabel=!1,i}return Object.defineProperty(t,"cssClasses",{get:function(){return zy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return jl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var n=this.adapter.getAttr(jl.DATA_ARIA_LABEL_ON),i=this.adapter.getAttr(jl.DATA_ARIA_LABEL_OFF);if(n&&i){if(this.adapter.getAttr(jl.ARIA_PRESSED)!==null)throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(jl.ARIA_PRESSED,String(this.isOn()))},t.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter.hasClass(zy.ICON_BUTTON_ON)},t.prototype.toggle=function(n){if(n===void 0&&(n=!this.isOn()),n?this.adapter.addClass(zy.ICON_BUTTON_ON):this.adapter.removeClass(zy.ICON_BUTTON_ON),this.hasToggledAriaLabel){var i=n?this.adapter.getAttr(jl.DATA_ARIA_LABEL_ON):this.adapter.getAttr(jl.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(jl.ARIA_LABEL,i||"")}else this.adapter.setAttr(jl.ARIA_PRESSED,""+n)},t}(cr);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vt={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Jr=new Set;Jr.add(Vt.BACKSPACE);Jr.add(Vt.ENTER);Jr.add(Vt.SPACEBAR);Jr.add(Vt.PAGE_UP);Jr.add(Vt.PAGE_DOWN);Jr.add(Vt.END);Jr.add(Vt.HOME);Jr.add(Vt.ARROW_LEFT);Jr.add(Vt.ARROW_UP);Jr.add(Vt.ARROW_RIGHT);Jr.add(Vt.ARROW_DOWN);Jr.add(Vt.DELETE);Jr.add(Vt.ESCAPE);Jr.add(Vt.TAB);var Ts={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Qr=new Map;Qr.set(Ts.BACKSPACE,Vt.BACKSPACE);Qr.set(Ts.ENTER,Vt.ENTER);Qr.set(Ts.SPACEBAR,Vt.SPACEBAR);Qr.set(Ts.PAGE_UP,Vt.PAGE_UP);Qr.set(Ts.PAGE_DOWN,Vt.PAGE_DOWN);Qr.set(Ts.END,Vt.END);Qr.set(Ts.HOME,Vt.HOME);Qr.set(Ts.ARROW_LEFT,Vt.ARROW_LEFT);Qr.set(Ts.ARROW_UP,Vt.ARROW_UP);Qr.set(Ts.ARROW_RIGHT,Vt.ARROW_RIGHT);Qr.set(Ts.ARROW_DOWN,Vt.ARROW_DOWN);Qr.set(Ts.DELETE,Vt.DELETE);Qr.set(Ts.ESCAPE,Vt.ESCAPE);Qr.set(Ts.TAB,Vt.TAB);var lf=new Set;lf.add(Vt.PAGE_UP);lf.add(Vt.PAGE_DOWN);lf.add(Vt.END);lf.add(Vt.HOME);lf.add(Vt.ARROW_LEFT);lf.add(Vt.ARROW_UP);lf.add(Vt.ARROW_RIGHT);lf.add(Vt.ARROW_DOWN);function vi(e){var t=e.key;if(Jr.has(t))return t;var n=Qr.get(e.keyCode);return n||Vt.UNKNOWN}const{applyPassive:Vy}=Cj,{matches:sie}=Y2;function uo(e,{ripple:t=!0,surface:n=!1,unbounded:i=!1,disabled:r=!1,color:s,active:a,rippleElement:o,eventTarget:l,activeTarget:u,addClass:c=p=>e.classList.add(p),removeClass:f=p=>e.classList.remove(p),addStyle:d=(p,g)=>e.style.setProperty(p,g),initPromise:h=Promise.resolve()}={}){let p,g=Zt("SMUI:addLayoutListener"),m,y=a,b=l,v=u;function _(){n?(c("mdc-ripple-surface"),s==="primary"?(c("smui-ripple-surface--primary"),f("smui-ripple-surface--secondary")):s==="secondary"?(f("smui-ripple-surface--primary"),c("smui-ripple-surface--secondary")):(f("smui-ripple-surface--primary"),f("smui-ripple-surface--secondary"))):(f("mdc-ripple-surface"),f("smui-ripple-surface--primary"),f("smui-ripple-surface--secondary")),p&&y!==a&&(y=a,a?p.activate():a===!1&&p.deactivate()),t&&!p?(p=new iie({addClass:c,browserSupportsCssVars:()=>tie(window),computeBoundingRect:()=>(o||e).getBoundingClientRect(),containsEventTarget:E=>e.contains(E),deregisterDocumentInteractionHandler:(E,w)=>document.documentElement.removeEventListener(E,w,Vy()),deregisterInteractionHandler:(E,w)=>(l||e).removeEventListener(E,w,Vy()),deregisterResizeHandler:E=>window.removeEventListener("resize",E),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>a??sie(u||e,":active"),isSurfaceDisabled:()=>!!r,isUnbounded:()=>!!i,registerDocumentInteractionHandler:(E,w)=>document.documentElement.addEventListener(E,w,Vy()),registerInteractionHandler:(E,w)=>(l||e).addEventListener(E,w,Vy()),registerResizeHandler:E=>window.addEventListener("resize",E),removeClass:f,updateCssVariable:d}),h.then(()=>{p&&(p.init(),p.setUnbounded(i))})):p&&!t&&h.then(()=>{p&&(p.destroy(),p=void 0)}),p&&(b!==l||v!==u)&&(b=l,v=u,p.destroy(),requestAnimationFrame(()=>{p&&(p.init(),p.setUnbounded(i))})),!t&&i&&c("mdc-ripple-upgraded--unbounded")}_(),g&&(m=g(S));function S(){p&&p.layout()}return{update(E){({ripple:t,surface:n,unbounded:i,disabled:r,color:s,active:a,rippleElement:o,eventTarget:l,activeTarget:u,addClass:c,removeClass:f,addStyle:d,initPromise:h}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:w=>e.classList.add(w),removeClass:w=>e.classList.remove(w),addStyle:(w,O)=>e.style.setProperty(w,O),initPromise:Promise.resolve()},E)),_()},destroy(){p&&(p.destroy(),p=void 0,f("mdc-ripple-surface"),f("smui-ripple-surface--primary"),f("smui-ripple-surface--secondary")),m&&m()}}}function xN(e){let t;return{c(){t=K("div"),J(t,"class","mdc-icon-button__touch")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function aie(e){let t,n,i,r;const s=e[32].default,a=Ue(s,e,e[36],null);let o=e[8]&&xN();return{c(){t=K("div"),n=ae(),a&&a.c(),o&&o.c(),i=_t(),J(t,"class","mdc-icon-button__ripple")},m(l,u){U(l,t,u),U(l,n,u),a&&a.m(l,u),o&&o.m(l,u),U(l,i,u),r=!0},p(l,u){a&&a.p&&(!r||u[1]&32)&&Ve(a,s,l,l[36],r?ze(s,l[36],u,null):$e(l[36]),null),l[8]?o||(o=xN(),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i(l){r||(F(a,l),r=!0)},o(l){P(a,l),r=!1},d(l){l&&j(t),l&&j(n),a&&a.d(l),o&&o.d(l),l&&j(i)}}}function oie(e){let t,n,i;const r=[{use:[[uo,{ripple:e[4],unbounded:!0,color:e[5],disabled:!!e[28].disabled,addClass:e[25],removeClass:e[26],addStyle:e[27]}],e[21],...e[1]]},{class:xe({[e[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!e[22](e[0])&&e[0],"mdc-icon-button--touch":e[8],"mdc-icon-button--display-flex":e[9],"smui-icon-button--size-button":e[10]==="button","mdc-icon-button--reduced-size":e[10]==="mini"||e[10]==="button","mdc-card__action":e[23]==="card:action","mdc-card__action--icon":e[23]==="card:action","mdc-top-app-bar__navigation-icon":e[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":e[23]==="top-app-bar:action","mdc-snackbar__dismiss":e[23]==="snackbar:actions","mdc-data-table__pagination-button":e[23]==="data-table:pagination","mdc-data-table__sort-icon-button":e[23]==="data-table:sortable-header-cell","mdc-dialog__close":e[23]==="dialog:header"&&e[12]==="close",...e[17]})},{style:Object.entries(e[18]).map(TN).concat([e[3]]).join(" ")},{"aria-pressed":e[22](e[0])?null:e[0]?"true":"false"},{"aria-label":e[0]?e[6]:e[7]},{"data-aria-label-on":e[6]},{"data-aria-label-off":e[7]},{"aria-describedby":e[24]},{href:e[11]},e[20],e[19],e[28]];var s=e[13];function a(o){let l={$$slots:{default:[aie]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[33](t),t.$on("click",e[34]),t.$on("click",e[35])),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,l){const u=l[0]&536748031?Le(r,[l[0]&505413682&&{use:[[uo,{ripple:o[4],unbounded:!0,color:o[5],disabled:!!o[28].disabled,addClass:o[25],removeClass:o[26],addStyle:o[27]}],o[21],...o[1]]},l[0]&12719877&&{class:xe({[o[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!o[22](o[0])&&o[0],"mdc-icon-button--touch":o[8],"mdc-icon-button--display-flex":o[9],"smui-icon-button--size-button":o[10]==="button","mdc-icon-button--reduced-size":o[10]==="mini"||o[10]==="button","mdc-card__action":o[23]==="card:action","mdc-card__action--icon":o[23]==="card:action","mdc-top-app-bar__navigation-icon":o[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[23]==="top-app-bar:action","mdc-snackbar__dismiss":o[23]==="snackbar:actions","mdc-data-table__pagination-button":o[23]==="data-table:pagination","mdc-data-table__sort-icon-button":o[23]==="data-table:sortable-header-cell","mdc-dialog__close":o[23]==="dialog:header"&&o[12]==="close",...o[17]})},l[0]&262152&&{style:Object.entries(o[18]).map(TN).concat([o[3]]).join(" ")},l[0]&4194305&&{"aria-pressed":o[22](o[0])?null:o[0]?"true":"false"},l[0]&193&&{"aria-label":o[0]?o[6]:o[7]},l[0]&64&&{"data-aria-label-on":o[6]},l[0]&128&&{"data-aria-label-off":o[7]},l[0]&16777216&&{"aria-describedby":o[24]},l[0]&2048&&{href:o[11]},l[0]&1048576&&kt(o[20]),l[0]&524288&&kt(o[19]),l[0]&268435456&&kt(o[28])]):{};if(l[0]&256|l[1]&32&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[13])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[33](t),t.$on("click",o[34]),t.$on("click",o[35]),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[33](null),o&&j(n),t&&ne(t,o)}}}const TN=([e,t])=>`${e}: ${t};`;function lie(e,t,n){let i;const r=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","touch","displayFlex","size","href","action","component","getElement"];let s=Ce(t,r),{$$slots:a={},$$scope:o}=t;const l=St(ft());let u=()=>{};function c(q){return q===u}let{use:f=[]}=t,{class:d=""}=t,{style:h=""}=t,{ripple:p=!0}=t,{color:g=void 0}=t,{toggle:m=!1}=t,{pressed:y=u}=t,{ariaLabelOn:b=void 0}=t,{ariaLabelOff:v=void 0}=t,{touch:_=!1}=t,{displayFlex:S=!0}=t,{size:E="normal"}=t,{href:w=void 0}=t,{action:O=void 0}=t,D,x,A={},C={},I={},L=Zt("SMUI:icon-button:context"),k=Zt("SMUI:icon-button:aria-describedby"),{component:M=w==null?Aj:G2}=t,N=s.disabled;Tt("SMUI:icon:context","icon-button");let R=null;na(()=>{x&&x.destroy()});function T(q){return q in A?A[q]:pe().classList.contains(q)}function z(q){A[q]||n(17,A[q]=!0,A)}function Y(q){(!(q in A)||A[q])&&n(17,A[q]=!1,A)}function H(q,ve){C[q]!=ve&&(ve===""||ve==null?(delete C[q],n(18,C)):n(18,C[q]=ve,C))}function oe(q){var ve;return q in I?(ve=I[q])!==null&&ve!==void 0?ve:null:pe().getAttribute(q)}function _e(q,ve){I[q]!==ve&&n(19,I[q]=ve,I)}function re(q){n(0,y=q.isOn)}function pe(){return D.getElement()}function Oe(q){be[q?"unshift":"push"](()=>{D=q,n(15,D)})}const Re=()=>x&&x.handleClick(),W=()=>L==="top-app-bar:navigation"&&yt(pe(),"SMUITopAppBarIconButton:nav");return e.$$set=q=>{t=Q(Q({},t),vt(q)),n(28,s=Ce(t,r)),"use"in q&&n(1,f=q.use),"class"in q&&n(2,d=q.class),"style"in q&&n(3,h=q.style),"ripple"in q&&n(4,p=q.ripple),"color"in q&&n(5,g=q.color),"toggle"in q&&n(29,m=q.toggle),"pressed"in q&&n(0,y=q.pressed),"ariaLabelOn"in q&&n(6,b=q.ariaLabelOn),"ariaLabelOff"in q&&n(7,v=q.ariaLabelOff),"touch"in q&&n(8,_=q.touch),"displayFlex"in q&&n(9,S=q.displayFlex),"size"in q&&n(10,E=q.size),"href"in q&&n(11,w=q.href),"action"in q&&n(12,O=q.action),"component"in q&&n(13,M=q.component),"$$scope"in q&&n(36,o=q.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4096&&n(20,i=(()=>{if(L==="data-table:pagination")switch(O){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}else return L==="dialog:header"?{"data-mdc-dialog-action":O}:{action:O}})()),N!==s.disabled){const q=pe();"blur"in q&&q.blur(),n(30,N=s.disabled)}e.$$.dirty[0]&536969216|e.$$.dirty[1]&1&&D&&pe()&&m!==R&&(m&&!x?(n(16,x=new rie({addClass:z,hasClass:T,notifyChange:q=>{re(q),yt(pe(),"SMUIIconButtonToggle:change",q,void 0,!0)},removeClass:Y,getAttr:oe,setAttr:_e})),x.init()):!m&&x&&(x.destroy(),n(16,x=void 0),n(17,A={}),n(19,I={})),n(31,R=m)),e.$$.dirty[0]&65537&&x&&!c(y)&&x.isOn()!==y&&x.toggle(y)},[y,f,d,h,p,g,b,v,_,S,E,w,O,M,pe,D,x,A,C,I,i,l,c,L,k,z,Y,H,s,m,N,R,a,Oe,Re,W,o]}class Ja extends qe{constructor(t){super(),We(this,t,lie,oie,He,{use:1,class:2,style:3,ripple:4,color:5,toggle:29,pressed:0,ariaLabelOn:6,ariaLabelOff:7,touch:8,displayFlex:9,size:10,href:11,action:12,component:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}function uie(e){let t;const n=e[9].default,i=Ue(n,e,e[11],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&2048)&&Ve(i,n,r,r[11],t?ze(n,r[11],s,null):$e(r[11]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function cie(e){let t,n,i;const r=[{use:[e[4],...e[0]]},{class:xe({[e[1]]:!0,"mdc-button__label":e[5]==="button","mdc-fab__label":e[5]==="fab","mdc-tab__text-label":e[5]==="tab","mdc-image-list__label":e[5]==="image-list","mdc-snackbar__label":e[5]==="snackbar","mdc-banner__text":e[5]==="banner","mdc-segmented-button__label":e[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":e[5]==="data-table:pagination","mdc-data-table__header-cell-label":e[5]==="data-table:sortable-header-cell"})},e[5]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:e[6]},e[7]];var s=e[2];function a(o){let l={$$slots:{default:[uie]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[10](t)),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,[l]){const u=l&243?Le(r,[l&17&&{use:[o[4],...o[0]]},l&34&&{class:xe({[o[1]]:!0,"mdc-button__label":o[5]==="button","mdc-fab__label":o[5]==="fab","mdc-tab__text-label":o[5]==="tab","mdc-image-list__label":o[5]==="image-list","mdc-snackbar__label":o[5]==="snackbar","mdc-banner__text":o[5]==="banner","mdc-segmented-button__label":o[5]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":o[5]==="data-table:pagination","mdc-data-table__header-cell-label":o[5]==="data-table:sortable-header-cell"})},l&32&&kt(o[5]==="snackbar"?{"aria-atomic":"false"}:{}),l&64&&{tabindex:o[6]},l&128&&kt(o[7])]):{};if(l&2048&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[2])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[10](t),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[10](null),o&&j(n),t&&ne(t,o)}}}function fie(e,t,n){const i=["use","class","component","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,c,{component:f=Ej}=t;const d=Zt("SMUI:label:context"),h=Zt("SMUI:label:tabindex");function p(){return c.getElement()}function g(m){be[m?"unshift":"push"](()=>{c=m,n(3,c)})}return e.$$set=m=>{t=Q(Q({},t),vt(m)),n(7,r=Ce(t,i)),"use"in m&&n(0,l=m.use),"class"in m&&n(1,u=m.class),"component"in m&&n(2,f=m.component),"$$scope"in m&&n(11,a=m.$$scope)},[l,u,f,c,o,d,h,r,p,s,g,a]}class die extends qe{constructor(t){super(),We(this,t,fie,cie,He,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}function hie(e){let t;const n=e[9].default,i=Ue(n,e,e[11],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&2048)&&Ve(i,n,r,r[11],t?ze(n,r[11],s,null):$e(r[11]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function pie(e){let t,n,i;const r=[{use:[e[5],...e[0]]},{class:xe({[e[1]]:!0,"mdc-button__icon":e[6]==="button","mdc-fab__icon":e[6]==="fab","mdc-icon-button__icon":e[6]==="icon-button","mdc-icon-button__icon--on":e[6]==="icon-button"&&e[2],"mdc-tab__icon":e[6]==="tab","mdc-banner__icon":e[6]==="banner","mdc-segmented-button__icon":e[6]==="segmented-button"})},{"aria-hidden":"true"},e[3]===rC?{focusable:"false",tabindex:"-1"}:{},e[7]];var s=e[3];function a(o){let l={$$slots:{default:[hie]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[10](t)),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,[l]){const u=l&239?Le(r,[l&33&&{use:[o[5],...o[0]]},l&70&&{class:xe({[o[1]]:!0,"mdc-button__icon":o[6]==="button","mdc-fab__icon":o[6]==="fab","mdc-icon-button__icon":o[6]==="icon-button","mdc-icon-button__icon--on":o[6]==="icon-button"&&o[2],"mdc-tab__icon":o[6]==="tab","mdc-banner__icon":o[6]==="banner","mdc-segmented-button__icon":o[6]==="segmented-button"})},r[2],l&8&&kt(o[3]===rC?{focusable:"false",tabindex:"-1"}:{}),l&128&&kt(o[7])]):{};if(l&2048&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[3])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[10](t),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[10](null),o&&j(n),t&&ne(t,o)}}}function gie(e,t,n){const i=["use","class","on","component","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,{on:c=!1}=t,f,{component:d=Ine}=t;const h=Zt("SMUI:icon:context");function p(){return f.getElement()}function g(m){be[m?"unshift":"push"](()=>{f=m,n(4,f)})}return e.$$set=m=>{t=Q(Q({},t),vt(m)),n(7,r=Ce(t,i)),"use"in m&&n(0,l=m.use),"class"in m&&n(1,u=m.class),"on"in m&&n(2,c=m.on),"component"in m&&n(3,d=m.component),"$$scope"in m&&n(11,a=m.$$scope)},[l,u,c,d,f,o,h,r,p,s,g,a]}class mie extends qe{constructor(t){super(),We(this,t,gie,pie,He,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}const Rh=[];function xj(e,t){return{subscribe:oi(e,t).subscribe}}function oi(e,t=xt){let n;const i=new Set;function r(o){if(He(e,o)&&(e=o,n)){const l=!Rh.length;for(const u of i)u[1](),Rh.push(u,e);if(l){for(let u=0;u<Rh.length;u+=2)Rh[u][0](Rh[u+1]);Rh.length=0}}}function s(o){r(o(e))}function a(o,l=xt){const u=[o,l];return i.add(u),i.size===1&&(n=t(r)||xt),o(e),()=>{i.delete(u),i.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:a}}function I1(e,t,n){const i=!Array.isArray(e),r=i?[e]:e,s=t.length<2;return xj(n,a=>{let o=!1;const l=[];let u=0,c=xt;const f=()=>{if(u)return;c();const h=t(i?l[0]:l,a);s?a(h):c=rt(h)?h:xt},d=r.map((h,p)=>tT(h,g=>{l[p]=g,u&=~(1<<p),o&&f()},()=>{u|=1<<p}));return o=!0,f(),function(){pt(d),c()}})}function yie(e){let t;const n=e[4].default,i=Ue(n,e,e[3],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,[s]){i&&i.p&&(!t||s&8)&&Ve(i,n,r,r[3],t?ze(n,r[3],s,null):$e(r[3]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function bie(e,t,n){let i,{$$slots:r={},$$scope:s}=t,{key:a}=t,{value:o}=t;const l=oi(o);return Qe(e,l,u=>n(5,i=u)),Tt(a,l),na(()=>{l.set(void 0)}),e.$$set=u=>{"key"in u&&n(1,a=u.key),"value"in u&&n(2,o=u.value),"$$scope"in u&&n(3,s=u.$$scope)},e.$$.update=()=>{e.$$.dirty&4&&yu(l,i=o,i)},[l,a,o,s,r]}class Lp extends qe{constructor(t){super(),We(this,t,bie,yie,He,{key:1,value:2})}}const X2=die,rl=mie;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Uu,Ul,qt={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};Uu={},Uu[""+qt.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",Uu[""+qt.LIST_ITEM_CLASS]="mdc-list-item",Uu[""+qt.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",Uu[""+qt.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",Uu[""+qt.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",Uu[""+qt.ROOT]="mdc-list";var Lh=(Ul={},Ul[""+qt.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Ul[""+qt.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Ul[""+qt.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Ul[""+qt.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Ul[""+qt.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Ul[""+qt.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Ul[""+qt.ROOT]="mdc-deprecated-list",Ul),zu={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+qt.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+qt.LIST_ITEM_CLASS+` a,
    .`+Lh[qt.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Lh[qt.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+qt.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+qt.LIST_ITEM_CLASS+` a,
    .`+qt.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+qt.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+Lh[qt.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+Lh[qt.LIST_ITEM_CLASS]+` a,
    .`+Lh[qt.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+Lh[qt.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},xi={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vie=["input","button","textarea","select"],Qf=function(e){var t=e.target;if(!!t){var n=(""+t.tagName).toLowerCase();vie.indexOf(n)===-1&&e.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function _ie(){var e={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return e}function wie(e,t){for(var n=new Map,i=0;i<e;i++){var r=t(i).trim();if(!!r){var s=r[0].toLowerCase();n.has(s)||n.set(s,[]),n.get(s).push({text:r.toLowerCase(),index:i})}}return n.forEach(function(a){a.sort(function(o,l){return o.index-l.index})}),n}function aC(e,t){var n=e.nextChar,i=e.focusItemAtIndex,r=e.sortedIndexByFirstChar,s=e.focusedItemIndex,a=e.skipFocus,o=e.isItemAtIndexDisabled;clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout(function(){kj(t)},xi.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+n;var l;return t.typeaheadBuffer.length===1?l=Sie(r,s,o,t):l=Eie(r,o,t),l!==-1&&!a&&i(l),l}function Sie(e,t,n,i){var r=i.typeaheadBuffer[0],s=e.get(r);if(!s)return-1;if(r===i.currentFirstChar&&s[i.sortedIndexCursor].index===t){i.sortedIndexCursor=(i.sortedIndexCursor+1)%s.length;var a=s[i.sortedIndexCursor].index;if(!n(a))return a}i.currentFirstChar=r;var o=-1,l;for(l=0;l<s.length;l++)if(!n(s[l].index)){o=l;break}for(;l<s.length;l++)if(s[l].index>t&&!n(s[l].index)){o=l;break}return o!==-1?(i.sortedIndexCursor=o,s[i.sortedIndexCursor].index):-1}function Eie(e,t,n){var i=n.typeaheadBuffer[0],r=e.get(i);if(!r)return-1;var s=r[n.sortedIndexCursor];if(s.text.lastIndexOf(n.typeaheadBuffer,0)===0&&!t(s.index))return s.index;for(var a=(n.sortedIndexCursor+1)%r.length,o=-1;a!==n.sortedIndexCursor;){var l=r[a],u=l.text.lastIndexOf(n.typeaheadBuffer,0)===0,c=!t(l.index);if(u&&c){o=a;break}a=(a+1)%r.length}return o!==-1?(n.sortedIndexCursor=o,r[n.sortedIndexCursor].index):-1}function Tj(e){return e.typeaheadBuffer.length>0}function kj(e){e.typeaheadBuffer=""}function kN(e,t){var n=e.event,i=e.isTargetListItem,r=e.focusedItemIndex,s=e.focusItemAtIndex,a=e.sortedIndexByFirstChar,o=e.isItemAtIndexDisabled,l=vi(n)==="ArrowLeft",u=vi(n)==="ArrowUp",c=vi(n)==="ArrowRight",f=vi(n)==="ArrowDown",d=vi(n)==="Home",h=vi(n)==="End",p=vi(n)==="Enter",g=vi(n)==="Spacebar";if(n.ctrlKey||n.metaKey||l||u||c||f||d||h||p)return-1;var m=!g&&n.key.length===1;if(m){Qf(n);var y={focusItemAtIndex:s,focusedItemIndex:r,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:a,skipFocus:!1,isItemAtIndexDisabled:o};return aC(y,t)}if(!g)return-1;i&&Qf(n);var b=i&&Tj(t);if(b){var y={focusItemAtIndex:s,focusedItemIndex:r,nextChar:" ",sortedIndexByFirstChar:a,skipFocus:!1,isItemAtIndexDisabled:o};return aC(y,t)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Aie(e){return e instanceof Array}var Oie=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.wrapFocus=!1,i.isVertical=!0,i.isSingleSelectionList=!1,i.selectedIndex=xi.UNSET_INDEX,i.focusedItemIndex=xi.UNSET_INDEX,i.useActivatedClass=!1,i.useSelectedAttr=!1,i.ariaCurrentAttrValue=null,i.isCheckboxList=!1,i.isRadioList=!1,i.hasTypeahead=!1,i.typeaheadState=_ie(),i.sortedIndexByFirstChar=new Map,i}return Object.defineProperty(t,"strings",{get:function(){return zu},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return qt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return xi},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},t.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},t.prototype.setWrapFocus=function(n){this.wrapFocus=n},t.prototype.setVerticalOrientation=function(n){this.isVertical=n},t.prototype.setSingleSelection=function(n){this.isSingleSelectionList=n,n&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},t.prototype.maybeInitializeSingleSelection=function(){var n=this.getSelectedIndexFromDOM();if(n!==xi.UNSET_INDEX){var i=this.adapter.listItemAtIndexHasClass(n,qt.LIST_ITEM_ACTIVATED_CLASS);i&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=n}},t.prototype.getSelectedIndexFromDOM=function(){for(var n=xi.UNSET_INDEX,i=this.adapter.getListItemCount(),r=0;r<i;r++){var s=this.adapter.listItemAtIndexHasClass(r,qt.LIST_ITEM_SELECTED_CLASS),a=this.adapter.listItemAtIndexHasClass(r,qt.LIST_ITEM_ACTIVATED_CLASS);if(!!(s||a)){n=r;break}}return n},t.prototype.setHasTypeahead=function(n){this.hasTypeahead=n,n&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},t.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&Tj(this.typeaheadState)},t.prototype.setUseActivatedClass=function(n){this.useActivatedClass=n},t.prototype.setUseSelectedAttribute=function(n){this.useSelectedAttr=n},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(n,i){var r=i===void 0?{}:i,s=r.forceUpdate;!this.isIndexValid(n)||(this.isCheckboxList?this.setCheckboxAtIndex(n):this.isRadioList?this.setRadioAtIndex(n):this.setSingleSelectionAtIndex(n,{forceUpdate:s}))},t.prototype.handleFocusIn=function(n){n>=0&&(this.focusedItemIndex=n,this.adapter.setAttributeForElementIndex(n,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(n,"0"))},t.prototype.handleFocusOut=function(n){var i=this;n>=0&&(this.adapter.setAttributeForElementIndex(n,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(n,"-1")),setTimeout(function(){i.adapter.isFocusInsideList()||i.setTabindexToFirstSelectedOrFocusedItem()},0)},t.prototype.handleKeydown=function(n,i,r){var s=this,a=vi(n)==="ArrowLeft",o=vi(n)==="ArrowUp",l=vi(n)==="ArrowRight",u=vi(n)==="ArrowDown",c=vi(n)==="Home",f=vi(n)==="End",d=vi(n)==="Enter",h=vi(n)==="Spacebar",p=n.key==="A"||n.key==="a";if(this.adapter.isRootFocused()){if(o||f?(n.preventDefault(),this.focusLastElement()):(u||c)&&(n.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var g={event:n,focusItemAtIndex:function(b){s.focusItemAtIndex(b)},focusedItemIndex:-1,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(b){return s.adapter.listItemAtIndexHasClass(b,qt.LIST_ITEM_DISABLED_CLASS)}};kN(g,this.typeaheadState)}return}var m=this.adapter.getFocusedElementIndex();if(!(m===-1&&(m=r,m<0))){if(this.isVertical&&u||!this.isVertical&&l)Qf(n),this.focusNextElement(m);else if(this.isVertical&&o||!this.isVertical&&a)Qf(n),this.focusPrevElement(m);else if(c)Qf(n),this.focusFirstElement();else if(f)Qf(n),this.focusLastElement();else if(p&&n.ctrlKey&&this.isCheckboxList)n.preventDefault(),this.toggleAll(this.selectedIndex===xi.UNSET_INDEX?[]:this.selectedIndex);else if((d||h)&&i){var y=n.target;if(y&&y.tagName==="A"&&d||(Qf(n),this.adapter.listItemAtIndexHasClass(m,qt.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(m),this.adapter.notifyAction(m))}if(this.hasTypeahead){var g={event:n,focusItemAtIndex:function(v){s.focusItemAtIndex(v)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:i,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(v){return s.adapter.listItemAtIndexHasClass(v,qt.LIST_ITEM_DISABLED_CLASS)}};kN(g,this.typeaheadState)}}},t.prototype.handleClick=function(n,i){n!==xi.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(n,qt.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(n,i),this.adapter.notifyAction(n)))},t.prototype.focusNextElement=function(n){var i=this.adapter.getListItemCount(),r=n+1;if(r>=i)if(this.wrapFocus)r=0;else return n;return this.focusItemAtIndex(r),r},t.prototype.focusPrevElement=function(n){var i=n-1;if(i<0)if(this.wrapFocus)i=this.adapter.getListItemCount()-1;else return n;return this.focusItemAtIndex(i),i},t.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var n=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(n),n},t.prototype.focusInitialElement=function(){var n=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(n),n},t.prototype.setEnabled=function(n,i){!this.isIndexValid(n)||(i?(this.adapter.removeClassForElementIndex(n,qt.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,zu.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(n,qt.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(n,zu.ARIA_DISABLED,"true")))},t.prototype.setSingleSelectionAtIndex=function(n,i){var r=i===void 0?{}:i,s=r.forceUpdate;if(!(this.selectedIndex===n&&!s)){var a=qt.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(a=qt.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==xi.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,a),this.setAriaForSingleSelectionAtIndex(n),this.setTabindexAtIndex(n),n!==xi.UNSET_INDEX&&this.adapter.addClassForElementIndex(n,a),this.selectedIndex=n}},t.prototype.setAriaForSingleSelectionAtIndex=function(n){this.selectedIndex===xi.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(n,zu.ARIA_CURRENT));var i=this.ariaCurrentAttrValue!==null,r=i?zu.ARIA_CURRENT:zu.ARIA_SELECTED;if(this.selectedIndex!==xi.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,r,"false"),n!==xi.UNSET_INDEX){var s=i?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(n,r,s)}},t.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?zu.ARIA_SELECTED:zu.ARIA_CHECKED},t.prototype.setRadioAtIndex=function(n){var i=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(n,!0),this.selectedIndex!==xi.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,i,"false"),this.adapter.setAttributeForElementIndex(n,i,"true"),this.selectedIndex=n},t.prototype.setCheckboxAtIndex=function(n){for(var i=this.getSelectionAttribute(),r=0;r<this.adapter.getListItemCount();r++){var s=!1;n.indexOf(r)>=0&&(s=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(r,s),this.adapter.setAttributeForElementIndex(r,i,s?"true":"false")}this.selectedIndex=n},t.prototype.setTabindexAtIndex=function(n){this.focusedItemIndex===xi.UNSET_INDEX&&n!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==n&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==n&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),n!==xi.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(n,"tabindex","0")},t.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},t.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var n=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(n)},t.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==xi.UNSET_INDEX?this.selectedIndex:Aie(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(n,i){return Math.min(n,i)}):0:Math.max(this.focusedItemIndex,0)},t.prototype.isIndexValid=function(n){var i=this;if(n instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return n.length===0?!0:n.some(function(r){return i.isIndexInRange(r)})}else if(typeof n=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+n);return this.isIndexInRange(n)||this.isSingleSelectionList&&n===xi.UNSET_INDEX}else return!1},t.prototype.isIndexInRange=function(n){var i=this.adapter.getListItemCount();return n>=0&&n<i},t.prototype.setSelectedIndexOnAction=function(n,i){i===void 0&&(i=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(n,i):this.setSelectedIndex(n)},t.prototype.toggleCheckboxAtIndex=function(n,i){var r=this.getSelectionAttribute(),s=this.adapter.isCheckboxCheckedAtIndex(n);i&&(s=!s,this.adapter.setCheckedCheckboxOrRadioAtIndex(n,s)),this.adapter.setAttributeForElementIndex(n,r,s?"true":"false");var a=this.selectedIndex===xi.UNSET_INDEX?[]:this.selectedIndex.slice();s?a.push(n):a=a.filter(function(o){return o!==n}),this.selectedIndex=a},t.prototype.focusItemAtIndex=function(n){this.adapter.focusItemAtIndex(n),this.focusedItemIndex=n},t.prototype.toggleAll=function(n){var i=this.adapter.getListItemCount();if(n.length===i)this.setCheckboxAtIndex([]);else{for(var r=[],s=0;s<i;s++)(!this.adapter.listItemAtIndexHasClass(s,qt.LIST_ITEM_DISABLED_CLASS)||n.indexOf(s)>-1)&&r.push(s);this.setCheckboxAtIndex(r)}},t.prototype.typeaheadMatchItem=function(n,i,r){var s=this;r===void 0&&(r=!1);var a={focusItemAtIndex:function(o){s.focusItemAtIndex(o)},focusedItemIndex:i||this.focusedItemIndex,nextChar:n,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:r,isItemAtIndexDisabled:function(o){return s.adapter.listItemAtIndexHasClass(o,qt.LIST_ITEM_DISABLED_CLASS)}};return aC(a,this.typeaheadState)},t.prototype.typeaheadInitSortedIndex=function(){return wie(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},t.prototype.clearTypeaheadBuffer=function(){kj(this.typeaheadState)},t}(cr);function Cie(e){let t;const n=e[37].default,i=Ue(n,e,e[43],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[1]&4096)&&Ve(i,n,r,r[43],t?ze(n,r[43],s,null):$e(r[43]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Iie(e){let t,n,i;const r=[{use:[e[17],...e[0]]},{class:xe({[e[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":e[2],"mdc-deprecated-list--dense":e[3],"mdc-deprecated-list--textual-list":e[4],"mdc-deprecated-list--avatar-list":e[5]||e[18],"mdc-deprecated-list--icon-list":e[6],"mdc-deprecated-list--image-list":e[7],"mdc-deprecated-list--thumbnail-list":e[8],"mdc-deprecated-list--video-list":e[9],"mdc-deprecated-list--two-line":e[10],"smui-list--three-line":e[11]&&!e[10]})},{role:e[15]},e[23]];var s=e[12];function a(o){let l={$$slots:{default:[Cie]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[38](t),t.$on("keydown",e[39]),t.$on("focusin",e[40]),t.$on("focusout",e[41]),t.$on("click",e[42]),t.$on("SMUIListItem:mount",e[19]),t.$on("SMUIListItem:unmount",e[20]),t.$on("SMUI:action",e[21])),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,l){const u=l[0]&8818687?Le(r,[l[0]&131073&&{use:[o[17],...o[0]]},l[0]&266238&&{class:xe({[o[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":o[2],"mdc-deprecated-list--dense":o[3],"mdc-deprecated-list--textual-list":o[4],"mdc-deprecated-list--avatar-list":o[5]||o[18],"mdc-deprecated-list--icon-list":o[6],"mdc-deprecated-list--image-list":o[7],"mdc-deprecated-list--thumbnail-list":o[8],"mdc-deprecated-list--video-list":o[9],"mdc-deprecated-list--two-line":o[10],"smui-list--three-line":o[11]&&!o[10]})},l[0]&32768&&{role:o[15]},l[0]&8388608&&kt(o[23])]):{};if(l[1]&4096&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[12])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[38](t),t.$on("keydown",o[39]),t.$on("focusin",o[40]),t.$on("focusout",o[41]),t.$on("click",o[42]),t.$on("SMUIListItem:mount",o[19]),t.$on("SMUIListItem:unmount",o[20]),t.$on("SMUI:action",o[21]),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[38](null),o&&j(n),t&&ne(t,o)}}}function xie(e,t,n){const i=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;var o;const{closest:l,matches:u}=Y2,c=St(ft());let{use:f=[]}=t,{class:d=""}=t,{nonInteractive:h=!1}=t,{dense:p=!1}=t,{textualList:g=!1}=t,{avatarList:m=!1}=t,{iconList:y=!1}=t,{imageList:b=!1}=t,{thumbnailList:v=!1}=t,{videoList:_=!1}=t,{twoLine:S=!1}=t,{threeLine:E=!1}=t,{vertical:w=!0}=t,{wrapFocus:O=(o=Zt("SMUI:list:wrapFocus"))!==null&&o!==void 0?o:!1}=t,{singleSelection:D=!1}=t,{selectedIndex:x=-1}=t,{radioList:A=!1}=t,{checkList:C=!1}=t,{hasTypeahead:I=!1}=t,L,k,M=[],N=Zt("SMUI:list:role"),R=Zt("SMUI:list:nav");const T=new WeakMap;let z=Zt("SMUI:dialog:selection"),Y=Zt("SMUI:addLayoutListener"),H,{component:oe=R?qne:Gne}=t;Tt("SMUI:list:nonInteractive",h),Tt("SMUI:separator:context","list"),N||(D?(N="listbox",Tt("SMUI:list:item:role","option")):A?(N="radiogroup",Tt("SMUI:list:item:role","radio")):C?(N="group",Tt("SMUI:list:item:role","checkbox")):(N="list",Tt("SMUI:list:item:role",void 0))),Y&&(H=Y(ct)),Zn(()=>{n(13,k=new Oie({addClassForElementIndex:q,focusItemAtIndex:Re,getAttributeForElementIndex:(nt,Je)=>{var Ln,Io;return(Io=(Ln=Oe()[nt])===null||Ln===void 0?void 0:Ln.getAttr(Je))!==null&&Io!==void 0?Io:null},getFocusedElementIndex:()=>document.activeElement?Oe().map(nt=>nt.element).indexOf(document.activeElement):-1,getListItemCount:()=>M.length,getPrimaryTextAtIndex:Xe,hasCheckboxAtIndex:nt=>{var Je,Ln;return(Ln=(Je=Oe()[nt])===null||Je===void 0?void 0:Je.hasCheckbox)!==null&&Ln!==void 0?Ln:!1},hasRadioAtIndex:nt=>{var Je,Ln;return(Ln=(Je=Oe()[nt])===null||Je===void 0?void 0:Je.hasRadio)!==null&&Ln!==void 0?Ln:!1},isCheckboxCheckedAtIndex:nt=>{var Je;const Ln=Oe()[nt];return(Je=Ln?.hasCheckbox&&Ln.checked)!==null&&Je!==void 0?Je:!1},isFocusInsideList:()=>L!=null&&V()!==document.activeElement&&V().contains(document.activeElement),isRootFocused:()=>L!=null&&document.activeElement===V(),listItemAtIndexHasClass:W,notifyAction:nt=>{n(24,x=nt),L!=null&&yt(V(),"SMUIList:action",{index:nt},void 0,!0)},removeClassForElementIndex:ve,setAttributeForElementIndex:ce,setCheckedCheckboxOrRadioAtIndex:(nt,Je)=>{Oe()[nt].checked=Je},setTabIndexForListItemChildren:(nt,Je)=>{const Ln=Oe()[nt],Io="button:not(:disabled), a";Array.prototype.forEach.call(Ln.element.querySelectorAll(Io),hm=>{hm.setAttribute("tabindex",Je)})}}));const me={get element(){return V()},get items(){return M},get typeaheadInProgress(){return k.isTypeaheadInProgress()},typeaheadMatchItem(nt,Je){return k.typeaheadMatchItem(nt,Je,!0)},getOrderedList:Oe,focusItemAtIndex:Re,addClassForElementIndex:q,removeClassForElementIndex:ve,setAttributeForElementIndex:ce,removeAttributeForElementIndex:fe,getAttributeFromElementIndex:we,getPrimaryTextAtIndex:Xe};return yt(V(),"SMUIList:mount",me),k.init(),()=>{k.destroy()}}),na(()=>{H&&H()});function _e(me){M.push(me.detail),T.set(me.detail.element,me.detail),D&&me.detail.selected&&n(24,x=tt(me.detail.element)),me.stopPropagation()}function re(me){var nt;const Je=(nt=me.detail&&M.indexOf(me.detail))!==null&&nt!==void 0?nt:-1;Je!==-1&&(M.splice(Je,1),M=M,T.delete(me.detail.element)),me.stopPropagation()}function pe(me){if(A||C){const nt=tt(me.target);if(nt!==-1){const Je=Oe()[nt];Je&&(A&&!Je.checked||C)&&(Je.checked=!Je.checked,Je.activateRipple(),window.requestAnimationFrame(()=>{Je.deactivateRipple()}))}}}function Oe(){return L==null?[]:[...V().children].map(me=>T.get(me)).filter(me=>me&&me._smui_list_item_accessor)}function Re(me){const nt=Oe()[me];nt&&"focus"in nt.element&&nt.element.focus()}function W(me,nt){var Je;const Ln=Oe()[me];return(Je=Ln&&Ln.hasClass(nt))!==null&&Je!==void 0?Je:!1}function q(me,nt){const Je=Oe()[me];Je&&Je.addClass(nt)}function ve(me,nt){const Je=Oe()[me];Je&&Je.removeClass(nt)}function ce(me,nt,Je){const Ln=Oe()[me];Ln&&Ln.addAttr(nt,Je)}function fe(me,nt){const Je=Oe()[me];Je&&Je.removeAttr(nt)}function we(me,nt){const Je=Oe()[me];return Je?Je.getAttr(nt):null}function Xe(me){var nt;const Je=Oe()[me];return(nt=Je&&Je.getPrimaryText())!==null&&nt!==void 0?nt:""}function tt(me){const nt=l(me,".mdc-deprecated-list-item, .mdc-deprecated-list");return nt&&u(nt,".mdc-deprecated-list-item")?Oe().map(Je=>Je?.element).indexOf(nt):-1}function ct(){return k.layout()}function yn(me,nt){return k.setEnabled(me,nt)}function Nt(){return k.isTypeaheadInProgress()}function se(){return k.getSelectedIndex()}function Ne(){return k.getFocusedItemIndex()}function V(){return L.getElement()}function X(me){be[me?"unshift":"push"](()=>{L=me,n(14,L)})}const Ze=me=>k&&k.handleKeydown(me,me.target.classList.contains("mdc-deprecated-list-item"),tt(me.target)),Ot=me=>k&&k.handleFocusIn(tt(me.target)),le=me=>k&&k.handleFocusOut(tt(me.target)),Ge=me=>k&&k.handleClick(tt(me.target),!u(me.target,'input[type="checkbox"], input[type="radio"]'));return e.$$set=me=>{t=Q(Q({},t),vt(me)),n(23,r=Ce(t,i)),"use"in me&&n(0,f=me.use),"class"in me&&n(1,d=me.class),"nonInteractive"in me&&n(2,h=me.nonInteractive),"dense"in me&&n(3,p=me.dense),"textualList"in me&&n(4,g=me.textualList),"avatarList"in me&&n(5,m=me.avatarList),"iconList"in me&&n(6,y=me.iconList),"imageList"in me&&n(7,b=me.imageList),"thumbnailList"in me&&n(8,v=me.thumbnailList),"videoList"in me&&n(9,_=me.videoList),"twoLine"in me&&n(10,S=me.twoLine),"threeLine"in me&&n(11,E=me.threeLine),"vertical"in me&&n(25,w=me.vertical),"wrapFocus"in me&&n(26,O=me.wrapFocus),"singleSelection"in me&&n(27,D=me.singleSelection),"selectedIndex"in me&&n(24,x=me.selectedIndex),"radioList"in me&&n(28,A=me.radioList),"checkList"in me&&n(29,C=me.checkList),"hasTypeahead"in me&&n(30,I=me.hasTypeahead),"component"in me&&n(12,oe=me.component),"$$scope"in me&&n(43,a=me.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&33562624&&k&&k.setVerticalOrientation(w),e.$$.dirty[0]&67117056&&k&&k.setWrapFocus(O),e.$$.dirty[0]&1073750016&&k&&k.setHasTypeahead(I),e.$$.dirty[0]&134225920&&k&&k.setSingleSelection(D),e.$$.dirty[0]&151003136&&k&&D&&se()!==x&&k.setSelectedIndex(x)},[f,d,h,p,g,m,y,b,v,_,S,E,oe,k,L,N,u,c,z,_e,re,pe,tt,r,x,w,O,D,A,C,I,ct,yn,Nt,se,Ne,V,s,X,Ze,Ot,le,Ge,a]}class iT extends qe{constructor(t){super(),We(this,t,xie,Iie,He,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function MN(e){let t;return{c(){t=K("span"),J(t,"class","mdc-deprecated-list-item__ripple")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Tie(e){let t,n,i=e[7]&&MN();const r=e[32].default,s=Ue(r,e,e[35],null);return{c(){i&&i.c(),t=_t(),s&&s.c()},m(a,o){i&&i.m(a,o),U(a,t,o),s&&s.m(a,o),n=!0},p(a,o){a[7]?i||(i=MN(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),s&&s.p&&(!n||o[1]&16)&&Ve(s,r,a,a[35],n?ze(r,a[35],o,null):$e(a[35]),null)},i(a){n||(F(s,a),n=!0)},o(a){P(s,a),n=!1},d(a){i&&i.d(a),a&&j(t),s&&s.d(a)}}}function kie(e){let t,n,i;const r=[{use:[...e[6]?[]:[[uo,{ripple:!e[14],unbounded:!1,color:(e[1]||e[0])&&e[5]==null?"primary":e[5],disabled:e[9],addClass:e[22],removeClass:e[23],addStyle:e[24]}]],e[20],...e[2]]},{class:xe({[e[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":e[1],"mdc-deprecated-list-item--selected":e[0],"mdc-deprecated-list-item--disabled":e[9],"mdc-menu-item--selected":!e[21]&&e[8]==="menuitem"&&e[0],"smui-menu-item--non-interactive":e[6],...e[16]})},{style:Object.entries(e[17]).map(DN).concat([e[4]]).join(" ")},e[21]&&e[1]?{"aria-current":"page"}:{},e[21]?{}:{role:e[8]},!e[21]&&e[8]==="option"?{"aria-selected":e[0]?"true":"false"}:{},!e[21]&&(e[8]==="radio"||e[8]==="checkbox")?{"aria-checked":e[14]&&e[14].checked?"true":"false"}:{},e[21]?{}:{"aria-disabled":e[9]?"true":"false"},{"data-menu-item-skip-restore-focus":e[10]||void 0},{tabindex:e[19]},{href:e[11]},e[18],e[27]];var s=e[12];function a(o){let l={$$slots:{default:[Tie]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[33](t),t.$on("click",e[13]),t.$on("keydown",e[25]),t.$on("SMUIGenericInput:mount",e[26]),t.$on("SMUIGenericInput:unmount",e[34])),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,l){const u=l[0]&167726975?Le(r,[l[0]&30425703&&{use:[...o[6]?[]:[[uo,{ripple:!o[14],unbounded:!1,color:(o[1]||o[0])&&o[5]==null?"primary":o[5],disabled:o[9],addClass:o[22],removeClass:o[23],addStyle:o[24]}]],o[20],...o[2]]},l[0]&2163531&&{class:xe({[o[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":o[1],"mdc-deprecated-list-item--selected":o[0],"mdc-deprecated-list-item--disabled":o[9],"mdc-menu-item--selected":!o[21]&&o[8]==="menuitem"&&o[0],"smui-menu-item--non-interactive":o[6],...o[16]})},l[0]&131088&&{style:Object.entries(o[17]).map(DN).concat([o[4]]).join(" ")},l[0]&2097154&&kt(o[21]&&o[1]?{"aria-current":"page"}:{}),l[0]&2097408&&kt(o[21]?{}:{role:o[8]}),l[0]&2097409&&kt(!o[21]&&o[8]==="option"?{"aria-selected":o[0]?"true":"false"}:{}),l[0]&2113792&&kt(!o[21]&&(o[8]==="radio"||o[8]==="checkbox")?{"aria-checked":o[14]&&o[14].checked?"true":"false"}:{}),l[0]&2097664&&kt(o[21]?{}:{"aria-disabled":o[9]?"true":"false"}),l[0]&1024&&{"data-menu-item-skip-restore-focus":o[10]||void 0},l[0]&524288&&{tabindex:o[19]},l[0]&2048&&{href:o[11]},l[0]&262144&&kt(o[18]),l[0]&134217728&&kt(o[27])]):{};if(l[0]&128|l[1]&16&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[12])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[33](t),t.$on("click",o[13]),t.$on("keydown",o[25]),t.$on("SMUIGenericInput:mount",o[26]),t.$on("SMUIGenericInput:unmount",o[34]),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[33](null),o&&j(n),t&&ne(t,o)}}}let Mie=0;const DN=([e,t])=>`${e}: ${t};`;function Die(e,t,n){let i;const r=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let s=Ce(t,r),{$$slots:a={},$$scope:o}=t;var l;const u=St(ft());let c=()=>{};function f(fe){return fe===c}let{use:d=[]}=t,{class:h=""}=t,{style:p=""}=t,{color:g=void 0}=t,{nonInteractive:m=(l=Zt("SMUI:list:nonInteractive"))!==null&&l!==void 0?l:!1}=t;Tt("SMUI:list:nonInteractive",void 0);let{ripple:y=!m}=t,{activated:b=!1}=t,{role:v=Zt("SMUI:list:item:role")}=t;Tt("SMUI:list:item:role",void 0);let{selected:_=!1}=t,{disabled:S=!1}=t,{skipRestoreFocus:E=!1}=t,{tabindex:w=c}=t,{inputId:O="SMUI-form-field-list-"+Mie++}=t,{href:D=void 0}=t,x,A={},C={},I={},L,k,M=Zt("SMUI:list:item:nav"),{component:N=M?D?G2:uh:Oj}=t;Tt("SMUI:generic:input:props",{id:O}),Tt("SMUI:separator:context",void 0),Zn(()=>{if(!_&&!m){let we=!0,Xe=x;for(;Xe.previousSibling;)if(Xe=Xe.previousSibling,Xe.nodeType===1&&Xe.classList.contains("mdc-deprecated-list-item")&&!Xe.classList.contains("mdc-deprecated-list-item--disabled")){we=!1;break}we&&(k=window.requestAnimationFrame(re))}const fe={_smui_list_item_accessor:!0,get element(){return q()},get selected(){return _},set selected(we){n(0,_=we)},hasClass:R,addClass:T,removeClass:z,getAttr:H,addAttr:oe,removeAttr:_e,getPrimaryText:W,get checked(){var we;return(we=L&&L.checked)!==null&&we!==void 0?we:!1},set checked(we){L&&n(14,L.checked=!!we,L)},get hasCheckbox(){return!!(L&&"_smui_checkbox_accessor"in L)},get hasRadio(){return!!(L&&"_smui_radio_accessor"in L)},activateRipple(){L&&L.activateRipple()},deactivateRipple(){L&&L.deactivateRipple()},getValue(){return s.value},action:Re,get tabindex(){return i},set tabindex(we){n(28,w=we)},get disabled(){return S},get activated(){return b},set activated(we){n(1,b=we)}};return yt(q(),"SMUIListItem:mount",fe),()=>{yt(q(),"SMUIListItem:unmount",fe)}}),na(()=>{k&&window.cancelAnimationFrame(k)});function R(fe){return fe in A?A[fe]:q().classList.contains(fe)}function T(fe){A[fe]||n(16,A[fe]=!0,A)}function z(fe){(!(fe in A)||A[fe])&&n(16,A[fe]=!1,A)}function Y(fe,we){C[fe]!=we&&(we===""||we==null?(delete C[fe],n(17,C)):n(17,C[fe]=we,C))}function H(fe){var we;return fe in I?(we=I[fe])!==null&&we!==void 0?we:null:q().getAttribute(fe)}function oe(fe,we){I[fe]!==we&&n(18,I[fe]=we,I)}function _e(fe){(!(fe in I)||I[fe]!=null)&&n(18,I[fe]=void 0,I)}function re(){let fe=!0,we=x.getElement();for(;we.nextElementSibling;)if(we=we.nextElementSibling,we.nodeType===1&&we.classList.contains("mdc-deprecated-list-item")){const Xe=we.attributes.getNamedItem("tabindex");if(Xe&&Xe.value==="0"){fe=!1;break}}fe&&n(19,i=0)}function pe(fe){const we=fe.key==="Enter",Xe=fe.key==="Space";(we||Xe)&&Re(fe)}function Oe(fe){("_smui_checkbox_accessor"in fe.detail||"_smui_radio_accessor"in fe.detail)&&n(14,L=fe.detail)}function Re(fe){S||yt(q(),"SMUI:action",fe)}function W(){var fe,we,Xe;const tt=q(),ct=tt.querySelector(".mdc-deprecated-list-item__primary-text");if(ct)return(fe=ct.textContent)!==null&&fe!==void 0?fe:"";const yn=tt.querySelector(".mdc-deprecated-list-item__text");return yn?(we=yn.textContent)!==null&&we!==void 0?we:"":(Xe=tt.textContent)!==null&&Xe!==void 0?Xe:""}function q(){return x.getElement()}function ve(fe){be[fe?"unshift":"push"](()=>{x=fe,n(15,x)})}const ce=()=>n(14,L=void 0);return e.$$set=fe=>{t=Q(Q({},t),vt(fe)),n(27,s=Ce(t,r)),"use"in fe&&n(2,d=fe.use),"class"in fe&&n(3,h=fe.class),"style"in fe&&n(4,p=fe.style),"color"in fe&&n(5,g=fe.color),"nonInteractive"in fe&&n(6,m=fe.nonInteractive),"ripple"in fe&&n(7,y=fe.ripple),"activated"in fe&&n(1,b=fe.activated),"role"in fe&&n(8,v=fe.role),"selected"in fe&&n(0,_=fe.selected),"disabled"in fe&&n(9,S=fe.disabled),"skipRestoreFocus"in fe&&n(10,E=fe.skipRestoreFocus),"tabindex"in fe&&n(28,w=fe.tabindex),"inputId"in fe&&n(29,O=fe.inputId),"href"in fe&&n(11,D=fe.href),"component"in fe&&n(12,N=fe.component),"$$scope"in fe&&n(35,o=fe.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&268452417&&n(19,i=f(w)?!m&&!S&&(_||L&&L.checked)?0:-1:w)},[_,b,d,h,p,g,m,y,v,S,E,D,N,Re,L,x,A,C,I,i,u,M,T,z,Y,pe,Oe,s,w,O,W,q,a,ve,ce,o]}class Rie extends qe{constructor(t){super(),We(this,t,Die,kie,He,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}function Lie(e){let t;const n=e[10].default,i=Ue(n,e,e[12],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&4096)&&Ve(i,n,r,r[12],t?ze(n,r[12],s,null):$e(r[12]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Nie(e){let t,n,i;const r=[{use:[e[7],...e[0]]},{class:xe({[e[1]]:!0,[e[5]]:!0,...e[4]})},e[6],e[8]];var s=e[2];function a(o){let l={$$slots:{default:[Lie]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[11](t)),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,[l]){const u=l&499?Le(r,[l&129&&{use:[o[7],...o[0]]},l&50&&{class:xe({[o[1]]:!0,[o[5]]:!0,...o[4]})},l&64&&kt(o[6]),l&256&&kt(o[8])]):{};if(l&4096&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[2])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[11](t),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[11](null),o&&j(n),t&&ne(t,o)}}}const ic={component:Sj,class:"",classMap:{},contexts:{},props:{}};function Fie(e,t,n){const i=["use","class","component","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t,{use:o=[]}=t,{class:l=""}=t,u;const c=ic.class,f={},d=[],h=ic.contexts,p=ic.props;let{component:g=ic.component}=t;Object.entries(ic.classMap).forEach(([v,_])=>{const S=Zt(_);S&&"subscribe"in S&&d.push(S.subscribe(E=>{n(4,f[v]=E,f)}))});const m=St(ft());for(let v in h)h.hasOwnProperty(v)&&Tt(v,h[v]);na(()=>{for(const v of d)v()});function y(){return u.getElement()}function b(v){be[v?"unshift":"push"](()=>{u=v,n(3,u)})}return e.$$set=v=>{t=Q(Q({},t),vt(v)),n(8,r=Ce(t,i)),"use"in v&&n(0,o=v.use),"class"in v&&n(1,l=v.class),"component"in v&&n(2,g=v.component),"$$scope"in v&&n(12,a=v.$$scope)},[o,l,g,u,f,c,p,m,r,y,s,b,a]}class Pie extends qe{constructor(t){super(),We(this,t,Fie,Nie,He,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const RN=Object.assign({},ic);function fr(e){return new Proxy(Pie,{construct:function(t,n){return Object.assign(ic,RN,e),new t(...n)},get:function(t,n){return Object.assign(ic,RN,e),t[n]}})}var K2=fr({class:"mdc-deprecated-list-item__text",component:uh});fr({class:"mdc-deprecated-list-item__primary-text",component:uh});fr({class:"mdc-deprecated-list-item__secondary-text",component:uh});function Bie(e){let t,n,i,r,s,a;const o=e[8].default,l=Ue(o,e,e[7],null);let u=[{class:n=xe({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],c={};for(let f=0;f<u.length;f+=1)c=Q(c,u[f]);return{c(){t=K("span"),l&&l.c(),Se(t,c)},m(f,d){U(f,t,d),l&&l.m(t,null),e[9](t),r=!0,s||(a=[Ee(i=wt.call(null,t,e[0])),Ee(e[3].call(null,t))],s=!0)},p(f,[d]){l&&l.p&&(!r||d&128)&&Ve(l,o,f,f[7],r?ze(o,f[7],d,null):$e(f[7]),null),Se(t,c=Le(u,[(!r||d&2&&n!==(n=xe({[f[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":f[4]})))&&{class:n},d&32&&f[5]])),i&&rt(i.update)&&d&1&&i.update.call(null,f[0])},i(f){r||(F(l,f),r=!0)},o(f){P(l,f),r=!1},d(f){f&&j(t),l&&l.d(f),e[9](null),s=!1,pt(a)}}}function jie(e,t,n){const i=["use","class","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,c,f=Zt("SMUI:list:graphic:menu-selection-group");function d(){return c}function h(p){be[p?"unshift":"push"](()=>{c=p,n(2,c)})}return e.$$set=p=>{t=Q(Q({},t),vt(p)),n(5,r=Ce(t,i)),"use"in p&&n(0,l=p.use),"class"in p&&n(1,u=p.class),"$$scope"in p&&n(7,a=p.$$scope)},[l,u,c,o,f,r,d,a,s,h]}class Uie extends qe{constructor(t){super(),We(this,t,jie,Bie,He,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}fr({class:"mdc-deprecated-list-item__meta",component:uh});fr({class:"mdc-deprecated-list-group",component:C1});fr({class:"mdc-deprecated-list-group__subheader",component:Vne});function zie(e){let t,n,i;const r=[{use:[e[9],...e[0]]},{class:xe({[e[1]]:!0,"mdc-deprecated-list-divider":!0,"mdc-deprecated-list-divider--padded":e[2],"mdc-deprecated-list-divider--inset":e[3],"mdc-deprecated-list-divider--inset-leading":e[4],"mdc-deprecated-list-divider--inset-trailing":e[5],"mdc-deprecated-list-divider--inset-padding":e[6]})},{role:"separator"},e[10]];var s=e[7];function a(o){let l={};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a()),e[12](t)),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,[l]){const u=l&1663?Le(r,[l&513&&{use:[o[9],...o[0]]},l&126&&{class:xe({[o[1]]:!0,"mdc-deprecated-list-divider":!0,"mdc-deprecated-list-divider--padded":o[2],"mdc-deprecated-list-divider--inset":o[3],"mdc-deprecated-list-divider--inset-leading":o[4],"mdc-deprecated-list-divider--inset-trailing":o[5],"mdc-deprecated-list-divider--inset-padding":o[6]})},r[2],l&1024&&kt(o[10])]):{};if(s!==(s=o[7])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a()),o[12](t),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[12](null),o&&j(n),t&&ne(t,o)}}}function Vie(e,t,n){const i=["use","class","padded","inset","insetLeading","insetTrailing","insetPadding","component","getElement"];let r=Ce(t,i);const s=St(ft());let{use:a=[]}=t,{class:o=""}=t,{padded:l=!1}=t,{inset:u=!1}=t,{insetLeading:c=!1}=t,{insetTrailing:f=!1}=t,{insetPadding:d=!1}=t,h,p=Zt("SMUI:list:item:nav"),g=Zt("SMUI:separator:context"),{component:m=p||g!=="list"?Wne:Oj}=t;function y(){return h.getElement()}function b(v){be[v?"unshift":"push"](()=>{h=v,n(8,h)})}return e.$$set=v=>{t=Q(Q({},t),vt(v)),n(10,r=Ce(t,i)),"use"in v&&n(0,a=v.use),"class"in v&&n(1,o=v.class),"padded"in v&&n(2,l=v.padded),"inset"in v&&n(3,u=v.inset),"insetLeading"in v&&n(4,c=v.insetLeading),"insetTrailing"in v&&n(5,f=v.insetTrailing),"insetPadding"in v&&n(6,d=v.insetPadding),"component"in v&&n(7,m=v.component)},[a,o,l,u,c,f,d,m,h,s,r,y,b]}class $ie extends qe{constructor(t){super(),We(this,t,Vie,zie,He,{use:0,class:1,padded:2,inset:3,insetLeading:4,insetTrailing:5,insetPadding:6,component:7,getElement:11})}get getElement(){return this.$$.ctx[11]}}const yc=Rie,Hie=Uie,eA=$ie;function Wie(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,i,r,s,a=[],o="",l=e.split("/");for(l[0]||l.shift();r=l.shift();)n=r[0],n==="*"?(a.push("wild"),o+="/(.*)"):n===":"?(i=r.indexOf("?",1),s=r.indexOf(".",1),a.push(r.substring(1,~i?i:~s?s:r.length)),o+=!!~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(o+=(~i?"?":"")+"\\"+r.substring(s))):o+="/"+r;return{keys:a,pattern:new RegExp("^"+o+(t?"(?=$|/)":"/?$"),"i")}}function qie(e){let t,n,i;const r=[e[2]];var s=e[0];function a(o){let l={};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a()),t.$on("routeEvent",e[7])),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,l){const u=l&4?Le(r,[kt(o[2])]):{};if(s!==(s=o[0])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a()),t.$on("routeEvent",o[7]),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){o&&j(n),t&&ne(t,o)}}}function Gie(e){let t,n,i;const r=[{params:e[1]},e[2]];var s=e[0];function a(o){let l={};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a()),t.$on("routeEvent",e[6])),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,l){const u=l&6?Le(r,[l&2&&{params:o[1]},l&4&&kt(o[2])]):{};if(s!==(s=o[0])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a()),t.$on("routeEvent",o[6]),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){o&&j(n),t&&ne(t,o)}}}function Yie(e){let t,n,i,r;const s=[Gie,qie],a=[];function o(l,u){return l[1]?0:1}return t=o(e),n=a[t]=s[t](e),{c(){n.c(),i=_t()},m(l,u){a[t].m(l,u),U(l,i,u),r=!0},p(l,[u]){let c=t;t=o(l),t===c?a[t].p(l,u):(Be(),P(a[c],1,1,()=>{a[c]=null}),je(),n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),F(n,1),n.m(i.parentNode,i))},i(l){r||(F(n),r=!0)},o(l){P(n),r=!1},d(l){a[t].d(l),l&&j(i)}}}function LN(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let i="";return n>-1&&(i=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:i}}const rT=xj(null,function(t){t(LN());const n=()=>{t(LN())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),NN=I1(rT,e=>e.location);I1(rT,e=>e.querystring);const FN=oi(void 0);function Xie(e,t,n){let{routes:i={}}=t,{prefix:r=""}=t,{restoreScrollState:s=!1}=t;class a{constructor(S,E){if(!E||typeof E!="function"&&(typeof E!="object"||E._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:w,keys:O}=Wie(S);this.path=S,typeof E=="object"&&E._sveltesparouter===!0?(this.component=E.component,this.conditions=E.conditions||[],this.userData=E.userData,this.props=E.props||{}):(this.component=()=>Promise.resolve(E),this.conditions=[],this.props={}),this._pattern=w,this._keys=O}match(S){if(r){if(typeof r=="string")if(S.startsWith(r))S=S.substr(r.length)||"/";else return null;else if(r instanceof RegExp){const D=S.match(r);if(D&&D[0])S=S.substr(D[0].length)||"/";else return null}}const E=this._pattern.exec(S);if(E===null)return null;if(this._keys===!1)return E;const w={};let O=0;for(;O<this._keys.length;){try{w[this._keys[O]]=decodeURIComponent(E[O+1]||"")||null}catch{w[this._keys[O]]=null}O++}return w}async checkConditions(S){for(let E=0;E<this.conditions.length;E++)if(!await this.conditions[E](S))return!1;return!0}}const o=[];i instanceof Map?i.forEach((_,S)=>{o.push(new a(S,_))}):Object.keys(i).forEach(_=>{o.push(new a(_,i[_]))});let l=null,u=null,c={};const f=gj();async function d(_,S){await bj(),f(_,S)}let h=null,p=null;s&&(p=_=>{_.state&&_.state.__svelte_spa_router_scrollY?h=_.state:h=null},window.addEventListener("popstate",p),zte(()=>{h?window.scrollTo(h.__svelte_spa_router_scrollX,h.__svelte_spa_router_scrollY):window.scrollTo(0,0)}));let g=null,m=null;const y=rT.subscribe(async _=>{g=_;let S=0;for(;S<o.length;){const E=o[S].match(_.location);if(!E){S++;continue}const w={route:o[S].path,location:_.location,querystring:_.querystring,userData:o[S].userData,params:E&&typeof E=="object"&&Object.keys(E).length?E:null};if(!await o[S].checkConditions(w)){n(0,l=null),m=null,d("conditionsFailed",w);return}d("routeLoading",Object.assign({},w));const O=o[S].component;if(m!=O){O.loading?(n(0,l=O.loading),m=O,n(1,u=O.loadingParams),n(2,c={}),d("routeLoaded",Object.assign({},w,{component:l,name:l.name,params:u}))):(n(0,l=null),m=null);const D=await O();if(_!=g)return;n(0,l=D&&D.default||D),m=O}E&&typeof E=="object"&&Object.keys(E).length?n(1,u=E):n(1,u=null),n(2,c=o[S].props),d("routeLoaded",Object.assign({},w,{component:l,name:l.name,params:u})).then(()=>{FN.set(u)});return}n(0,l=null),m=null,FN.set(void 0)});na(()=>{y(),p&&window.removeEventListener("popstate",p)});function b(_){lo.call(this,e,_)}function v(_){lo.call(this,e,_)}return e.$$set=_=>{"routes"in _&&n(3,i=_.routes),"prefix"in _&&n(4,r=_.prefix),"restoreScrollState"in _&&n(5,s=_.restoreScrollState)},e.$$.update=()=>{e.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[l,u,c,i,r,s,b,v]}class Kie extends qe{constructor(t){super(),We(this,t,Xie,Yie,He,{routes:3,prefix:4,restoreScrollState:5})}}class oC extends Map{constructor(t,n=Rj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(lC(this,t))}has(t){return super.has(lC(this,t))}set(t,n){return super.set(Mj(this,t),n)}delete(t){return super.delete(Dj(this,t))}}class Cv extends Set{constructor(t,n=Rj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(lC(this,t))}add(t){return super.add(Mj(this,t))}delete(t){return super.delete(Dj(this,t))}}function lC({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Mj({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Dj({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Rj(e){return e!==null&&typeof e=="object"?e.valueOf():e}const tA=[2e3,5e3,1e4,3e4,6e4];function Jie(e,t,n){let i,r,s,a=0;const o=new Set;function l(){const d=a;return a++,tA[d>=tA.length-1?tA.length-1:d]}function u(){s&&clearTimeout(s),i&&(i.close(),i=void 0)}function c(){u(),o.size>0&&(s=setTimeout(()=>f(),l()))}async function f(){return s&&(clearTimeout(s),s=void 0),r||(i=new WebSocket(e,n),i.onmessage=d=>{t=JSON.parse(d.data),o.forEach(h=>h(t))},i.onclose=d=>c(),r=new Promise((d,h)=>{i.onerror=p=>{h(p),r=void 0},i.onopen=p=>{a=0,d(),r=void 0}}),r)}return{set(d){const h=()=>i.send(JSON.stringify(d));i.readyState!==WebSocket.OPEN?f().then(h):h()},subscribe(d){return f(),d(t),o.add(d),()=>{o.delete(d),o.size===0&&u()}}}}var _n=Array.isArray;function bs(e){return e!=null?_n(e)?e:[e]:[]}function Qie(e=0,t=1/0){return`${PN(e)} < row_number() && row_number() <= ${PN(t)}`}function PN(e){return e<0?`count() + ${e}`:e}class Lj{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(Qie(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,bs(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,i){return this.__pivot(this,t,n,i)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...i){return this.__lookup(this,t,n,i.flat())}join(t,n,i,r){return this.__join(this,t,n,i,r)}join_left(t,n,i,r){const s={...r,left:!0,right:!1};return this.__join(this,t,n,i,s)}join_right(t,n,i,r){const s={...r,left:!1,right:!0};return this.__join(this,t,n,i,s)}join_full(t,n,i,r){const s={...r,left:!0,right:!0};return this.__join(this,t,n,i,s)}cross(t,n,i){return this.__cross(this,t,n,i)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function zt(e){throw Error(e)}function qr(e){return typeof e=="number"}function Qn(e){return typeof e=="function"}function x1(e,t){const n=Array(e);if(Qn(t))for(let i=0;i<e;++i)n[i]=t(i);else n.fill(t);return n}class Zie extends Lj{constructor(t,n,i,r,s,a,o){super(o),this._names=Object.freeze(t),this._data=i,this._total=n,this._nrows=r?r.count():n,this._mask=n!==this._nrows&&r||null,this._group=s||null,this._order=a||null}create(t){zt("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){zt("Not implemented")}*values(t){const n=this.getter(t),i=this.numRows();for(let r=0;r<i;++r)yield n(r)}get(t,n=0){zt("Not implemented")}getter(t){zt("Not implemented")}objects(t){zt("Not implemented")}object(t){zt("Not implemented")}[Symbol.iterator](){zt("Not implemented")}print(t={}){qr(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;console.log(i),console.table(n)}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),i=new Uint32Array(n),r=this.isOrdered(),s=this.mask();let a=-1;if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))i[++a]=o;else for(let o=0;o<n;++o)i[++a]=o;if(t&&r){const o=this._order,l=this._data;i.sort((u,c)=>o(u,c,l))}return(t||!r)&&(this._index=i),i}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:i}=this._group,r=x1(i,()=>[]),s=this._index,a=this.mask(),o=this.numRows();if(s&&this.isOrdered())for(let l=0,u;l<o;++l)u=s[l],r[n[u]].push(u);else if(a)for(let l=a.next(0);l>=0;l=a.next(l+1))r[n[l]].push(l);else for(let l=0;l<o;++l)r[n[l]].push(l);if(t&&!s&&this.isOrdered()){const l=this._order,u=this._data;for(let c=0;c<i;++c)r[c].sort((f,d)=>l(f,d,u))}return(t||!this.isOrdered())&&(this._partitions=r),r}scan(t,n,i=1/0,r=0){const s=this._mask,a=this._nrows,o=this._data;let l=r||0;if(l>a)return;const u=Math.min(a,l+i),c=()=>l=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;l<u;++l)t(f[l],d,c)}else if(s){let f=u-l+1;for(l=s.nth(l);--f&&l>-1;l=s.next(l+1))t(l,o,c)}else for(;l<u;++l)t(l,o,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const i=[],r=this.numRows();return t=Math.max(0,t+(t<0?r:0)),n=Math.min(r,Math.max(0,n+(n<0?r:0))),this.scan(s=>i.push(s),!0,n-t,t),this.reify(i)}reduce(t){return this.__reduce(this,t)}}class ere{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}}let tre=function(e){return e&&Qn(e.get)?e:new ere(e)};function bu(e){return e instanceof Date}function ar(e){return e===Object(e)}function Iv(e){return e instanceof RegExp}function ji(e){return typeof e=="string"}function nre(e,t){const n=i=>zt(`Illegal argument type: ${i||typeof e}`);return e instanceof Map?BN(e.entries(),t):bu(e)?n("Date"):Iv(e)?n("RegExp"):ji(e)?n():_n(e)?ire(e,t):Qn(e[Symbol.iterator])?rre(e,t):ar(e)?BN(Object.entries(e),t):n()}function BN(e,t=["key","value"]){const n=[],i=[];for(const[s,a]of e)n.push(s),i.push(a);const r={};return t[0]&&(r[t[0]]=n),t[1]&&(r[t[1]]=i),r}function ire(e,t){const n=e.length,i={},r=s=>i[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(r),a=s.length;for(let o=0;o<n;++o){const l=e[o];for(let u=0;u<a;++u)s[u][o]=l[t[u]]}}else t&&t.forEach(r);return i}function rre(e,t){const n={},i=a=>n[a]=[];let r,s;for(const a of e){r||(t=t||Object.keys(a),r=t.map(i),s=r.length);for(let o=0;o<s;++o)r[o].push(a[t[o]])}return!r&&t&&t.forEach(i),n}const{hasOwnProperty:sre}=Object.prototype;function co(e,t){return sre.call(e,t)}function ks(e){return e?new jN({...e.data()},e.columnNames()):new jN}class jN{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return co(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var mn=void 0;const are=Object.getPrototypeOf(Int8Array);function T1(e){return e instanceof are}function oc(e){return _n(e)||T1(e)}function Qa(e){return e!=null&&e===e}const mm=e=>oc(e)||ji(e);var ore={compact:e=>oc(e)?e.filter(t=>Qa(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>mm(e)?e.includes(t,n):!1,indexof:(e,t)=>mm(e)?e.indexOf(t):-1,join:(e,t)=>oc(e)?e.join(t):mn,lastindexof:(e,t)=>mm(e)?e.lastIndexOf(t):-1,length:e=>mm(e)?e.length:0,pluck:(e,t)=>oc(e)?e.map(n=>Qa(n)?n[t]:mn):mn,reverse:e=>oc(e)?e.slice().reverse():ji(e)?e.split("").reverse().join(""):mn,slice:(e,t,n)=>mm(e)?e.slice(t,n):mn};function lre(e,t,n,i,r){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+i*Math.floor(1e-14+(e-t)/i+(r||0)))}function qb(e,t,n="0"){const i=e+"",r=i.length;return r<t?Array(t-r+1).join(n)+i:i}const xo=e=>(e<10?"0":"")+e,ure=e=>e<0?"-"+qb(-e,6):e>9999?"+"+qb(e,6):qb(e,4);function Nj(e,t,n,i,r,s,a,o,l){const u=o?"Z":"";return ure(e)+"-"+xo(t+1)+"-"+xo(n)+(!l||a?"T"+xo(i)+":"+xo(r)+":"+xo(s)+"."+qb(a,3)+u:s?"T"+xo(i)+":"+xo(r)+":"+xo(s)+u:r||i||!o?"T"+xo(i)+":"+xo(r)+u:"")}function Fj(e,t){return isNaN(e)?"Invalid Date":Nj(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function J2(e,t){return isNaN(e)?"Invalid Date":Nj(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const cre=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Pj(e){return e.match(cre)}function fre(e,t=Date.parse){return Pj(e)?t(e):e}const Bj=6e4,jj=864e5,Uj=6048e5,di=new Date,hi=new Date,mi=e=>(di.setTime(typeof e=="string"?fre(e):e),di);function dre(e,t,n,i,r,s,a){return arguments.length?new Date(e,t||0,n??1,i||0,r||0,s||0,a||0):new Date(Date.now())}function hre(e,t,n,i,r,s,a){return arguments.length?new Date(Date.UTC(e,t||0,n??1,i||0,r||0,s||0,a||0)):new Date(Date.now())}function pre(e){hi.setTime(+e),hi.setHours(0,0,0,0),di.setTime(+hi),di.setMonth(0),di.setDate(1);const t=(hi.getTimezoneOffset()-di.getTimezoneOffset())*Bj;return Math.floor(1+(hi-di-t)/jj)}function gre(e){hi.setTime(+e),hi.setUTCHours(0,0,0,0);const t=Date.UTC(hi.getUTCFullYear(),0,1);return Math.floor(1+(hi-t)/jj)}function mre(e,t){const n=t||0;hi.setTime(+e),hi.setDate(hi.getDate()-(hi.getDay()+7-n)%7),hi.setHours(0,0,0,0),di.setTime(+e),di.setMonth(0),di.setDate(1),di.setDate(1-(di.getDay()+7-n)%7),di.setHours(0,0,0,0);const i=(hi.getTimezoneOffset()-di.getTimezoneOffset())*Bj;return Math.floor((1+(hi-di)-i)/Uj)}function yre(e,t){const n=t||0;return hi.setTime(+e),hi.setUTCDate(hi.getUTCDate()-(hi.getUTCDay()+7-n)%7),hi.setUTCHours(0,0,0,0),di.setTime(+e),di.setUTCMonth(0),di.setUTCDate(1),di.setUTCDate(1-(di.getUTCDay()+7-n)%7),di.setUTCHours(0,0,0,0),Math.floor((1+(hi-di))/Uj)}var bre={format_date:(e,t)=>Fj(mi(e),!t),format_utcdate:(e,t)=>J2(mi(e),!t),timestamp:e=>+mi(e),year:e=>mi(e).getFullYear(),quarter:e=>Math.floor(mi(e).getMonth()/3),month:e=>mi(e).getMonth(),date:e=>mi(e).getDate(),dayofweek:e=>mi(e).getDay(),hours:e=>mi(e).getHours(),minutes:e=>mi(e).getMinutes(),seconds:e=>mi(e).getSeconds(),milliseconds:e=>mi(e).getMilliseconds(),utcyear:e=>mi(e).getUTCFullYear(),utcquarter:e=>Math.floor(mi(e).getUTCMonth()/3),utcmonth:e=>mi(e).getUTCMonth(),utcdate:e=>mi(e).getUTCDate(),utcdayofweek:e=>mi(e).getUTCDay(),utchours:e=>mi(e).getUTCHours(),utcminutes:e=>mi(e).getUTCMinutes(),utcseconds:e=>mi(e).getUTCSeconds(),utcmilliseconds:e=>mi(e).getUTCMilliseconds(),datetime:dre,dayofyear:pre,week:mre,utcdatetime:hre,utcdayofyear:gre,utcweek:yre,now:Date.now};function sT(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:bu(e)||bu(t)?+e==+t:Iv(e)&&Iv(t)?e+""==t+"":ar(e)&&ar(t)?vre(e,t):!1}function vre(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return UN(e,t);const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length||(n.sort(),i.sort(),!UN(n,i,(s,a)=>s===a)))return!1;const r=n.length;for(let s=0;s<r;++s){const a=n[s];if(!sT(e[a],t[a]))return!1}return!0}function UN(e,t,n=sT){const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;++r)if(!n(e[r],t[r]))return!1;return!0}var _re={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let wre=Math.random;function kg(){return wre()}var Sre={random:kg,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function aT(e){return e instanceof Map}function Ere(e){return e instanceof Set}function Gb(e){return aT(e)||Ere(e)}function nA(e){return Array.from(e)}var Are={has:(e,t)=>Gb(e)?e.has(t):e!=null?co(e,t):!1,keys:e=>aT(e)?nA(e.keys()):e!=null?Object.keys(e):[],values:e=>Gb(e)?nA(e.values()):e!=null?Object.values(e):[],entries:e=>Gb(e)?nA(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):mn};function Ore(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(co(t,e))return t[e];return n!==void 0?n:e}function zj(e,t,n){let i=arguments.length;e=+e,t=+t,n=i<2?(t=e,e=0,1):i<3?1:+n,i=Math.max(0,Math.ceil((t-e)/n))|0;const r=new Array(i);for(let s=0;s<i;++s)r[s]=e+s*n;return r}var Cre={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const i=e==null?e:String(e).match(t);return n==null||i==null?i:typeof n=="number"?i[n]:i.groups?i.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},ep={bin:lre,equal:sT,recode:Ore,sequence:zj,...ore,...bre,..._re,...Sre,...Are,...Cre};function F0(e){return typeof e=="bigint"}function _a(e){return e===void 0?e+"":F0(e)?e+"n":JSON.stringify(e)}function Ut(e,t=[],n=[]){return new Ire(e,bs(t),bs(n))}class Ire{constructor(t,n,i){this.name=t,this.fields=n,this.params=i}toString(){const t=[...this.fields.map(n=>`d[${_a(n)}]`),...this.params.map(_a)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}}const Vj=e=>Ut("any",e),$j=()=>Ut("count"),Hj=e=>Ut("array_agg",e),Wj=e=>Ut("array_agg_distinct",e),qj=(e,t)=>Ut("map_agg",[e,t]),Gj=(e,t)=>Ut("object_agg",[e,t]),Yj=(e,t)=>Ut("entries_agg",[e,t]);var xre={...ep,row_object:(...e)=>Ut("row_object",null,e.flat()),count:$j,any:Vj,array_agg:Hj,array_agg_distinct:Wj,object_agg:Gj,map_agg:qj,entries_agg:Yj,valid:e=>Ut("valid",e),invalid:e=>Ut("invalid",e),distinct:e=>Ut("distinct",e),mode:e=>Ut("mode",e),sum:e=>Ut("sum",e),product:e=>Ut("product",e),mean:e=>Ut("mean",e),average:e=>Ut("average",e),variance:e=>Ut("variance",e),variancep:e=>Ut("variancep",e),stdev:e=>Ut("stdev",e),stdevp:e=>Ut("stdevp",e),min:e=>Ut("min",e),max:e=>Ut("max",e),quantile:(e,t)=>Ut("quantile",e,t),median:e=>Ut("median",e),covariance:(e,t)=>Ut("covariance",[e,t]),covariancep:(e,t)=>Ut("covariancep",[e,t]),corr:(e,t)=>Ut("corr",[e,t]),bins:(e,t,n,i)=>Ut("bins",e,[t,n,i]),row_number:()=>Ut("row_number"),rank:()=>Ut("rank"),avg_rank:()=>Ut("avg_rank"),dense_rank:()=>Ut("dense_rank"),percent_rank:()=>Ut("percent_rank"),cume_dist:()=>Ut("cume_dist"),ntile:e=>Ut("ntile",null,e),lag:(e,t,n)=>Ut("lag",e,[t,n]),lead:(e,t,n)=>Ut("lead",e,[t,n]),first_value:e=>Ut("first_value",e),last_value:e=>Ut("last_value",e),nth_value:(e,t)=>Ut("nth_value",e,t),fill_down:(e,t)=>Ut("fill_down",e,t),fill_up:(e,t)=>Ut("fill_up",e,t)};function Tre(e,t){e=Gb(e)?e:new Set(e);let n=t,i=0;for(;e.has(n);)n=t+ ++i;return n}function kre(e,t){if(!e||!t)return e;const{keys:n,rows:i,size:r}=e,s=new Int32Array(r);t.scan(c=>s[n[c]]=1);const a=s.reduce((c,f)=>c+f,0);if(a===r)return e;const o=Array(a);let l=0;for(let c=0;c<r;++c)s[c]&&(o[s[c]=l++]=i[c]);const u=new Uint32Array(n.length);return t.scan(c=>u[c]=s[n[c]]),{...e,keys:u,rows:o,size:l}}function Mre(e,t,n,i){const{keys:r,rows:s,size:a}=e;let o=s,l=a,u=null;if(n){u=new Int32Array(a),t(p=>u[r[p]]=1);const h=u.reduce((p,g)=>p+g,0);if(h!==a){o=Array(h),l=0;for(let p=0;p<a;++p)u[p]&&(o[u[p]=l++]=s[p])}}let c=-1;const f=new Uint32Array(i);return t(l!==a?h=>f[++c]=u[r[h]]:h=>f[++c]=r[h]),{...e,keys:f,rows:o,size:l}}function Dre(e,t,n,i){const r=i==="map"||i===!0?qj:i==="entries"?Yj:i==="object"?Gj:zt('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),a=Tre(e.columnNames(),"_");let o=e.select().reify(t).create({data:{[a]:n}}).rollup({[a]:Hj(a)});for(let l=s.length;--l>=0;)o=o.groupby(s.slice(0,l)).rollup({[a]:r(s[l],a)});return o.get(a)}const Rre="ArrayPattern",Lre="ArrowFunctionExpression",Nre="FunctionExpression",bc="Identifier",Mg="Literal",Xj="MemberExpression",Fre="ObjectExpression",Kj="ObjectPattern",Jj="Property",k1="Column",Pre="Constant",Bre="Dictionary",jre="Function",Ure="Parameter",Qj="Op",qn=(e,t)=>{const n=zre[e.type];return n?n(e,t):zt(`Unsupported expression construct: ${e.type}`)},iA=(e,t)=>"("+qn(e.left,t)+" "+e.operator+" "+qn(e.right,t)+")",rA=(e,t)=>"("+Ro(e.params,t)+")=>"+qn(e.body,t),zN=(e,t)=>qn(e.callee,t)+"("+Ro(e.arguments,t)+")",Ro=(e,t,n=",")=>e.map(i=>qn(i,t)).join(n),Zj=e=>e.computed?`[${_a(e.name)}]`:`.${e.name}`,VN=(e,t,n)=>{const i=e.table||"";return`data${i}${Zj(e)}.${n}(${t.index}${i})`},zre={Constant:e=>e.raw,Column:(e,t)=>VN(e,t,"get"),Dictionary:(e,t)=>VN(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${Zj(e)}`,Op:(e,t)=>`op(${_a(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:i}=e,r=i.length;let s=n[0].value.raw;for(let a=0;a<r;)s+="${"+qn(i[a],t)+"}"+n[++a].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,i=qn(e.object,t),r=qn(e.property,t);return i+(n?"."+r:"["+r+"]")},CallExpression:zN,NewExpression:(e,t)=>"new "+zN(e,t),ArrayExpression:(e,t)=>"["+Ro(e.elements,t)+"]",AssignmentExpression:iA,BinaryExpression:iA,LogicalExpression:iA,UnaryExpression:(e,t)=>"("+e.operator+qn(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+qn(e.test,t)+"?"+qn(e.consequent,t)+":"+qn(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Ro(e.properties,t)+"})",Property:(e,t)=>{const n=qn(e.key,t);return(e.computed?`[${n}]`:n)+":"+qn(e.value,t)},ArrowFunctionExpression:rA,FunctionExpression:rA,FunctionDeclaration:rA,ArrayPattern:(e,t)=>"["+Ro(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Ro(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Ro(e.declarations,t,","),VariableDeclarator:(e,t)=>qn(e.id,t)+"="+qn(e.init,t),SpreadElement:(e,t)=>"..."+qn(e.argument,t),BlockStatement:(e,t)=>"{"+Ro(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>qn(e.expression,t),IfStatement:(e,t)=>"if ("+qn(e.test,t)+")"+qn(e.consequent,t)+(e.alternate?" else "+qn(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+qn(e.discriminant,t)+") {"+Ro(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+qn(e.test,t):"default")+": "+Ro(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+qn(e.argument,t),Program:(e,t)=>qn(e.body[0],t)};function xv(e,t={index:"row"}){return qn(e,t)}function Vre(e,t,n=15,i=!0,r=0,s){const o=Math.LN10;if(s==null){const l=Math.ceil(Math.log(n)/o),u=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(u)/o)-l));Math.ceil(u/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=r&&u/h<=n&&(s=h)}}if(i){let l=Math.log(s);const u=l>=0?0:~~(-l/o)+1,c=Math.pow(10,-u-1);l=Math.floor(e/s+c)*s,e=e<l?l-s:l,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Np(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:bu(e)?+e:_n(e)||T1(e)?`[${e.map(Np)}]`:Iv(e)?e+"":$re(e)}function $re(e){let t="{",n=-1;for(const i in e)++n>0&&(t+=","),t+=`"${i}":${Np(e[i])}`;return t+="}",t}function Tv(e,t){const n=e.length;return n===1?(i,r)=>Np(e[0](i,r)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const o=e[a](i,r);if(t&&(o==null||o!==o))return null;s+=Np(o)}return s}}function Hre(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Np(t),i=e.get(n);i?++i.n:e.set(n,{v:t,n:1})},decrement(t){const n=Np(t),i=e.get(n);i.n===1?e.delete(n):--i.n},forEach(t){e.forEach(({v:n,n:i})=>t(n,i))}}}function Xl(){}function Wre(e,t=0,n=e.length){let i=e[t++];for(let r=t;r<n;++r)i*=e[r];return i}function Ii(e){return e.init=e.init||Xl,e.add=e.add||Xl,e.rem=e.rem||Xl,e}function $N(e,t){return e.product_v=!1,e.product=t}var eU={count:{create:()=>Ii({value:e=>e.count}),param:[]},array_agg:{create:()=>Ii({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ii({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ii({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ii({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ii({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:mn}),param:[1]},valid:{create:()=>Ii({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ii({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Hre(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ii({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ii({value:e=>{let t=mn,n=0;return e.distinct.forEach((i,r)=>{r>n&&(n=r,t=i)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:mn,add:(e,t)=>F0(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>$N(e,1),value:e=>e.valid?e.product_v?$N(e,Wre(e.list.values())):e.product:void 0,add:(e,t)=>F0(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:mn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ii({value:e=>e.valid?e.mean:mn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):mn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ii({value:e=>e.valid>1?e.dev/e.valid:mn}),param:[1],req:["variance"]},stdev:{create:()=>Ii({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):mn}),param:[1],req:["variance"]},stdevp:{create:()=>Ii({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):mn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=mn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===mn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=mn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===mn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ii({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ii({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):mn,add:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x+=i/e.valid,e.mean_y+=r/e.valid;const s=n-e.mean_y;e.dev_x+=i*(t-e.mean_x),e.dev_y+=r*s,e.cov+=i*s},rem:(e,t,n)=>{const i=t-e.mean_x,r=n-e.mean_y;e.mean_x-=e.valid?i/e.valid:e.mean_x,e.mean_y-=e.valid?r/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=i*(t-e.mean_x),e.dev_y-=r*s,e.cov-=i*s}}),param:[2]},covariancep:{create:()=>Ii({value:e=>e.valid>1?e.cov/e.valid:mn}),param:[2],req:["covariance"]},corr:{create:()=>Ii({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):mn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,i)=>Ii({value:r=>Vre(r.min,r.max,e,t,n,i)}),param:[1,4],req:["min","max"]}};const HN={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},WN={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:i,size:r}=t;let s=n;if(e<s){for(;s+1<r&&i(s+1);)++s;e=s}return(1+e)/r}}},param:[]};var tU={row_number:{create(){return{init:Xl,value:e=>e.index+1}},param:[]},rank:HN,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const i=n.index;if(i>=e){for(t=e=i+1;n.peer(e);t+=++e);t/=e-i}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=HN.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:WN,ntile:{create(e){e=+e,e>0||zt("ntile num must be greater than zero.");const{init:t,value:n}=WN.create();return{init:t,value:i=>Math.ceil(e*n(i))}},param:[0,1]},lag:{create(e,t=mn){return e=+e||1,{init:Xl,value:(n,i)=>{const r=n.index-e;return r>=0?n.value(r,i):t}}},param:[1,2]},lead:{create(e,t=mn){return e=+e||1,{init:Xl,value:(n,i)=>{const r=n.index+e;return r<n.size?n.value(r,i):t}}},param:[1,2]},first_value:{create(){return{init:Xl,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Xl,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||zt("nth_value nth must be greater than zero."),{init:Xl,value:(t,n)=>{const i=t.i0+(e-1);return i<t.i1?t.value(i,n):mn}}},param:[1,1]},fill_down:{create(e=mn){let t;return{init:()=>t=e,value:(n,i)=>{const r=n.value(n.index,i);return Qa(r)?t=r:t}}},param:[1,1]},fill_up:{create(e=mn){let t,n;return{init:()=>(t=e,n=-1),value:(i,r)=>i.index<=n?t:(n=qre(i,r,i.index))>=0?t=i.value(n,r):(n=i.size,t=e)}},param:[1,1]}};function qre(e,t,n){for(const i=e.size;n<i;++n)if(Qa(e.value(n,t)))return n;return-1}function oT(e){return co(eU,e)}function lT(e){return co(tU,e)}function nU(e){return co(ep,e)||e==="row_object"}function iU(e){return oT(e)&&eU[e]}function rU(e){return lT(e)&&tU[e]}function ym(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}var uT={escape:(e,t,n)=>ym(e,t,n),expr:(e,t)=>ym(`(row,data,op)=>${e}`,ep,t),expr2:(e,t)=>ym(`(row0,data0,row,data)=>${e}`,ep,t),join:(e,t)=>ym(`(row1,data1,row2,data2)=>${e}`,ep,t),param:(e,t)=>ym(e,ep,t)};const Gre={"==":1,"!=":1,"===":1,"!==":1};function sU(e,t,n=0,i,r){if(e.type=k1,e.name=t,e.table=n,r&&i&&Qn(i.keyFor)){const s=Gre[r.operator]?r.left===e?r.right:r.left:r.callee&&r.callee.name==="equal"?r.arguments[r.arguments[0]===e?1:0]:null;s&&s.type===Mg&&Yre(r,e,s,i.keyFor(s.value))}return e}function Yre(e,t,n,i){return i<0?(e.type=Mg,e.value=!1,e.raw="false"):(t.type=Bre,n.value=i,n.raw=i+""),!0}function Q2(e){return _n(e)?e:aT(e)?e.entries():e?Object.entries(e):[]}const aU="row_object";function oU(e,t){e.type=Fre;const n=e.properties=[];for(const i of Q2(t)){const[r,s]=_n(i)?i:[i,i];n.push({type:Jj,key:{type:Mg,raw:_a(s)},value:sU({computed:!0},r)})}return e}function lU(e){return xv(oU({},e))}function uU(e){return uT.expr(lU(e))}const Xre=new TextDecoder("utf-8"),uC=e=>Xre.decode(e),Kre=new TextEncoder,Z2=e=>Kre.encode(e),[V$e,cU]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[fU,$$e]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[cT,H$e]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),Jre=e=>typeof e=="number",dU=e=>typeof e=="boolean",Mi=e=>typeof e=="function",vs=e=>e!=null&&Object(e)===e,Tc=e=>vs(e)&&Mi(e.then),M1=e=>vs(e)&&Mi(e[Symbol.iterator]),Dg=e=>vs(e)&&Mi(e[Symbol.asyncIterator]),cC=e=>vs(e)&&vs(e.schema),hU=e=>vs(e)&&"done"in e&&"value"in e,pU=e=>vs(e)&&Mi(e.stat)&&Jre(e.fd),gU=e=>vs(e)&&fT(e.body),ew=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Qre=e=>vs(e)&&Mi(e.abort)&&Mi(e.getWriter)&&!ew(e),fT=e=>vs(e)&&Mi(e.cancel)&&Mi(e.getReader)&&!ew(e),Zre=e=>vs(e)&&Mi(e.end)&&Mi(e.write)&&dU(e.writable)&&!ew(e),mU=e=>vs(e)&&Mi(e.read)&&Mi(e.pipe)&&dU(e.readable)&&!ew(e),ese=e=>vs(e)&&Mi(e.clear)&&Mi(e.bytes)&&Mi(e.position)&&Mi(e.setPosition)&&Mi(e.capacity)&&Mi(e.getBufferIdentifier)&&Mi(e.createLong),dT=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function tse(e){const t=e[0]?[e[0]]:[];let n,i,r,s;for(let a,o,l=0,u=0,c=e.length;++l<c;){if(a=t[u],o=e[l],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset){o&&(t[++u]=o);continue}if({byteOffset:n,byteLength:r}=a,{byteOffset:i,byteLength:s}=o,n+r<i||i+s<n){o&&(t[++u]=o);continue}t[u]=new Uint8Array(a.buffer,n,i-n+s)}return t}function kv(e,t,n=0,i=t.byteLength){const r=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,r),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,r));return s.set(a,n),e}function fl(e,t){const n=tse(e),i=n.reduce((c,f)=>c+f.byteLength,0);let r,s,a,o=0,l=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const c=n.length;++l<c;){if(r=n[l],s=r.subarray(0,Math.min(r.length,u-o)),u<=o+s.length){s.length<r.length?n[l]=r.subarray(s.length):s.length===r.length&&l++,a?kv(a,s,o):a=s;break}kv(a||(a=new Uint8Array(u)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(l),i-(a?a.byteLength:0)]}function $n(e,t){let n=hU(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Z2(n)),n instanceof ArrayBuffer?new e(n):n instanceof dT?new e(n):ese(n)?$n(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const bm=e=>$n(Int32Array,e),bn=e=>$n(Uint8Array,e),fC=e=>(e.next(),e);function*nse(e,t){const n=function*(r){yield r},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof dT?n(t):M1(t)?t:n(t);return yield*fC(function*(r){let s=null;do s=r.next(yield $n(e,s));while(!s.done)}(i[Symbol.iterator]())),new e}const ise=e=>nse(Uint8Array,e);function yU(e,t){return Qo(this,arguments,function*(){if(Tc(t))return yield Gt(yield Gt(yield*Wb(Sd(yU(e,yield Gt(t))))));const i=function(a){return Qo(this,arguments,function*(){yield yield Gt(yield Gt(a))})},r=function(a){return Qo(this,arguments,function*(){yield Gt(yield*Wb(Sd(fC(function*(o){let l=null;do l=o.next(yield l?.value);while(!l.done)}(a[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof dT?i(t):M1(t)?r(t):Dg(t)?t:i(t);return yield Gt(yield*Wb(Sd(fC(function(a){return Qo(this,arguments,function*(){let o=null;do o=yield Gt(a.next(yield yield Gt($n(e,o))));while(!o.done)})}(s[Symbol.asyncIterator]()))))),yield Gt(new e)})}const rse=e=>yU(Uint8Array,e);function hT(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let i=-1;++i<=t;)n[i]+=e}return n}function sse(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}var la={fromIterable(e){return $y(ase(e))},fromAsyncIterable(e){return $y(ose(e))},fromDOMStream(e){return $y(lse(e))},fromNodeStream(e){return $y(cse(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}};const $y=e=>(e.next(),e);function*ase(e){let t,n=!1,i=[],r,s,a,o=0;function l(){return s==="peek"?fl(i,a)[0]:([r,i,o]=fl(i,a),r)}({cmd:s,size:a}=yield null);const u=ise(e)[Symbol.iterator]();try{do if({done:t,value:r}=Number.isNaN(a-o)?u.next():u.next(a-o),!t&&r.byteLength>0&&(i.push(r),o+=r.byteLength),t||a<=o)do({cmd:s,size:a}=yield l());while(a<o);while(!t)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function ose(e){return Qo(this,arguments,function*(){let n,i=!1,r=[],s,a,o,l=0;function u(){return a==="peek"?fl(r,o)[0]:([s,r,l]=fl(r,o),s)}({cmd:a,size:o}=yield yield Gt(null));const c=rse(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(o-l)?yield Gt(c.next()):yield Gt(c.next(o-l)),!n&&s.byteLength>0&&(r.push(s),l+=s.byteLength),n||o<=l)do({cmd:a,size:o}=yield yield Gt(u()));while(o<l);while(!n)}catch(f){(i=!0)&&typeof c.throw=="function"&&(yield Gt(c.throw(f)))}finally{i===!1&&typeof c.return=="function"&&(yield Gt(c.return(new Uint8Array(0))))}return yield Gt(null)})}function lse(e){return Qo(this,arguments,function*(){let n=!1,i=!1,r=[],s,a,o,l=0;function u(){return a==="peek"?fl(r,o)[0]:([s,r,l]=fl(r,o),s)}({cmd:a,size:o}=yield yield Gt(null));const c=new use(e);try{do if({done:n,value:s}=Number.isNaN(o-l)?yield Gt(c.read()):yield Gt(c.read(o-l)),!n&&s.byteLength>0&&(r.push(bn(s)),l+=s.byteLength),n||o<=l)do({cmd:a,size:o}=yield yield Gt(u()));while(o<l);while(!n)}catch(f){(i=!0)&&(yield Gt(c.cancel(f)))}finally{i===!1?yield Gt(c.cancel()):e.locked&&c.releaseLock()}return yield Gt(null)})}class use{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return At(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return At(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=bn(n)),n})}}const sA=(e,t)=>{const n=r=>i([t,r]);let i;return[t,n,new Promise(r=>(i=r)&&e.once(t,n))]};function cse(e){return Qo(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,a,o,l=0,u=[],c;function f(){return a==="peek"?fl(u,o)[0]:([c,u,l]=fl(u,o),c)}if({cmd:a,size:o}=yield yield Gt(null),e.isTTY)return yield yield Gt(new Uint8Array(0)),yield Gt(null);try{n[0]=sA(e,"end"),n[1]=sA(e,"error");do{if(n[2]=sA(e,"readable"),[i,s]=yield Gt(Promise.race(n.map(h=>h[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(o-l)?(c=bn(e.read(o-l)),c.byteLength<o-l&&(c=bn(e.read()))):c=bn(e.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),r||o<=l)do({cmd:a,size:o}=yield yield Gt(f()));while(o<l)}while(!r)}finally{yield Gt(d(n,i==="error"?s:null))}return yield Gt(null);function d(h,p){return c=u=null,new Promise((g,m)=>{for(const[y,b]of h)e.off(y,b);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?m(p):g()}})}})}var Vs;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Vs||(Vs={}));var Xs;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Xs||(Xs={}));var rr;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(rr||(rr={}));var fo;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(fo||(fo={}));var on;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(on||(on={}));var dl;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(dl||(dl={}));var kn;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(kn||(kn={}));var $;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})($||($={}));var ql;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ql||(ql={}));const fse=void 0;function vc(e){if(e===null)return"null";if(e===fse)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>vc(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const dse=Symbol.for("isArrowBigNum");function bo(e,...t){return t.length===0?Object.setPrototypeOf($n(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}bo.prototype[dse]=!0;bo.prototype.toJSON=function(){return`"${Ed(this)}"`};bo.prototype.valueOf=function(){return bU(this)};bo.prototype.toString=function(){return Ed(this)};bo.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return bU(this);case"string":return Ed(this);case"default":return dC(this)}return Ed(this)};function pp(...e){return bo.apply(this,e)}function gp(...e){return bo.apply(this,e)}function P0(...e){return bo.apply(this,e)}Object.setPrototypeOf(pp.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(gp.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(P0.prototype,Object.create(Uint32Array.prototype));Object.assign(pp.prototype,bo.prototype,{constructor:pp,signed:!0,TypedArray:Int32Array,BigIntArray:fU});Object.assign(gp.prototype,bo.prototype,{constructor:gp,signed:!1,TypedArray:Uint32Array,BigIntArray:cT});Object.assign(P0.prototype,bo.prototype,{constructor:P0,signed:!0,TypedArray:Uint32Array,BigIntArray:cT});function bU(e){const{buffer:t,byteOffset:n,length:i,signed:r}=e,s=new cT(t,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),l=BigInt(0);if(a){for(const u of s)o+=~u*(BigInt(1)<<BigInt(32)*l++);o*=BigInt(-1)}else for(const u of s)o+=u*(BigInt(1)<<BigInt(32)*l++);return o}let Ed,dC;cU?(dC=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:aA(e),Ed=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:aA(e)):(Ed=aA,dC=Ed);function aA(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(r[0]||r[1]||r[2]||r[3]);return t||"0"}class pT{static new(t,n){switch(n){case!0:return new pp(t);case!1:return new gp(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case fU:return new pp(t)}return t.byteLength===16?new P0(t):new gp(t)}static signed(t){return new pp(t)}static unsigned(t){return new gp(t)}static decimal(t){return new P0(t)}constructor(t,n){return pT.new(t,n)}}var vU,_U,wU,SU,EU,AU,OU,CU,IU,xU,TU,kU,MU,DU,RU,LU,NU,FU,PU;class It{static isNull(t){return t?.typeId===$.Null}static isInt(t){return t?.typeId===$.Int}static isFloat(t){return t?.typeId===$.Float}static isBinary(t){return t?.typeId===$.Binary}static isUtf8(t){return t?.typeId===$.Utf8}static isBool(t){return t?.typeId===$.Bool}static isDecimal(t){return t?.typeId===$.Decimal}static isDate(t){return t?.typeId===$.Date}static isTime(t){return t?.typeId===$.Time}static isTimestamp(t){return t?.typeId===$.Timestamp}static isInterval(t){return t?.typeId===$.Interval}static isList(t){return t?.typeId===$.List}static isStruct(t){return t?.typeId===$.Struct}static isUnion(t){return t?.typeId===$.Union}static isFixedSizeBinary(t){return t?.typeId===$.FixedSizeBinary}static isFixedSizeList(t){return t?.typeId===$.FixedSizeList}static isMap(t){return t?.typeId===$.Map}static isDictionary(t){return t?.typeId===$.Dictionary}static isDenseUnion(t){return It.isUnion(t)&&t.mode===Xs.Dense}static isSparseUnion(t){return It.isUnion(t)&&t.mode===Xs.Sparse}get typeId(){return $.NONE}}vU=Symbol.toStringTag;It[vU]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(It.prototype);class vu extends It{toString(){return"Null"}get typeId(){return $.Null}}_U=Symbol.toStringTag;vu[_U]=(e=>e[Symbol.toStringTag]="Null")(vu.prototype);class Gr extends It{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return $.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}wU=Symbol.toStringTag;Gr[wU]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Gr.prototype);class gT extends Gr{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class mT extends Gr{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class kc extends Gr{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class yT extends Gr{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class bT extends Gr{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class vT extends Gr{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class _T extends Gr{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class wT extends Gr{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(gT.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(mT.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(kc.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(yT.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(bT.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(vT.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(_T.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(wT.prototype,"ArrayType",{value:BigUint64Array});class Mc extends It{constructor(t){super(),this.precision=t}get typeId(){return $.Float}get ArrayType(){switch(this.precision){case rr.HALF:return Uint16Array;case rr.SINGLE:return Float32Array;case rr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}SU=Symbol.toStringTag;Mc[SU]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Mc.prototype);class BU extends Mc{constructor(){super(rr.HALF)}}class ST extends Mc{constructor(){super(rr.SINGLE)}}class ET extends Mc{constructor(){super(rr.DOUBLE)}}Object.defineProperty(BU.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ST.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(ET.prototype,"ArrayType",{value:Float64Array});class B0 extends It{constructor(){super()}get typeId(){return $.Binary}toString(){return"Binary"}}EU=Symbol.toStringTag;B0[EU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(B0.prototype);class Fp extends It{constructor(){super()}get typeId(){return $.Utf8}toString(){return"Utf8"}}AU=Symbol.toStringTag;Fp[AU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Fp.prototype);class j0 extends It{constructor(){super()}get typeId(){return $.Bool}toString(){return"Bool"}}OU=Symbol.toStringTag;j0[OU]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(j0.prototype);class Mv extends It{constructor(t,n,i=128){super(),this.scale=t,this.precision=n,this.bitWidth=i}get typeId(){return $.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}CU=Symbol.toStringTag;Mv[CU]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Mv.prototype);class Pp extends It{constructor(t){super(),this.unit=t}get typeId(){return $.Date}toString(){return`Date${(this.unit+1)*32}<${fo[this.unit]}>`}}IU=Symbol.toStringTag;Pp[IU]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Pp.prototype);class hse extends Pp{constructor(){super(fo.DAY)}}class pse extends Pp{constructor(){super(fo.MILLISECOND)}}class _u extends It{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return $.Time}toString(){return`Time${this.bitWidth}<${on[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}xU=Symbol.toStringTag;_u[xU]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(_u.prototype);class gse extends _u{constructor(){super(on.SECOND,32)}}class mse extends _u{constructor(){super(on.MILLISECOND,32)}}class yse extends _u{constructor(){super(on.MICROSECOND,64)}}class bse extends _u{constructor(){super(on.NANOSECOND,64)}}class Dv extends It{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return $.Timestamp}toString(){return`Timestamp<${on[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}TU=Symbol.toStringTag;Dv[TU]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Dv.prototype);class Bp extends It{constructor(t){super(),this.unit=t}get typeId(){return $.Interval}toString(){return`Interval<${dl[this.unit]}>`}}kU=Symbol.toStringTag;Bp[kU]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Bp.prototype);class vse extends Bp{constructor(){super(dl.DAY_TIME)}}class _se extends Bp{constructor(){super(dl.YEAR_MONTH)}}class jp extends It{constructor(t){super(),this.children=[t]}get typeId(){return $.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}MU=Symbol.toStringTag;jp[MU]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(jp.prototype);class tr extends It{constructor(t){super(),this.children=t}get typeId(){return $.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}DU=Symbol.toStringTag;tr[DU]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(tr.prototype);class U0 extends It{constructor(t,n,i){super(),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}get typeId(){return $.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}RU=Symbol.toStringTag;U0[RU]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(U0.prototype);class Rv extends It{constructor(t){super(),this.byteWidth=t}get typeId(){return $.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}LU=Symbol.toStringTag;Rv[LU]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Rv.prototype);class Up extends It{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return $.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}NU=Symbol.toStringTag;Up[NU]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Up.prototype);class z0 extends It{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return $.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}FU=Symbol.toStringTag;z0[FU]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(z0.prototype);const wse=(e=>()=>++e)(-1);class Dc extends It{constructor(t,n,i,r){super(),this.indices=n,this.dictionary=t,this.isOrdered=r||!1,this.id=i==null?wse():typeof i=="number"?i:i.low}get typeId(){return $.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}PU=Symbol.toStringTag;Dc[PU]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Dc.prototype);function Po(e){const t=e;switch(e.typeId){case $.Decimal:return e.bitWidth/32;case $.Timestamp:return 2;case $.Date:return 1+t.unit;case $.Interval:return 1+t.unit;case $.FixedSizeList:return t.listSize;case $.FixedSizeBinary:return t.byteWidth;default:return 1}}class nn{visitMany(t,...n){return t.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Sse(this,t,n)}getVisitFnByTypeId(t,n=!0){return Jh(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Sse(e,t,n=!0){return typeof t=="number"?Jh(e,t,n):typeof t=="string"&&t in $?Jh(e,$[t],n):t&&t instanceof It?Jh(e,qN(t),n):t?.type&&t.type instanceof It?Jh(e,qN(t.type),n):Jh(e,$.NONE,n)}function Jh(e,t,n=!0){let i=null;switch(t){case $.Null:i=e.visitNull;break;case $.Bool:i=e.visitBool;break;case $.Int:i=e.visitInt;break;case $.Int8:i=e.visitInt8||e.visitInt;break;case $.Int16:i=e.visitInt16||e.visitInt;break;case $.Int32:i=e.visitInt32||e.visitInt;break;case $.Int64:i=e.visitInt64||e.visitInt;break;case $.Uint8:i=e.visitUint8||e.visitInt;break;case $.Uint16:i=e.visitUint16||e.visitInt;break;case $.Uint32:i=e.visitUint32||e.visitInt;break;case $.Uint64:i=e.visitUint64||e.visitInt;break;case $.Float:i=e.visitFloat;break;case $.Float16:i=e.visitFloat16||e.visitFloat;break;case $.Float32:i=e.visitFloat32||e.visitFloat;break;case $.Float64:i=e.visitFloat64||e.visitFloat;break;case $.Utf8:i=e.visitUtf8;break;case $.Binary:i=e.visitBinary;break;case $.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case $.Date:i=e.visitDate;break;case $.DateDay:i=e.visitDateDay||e.visitDate;break;case $.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case $.Timestamp:i=e.visitTimestamp;break;case $.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case $.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case $.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case $.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case $.Time:i=e.visitTime;break;case $.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case $.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case $.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case $.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case $.Decimal:i=e.visitDecimal;break;case $.List:i=e.visitList;break;case $.Struct:i=e.visitStruct;break;case $.Union:i=e.visitUnion;break;case $.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case $.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case $.Dictionary:i=e.visitDictionary;break;case $.Interval:i=e.visitInterval;break;case $.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case $.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case $.FixedSizeList:i=e.visitFixedSizeList;break;case $.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${$[t]}'`)}function qN(e){switch(e.typeId){case $.Null:return $.Null;case $.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?$.Int8:$.Uint8;case 16:return n?$.Int16:$.Uint16;case 32:return n?$.Int32:$.Uint32;case 64:return n?$.Int64:$.Uint64}return $.Int}case $.Float:switch(e.precision){case rr.HALF:return $.Float16;case rr.SINGLE:return $.Float32;case rr.DOUBLE:return $.Float64}return $.Float;case $.Binary:return $.Binary;case $.Utf8:return $.Utf8;case $.Bool:return $.Bool;case $.Decimal:return $.Decimal;case $.Time:switch(e.unit){case on.SECOND:return $.TimeSecond;case on.MILLISECOND:return $.TimeMillisecond;case on.MICROSECOND:return $.TimeMicrosecond;case on.NANOSECOND:return $.TimeNanosecond}return $.Time;case $.Timestamp:switch(e.unit){case on.SECOND:return $.TimestampSecond;case on.MILLISECOND:return $.TimestampMillisecond;case on.MICROSECOND:return $.TimestampMicrosecond;case on.NANOSECOND:return $.TimestampNanosecond}return $.Timestamp;case $.Date:switch(e.unit){case fo.DAY:return $.DateDay;case fo.MILLISECOND:return $.DateMillisecond}return $.Date;case $.Interval:switch(e.unit){case dl.DAY_TIME:return $.IntervalDayTime;case dl.YEAR_MONTH:return $.IntervalYearMonth}return $.Interval;case $.Map:return $.Map;case $.List:return $.List;case $.Struct:return $.Struct;case $.Union:switch(e.mode){case Xs.Dense:return $.DenseUnion;case Xs.Sparse:return $.SparseUnion}return $.Union;case $.FixedSizeBinary:return $.FixedSizeBinary;case $.FixedSizeList:return $.FixedSizeList;case $.Dictionary:return $.Dictionary}throw new Error(`Unrecognized type '${$[e.typeId]}'`)}nn.prototype.visitInt8=null;nn.prototype.visitInt16=null;nn.prototype.visitInt32=null;nn.prototype.visitInt64=null;nn.prototype.visitUint8=null;nn.prototype.visitUint16=null;nn.prototype.visitUint32=null;nn.prototype.visitUint64=null;nn.prototype.visitFloat16=null;nn.prototype.visitFloat32=null;nn.prototype.visitFloat64=null;nn.prototype.visitDateDay=null;nn.prototype.visitDateMillisecond=null;nn.prototype.visitTimestampSecond=null;nn.prototype.visitTimestampMillisecond=null;nn.prototype.visitTimestampMicrosecond=null;nn.prototype.visitTimestampNanosecond=null;nn.prototype.visitTimeSecond=null;nn.prototype.visitTimeMillisecond=null;nn.prototype.visitTimeMicrosecond=null;nn.prototype.visitTimeNanosecond=null;nn.prototype.visitDenseUnion=null;nn.prototype.visitSparseUnion=null;nn.prototype.visitIntervalDayTime=null;nn.prototype.visitIntervalYearMonth=null;const jU=new Float64Array(1),Nh=new Uint32Array(jU.buffer);function UU(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function zU(e){if(e!==e)return 32256;jU[0]=e;const t=(Nh[1]&2147483648)>>16&65535;let n=Nh[1]&2146435072,i=0;return n>=1089470464?Nh[0]>0?n=31744:(n=(n&2080374784)>>16,i=(Nh[1]&1048575)>>10):n<=1056964608?(i=1048576+(Nh[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(Nh[1]&1048575)+512>>10),t|n|i&65535}class Pt extends nn{}function Wt(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const Ese=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},AT=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Ase=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Ose=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},VU=(e,t,n,i)=>{if(n+1<t.length){const{[n]:r,[n+1]:s}=t;e.set(i.subarray(0,s-r),r)}},Cse=({offset:e,values:t},n,i)=>{const r=e+n;i?t[r>>3]|=1<<r%8:t[r>>3]&=~(1<<r%8)},Cu=({values:e},t,n)=>{e[t]=n},OT=({values:e},t,n)=>{e[t]=n},$U=({values:e},t,n)=>{e[t]=zU(n)},Ise=(e,t,n)=>{switch(e.type.precision){case rr.HALF:return $U(e,t,n);case rr.SINGLE:case rr.DOUBLE:return OT(e,t,n)}},CT=({values:e},t,n)=>{Ese(e,t,n.valueOf())},IT=({values:e},t,n)=>{AT(e,t*2,n.valueOf())},HU=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},xse=({values:e,valueOffsets:t},n,i)=>VU(e,t,n,i),Tse=({values:e,valueOffsets:t},n,i)=>{VU(e,t,n,Z2(i))},WU=(e,t,n)=>{e.type.unit===fo.DAY?CT(e,t,n):IT(e,t,n)},xT=({values:e},t,n)=>AT(e,t*2,n/1e3),TT=({values:e},t,n)=>AT(e,t*2,n),kT=({values:e},t,n)=>Ase(e,t*2,n),MT=({values:e},t,n)=>Ose(e,t*2,n),qU=(e,t,n)=>{switch(e.type.unit){case on.SECOND:return xT(e,t,n);case on.MILLISECOND:return TT(e,t,n);case on.MICROSECOND:return kT(e,t,n);case on.NANOSECOND:return MT(e,t,n)}},DT=({values:e},t,n)=>{e[t]=n},RT=({values:e},t,n)=>{e[t]=n},LT=({values:e},t,n)=>{e[t]=n},NT=({values:e},t,n)=>{e[t]=n},GU=(e,t,n)=>{switch(e.type.unit){case on.SECOND:return DT(e,t,n);case on.MILLISECOND:return RT(e,t,n);case on.MICROSECOND:return LT(e,t,n);case on.NANOSECOND:return NT(e,t,n)}},YU=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},kse=(e,t,n)=>{const i=e.children[0],r=e.valueOffsets,s=wa.getVisitFn(i);if(Array.isArray(n))for(let a=-1,o=r[t],l=r[t+1];o<l;)s(i,o++,n[++a]);else for(let a=-1,o=r[t],l=r[t+1];o<l;)s(i,o++,n.get(++a))},Mse=(e,t,n)=>{const i=e.children[0],{valueOffsets:r}=e,s=wa.getVisitFn(i);let{[t]:a,[t+1]:o}=r;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(s(i,a,u),++a>=o)break},Dse=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[s]),Rse=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(s)),Lse=(e,t)=>(n,i,r,s)=>i&&n(i,e,t.get(r.name)),Nse=(e,t)=>(n,i,r,s)=>i&&n(i,e,t[r.name]),Fse=(e,t,n)=>{const i=e.type.children.map(s=>wa.getVisitFn(s.type)),r=n instanceof Map?Lse(t,n):n instanceof dn?Rse(t,n):Array.isArray(n)?Dse(t,n):Nse(t,n);e.type.children.forEach((s,a)=>r(i[a],e.children[a],s,a))},Pse=(e,t,n)=>{e.type.mode===Xs.Dense?XU(e,t,n):KU(e,t,n)},XU=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];wa.visit(r,e.valueOffsets[t],n)},KU=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];wa.visit(r,t,n)},Bse=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},JU=(e,t,n)=>{e.type.unit===dl.DAY_TIME?FT(e,t,n):PT(e,t,n)},FT=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},PT=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},jse=(e,t,n)=>{const{stride:i}=e,r=e.children[0],s=wa.getVisitFn(r);if(Array.isArray(n))for(let a=-1,o=t*i;++a<i;)s(r,o+a,n[a]);else for(let a=-1,o=t*i;++a<i;)s(r,o+a,n.get(a))};Pt.prototype.visitBool=Wt(Cse);Pt.prototype.visitInt=Wt(Cu);Pt.prototype.visitInt8=Wt(Cu);Pt.prototype.visitInt16=Wt(Cu);Pt.prototype.visitInt32=Wt(Cu);Pt.prototype.visitInt64=Wt(Cu);Pt.prototype.visitUint8=Wt(Cu);Pt.prototype.visitUint16=Wt(Cu);Pt.prototype.visitUint32=Wt(Cu);Pt.prototype.visitUint64=Wt(Cu);Pt.prototype.visitFloat=Wt(Ise);Pt.prototype.visitFloat16=Wt($U);Pt.prototype.visitFloat32=Wt(OT);Pt.prototype.visitFloat64=Wt(OT);Pt.prototype.visitUtf8=Wt(Tse);Pt.prototype.visitBinary=Wt(xse);Pt.prototype.visitFixedSizeBinary=Wt(HU);Pt.prototype.visitDate=Wt(WU);Pt.prototype.visitDateDay=Wt(CT);Pt.prototype.visitDateMillisecond=Wt(IT);Pt.prototype.visitTimestamp=Wt(qU);Pt.prototype.visitTimestampSecond=Wt(xT);Pt.prototype.visitTimestampMillisecond=Wt(TT);Pt.prototype.visitTimestampMicrosecond=Wt(kT);Pt.prototype.visitTimestampNanosecond=Wt(MT);Pt.prototype.visitTime=Wt(GU);Pt.prototype.visitTimeSecond=Wt(DT);Pt.prototype.visitTimeMillisecond=Wt(RT);Pt.prototype.visitTimeMicrosecond=Wt(LT);Pt.prototype.visitTimeNanosecond=Wt(NT);Pt.prototype.visitDecimal=Wt(YU);Pt.prototype.visitList=Wt(kse);Pt.prototype.visitStruct=Wt(Fse);Pt.prototype.visitUnion=Wt(Pse);Pt.prototype.visitDenseUnion=Wt(XU);Pt.prototype.visitSparseUnion=Wt(KU);Pt.prototype.visitDictionary=Wt(Bse);Pt.prototype.visitInterval=Wt(JU);Pt.prototype.visitIntervalDayTime=Wt(FT);Pt.prototype.visitIntervalYearMonth=Wt(PT);Pt.prototype.visitFixedSizeList=Wt(jse);Pt.prototype.visitMap=Wt(Mse);const wa=new Pt,ja=Symbol.for("parent"),mp=Symbol.for("rowIndex");class BT{constructor(t,n){return this[ja]=t,this[mp]=n,new Proxy(this,new zse)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[mp],n=this[ja],i=n.type.children,r={};for(let s=-1,a=i.length;++s<a;)r[i[s].name]=_s.visit(n.children[s],t);return r}toString(){return`{${[...this].map(([t,n])=>`${vc(t)}: ${vc(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Use(this[ja],this[mp])}}class Use{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,_s.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(BT.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ja]:{writable:!0,enumerable:!1,configurable:!1,value:null},[mp]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class zse{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ja].type.children.map(n=>n.name)}has(t,n){return t[ja].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[ja].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[ja].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=_s.visit(t[ja].children[i],t[mp]);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[ja].type.children.findIndex(s=>s.name===n);return r!==-1?(wa.visit(t[ja].children[r],t[mp],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class Mt extends nn{}function Bt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Vse=(e,t)=>864e5*e[t],jT=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),$se=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Hse=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,QU=e=>new Date(e),Wse=(e,t)=>QU(Vse(e,t)),qse=(e,t)=>QU(jT(e,t)),Gse=(e,t)=>null,ZU=(e,t,n)=>{if(n+1>=t.length)return null;const i=t[n],r=t[n+1];return e.subarray(i,r)},Yse=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},ez=({values:e},t)=>Wse(e,t),tz=({values:e},t)=>qse(e,t*2),uf=({stride:e,values:t},n)=>t[e*n],Xse=({stride:e,values:t},n)=>UU(t[e*n]),nz=({values:e},t)=>e[t],Kse=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),Jse=({values:e,valueOffsets:t},n)=>ZU(e,t,n),Qse=({values:e,valueOffsets:t},n)=>{const i=ZU(e,t,n);return i!==null?uC(i):null},Zse=({values:e},t)=>e[t],eae=({type:e,values:t},n)=>e.precision!==rr.HALF?t[n]:UU(t[n]),tae=(e,t)=>e.type.unit===fo.DAY?ez(e,t):tz(e,t),iz=({values:e},t)=>1e3*jT(e,t*2),rz=({values:e},t)=>jT(e,t*2),sz=({values:e},t)=>$se(e,t*2),az=({values:e},t)=>Hse(e,t*2),nae=(e,t)=>{switch(e.type.unit){case on.SECOND:return iz(e,t);case on.MILLISECOND:return rz(e,t);case on.MICROSECOND:return sz(e,t);case on.NANOSECOND:return az(e,t)}},oz=({values:e},t)=>e[t],lz=({values:e},t)=>e[t],uz=({values:e},t)=>e[t],cz=({values:e},t)=>e[t],iae=(e,t)=>{switch(e.type.unit){case on.SECOND:return oz(e,t);case on.MILLISECOND:return lz(e,t);case on.MICROSECOND:return uz(e,t);case on.NANOSECOND:return cz(e,t)}},rae=({values:e,stride:t},n)=>pT.decimal(e.subarray(t*n,t*(n+1))),sae=(e,t)=>{const{valueOffsets:n,stride:i,children:r}=e,{[t*i]:s,[t*i+1]:a}=n,l=r[0].slice(s,a-s);return new dn([l])},aae=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:r,[t+1]:s}=n,a=i[0];return new tw(a.slice(r,s-r))},oae=(e,t)=>new BT(e,t),lae=(e,t)=>e.type.mode===Xs.Dense?fz(e,t):dz(e,t),fz=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return _s.visit(i,e.valueOffsets[t])},dz=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return _s.visit(i,t)},uae=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},cae=(e,t)=>e.type.unit===dl.DAY_TIME?hz(e,t):pz(e,t),hz=({values:e},t)=>e.subarray(2*t,2*(t+1)),pz=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},fae=(e,t)=>{const{stride:n,children:i}=e,s=i[0].slice(t*n,n);return new dn([s])};Mt.prototype.visitNull=Bt(Gse);Mt.prototype.visitBool=Bt(Yse);Mt.prototype.visitInt=Bt(Zse);Mt.prototype.visitInt8=Bt(uf);Mt.prototype.visitInt16=Bt(uf);Mt.prototype.visitInt32=Bt(uf);Mt.prototype.visitInt64=Bt(nz);Mt.prototype.visitUint8=Bt(uf);Mt.prototype.visitUint16=Bt(uf);Mt.prototype.visitUint32=Bt(uf);Mt.prototype.visitUint64=Bt(nz);Mt.prototype.visitFloat=Bt(eae);Mt.prototype.visitFloat16=Bt(Xse);Mt.prototype.visitFloat32=Bt(uf);Mt.prototype.visitFloat64=Bt(uf);Mt.prototype.visitUtf8=Bt(Qse);Mt.prototype.visitBinary=Bt(Jse);Mt.prototype.visitFixedSizeBinary=Bt(Kse);Mt.prototype.visitDate=Bt(tae);Mt.prototype.visitDateDay=Bt(ez);Mt.prototype.visitDateMillisecond=Bt(tz);Mt.prototype.visitTimestamp=Bt(nae);Mt.prototype.visitTimestampSecond=Bt(iz);Mt.prototype.visitTimestampMillisecond=Bt(rz);Mt.prototype.visitTimestampMicrosecond=Bt(sz);Mt.prototype.visitTimestampNanosecond=Bt(az);Mt.prototype.visitTime=Bt(iae);Mt.prototype.visitTimeSecond=Bt(oz);Mt.prototype.visitTimeMillisecond=Bt(lz);Mt.prototype.visitTimeMicrosecond=Bt(uz);Mt.prototype.visitTimeNanosecond=Bt(cz);Mt.prototype.visitDecimal=Bt(rae);Mt.prototype.visitList=Bt(sae);Mt.prototype.visitStruct=Bt(oae);Mt.prototype.visitUnion=Bt(lae);Mt.prototype.visitDenseUnion=Bt(fz);Mt.prototype.visitSparseUnion=Bt(dz);Mt.prototype.visitDictionary=Bt(uae);Mt.prototype.visitInterval=Bt(cae);Mt.prototype.visitIntervalDayTime=Bt(hz);Mt.prototype.visitIntervalYearMonth=Bt(pz);Mt.prototype.visitFixedSizeList=Bt(fae);Mt.prototype.visitMap=Bt(aae);const _s=new Mt,$a=Symbol.for("keys"),yp=Symbol.for("vals");class tw{constructor(t){return this[$a]=new dn([t.children[0]]).memoize(),this[yp]=t.children[1],new Proxy(this,new hae)}[Symbol.iterator](){return new dae(this[$a],this[yp])}get size(){return this[$a].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[$a],n=this[yp],i={};for(let r=-1,s=t.length;++r<s;)i[t.get(r)]=_s.visit(n,r);return i}toString(){return`{${[...this].map(([t,n])=>`${vc(t)}: ${vc(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class dae{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),_s.visit(this.vals,t)]})}}class hae{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[$a].toArray().map(String)}has(t,n){return t[$a].includes(n)}getOwnPropertyDescriptor(t,n){if(t[$a].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[$a].indexOf(n);if(i!==-1){const r=_s.visit(Reflect.get(t,yp),i);return Reflect.set(t,n,r),r}}set(t,n,i){const r=t[$a].indexOf(n);return r!==-1?(wa.visit(Reflect.get(t,yp),r,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(tw.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[$a]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yp]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let GN;function gz(e,t,n,i){const{length:r=0}=e;let s=typeof t!="number"?0:t,a=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(GN=s,s=a,a=GN),a>r&&(a=r),i?i(e,s,a):[s,a]}const YN=e=>e!==e;function Rg(e){if(typeof e!=="object"||e===null)return YN(e)?YN:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?sse(e,n):!1:e instanceof Map?gae(e):Array.isArray(e)?pae(e):e instanceof dn?mae(e):yae(e,!0)}function pae(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Rg(e[n]);return nw(t)}function gae(e){let t=-1;const n=[];for(const i of e.values())n[++t]=Rg(i);return nw(n)}function mae(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=Rg(e.get(n));return nw(t)}function yae(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=Rg(e[n[r]]);return nw(i,n)}function nw(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return bae(e,n);case Map:return XN(e,n,n.keys());case tw:case BT:case Object:case void 0:return XN(e,n,t||Object.keys(n))}return n instanceof dn?vae(e,n):!1}}function bae(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function vae(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function XN(e,t,n){const i=n[Symbol.iterator](),r=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const o=e.length;let l=s.next(),u=i.next(),c=r.next();for(;a<o&&!u.done&&!c.done&&!l.done&&!(u.value!==c.value||!e[a](l.value));++a,u=i.next(),c=r.next(),l=s.next());return a===o&&u.done&&c.done&&l.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function mz(e,t,n,i){return(n&1<<i)!==0}function _ae(e,t,n,i){return(n&1<<i)>>i}function UT(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(e%8===0?n.subarray(e>>3):Lv(new zT(n,e,t,null,mz)).subarray(0,i)),r}return n}function Lv(e){const t=[];let n=0,i=0,r=0;for(const a of e)a&&(r|=1<<i),++i===8&&(t[n++]=r,r=i=0);(n===0||i>0)&&(t[n++]=r);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class zT{constructor(t,n,i,r,s){this.bytes=t,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function hC(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const a of new zT(e,t,n-t,e,_ae))s+=a;return s}const i=n>>3<<3,r=t+(t%8===0?0:8-t%8);return hC(e,t,r)+hC(e,i,n)+wae(e,r>>3,i-r>>3)}function wae(e,t,n){let i=0,r=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),a=n===void 0?e.byteLength:r+n;for(;a-r>=4;)i+=oA(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=oA(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=oA(s.getUint8(r)),r+=1;return i}function oA(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Sae=-1;class Bn{constructor(t,n,i,r,s,a=[],o){this.type=t,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let l;s instanceof Bn?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Po(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=Sae&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-hC(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:l}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:l,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+t>>3,a=(r+t)%8,o=i[s]>>a&1;return n?o===0&&(i[s]|=1<<a,this._nullCount=this.nullCount+1):o===1&&(i[s]&=~(1<<a),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,a=this.children){return new Bn(t,n,i,r,s,a,this.dictionary)}slice(t,n){const{stride:i,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?i:1,l=this._sliceBuffers(t,n,i,r);return this.clone(this.type,this.offset+t,n,a,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*t,o*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===$.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(UT(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ql.VALIDITY]=r,this.clone(this.type,0,t,i+(t-n),s)}_sliceBuffers(t,n,i,r){let s;const{buffers:a}=this;return(s=a[ql.TYPE])&&(a[ql.TYPE]=s.subarray(t,t+n)),(s=a[ql.OFFSET])&&(a[ql.OFFSET]=s.subarray(t,t+n+1))||(s=a[ql.DATA])&&(a[ql.DATA]=r===6?s:s.subarray(i*t,i*(t+n))),a}_sliceChildren(t,n,i){return t.map(r=>r.slice(n,i))}}Bn.prototype.children=Object.freeze([]);class b0 extends nn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=t;return new Bn(n,i,r,0)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length>>3,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length,["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.data),s=bn(t.nullBitmap),a=bm(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Bn(n,i,o,l,[a,r,s])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.data),s=bn(t.nullBitmap),a=bm(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Bn(n,i,o,l,[a,r,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:r}=t,s=bn(t.nullBitmap),a=bm(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Bn(n,i,o,l,[a,void 0,s],[r])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=bn(t.nullBitmap),{length:a=r.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,void 0,s],r)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=t,s=bn(t.nullBitmap),a=$n(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;if(It.isSparseUnion(n))return new Bn(n,i,o,l,[void 0,void 0,s,a],r);const u=bm(t.valueOffsets);return new Bn(n,i,o,l,[u,void 0,s,a],r)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.indices.ArrayType,t.data),{["dictionary"]:a=new dn([new b0().visit({type:n.dictionary})])}=t,{["length"]:o=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Bn(n,i,o,l,[void 0,s,r],[],a)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,r=bn(t.nullBitmap),s=$n(n.ArrayType,t.data),{["length"]:a=s.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,s,r])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new b0().visit({type:n.valueType})}=t,s=bn(t.nullBitmap),{["length"]:a=r.length/Po(n),["nullCount"]:o=t.nullBitmap?-1:0}=t;return new Bn(n,i,a,o,[void 0,void 0,s],[r])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:r=new b0().visit({type:n.childType})}=t,s=bn(t.nullBitmap),a=bm(t.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Bn(n,i,o,l,[a,void 0,s],[r])}}function tn(e){return new b0().visit(e)}class KN{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function yz(e){return e.reduce((t,n)=>t+n.nullCount,0)}function bz(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function vz(e,t,n,i){const r=[];for(let s=-1,a=e.length;++s<a;){const o=e[s],l=t[s],{length:u}=o;if(l>=i)break;if(n>=l+u)continue;if(l>=n&&l+u<=i){r.push(o);continue}const c=Math.max(0,n-l),f=Math.min(i-l,u);r.push(o.slice(c,f-c))}return r.length===0&&r.push(e[0].slice(0,0)),r}function VT(e,t,n,i){let r=0,s=0,a=t.length-1;do{if(r>=a-1)return n<t[a]?i(e,r,n-t[r]):null;s=r+Math.trunc((a-r)*.5),n<t[s]?a=s:r=s}while(r<a)}function $T(e,t){return e.getValid(t)}function bp(e){function t(n,i,r){return e(n[i],r)}return function(n){const i=this.data;return VT(i,this._offsets,n,t)}}function _z(e){let t;function n(i,r,s){return e(i[r],s,t)}return function(i,r){const s=this.data;t=r;const a=VT(s,this._offsets,i,n);return t=void 0,a}}function wz(e){let t;function n(i,r,s){let a=s,o=0,l=0;for(let u=r-1,c=i.length;++u<c;){const f=i[u];if(~(o=e(f,t,a)))return l+o;a=0,l+=f.length}return-1}return function(i,r){t=i;const s=this.data,a=typeof r!="number"?n(s,0,0):VT(s,this._offsets,r,n);return t=void 0,a}}class Dt extends nn{}function Eae(e,t){return t===null&&e.length>0?0:-1}function Aae(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const r of new zT(n,e.offset+(t||0),e.length,n,mz)){if(!r)return i;++i}return-1}function Xt(e,t,n){if(t===void 0)return-1;if(t===null)return Aae(e,n);const i=_s.getVisitFn(e),r=Rg(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}function Sz(e,t,n){const i=_s.getVisitFn(e),r=Rg(t);for(let s=(n||0)-1,a=e.length;++s<a;)if(r(i(e,s)))return s;return-1}Dt.prototype.visitNull=Eae;Dt.prototype.visitBool=Xt;Dt.prototype.visitInt=Xt;Dt.prototype.visitInt8=Xt;Dt.prototype.visitInt16=Xt;Dt.prototype.visitInt32=Xt;Dt.prototype.visitInt64=Xt;Dt.prototype.visitUint8=Xt;Dt.prototype.visitUint16=Xt;Dt.prototype.visitUint32=Xt;Dt.prototype.visitUint64=Xt;Dt.prototype.visitFloat=Xt;Dt.prototype.visitFloat16=Xt;Dt.prototype.visitFloat32=Xt;Dt.prototype.visitFloat64=Xt;Dt.prototype.visitUtf8=Xt;Dt.prototype.visitBinary=Xt;Dt.prototype.visitFixedSizeBinary=Xt;Dt.prototype.visitDate=Xt;Dt.prototype.visitDateDay=Xt;Dt.prototype.visitDateMillisecond=Xt;Dt.prototype.visitTimestamp=Xt;Dt.prototype.visitTimestampSecond=Xt;Dt.prototype.visitTimestampMillisecond=Xt;Dt.prototype.visitTimestampMicrosecond=Xt;Dt.prototype.visitTimestampNanosecond=Xt;Dt.prototype.visitTime=Xt;Dt.prototype.visitTimeSecond=Xt;Dt.prototype.visitTimeMillisecond=Xt;Dt.prototype.visitTimeMicrosecond=Xt;Dt.prototype.visitTimeNanosecond=Xt;Dt.prototype.visitDecimal=Xt;Dt.prototype.visitList=Xt;Dt.prototype.visitStruct=Xt;Dt.prototype.visitUnion=Xt;Dt.prototype.visitDenseUnion=Sz;Dt.prototype.visitSparseUnion=Sz;Dt.prototype.visitDictionary=Xt;Dt.prototype.visitInterval=Xt;Dt.prototype.visitIntervalDayTime=Xt;Dt.prototype.visitIntervalYearMonth=Xt;Dt.prototype.visitFixedSizeList=Xt;Dt.prototype.visitMap=Xt;const Nv=new Dt;class Rt extends nn{}function jt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===$.Timestamp||t instanceof Gr&&t.bitWidth!==64||t instanceof _u&&t.bitWidth!==64||t instanceof Mc&&t.precision!==rr.HALF))return new KN(e.data.length,i=>{const r=e.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new KN(e.data.length,i=>{const s=e.data[i].length,a=e.slice(n,n+s);return n+=s,new Oae(a)})}class Oae{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Rt.prototype.visitNull=jt;Rt.prototype.visitBool=jt;Rt.prototype.visitInt=jt;Rt.prototype.visitInt8=jt;Rt.prototype.visitInt16=jt;Rt.prototype.visitInt32=jt;Rt.prototype.visitInt64=jt;Rt.prototype.visitUint8=jt;Rt.prototype.visitUint16=jt;Rt.prototype.visitUint32=jt;Rt.prototype.visitUint64=jt;Rt.prototype.visitFloat=jt;Rt.prototype.visitFloat16=jt;Rt.prototype.visitFloat32=jt;Rt.prototype.visitFloat64=jt;Rt.prototype.visitUtf8=jt;Rt.prototype.visitBinary=jt;Rt.prototype.visitFixedSizeBinary=jt;Rt.prototype.visitDate=jt;Rt.prototype.visitDateDay=jt;Rt.prototype.visitDateMillisecond=jt;Rt.prototype.visitTimestamp=jt;Rt.prototype.visitTimestampSecond=jt;Rt.prototype.visitTimestampMillisecond=jt;Rt.prototype.visitTimestampMicrosecond=jt;Rt.prototype.visitTimestampNanosecond=jt;Rt.prototype.visitTime=jt;Rt.prototype.visitTimeSecond=jt;Rt.prototype.visitTimeMillisecond=jt;Rt.prototype.visitTimeMicrosecond=jt;Rt.prototype.visitTimeNanosecond=jt;Rt.prototype.visitDecimal=jt;Rt.prototype.visitList=jt;Rt.prototype.visitStruct=jt;Rt.prototype.visitUnion=jt;Rt.prototype.visitDenseUnion=jt;Rt.prototype.visitSparseUnion=jt;Rt.prototype.visitDictionary=jt;Rt.prototype.visitInterval=jt;Rt.prototype.visitIntervalDayTime=jt;Rt.prototype.visitIntervalYearMonth=jt;Rt.prototype.visitFixedSizeList=jt;Rt.prototype.visitMap=jt;const HT=new Rt,Cae=(e,t)=>e+t;class cf extends nn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===on.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((i,r)=>i+hl.visit(r,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((i,r)=>i+hl.visit(r,n),0)}visitDictionary(t,n){var i;return t.type.indices.bitWidth/8+(((i=t.dictionary)===null||i===void 0?void 0:i.getByteLength(t.values[n]))||0)}}const Iae=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),xae=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Tae=({valueOffsets:e,stride:t,children:n},i)=>{const r=n[0],{[i*t]:s}=e,{[i*t+1]:a}=e,o=hl.getVisitFn(r.type),l=r.slice(s,a-s);let u=8;for(let c=-1,f=a-s;++c<f;)u+=o(l,c);return u},kae=({stride:e,children:t},n)=>{const i=t[0],r=i.slice(n*e,e),s=hl.getVisitFn(i.type);let a=0;for(let o=-1,l=r.length;++o<l;)a+=s(r,o);return a},Mae=(e,t)=>e.type.mode===Xs.Dense?Ez(e,t):Az(e,t),Ez=({type:e,children:t,typeIds:n,valueOffsets:i},r)=>{const s=e.typeIdToChildIndex[n[r]];return 8+hl.visit(t[s],i[r])},Az=({children:e},t)=>4+hl.visitMany(e,e.map(()=>t)).reduce(Cae,0);cf.prototype.visitUtf8=Iae;cf.prototype.visitBinary=xae;cf.prototype.visitList=Tae;cf.prototype.visitFixedSizeList=kae;cf.prototype.visitUnion=Mae;cf.prototype.visitDenseUnion=Ez;cf.prototype.visitSparseUnion=Az;const hl=new cf;var Oz;const Cz={},Iz={};class dn{constructor(t){var n,i,r;const s=t[0]instanceof dn?t.flatMap(o=>o.data):t;if(s.some(o=>!(o instanceof Bn)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:l,indexOf:u,byteLength:c}=Cz[a.typeId],f=s[0];this.isValid=d=>$T(f,d),this.get=d=>o(f,d),this.set=(d,h)=>l(f,d,h),this.indexOf=d=>u(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Iz[a.typeId]),this._offsets=bz(s);break}this.data=s,this.type=a,this.stride=Po(a),this.numChildren=(r=(i=a.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=yz(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${$[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return HT.visit(this)}concat(...t){return new dn(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new dn(gz(this,t,n,({data:i,_offsets:r},s,a)=>vz(i,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:r,ArrayType:s}=this;switch(t.typeId){case $.Int:case $.Float:case $.Decimal:case $.Time:case $.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((a,{values:o})=>(a.array.set(o,a.offset),a.offset+=o.length,a),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new dn(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return It.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(It.isDictionary(this.type)){const t=new Fv(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new dn(n)}return new Fv(this)}unmemoize(){if(It.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=t,r});return new dn(n)}return this}}Oz=Symbol.toStringTag;dn[Oz]=(e=>{e.type=It.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys($).map(n=>$[n]).filter(n=>typeof n=="number"&&n!==$.NONE);for(const n of t){const i=_s.getVisitFnByTypeId(n),r=wa.getVisitFnByTypeId(n),s=Nv.getVisitFnByTypeId(n),a=hl.getVisitFnByTypeId(n);Cz[n]={get:i,set:r,indexOf:s,byteLength:a},Iz[n]=Object.create(e,{isValid:{value:bp($T)},get:{value:bp(_s.getVisitFnByTypeId(n))},set:{value:_z(wa.getVisitFnByTypeId(n))},indexOf:{value:wz(Nv.getVisitFnByTypeId(n))},getByteLength:{value:bp(hl.getVisitFnByTypeId(n))}})}return"Vector"})(dn.prototype);class Fv extends dn{constructor(t){super(t.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const l=n.call(this,a);return s[a]=l,l}}),Object.defineProperty(this,"set",{value(a,o){i.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new Fv(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new dn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Dae(e){if(!e||e.length<=0)return function(r){return!0};let t="";const n=e.filter(i=>i===i);return n.length>0&&(t=`
    switch (x) {${n.map(i=>`
        case ${Rae(i)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Rae(e){return typeof e!="bigint"?vc(e):cU?`${vc(e)}n`:`"${vc(e)}"`}const lA=(e,t)=>(e*t+63&-64||64)/t,Lae=(e,t=0)=>e.length>=t?e.subarray(0,t):kv(new e.constructor(t),e,0);class iw{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.trunc(t.length/n))}get byteLength(){return Math.trunc(this.length*this.stride*this.BYTES_PER_ELEMENT)}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,i=this.length*n,r=this.buffer.length;i>=r&&this._resize(r===0?lA(i*1,this.BYTES_PER_ELEMENT):lA(i*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=lA(t*this.stride,this.BYTES_PER_ELEMENT);const n=Lae(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=kv(new this.ArrayType(t),this.buffer)}}iw.prototype.offset=0;class D1 extends iw{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class xz extends D1{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:i}=this.reserve(t-this.length+1),r=t>>3,s=t%8,a=i[r]>>s&1;return n?a===0&&(i[r]|=1<<s,++this.numValid):a===1&&(i[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Tz extends D1{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const i=this.length-1,r=this.reserve(t-i+1).buffer;return i<t++&&r.fill(r[i],i,t),r[t]=r[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Ms{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Po(t),this._nulls=new xz,n&&n.length>0&&(this._isValid=Dae(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new dn([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:i,_nulls:r,_typeIds:s,children:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s&&(t+=s.byteLength),a.reduce((o,l)=>o+l.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,i)=>n+i.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,i,r;const{type:s,length:a,nullCount:o,_typeIds:l,_offsets:u,_values:c,_nulls:f}=this;(n=l?.flush(a))?r=u?.flush(a):(r=u?.flush(a))?t=c?.flush(u.last()):t=c?.flush(a),o>0&&(i=f?.flush(a));const d=this.children.map(h=>h.flush());return this.clear(),tn({type:s,length:a,nullCount:o,children:d,child:d[0],data:t,typeIds:n,nullBitmap:i,valueOffsets:r})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,i,r;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(i=this._offsets)===null||i===void 0||i.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}}Ms.prototype.length=1;Ms.prototype.stride=1;Ms.prototype.children=null;Ms.prototype.finished=!1;Ms.prototype.nullValues=null;Ms.prototype._isValid=()=>!0;class ff extends Ms{constructor(t){super(t),this._values=new D1(new this.ArrayType(0),this.stride)}setValue(t,n){const i=this._values;return i.reserve(t-i.length+1),super.setValue(t,n)}}class rw extends Ms{constructor(t){super(t),this._pendingLength=0,this._offsets=new Tz}setValue(t,n){const i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.length),this._pendingLength+=n instanceof tw?n[$a].length:n.length,i.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class pC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(i),t.writeInt64(n),t.offset()}}const uA=2,zo=4,Zl=4,Wn=4,Xu=new Int32Array(2),JN=new Float32Array(Xu.buffer),QN=new Float64Array(Xu.buffer),Hy=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;class ya{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?ya.ZERO:new ya(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}}ya.ZERO=new ya(0,0);var gC;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(gC||(gC={}));class Rc{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Rc(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new ya(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new ya(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Xu[0]=this.readInt32(t),JN[0]}readFloat64(t){return Xu[Hy?0:1]=this.readInt32(t),Xu[Hy?1:0]=this.readInt32(t+4),QN[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){JN[0]=n,this.writeInt32(t,Xu[0])}writeFloat64(t,n){QN[0]=n,this.writeInt32(t,Xu[Hy?0:1]),this.writeInt32(t+4,Xu[Hy?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+zo+Zl)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Zl;n++)t+=String.fromCharCode(this.readInt8(this.position_+zo+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);let r="",s=0;if(t+=zo,n===gC.UTF8_BYTES)return this.bytes_.subarray(t,t+i);for(;s<i;){let a;const o=this.readUint8(t+s++);if(o<192)a=o;else{const l=this.readUint8(t+s++);if(o<224)a=(o&31)<<6|l&63;else{const u=this.readUint8(t+s++);if(o<240)a=(o&15)<<12|(l&63)<<6|u&63;else{const c=this.readUint8(t+s++);a=(o&7)<<18|(l&63)<<12|(u&63)<<6|c&63}}}a<65536?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode((a>>10)+55296,(a&(1<<10)-1)+56320))}return r}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+zo}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Zl)throw new Error("FlatBuffers: file identifier must be length "+Zl);for(let n=0;n<Zl;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+zo+n))return!1;return!0}createLong(t,n){return ya.create(t,n)}createScalarList(t,n){const i=[];for(let r=0;r<n;++r)t(r)!==null&&i.push(t(r));return i}createObjList(t,n){const i=[];for(let r=0;r<n;++r){const s=t(r);s!==null&&i.push(s.unpack())}return i}}class sw{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=Rc.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const r=this.bb.capacity();this.bb=sw.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||!n.equals(i))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Rc.allocate(i);return r.setPosition(i-n),r.bytes().set(t.bytes(),i-n),r}addOffset(t){this.prep(zo,0),this.writeInt32(this.offset()-t+zo)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const r=2;this.addInt16(t-this.object_start);const s=(i+r)*uA;this.addInt16(s);let a=0;const o=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let u=uA;u<s;u+=uA)if(this.bb.readInt16(o+u)!=this.bb.readInt16(l+u))continue e;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const r=i?Wn:0;if(n){const s=n;if(this.prep(this.minalign,zo+Zl+r),s.length!=Zl)throw new Error("FlatBuffers: file identifier must be length "+Zl);for(let a=Zl-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,zo+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(zo,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let i=0;for(;i<t.length;){let r;const s=t.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const a=t.charCodeAt(i++);r=(s<<10)+a+(65536-(55296<<10)-56320)}r<128?n.push(r):(r<2048?n.push(r>>6&31|192):(r<65536?n.push(r>>12&15|224):n.push(r>>18&7|240,r>>12&63|128),n.push(r>>6&63|128)),n.push(r&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,r=this.space,s=this.bb.bytes();i<n.length;i++)s[r++]=n[i];return this.endVector()}createLong(t,n){return ya.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const r=t[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Di).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Wn),(n||new Di).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return Di.startKeyValue(t),Di.addKey(t,n),Di.addValue(t,i),Di.endKeyValue(t)}}var zp;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(zp||(zp={}));var Vp;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Vp||(Vp={}));var Pv;(function(e){e[e.DenseArray=0]="DenseArray"})(Pv||(Pv={}));class Us{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Us).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Wn),(n||new Us).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return Us.startInt(t),Us.addBitWidth(t,n),Us.addIsSigned(t,i),Us.endInt(t)}}class eu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Wn),(n||new eu).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Us).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Pv.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,Pv.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class ad{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Wn),(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return ad.startBinary(t),ad.endBinary(t)}}class od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Wn),(n||new od).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return od.startBool(t),od.endBool(t)}}var Bv;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Bv||(Bv={}));class Vo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Vo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Wn),(n||new Vo).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bv.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Bv.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Vo.startDate(t),Vo.addUnit(t,n),Vo.endDate(t)}}class ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Wn),(n||new ss).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,r){return ss.startDecimal(t),ss.addPrecision(t,n),ss.addScale(t,i),ss.addBitWidth(t,r),ss.endDecimal(t)}}var $p;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})($p||($p={}));class $o{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new $o).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Wn),(n||new $o).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return $o.startFixedSizeBinary(t),$o.addByteWidth(t,n),$o.endFixedSizeBinary(t)}}class Ho{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Ho).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Wn),(n||new Ho).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Ho.startFixedSizeList(t),Ho.addListSize(t,n),Ho.endFixedSizeList(t)}}var jv;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(jv||(jv={}));class Wo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Wo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Wn),(n||new Wo).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jv.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,jv.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Wo.startFloatingPoint(t),Wo.addPrecision(t,n),Wo.endFloatingPoint(t)}}var Uv;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Uv||(Uv={}));class qo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new qo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Wn),(n||new qo).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uv.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Uv.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return qo.startInterval(t),qo.addUnit(t,n),qo.endInterval(t)}}class ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Wn),(n||new ld).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ld.startList(t),ld.endList(t)}}class Go{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Go).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Wn),(n||new Go).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Go.startMap(t),Go.addKeysSorted(t,n),Go.endMap(t)}}class ud{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Wn),(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return ud.startNull(t),ud.endNull(t)}}class cd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new cd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Wn),(n||new cd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return cd.startStruct_(t),cd.endStruct_(t)}}class ca{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Wn),(n||new ca).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$p.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,$p.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return ca.startTime(t),ca.addUnit(t,n),ca.addBitWidth(t,i),ca.endTime(t)}}class fa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new fa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Wn),(n||new fa).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$p.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,$p.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return fa.startTimestamp(t),fa.addUnit(t,n),fa.addTimezone(t,i),fa.endTimestamp(t)}}var zv;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(zv||(zv={}));class os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Wn),(n||new os).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zv.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,zv.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return os.startUnion(t),os.addMode(t,n),os.addTypeIds(t,i),os.endUnion(t)}}class fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Wn),(n||new fd).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return fd.startUtf8(t),fd.endUtf8(t)}}var ri;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(ri||(ri={}));class yr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new yr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Wn),(n||new yr).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ri.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new eu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new yr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Di).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ri.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}}class ki{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new ki).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Wn),(n||new ki).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Vp.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new yr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Di).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Vp.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,r,s){return ki.startSchema(t),ki.addEndianness(t,n),ki.addFields(t,i),ki.addCustomMetadata(t,r),ki.addFeatures(t,s),ki.endSchema(t)}}class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Bs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Wn),(n||new Bs).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zp.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ki).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new pC).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new pC).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Di).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,zp.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Mn{constructor(t=[],n,i){this.fields=t||[],this.metadata=n||new Map,i||(i=mC(t)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(r=>n.has(r.name));return new Mn(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new Mn(n,this.metadata)}assign(...t){const n=t[0]instanceof Mn?t[0]:Array.isArray(t[0])?new Mn(t[0]):new Mn(t),i=[...this.fields],r=Wy(Wy(new Map,this.metadata),n.metadata),s=n.fields.filter(o=>{const l=i.findIndex(u=>u.name===o.name);return~l?(i[l]=o.clone({metadata:Wy(Wy(new Map,i[l].metadata),o.metadata)}))&&!1:!0}),a=mC(s,new Map);return new Mn([...i,...s],r,new Map([...this.dictionaries,...a]))}}Mn.prototype.fields=null;Mn.prototype.metadata=null;Mn.prototype.dictionaries=null;class Sn{constructor(t,n,i=!1,r){this.name=t,this.type=n,this.nullable=i,this.metadata=r||new Map}static new(...t){let[n,i,r,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),r===void 0&&(r=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Sn(`${n}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,r,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=t[0],Sn.new(n,i,r,s)}}Sn.prototype.type=null;Sn.prototype.name=null;Sn.prototype.nullable=null;Sn.prototype.metadata=null;function Wy(e,t){return new Map([...e||new Map,...t||new Map])}function mC(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const s=e[n].type;if(It.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&mC(s.children,t)}return t}var ZN=ya,Nae=sw,Fae=Rc;class V0{constructor(t,n=Vs.V4,i,r){this.schema=t,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(t){t=new Fae(bn(t));const n=Bs.getRootAsFooter(t),i=Mn.decode(n.schema());return new Pae(i,n)}static encode(t){const n=new Nae,i=Mn.encode(n,t.schema);Bs.startRecordBatchesVector(n,t.numRecordBatches);for(const a of[...t.recordBatches()].slice().reverse())Lc.encode(n,a);const r=n.endVector();Bs.startDictionariesVector(n,t.numDictionaries);for(const a of[...t.dictionaryBatches()].slice().reverse())Lc.encode(n,a);const s=n.endVector();return Bs.startFooter(n),Bs.addSchema(n,i),Bs.addVersion(n,Vs.V4),Bs.addRecordBatches(n,r),Bs.addDictionaries(n,s),Bs.finishFooterBuffer(n,Bs.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Pae extends V0{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Lc.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Lc.decode(n)}return null}}class Lc{constructor(t,n,i){this.metaDataLength=t,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Lc(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,r=new ZN(n.offset,0),s=new ZN(n.bodyLength,0);return pC.createBlock(t,r,i,s)}}const ai=Object.freeze({done:!0,value:void 0});class e4{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class WT{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Bae extends WT{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return At(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(ai);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return la.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return la.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return At(this,void 0,void 0,function*(){return yield this.abort(t),ai})}return(t){return At(this,void 0,void 0,function*(){return yield this.close(),ai})}read(t){return At(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return At(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(ai)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Yb extends Bae{write(t){if((t=bn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?uC(this.toUint8Array(!0)):this.toUint8Array(!1).then(uC)}toUint8Array(t=!1){return t?fl(this._values)[0]:(()=>At(this,void 0,void 0,function*(){var n,i;const r=[];let s=0;try{for(var a=Sd(this),o;o=yield a.next(),!o.done;){const l=o.value;r.push(l),s+=l.byteLength}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&(yield i.call(a))}finally{if(n)throw n.error}}return fl(r,s)[0]}))()}}class Vv{constructor(t){t&&(this.source=new jae(la.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Hp{constructor(t){t instanceof Hp?this.source=t.source:t instanceof Yb?this.source=new Mf(la.fromAsyncIterable(t)):mU(t)?this.source=new Mf(la.fromNodeStream(t)):fT(t)?this.source=new Mf(la.fromDOMStream(t)):gU(t)?this.source=new Mf(la.fromDOMStream(t.body)):M1(t)?this.source=new Mf(la.fromIterable(t)):Tc(t)?this.source=new Mf(la.fromAsyncIterable(t)):Dg(t)&&(this.source=new Mf(la.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class jae{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||ai)}return(t){return Object.create(this.source.return&&this.source.return(t)||ai)}}class Mf{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return At(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return At(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return At(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,n="read"){return At(this,void 0,void 0,function*(){return yield this.source.next({cmd:n,size:t})})}throw(t){return At(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||ai;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return At(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||ai;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class t4 extends Vv{constructor(t,n){super(),this.position=0,this.buffer=bn(t),this.size=typeof n>"u"?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,t)),n.subarray(r,this.position)):null}readAt(t,n){const i=this.buffer,r=Math.min(this.size,t+n);return i?i.subarray(t,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class $v extends Hp{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=(()=>At(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return At(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return At(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return At(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=r,a=0,o=0;const l=Math.min(i,s+Math.min(i-s,t)),u=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=o)<l&&(a+=o)<u.byteLength;)({bytesRead:o}=yield n.read(u,a,u.byteLength-a,s));return u}return null})}readAt(t,n){return At(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&t+n<r){const s=Math.min(r,t+n),a=new Uint8Array(s-t);return(yield i.read(a,0,n,t)).buffer}return new Uint8Array(n)})}close(){return At(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return At(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return At(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Uae=1<<16;function tp(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const Wp=8,qT=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class kz{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?Uae:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${tp(this.buffer[1])} ${tp(this.buffer[0])}`}}class Nn extends kz{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return Nn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return Nn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,r=new Nn(n);for(let s=0;s<i;){const a=Wp<i-s?Wp:i-s,o=new Nn(new Uint32Array([Number.parseInt(t.slice(s,s+a),10),0])),l=new Nn(new Uint32Array([qT[a],0]));r.times(l),r.plus(o),s+=a}return r}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)Nn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new Nn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Nn(new Uint32Array(t.buffer)).plus(n)}}class rs extends kz{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return rs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return rs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),r=t.length,s=new rs(n);for(let a=i?1:0;a<r;){const o=Wp<r-a?Wp:r-a,l=new rs(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0])),u=new rs(new Uint32Array([qT[o],0]));s.times(u),s.plus(l),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,r=t.length;++i<r;)rs.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new rs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new rs(new Uint32Array(t.buffer)).plus(n)}}class Lo{constructor(t){this.buffer=t}high(){return new rs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new rs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new Nn(new Uint32Array([this.buffer[3],0])),i=new Nn(new Uint32Array([this.buffer[2],0])),r=new Nn(new Uint32Array([this.buffer[1],0])),s=new Nn(new Uint32Array([this.buffer[0],0])),a=new Nn(new Uint32Array([t.buffer[3],0])),o=new Nn(new Uint32Array([t.buffer[2],0])),l=new Nn(new Uint32Array([t.buffer[1],0])),u=new Nn(new Uint32Array([t.buffer[0],0]));let c=Nn.multiply(s,u);this.buffer[0]=c.low();const f=new Nn(new Uint32Array([c.high(),0]));return c=Nn.multiply(r,u),f.plus(c),c=Nn.multiply(s,l),f.plus(c),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(c)?1:0,this.buffer[2]=f.high(),new Nn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Nn.multiply(i,u)).plus(Nn.multiply(r,l)).plus(Nn.multiply(s,o)),this.buffer[3]+=Nn.multiply(n,u).plus(Nn.multiply(i,l)).plus(Nn.multiply(r,o)).plus(Nn.multiply(s,a)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${tp(this.buffer[3])} ${tp(this.buffer[2])} ${tp(this.buffer[1])} ${tp(this.buffer[0])}`}static multiply(t,n){return new Lo(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Lo(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Lo.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Lo.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),r=t.length,s=new Lo(n);for(let a=i?1:0;a<r;){const o=Wp<r-a?Wp:r-a,l=new Lo(new Uint32Array([Number.parseInt(t.slice(a,a+o),10),0,0,0])),u=new Lo(new Uint32Array([qT[o],0,0,0]));s.times(u),s.plus(l),a+=o}return i?s.negate():s}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,r=t.length;++i<r;)Lo.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class Mz extends nn{constructor(t,n,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=r}visit(t){return super.visit(t instanceof Sn?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return tn({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Xs.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return tn({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class zae extends Mz{constructor(t,n,i,r){super(new Uint8Array(0),n,i,r),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Lv(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return $n(Uint8Array,$n(Int32Array,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return $n(Uint8Array,$n(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return It.isTimestamp(t)||(It.isInt(t)||It.isTime(t))&&t.bitWidth===64||It.isDate(t)&&t.unit===fo.MILLISECOND?$n(Uint8Array,rs.convertArray(i[n])):It.isDecimal(t)?$n(Uint8Array,Lo.convertArray(i[n])):It.isBinary(t)||It.isFixedSizeBinary(t)?Vae(i[n]):It.isBool(t)?Lv(i[n]):It.isUtf8(t)?Z2(i[n].join("")):$n(Uint8Array,$n(t.ArrayType,i[n].map(r=>+r)))}}function Vae(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}class Dz extends rw{constructor(t){super(t),this._values=new iw(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,bn(n))}_flushPending(t,n){const i=this._offsets,r=this._values.reserve(n).buffer;let s=0;for(const[a,o]of t)if(o===void 0)i.set(a,0);else{const l=o.length;r.set(o,s),i.set(a,l),s+=l}}}class $ae extends Ms{constructor(t){super(t),this._values=new xz}setValue(t,n){this._values.set(t,+n)}}class aw extends ff{}aw.prototype._setValue=WU;class Rz extends aw{}Rz.prototype._setValue=CT;class Lz extends aw{}Lz.prototype._setValue=IT;class Nz extends ff{}Nz.prototype._setValue=YU;class Hae extends Ms{constructor({type:t,nullValues:n,dictionaryHashFunction:i}){super({type:new Dc(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Hv({type:this.type.indices,nullValues:n}),this.dictionary=Hv({type:this.type.dictionary,nullValues:null}),typeof i=="function"&&(this.valueToKey=i)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const i=this.indices;return n=i.setValid(t,n),this.length=i.length,n}setValue(t,n){const i=this._keysToIndices,r=this.valueToKey(n);let s=i[r];return s===void 0&&(i[r]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,i=this.dictionary.toVector(),r=this.indices.flush().clone(t);return r.dictionary=n?n.concat(i):i,this.finished||(this._dictionaryOffset+=i.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Fz extends ff{}Fz.prototype._setValue=HU;class Wae extends Ms{setValue(t,n){const[i]=this.children,r=t*this.stride;for(let s=-1,a=n.length;++s<a;)i.set(r+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const i=this.children.push(t);return this.type=new Up(this.type.listSize,new Sn(n,t.type,!0)),i}}class ow extends ff{setValue(t,n){this._values.set(t,n)}}class qae extends ow{setValue(t,n){super.setValue(t,zU(n))}}class Gae extends ow{}class Yae extends ow{}class lw extends ff{}lw.prototype._setValue=JU;class Pz extends lw{}Pz.prototype._setValue=FT;class Bz extends lw{}Bz.prototype._setValue=PT;class Iu extends ff{setValue(t,n){this._values.set(t,n)}}class Xae extends Iu{}class Kae extends Iu{}class Jae extends Iu{}class Qae extends Iu{}class Zae extends Iu{}class eoe extends Iu{}class toe extends Iu{}class noe extends Iu{}class ioe extends rw{constructor(t){super(t),this._offsets=new Tz}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new jp(new Sn(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{const a=s.length,o=n.set(r,a).buffer[r];for(let l=-1;++l<a;)i.set(o+l,s[l])}}}class roe extends rw{set(t,n){return super.set(t,n)}setValue(t,n){const i=n instanceof Map?n:new Map(Object.entries(n)),r=this._pending||(this._pending=new Map),s=r.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=i.size,r.set(t,i)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new z0(new Sn(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[i]=this.children;for(const[r,s]of t)if(s===void 0)n.set(r,0);else{let{[r]:a,[r+1]:o}=n.set(r,s.size).buffer;for(const l of s.entries())if(i.set(a,l),++a>=o)break}}}class soe extends Ms{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class aoe extends Ms{setValue(t,n){const{children:i,type:r}=this;switch(Array.isArray(n)||n.constructor){case!0:return r.children.forEach((s,a)=>i[a].set(t,n[a]));case Map:return r.children.forEach((s,a)=>i[a].set(t,n.get(s.name)));default:return r.children.forEach((s,a)=>i[a].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(i=>i.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const i=this.children.push(t);return this.type=new tr([...this.type.children,new Sn(n,t.type,!0)]),i}}class Lg extends ff{}Lg.prototype._setValue=qU;class jz extends Lg{}jz.prototype._setValue=xT;class Uz extends Lg{}Uz.prototype._setValue=TT;class zz extends Lg{}zz.prototype._setValue=kT;class Vz extends Lg{}Vz.prototype._setValue=MT;class Ng extends ff{}Ng.prototype._setValue=GU;class $z extends Ng{}$z.prototype._setValue=DT;class Hz extends Ng{}Hz.prototype._setValue=RT;class Wz extends Ng{}Wz.prototype._setValue=LT;class qz extends Ng{}qz.prototype._setValue=NT;class GT extends Ms{constructor(t){super(t),this._typeIds=new D1(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,i){return i===void 0&&(i=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,i),this}setValue(t,n,i){this._typeIds.set(t,i);const r=this.type.typeIdToChildIndex[i],s=this.children[r];s?.set(t,n)}addChild(t,n=`${this.children.length}`){const i=this.children.push(t),{type:{children:r,mode:s,typeIds:a}}=this,o=[...r,new Sn(n,t.type)];return this.type=new U0(s,[...a,i],o),i}_valueToChildTypeId(t,n,i){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class ooe extends GT{}class loe extends GT{constructor(t){super(t),this._offsets=new D1(new Int32Array(0))}setValue(t,n,i){const r=this._typeIds.set(t,i).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[r]),a=this._offsets.set(t,s.length).buffer[t];s?.set(a,n)}}class Gz extends rw{constructor(t){super(t),this._values=new iw(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Z2(n))}_flushPending(t,n){}}Gz.prototype._flushPending=Dz.prototype._flushPending;class uoe extends nn{visitNull(){return soe}visitBool(){return $ae}visitInt(){return Iu}visitInt8(){return Xae}visitInt16(){return Kae}visitInt32(){return Jae}visitInt64(){return Qae}visitUint8(){return Zae}visitUint16(){return eoe}visitUint32(){return toe}visitUint64(){return noe}visitFloat(){return ow}visitFloat16(){return qae}visitFloat32(){return Gae}visitFloat64(){return Yae}visitUtf8(){return Gz}visitBinary(){return Dz}visitFixedSizeBinary(){return Fz}visitDate(){return aw}visitDateDay(){return Rz}visitDateMillisecond(){return Lz}visitTimestamp(){return Lg}visitTimestampSecond(){return jz}visitTimestampMillisecond(){return Uz}visitTimestampMicrosecond(){return zz}visitTimestampNanosecond(){return Vz}visitTime(){return Ng}visitTimeSecond(){return $z}visitTimeMillisecond(){return Hz}visitTimeMicrosecond(){return Wz}visitTimeNanosecond(){return qz}visitDecimal(){return Nz}visitList(){return ioe}visitStruct(){return aoe}visitUnion(){return GT}visitDenseUnion(){return loe}visitSparseUnion(){return ooe}visitDictionary(){return Hae}visitInterval(){return lw}visitIntervalDayTime(){return Pz}visitIntervalYearMonth(){return Bz}visitFixedSizeList(){return Wae}visitMap(){return roe}}const coe=new uoe;class Lt extends nn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,r)=>this.compareFields(i,n[r]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Ds(e,t){return t instanceof e.constructor}function R1(e,t){return e===t||Ds(e,t)}function xu(e,t){return e===t||Ds(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function uw(e,t){return e===t||Ds(e,t)&&e.precision===t.precision}function foe(e,t){return e===t||Ds(e,t)&&e.byteWidth===t.byteWidth}function YT(e,t){return e===t||Ds(e,t)&&e.unit===t.unit}function L1(e,t){return e===t||Ds(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function N1(e,t){return e===t||Ds(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function doe(e,t){return e===t||Ds(e,t)&&e.children.length===t.children.length&&Nc.compareManyFields(e.children,t.children)}function hoe(e,t){return e===t||Ds(e,t)&&e.children.length===t.children.length&&Nc.compareManyFields(e.children,t.children)}function XT(e,t){return e===t||Ds(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&Nc.compareManyFields(e.children,t.children)}function poe(e,t){return e===t||Ds(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Nc.visit(e.indices,t.indices)&&Nc.visit(e.dictionary,t.dictionary)}function KT(e,t){return e===t||Ds(e,t)&&e.unit===t.unit}function goe(e,t){return e===t||Ds(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Nc.compareManyFields(e.children,t.children)}function moe(e,t){return e===t||Ds(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Nc.compareManyFields(e.children,t.children)}Lt.prototype.visitNull=R1;Lt.prototype.visitBool=R1;Lt.prototype.visitInt=xu;Lt.prototype.visitInt8=xu;Lt.prototype.visitInt16=xu;Lt.prototype.visitInt32=xu;Lt.prototype.visitInt64=xu;Lt.prototype.visitUint8=xu;Lt.prototype.visitUint16=xu;Lt.prototype.visitUint32=xu;Lt.prototype.visitUint64=xu;Lt.prototype.visitFloat=uw;Lt.prototype.visitFloat16=uw;Lt.prototype.visitFloat32=uw;Lt.prototype.visitFloat64=uw;Lt.prototype.visitUtf8=R1;Lt.prototype.visitBinary=R1;Lt.prototype.visitFixedSizeBinary=foe;Lt.prototype.visitDate=YT;Lt.prototype.visitDateDay=YT;Lt.prototype.visitDateMillisecond=YT;Lt.prototype.visitTimestamp=L1;Lt.prototype.visitTimestampSecond=L1;Lt.prototype.visitTimestampMillisecond=L1;Lt.prototype.visitTimestampMicrosecond=L1;Lt.prototype.visitTimestampNanosecond=L1;Lt.prototype.visitTime=N1;Lt.prototype.visitTimeSecond=N1;Lt.prototype.visitTimeMillisecond=N1;Lt.prototype.visitTimeMicrosecond=N1;Lt.prototype.visitTimeNanosecond=N1;Lt.prototype.visitDecimal=R1;Lt.prototype.visitList=doe;Lt.prototype.visitStruct=hoe;Lt.prototype.visitUnion=XT;Lt.prototype.visitDenseUnion=XT;Lt.prototype.visitSparseUnion=XT;Lt.prototype.visitDictionary=poe;Lt.prototype.visitInterval=KT;Lt.prototype.visitIntervalDayTime=KT;Lt.prototype.visitIntervalYearMonth=KT;Lt.prototype.visitFixedSizeList=goe;Lt.prototype.visitMap=moe;const Nc=new Lt;function yC(e,t){return Nc.compareSchemas(e,t)}function Hv(e){const t=e.type,n=new(coe.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],r={nullValues:e.nullValues},s=Array.isArray(i)?(a,o)=>i[o]||r:({name:a})=>i[a]||r;for(const[a,o]of t.children.entries()){const{type:l}=o,u=s(o,a);n.children.push(Hv(Object.assign(Object.assign({},u),{type:l})))}}return n}function cA(e,t){return yoe(e,t.map(n=>n.data.concat()))}function yoe(e,t){const n=[...e.fields],i=[],r={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,a=0,o=-1;const l=t.length;let u,c=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<l;)c[o]=u=t[o].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(c=boe(n,a,c,t,r),a>0&&(i[s++]=tn({type:new tr(n),length:a,nullCount:0,children:c.slice()})))}return[e=e.assign(n),i.map(f=>new Ri(e,f))]}function boe(e,t,n,i,r){var s;const a=(t+63&-64)>>3;for(let o=-1,l=i.length;++o<l;){const u=n[o],c=u?.length;if(c>=t)c===t?n[o]=u:(n[o]=u.slice(0,t),r.numBatches=Math.max(r.numBatches,i[o].unshift(u.slice(t,c-t))));else{const f=e[o];e[o]=f.clone({nullable:!0}),n[o]=(s=u?._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:tn({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var Yz;class vr{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new Mn([]),this._offsets=[0],this;let r,s;t[0]instanceof Mn&&(r=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const a=l=>{if(l){if(l instanceof Ri)return[l];if(l instanceof vr)return l.batches;if(l instanceof Bn){if(l.type instanceof tr)return[new Ri(new Mn(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>a(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>a(u));if(typeof l=="object"){const u=Object.keys(l),c=u.map(h=>new dn([l[h]])),f=new Mn(u.map((h,p)=>new Sn(String(h),c[p].type))),[,d]=cA(f,c);return d.length===0?[new Ri(l)]:d}}}return[]},o=t.flatMap(l=>a(l));if(r=(i=r??((n=o[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new Mn([]),!(r instanceof Mn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of o){if(!(l instanceof Ri))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!yC(r,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??bz(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=yz(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return HT.visit(new dn(this.data))}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:r})=>r));return new vr(n,i.map(r=>new Ri(n,r)))}slice(t,n){const i=this.schema;[t,n]=gz({length:this.numRows},t,n);const r=vz(this.data,this._offsets,t,n);return new vr(i,r.map(s=>new Ri(i,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],r=tn({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new dn(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new dn([tn({type:new vu,length:this.numRows})]));const s=i.fields.slice(),a=s[t].clone({type:n.type}),o=this.schema.fields.map((l,u)=>this.getChildAt(u));[s[t],o[t]]=[a,n],[i,r]=cA(i,o)}return new vr(i,r)}select(t){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(r=>r.selectAt(t));return new vr(n,i)}assign(t){const n=this.schema.fields,[i,r]=t.schema.fields.reduce((o,l,u)=>{const[c,f]=o,d=n.findIndex(h=>h.name===l.name);return~d?f[d]=u:c.push(u),o},[[],[]]),s=this.schema.assign(t.schema),a=[...n.map((o,l)=>[l,r[l]]).map(([o,l])=>l===void 0?this.getChildAt(o):t.getChildAt(l)),...i.map(o=>t.getChildAt(o))].filter(Boolean);return new vr(...cA(s,a))}}Yz=Symbol.toStringTag;vr[Yz]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=bp($T),e.get=bp(_s.getVisitFn($.Struct)),e.set=_z(wa.getVisitFn($.Struct)),e.indexOf=wz(Nv.getVisitFn($.Struct)),e.getByteLength=bp(hl.getVisitFn($.Struct)),"Table"))(vr.prototype);var Xz;class Ri{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Mn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=tn({nullCount:0,type:new tr(this.schema.fields),children:this.schema.fields.map(n=>tn({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Bn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=n4(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:r,length:s}=Object.keys(n).reduce((l,u,c)=>(l.children[c]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[c]=Sn.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),a=new Mn(i),o=tn({type:new tr(i),length:s,children:r,nullCount:0});[this.schema,this.data]=n4(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Kz(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return _s.visit(this.data,t)}set(t,n){return wa.visit(this.data,t,n)}indexOf(t,n){return Nv.visit(this.data,t,n)}getByteLength(t){return hl.visit(this.data,t)}[Symbol.iterator](){return HT.visit(new dn([this.data]))}toArray(){return[...this]}concat(...t){return new vr(this.schema,[this,...t])}slice(t,n){const[i]=new dn([this.data]).slice(t,n).data;return new Ri(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new dn([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===t),n)}setChildAt(t,n){let i=this.schema,r=this.data;if(t>-1&&t<this.numCols){n||(n=new dn([tn({type:new vu,length:this.numRows})]));const s=i.fields.slice(),a=r.children.slice(),o=s[t].clone({type:n.type});[s[t],a[t]]=[o,n.data[0]],i=new Mn(s,new Map(this.schema.metadata)),r=tn({type:new tr(s),children:a})}return new Ri(i,r)}select(t){const n=this.schema.select(t),i=new tr(n.fields),r=[];for(const s of t){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new Ri(n,tn({type:i,length:this.numRows,children:r}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(s=>this.data.children[s]).filter(Boolean),r=tn({type:new tr(n.fields),length:this.numRows,children:i});return new Ri(n,r)}}Xz=Symbol.toStringTag;Ri[Xz]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ri.prototype);function n4(e,t,n=t.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...e.fields],s=[...t],a=(n+63&-64)>>3;for(const[o,l]of e.fields.entries()){const u=t[o];(!u||u.length!==n)&&(r[o]=l.clone({nullable:!0}),s[o]=(i=u?._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:tn({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(r),tn({type:new tr(r),length:n,children:s})]}function Kz(e,t,n=new Map){for(let i=-1,r=e.length;++i<r;){const a=e[i].type,o=t[i];if(It.isDictionary(a)){if(!n.has(a.id))o.dictionary&&n.set(a.id,o.dictionary);else if(n.get(a.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&Kz(a.children,o.children,n)}return n}class JT extends Ri{constructor(t){const n=t.fields.map(r=>tn({type:r.type})),i=tn({type:new tr(t.fields),nullCount:0,children:n});super(t,i)}}var Wv;(function(e){e[e.BUFFER=0]="BUFFER"})(Wv||(Wv={}));var qv;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(qv||(qv={}));class Ku{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ku).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Wn),(n||new Ku).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):qv.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Wv.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,qv.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Wv.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Ku.startBodyCompression(t),Ku.addCodec(t,n),Ku.addMethod(t,i),Ku.endBodyCompression(t)}}class Jz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}}class Qz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(i),t.writeInt64(n),t.offset()}}class ua{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Wn),(n||new ua).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Qz).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Jz).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ku).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}}class tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Wn),(n||new tu).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ua).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}}var Gv;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Gv||(Gv={}));class $i{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new $i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Wn),(n||new $i).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zp.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Gv.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Di).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,zp.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Gv.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,r,s,a){return $i.startMessage(t),$i.addVersion(t,n),$i.addHeaderType(t,i),$i.addHeader(t,r),$i.addBodyLength(t,s),$i.addCustomMetadata(t,a),$i.endMessage(t)}}var voe=ya;class _oe extends nn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return ud.startNull(n),ud.endNull(n)}visitInt(t,n){return Us.startInt(n),Us.addBitWidth(n,t.bitWidth),Us.addIsSigned(n,t.isSigned),Us.endInt(n)}visitFloat(t,n){return Wo.startFloatingPoint(n),Wo.addPrecision(n,t.precision),Wo.endFloatingPoint(n)}visitBinary(t,n){return ad.startBinary(n),ad.endBinary(n)}visitBool(t,n){return od.startBool(n),od.endBool(n)}visitUtf8(t,n){return fd.startUtf8(n),fd.endUtf8(n)}visitDecimal(t,n){return ss.startDecimal(n),ss.addScale(n,t.scale),ss.addPrecision(n,t.precision),ss.addBitWidth(n,t.bitWidth),ss.endDecimal(n)}visitDate(t,n){return Vo.startDate(n),Vo.addUnit(n,t.unit),Vo.endDate(n)}visitTime(t,n){return ca.startTime(n),ca.addUnit(n,t.unit),ca.addBitWidth(n,t.bitWidth),ca.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return fa.startTimestamp(n),fa.addUnit(n,t.unit),i!==void 0&&fa.addTimezone(n,i),fa.endTimestamp(n)}visitInterval(t,n){return qo.startInterval(n),qo.addUnit(n,t.unit),qo.endInterval(n)}visitList(t,n){return ld.startList(n),ld.endList(n)}visitStruct(t,n){return cd.startStruct_(n),cd.endStruct_(n)}visitUnion(t,n){os.startTypeIdsVector(n,t.typeIds.length);const i=os.createTypeIdsVector(n,t.typeIds);return os.startUnion(n),os.addMode(n,t.mode),os.addTypeIds(n,i),os.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return eu.startDictionaryEncoding(n),eu.addId(n,new voe(t.id,0)),eu.addIsOrdered(n,t.isOrdered),i!==void 0&&eu.addIndexType(n,i),eu.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return $o.startFixedSizeBinary(n),$o.addByteWidth(n,t.byteWidth),$o.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Ho.startFixedSizeList(n),Ho.addListSize(n,t.listSize),Ho.endFixedSizeList(n)}visitMap(t,n){return Go.startMap(n),Go.addKeysSorted(n,t.keysSorted),Go.endMap(n)}}const fA=new _oe;function woe(e,t=new Map){return new Mn(Eoe(e,t),Xb(e.customMetadata),t)}function Zz(e){return new Ks(e.count,eV(e.columns),tV(e.columns))}function Soe(e){return new pl(Zz(e.data),e.id,e.isDelta)}function Eoe(e,t){return(e.fields||[]).filter(Boolean).map(n=>Sn.fromJSON(n,t))}function i4(e,t){return(e.children||[]).filter(Boolean).map(n=>Sn.fromJSON(n,t))}function eV(e){return(e||[]).reduce((t,n)=>[...t,new ch(n.count,Aoe(n.VALIDITY)),...eV(n.children)],[])}function tV(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const r=e[n];r.VALIDITY&&t.push(new Zo(t.length,r.VALIDITY.length)),r.TYPE&&t.push(new Zo(t.length,r.TYPE.length)),r.OFFSET&&t.push(new Zo(t.length,r.OFFSET.length)),r.DATA&&t.push(new Zo(t.length,r.DATA.length)),t=tV(r.children,t)}return t}function Aoe(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Ooe(e,t){let n,i,r,s,a,o;return!t||!(s=e.dictionary)?(a=s4(e,i4(e,t)),r=new Sn(e.name,a,e.nullable,Xb(e.customMetadata))):t.has(n=s.id)?(i=(i=s.indexType)?r4(i):new kc,o=new Dc(t.get(n),i,n,s.isOrdered),r=new Sn(e.name,o,e.nullable,Xb(e.customMetadata))):(i=(i=s.indexType)?r4(i):new kc,t.set(n,a=s4(e,i4(e,t))),o=new Dc(a,i,n,s.isOrdered),r=new Sn(e.name,o,e.nullable,Xb(e.customMetadata))),r||null}function Xb(e){return new Map(Object.entries(e||{}))}function r4(e){return new Gr(e.isSigned,e.bitWidth)}function s4(e,t){const n=e.type.name;switch(n){case"NONE":return new vu;case"null":return new vu;case"binary":return new B0;case"utf8":return new Fp;case"bool":return new j0;case"list":return new jp((t||[])[0]);case"struct":return new tr(t||[]);case"struct_":return new tr(t||[])}switch(n){case"int":{const i=e.type;return new Gr(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new Mc(rr[i.precision])}case"decimal":{const i=e.type;return new Mv(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new Pp(fo[i.unit])}case"time":{const i=e.type;return new _u(on[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new Dv(on[i.unit],i.timezone)}case"interval":{const i=e.type;return new Bp(dl[i.unit])}case"union":{const i=e.type;return new U0(Xs[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new Rv(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new Up(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new z0((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Nd=ya,Coe=sw,Ioe=Rc;class Ur{constructor(t,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const i=new Ur(0,Vs.V4,n);return i._createHeader=xoe(t,n),i}static decode(t){t=new Ioe(bn(t));const n=$i.getRootAsMessage(t),i=n.bodyLength(),r=n.version(),s=n.headerType(),a=new Ur(i,r,s);return a._createHeader=Toe(n,s),a}static encode(t){const n=new Coe;let i=-1;return t.isSchema()?i=Mn.encode(n,t.header()):t.isRecordBatch()?i=Ks.encode(n,t.header()):t.isDictionaryBatch()&&(i=pl.encode(n,t.header())),$i.startMessage(n),$i.addVersion(n,Vs.V4),$i.addHeader(n,i),$i.addHeaderType(n,t.headerType),$i.addBodyLength(n,new Nd(t.bodyLength,0)),$i.finishMessageBuffer(n,$i.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Mn)return new Ur(0,Vs.V4,kn.Schema,t);if(t instanceof Ks)return new Ur(n,Vs.V4,kn.RecordBatch,t);if(t instanceof pl)return new Ur(n,Vs.V4,kn.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===kn.Schema}isRecordBatch(){return this.headerType===kn.RecordBatch}isDictionaryBatch(){return this.headerType===kn.DictionaryBatch}}class Ks{constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class pl{constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class Zo{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class ch{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function xoe(e,t){return()=>{switch(t){case kn.Schema:return Mn.fromJSON(e);case kn.RecordBatch:return Ks.fromJSON(e);case kn.DictionaryBatch:return pl.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${kn[t]}, type: ${t} }`)}}function Toe(e,t){return()=>{switch(t){case kn.Schema:return Mn.decode(e.header(new ki));case kn.RecordBatch:return Ks.decode(e.header(new ua),e.version());case kn.DictionaryBatch:return pl.decode(e.header(new tu),e.version())}throw new Error(`Unrecognized Message type: { name: ${kn[t]}, type: ${t} }`)}}Sn.encode=Uoe;Sn.decode=Boe;Sn.fromJSON=Ooe;Mn.encode=joe;Mn.decode=koe;Mn.fromJSON=woe;Ks.encode=zoe;Ks.decode=Moe;Ks.fromJSON=Zz;pl.encode=Voe;pl.decode=Doe;pl.fromJSON=Soe;ch.encode=$oe;ch.decode=Loe;Zo.encode=Hoe;Zo.decode=Roe;function koe(e,t=new Map){const n=Poe(e,t);return new Mn(n,Kb(e),t)}function Moe(e,t=Vs.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ks(e.length(),Noe(e),Foe(e,t))}function Doe(e,t=Vs.V4){return new pl(Ks.decode(e.data(),t),e.id(),e.isDelta())}function Roe(e){return new Zo(e.offset(),e.length())}function Loe(e){return new ch(e.length(),e.nullCount())}function Noe(e){const t=[];for(let n,i=-1,r=-1,s=e.nodesLength();++i<s;)(n=e.nodes(i))&&(t[++r]=ch.decode(n));return t}function Foe(e,t){const n=[];for(let i,r=-1,s=-1,a=e.buffersLength();++r<a;)(i=e.buffers(r))&&(t<Vs.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Zo.decode(i));return n}function Poe(e,t){const n=[];for(let i,r=-1,s=-1,a=e.fieldsLength();++r<a;)(i=e.fields(r))&&(n[++s]=Sn.decode(i,t));return n}function a4(e,t){const n=[];for(let i,r=-1,s=-1,a=e.childrenLength();++r<a;)(i=e.children(r))&&(n[++s]=Sn.decode(i,t));return n}function Boe(e,t){let n,i,r,s,a,o;return!t||!(o=e.dictionary())?(r=l4(e,a4(e,t)),i=new Sn(e.name(),r,e.nullable(),Kb(e))):t.has(n=o.id().low)?(s=(s=o.indexType())?o4(s):new kc,a=new Dc(t.get(n),s,n,o.isOrdered()),i=new Sn(e.name(),a,e.nullable(),Kb(e))):(s=(s=o.indexType())?o4(s):new kc,t.set(n,r=l4(e,a4(e,t))),a=new Dc(r,s,n,o.isOrdered()),i=new Sn(e.name(),a,e.nullable(),Kb(e))),i||null}function Kb(e){const t=new Map;if(e)for(let n,i,r=-1,s=Math.trunc(e.customMetadataLength());++r<s;)(n=e.customMetadata(r))&&(i=n.key())!=null&&t.set(i,n.value());return t}function o4(e){return new Gr(e.isSigned(),e.bitWidth())}function l4(e,t){const n=e.typeType();switch(n){case ri.NONE:return new vu;case ri.Null:return new vu;case ri.Binary:return new B0;case ri.Utf8:return new Fp;case ri.Bool:return new j0;case ri.List:return new jp((t||[])[0]);case ri.Struct_:return new tr(t||[])}switch(n){case ri.Int:{const i=e.type(new Us);return new Gr(i.isSigned(),i.bitWidth())}case ri.FloatingPoint:{const i=e.type(new Wo);return new Mc(i.precision())}case ri.Decimal:{const i=e.type(new ss);return new Mv(i.scale(),i.precision(),i.bitWidth())}case ri.Date:{const i=e.type(new Vo);return new Pp(i.unit())}case ri.Time:{const i=e.type(new ca);return new _u(i.unit(),i.bitWidth())}case ri.Timestamp:{const i=e.type(new fa);return new Dv(i.unit(),i.timezone())}case ri.Interval:{const i=e.type(new qo);return new Bp(i.unit())}case ri.Union:{const i=e.type(new os);return new U0(i.mode(),i.typeIdsArray()||[],t||[])}case ri.FixedSizeBinary:{const i=e.type(new $o);return new Rv(i.byteWidth())}case ri.FixedSizeList:{const i=e.type(new Ho);return new Up(i.listSize(),(t||[])[0])}case ri.Map:{const i=e.type(new Go);return new z0((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${ri[n]}" (${n})`)}function joe(e,t){const n=t.fields.map(s=>Sn.encode(e,s));ki.startFieldsVector(e,n.length);const i=ki.createFieldsVector(e,n),r=t.metadata&&t.metadata.size>0?ki.createCustomMetadataVector(e,[...t.metadata].map(([s,a])=>{const o=e.createString(`${s}`),l=e.createString(`${a}`);return Di.startKeyValue(e),Di.addKey(e,o),Di.addValue(e,l),Di.endKeyValue(e)})):-1;return ki.startSchema(e),ki.addFields(e,i),ki.addEndianness(e,Woe?Vp.Little:Vp.Big),r!==-1&&ki.addCustomMetadata(e,r),ki.endSchema(e)}function Uoe(e,t){let n=-1,i=-1,r=-1;const s=t.type;let a=t.typeId;It.isDictionary(s)?(a=s.dictionary.typeId,r=fA.visit(s,e),i=fA.visit(s.dictionary,e)):i=fA.visit(s,e);const o=(s.children||[]).map(c=>Sn.encode(e,c)),l=yr.createChildrenVector(e,o),u=t.metadata&&t.metadata.size>0?yr.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Di.startKeyValue(e),Di.addKey(e,d),Di.addValue(e,h),Di.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),yr.startField(e),yr.addType(e,i),yr.addTypeType(e,a),yr.addChildren(e,l),yr.addNullable(e,!!t.nullable),n!==-1&&yr.addName(e,n),r!==-1&&yr.addDictionary(e,r),u!==-1&&yr.addCustomMetadata(e,u),yr.endField(e)}function zoe(e,t){const n=t.nodes||[],i=t.buffers||[];ua.startNodesVector(e,n.length);for(const a of n.slice().reverse())ch.encode(e,a);const r=e.endVector();ua.startBuffersVector(e,i.length);for(const a of i.slice().reverse())Zo.encode(e,a);const s=e.endVector();return ua.startRecordBatch(e),ua.addLength(e,new Nd(t.length,0)),ua.addNodes(e,r),ua.addBuffers(e,s),ua.endRecordBatch(e)}function Voe(e,t){const n=Ks.encode(e,t.data);return tu.startDictionaryBatch(e),tu.addId(e,new Nd(t.id,0)),tu.addIsDelta(e,t.isDelta),tu.addData(e,n),tu.endDictionaryBatch(e)}function $oe(e,t){return Qz.createFieldNode(e,new Nd(t.length,0),new Nd(t.nullCount,0))}function Hoe(e,t){return Jz.createBuffer(e,new Nd(t.offset,0),new Nd(t.length,0))}const Woe=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),QT=e=>`Expected ${kn[e]} Message in stream, but was null or length 0.`,ZT=e=>`Header pointer of flatbuffer-encoded ${kn[e]} Message is null or length 0.`,nV=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,iV=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class rV{constructor(t){this.source=t instanceof Vv?t:new Vv(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?ai:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(QT(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=bn(this.source.read(t));if(n.byteLength<t)throw new Error(iV(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=kn.Schema,i=this.readMessage(n),r=i?.header();if(t&&!r)throw new Error(ZT(n));return r}readMetadataLength(){const t=this.source.read(cw),n=t&&new Rc(t),i=n?.readInt32(0)||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return ai;if(n.byteLength<t)throw new Error(nV(t,n.byteLength));return{done:!1,value:Ur.decode(n)}}}class qoe{constructor(t,n){this.source=t instanceof Hp?t:pU(t)?new $v(t,n):new Hp(t)}[Symbol.asyncIterator](){return this}next(){return At(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?ai:t})}throw(t){return At(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return At(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return At(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(QT(t));return n.value})}readMessageBody(t){return At(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=bn(yield this.source.read(t));if(n.byteLength<t)throw new Error(iV(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(t=!1){return At(this,void 0,void 0,function*(){const n=kn.Schema,i=yield this.readMessage(n),r=i?.header();if(t&&!r)throw new Error(ZT(n));return r})}readMetadataLength(){return At(this,void 0,void 0,function*(){const t=yield this.source.read(cw),n=t&&new Rc(t),i=n?.readInt32(0)||0;return{done:i===0,value:i}})}readMetadata(t){return At(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return ai;if(n.byteLength<t)throw new Error(nV(t,n.byteLength));return{done:!1,value:Ur.decode(n)}})}}class Goe extends rV{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof e4?t:new e4(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;const n=Ur.fromJSON(t.schema,kn.Schema);return{done:!1,value:n}}if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];this._body=n.data.columns;const i=Ur.fromJSON(n,kn.DictionaryBatch);return{done:!1,value:i}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];this._body=n.columns;const i=Ur.fromJSON(n,kn.RecordBatch);return{done:!1,value:i}}return this._body=[],ai}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(QT(t));return n.value}readSchema(){const t=kn.Schema,n=this.readMessage(t),i=n?.header();if(!n||!i)throw new Error(ZT(t));return i}}const cw=4,bC="ARROW1",$0=new Uint8Array(bC.length);for(let e=0;e<bC.length;e+=1)$0[e]=bC.codePointAt(e);function ek(e,t=0){for(let n=-1,i=$0.length;++n<i;)if($0[n]!==e[t+n])return!1;return!0}const F1=$0.length,sV=F1+cw,Yoe=F1*2+cw;class lu extends WT{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return Tc(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return la.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return la.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof lu?t:cC(t)?Qoe(t):pU(t)?tle(t):Tc(t)?(()=>At(this,void 0,void 0,function*(){return yield lu.from(yield t)}))():gU(t)||fT(t)||mU(t)||Dg(t)?ele(new Hp(t)):Zoe(new Vv(t))}static readAll(t){return t instanceof lu?t.isSync()?u4(t):c4(t):cC(t)||ArrayBuffer.isView(t)||M1(t)||hU(t)?u4(t):c4(t)}}class Yv extends lu{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Qo(this,arguments,function*(){yield Gt(yield*Wb(Sd(this[Symbol.iterator]())))})}}class Xv extends lu{constructor(t){super(t),this._impl=t}readAll(){var t,n;return At(this,void 0,void 0,function*(){const i=new Array;try{for(var r=Sd(this),s;s=yield r.next(),!s.done;){const a=s.value;i.push(a)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=r.return)&&(yield n.call(r))}finally{if(t)throw t.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class aV extends Yv{constructor(t){super(t),this._impl=t}}class Xoe extends Xv{constructor(t){super(t),this._impl=t}}class oV{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),r=tn({type:new tr(this.schema.fields),length:t.length,children:i});return new Ri(this.schema,r)}_loadDictionaryBatch(t,n){const{id:i,isDelta:r}=t,{dictionaries:s,schema:a}=this,o=s.get(i);if(r||!o){const l=a.dictionaries.get(i),u=this._loadVectors(t.data,n,[l]);return(o&&r?o.concat(new dn(u)):new dn(u)).memoize()}return o.memoize()}_loadVectors(t,n,i){return new Mz(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}class Kv extends oV{constructor(t,n){super(n),this._reader=cC(t)?new Goe(this._handle=t):new rV(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=uV(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):ai}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):ai}next(){if(this.closed)return ai;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadRecordBatch(i,r);return{done:!1,value:s}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new JT(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Jv extends oV{constructor(t,n){super(n),this._reader=new qoe(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return At(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return At(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=uV(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return At(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):ai})}return(t){return At(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):ai})}next(){return At(this,void 0,void 0,function*(){if(this.closed)return ai;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadRecordBatch(i,r);return{done:!1,value:s}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),r=yield n.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new JT(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return At(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class lV extends Kv{constructor(t,n){super(t instanceof t4?t:new t4(t),n)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(kn.RecordBatch);if(r?.isRecordBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(kn.DictionaryBatch);if(r?.isDictionaryBatch()){const s=r.header(),a=this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}}_readFooter(){const{_handle:t}=this,n=t.size-sV,i=t.readInt32(n),r=t.readAt(n-i,i);return V0.decode(r)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class Koe extends Jv{constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(t instanceof $v?t:new $v(t,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return At(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){var n;return At(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(kn.RecordBatch);if(r?.isRecordBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,a)}}return null})}_readDictionaryBatch(t){var n;return At(this,void 0,void 0,function*(){const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(kn.DictionaryBatch);if(r?.isDictionaryBatch()){const s=r.header(),a=yield this._reader.readMessageBody(r.bodyLength),o=this._loadDictionaryBatch(s,a);this.dictionaries.set(s.id,o)}}})}_readFooter(){return At(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-sV,i=yield t.readInt32(n),r=yield t.readAt(n-i,i);return V0.decode(r)})}_readNextMessageAndValidate(t){return At(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class Joe extends Kv{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new zae(n,t.nodes,t.buffers,this.dictionaries).visitMany(i)}}function uV(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*u4(e){const t=lu.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function c4(e){return Qo(this,arguments,function*(){const n=yield Gt(lu.from(e));try{if(!(yield Gt(n.open({autoDestroy:!1}))).closed)do yield yield Gt(n);while(!(yield Gt(n.reset().open())).closed)}finally{yield Gt(n.cancel())}})}function Qoe(e){return new Yv(new Joe(e))}function Zoe(e){const t=e.peek(F1+7&-8);return t&&t.byteLength>=4?ek(t)?new aV(new lV(e.read())):new Yv(new Kv(e)):new Yv(new Kv(function*(){}()))}function ele(e){return At(this,void 0,void 0,function*(){const t=yield e.peek(F1+7&-8);return t&&t.byteLength>=4?ek(t)?new aV(new lV(yield e.read())):new Xv(new Jv(e)):new Xv(new Jv(function(){return Qo(this,arguments,function*(){})}()))})}function tle(e){return At(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new $v(e,t);return t>=Yoe&&ek(yield n.readAt(0,F1+7&-8))?new Xoe(new Koe(n)):new Xv(new Jv(n))})}class Ei extends nn{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof Ri?s.data.children:s.data),i=new Ei;return i.visitMany(n(t)),i}visit(t){if(t instanceof dn)return this.visitMany(t.data),this;const{type:n}=t;if(!It.isDictionary(n)){const{length:i,nullCount:r}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");It.isNull(n)||io.call(this,r<=0?new Uint8Array(0):UT(t.offset,i,t.nullBitmap)),this.nodes.push(new ch(i,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function io(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Zo(this._byteLength,t)),this._byteLength+=t,this}function nle(e){const{type:t,length:n,typeIds:i,valueOffsets:r}=e;if(io.call(this,i),t.mode===Xs.Sparse)return vC.call(this,e);if(t.mode===Xs.Dense){if(e.offset<=0)return io.call(this,r),vC.call(this,e);{const s=i.reduce((c,f)=>Math.max(c,f),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),l=new Int32Array(n),u=hT(-r[0],n,r);for(let c,f,d=-1;++d<n;)(f=o[c=i[d]])===-1&&(f=o[c]=u[c]),l[d]=u[d]-f,++a[c];io.call(this,l);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,a[h]);this.visit(c.slice(o[h],p))}}}return this}function ile(e){let t;return e.nullCount>=e.length?io.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?io.call(this,UT(e.offset,e.length,t)):io.call(this,Lv(e.values))}function df(e){return io.call(this,e.values.subarray(0,e.length*e.stride))}function cV(e){const{length:t,values:n,valueOffsets:i}=e,r=i[0],s=i[t],a=Math.min(s-r,n.byteLength-r);return io.call(this,hT(-i[0],t,i)),io.call(this,n.subarray(r,r+a)),this}function tk(e){const{length:t,valueOffsets:n}=e;return n&&io.call(this,hT(n[0],t,n)),this.visit(e.children[0])}function vC(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ei.prototype.visitBool=ile;Ei.prototype.visitInt=df;Ei.prototype.visitFloat=df;Ei.prototype.visitUtf8=cV;Ei.prototype.visitBinary=cV;Ei.prototype.visitFixedSizeBinary=df;Ei.prototype.visitDate=df;Ei.prototype.visitTimestamp=df;Ei.prototype.visitTime=df;Ei.prototype.visitDecimal=df;Ei.prototype.visitList=tk;Ei.prototype.visitStruct=vC;Ei.prototype.visitUnion=nle;Ei.prototype.visitInterval=df;Ei.prototype.visitFixedSizeList=tk;Ei.prototype.visitMap=tk;class fV extends WT{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Yb,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,vs(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Tc(t)?t.then(n=>this.writeAll(n)):Dg(t)?sk(this,t):rk(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Yb?this._sink=t:(this._sink=new Yb,t&&Qre(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Zre(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!yC(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof vr&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Ri&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!yC(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Ri?t instanceof JT||this._writeRecordBatch(t):t instanceof vr?this.writeAll(t.batches):M1(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,r=Ur.encode(t),s=r.byteLength,a=this._writeLegacyIpcFormat?4:8,o=s+a+i&~i,l=o-s-a;return t.headerType===kn.RecordBatch?this._recordBatchBlocks.push(new Lc(o,t.bodyLength,this._position)):t.headerType===kn.DictionaryBatch&&this._dictionaryBlocks.push(new Lc(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-a)),s>0&&this._write(r),this._writePadding(l)}_write(t){if(this._started){const n=bn(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ur.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write($0)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=Ei.assemble(t),a=new Ks(t.numRows,i,r),o=Ur.from(a,n);return this._writeDictionaries(t)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,i=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:r,nodes:s,bufferRegions:a,buffers:o}=Ei.assemble(new dn([t])),l=new Ks(t.length,s,a),u=new pl(l,n,i),c=Ur.from(u,r);return this._writeMessage(c)._writeBodyBuffers(o)}_writeBodyBuffers(t){let n,i,r;for(let s=-1,a=t.length;++s<a;)(n=t[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[n,i]of t.dictionaries){let r=this._dictionaryDeltaOffsets.get(n)||0;if(r===0||(i=i?.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,n,r>0),r+=s.length}return this}}class nk extends fV{static writeAll(t,n){const i=new nk(n);return Tc(t)?t.then(r=>i.writeAll(r)):Dg(t)?sk(i,t):rk(i,t)}}class ik extends fV{static writeAll(t){const n=new ik;return Tc(t)?t.then(i=>n.writeAll(i)):Dg(t)?sk(n,t):rk(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=V0.encode(new V0(t,Vs.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function rk(e,t){let n=t;t instanceof vr&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function sk(e,t){var n,i,r,s;return At(this,void 0,void 0,function*(){try{for(n=Sd(t);i=yield n.next(),!i.done;){const a=i.value;e.write(a)}}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return e.finish()})}function rle(e){const t=lu.from(e);return Tc(t)?(()=>At(this,void 0,void 0,function*(){return new vr(yield(yield t).readAll())}))():new vr(t.readAll())}function sle(e,t="stream"){return(t==="stream"?nk:ik).writeAll(e).toUint8Array(!0)}function ak(e,t=1){return(e*t+63&-64||64)/t}function Fc(e,t,n=e.BYTES_PER_ELEMENT){return new e(ak(t,n))}function ok(e){return e instanceof Bn?e:new Bn(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function ale(e){return new dn([ok(e)])}const lk=new TextEncoder;function ole(e,t,n){const i=lk.encode(n);return e.set(i,t),i.length}function lle(e,t,n){return lk.encodeInto(n,e.subarray(t)).written}const ule=lk.encodeInto?lle:ole;function f4(e,t){const n=Fc(e.ArrayType,t);return{set(i,r){n[r]=i},data:()=>({type:e,length:t,buffers:[null,n]})}}function cle(e,t){const n=Fc(e.ArrayType,t/8);return{set(i,r){i&&(n[r>>3]|=1<<r%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function fle(e,t){const n=Fc(e.ArrayType,t);return{set(i,r){n[r]=i/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function dle(e,t){const n=Fc(e.ArrayType,t<<1);return{set(i,r){const s=r<<1;n[s]=i%4294967296|0,n[s+1]=i/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function hle(e){const t=Hv({type:e,nullValues:[null,void 0]});return{set(n,i){t.set(i,n)},data:()=>t.finish().flush()}}function ple(e,t,n){const i=Fc(Int32Array,t+1),r=Fc(Uint8Array,3*n);let s=0;return{set(a,o){s+=ule(r,s,a),i[o+1]=s},data:()=>{const a=ak(s),o=r.length>a?r.subarray(0,a):r;return{type:e,length:t,buffers:[i,o]}}}}function gle(e,t){const n=[],i=Fc(e.indices.ArrayType,t),r=Object.create(null);let s=-1,a=0;return{set(o,l){const u=String(o);let c=r[u];c===void 0&&(a+=u.length,r[u]=c=++s,n.push(u)),i[l]=c},data:()=>({type:e,length:t,buffers:[null,i],dict:mle(e.dictionary,n,a)})}}function mle(e,t,n){const i=ple(e,t.length,n);return t.forEach(i.set),ale(i.data())}function yle(e,t){const n=Fc(Uint8Array,t/8);let i=0;return{set(r,s){r==null?++i:(e.set(r,s),n[s>>3]|=1<<s%8)},data:()=>{const r=e.data();return i&&(r.nulls=i,r.buffers[2]=n),r}}}function ble(e,t,n=!0){let i;switch(e.typeId){case $.Int:i=e.bitWidth<64?f4:null;break;case $.Float:i=e.precision>0?f4:null;break;case $.Dictionary:i=e.dictionary.typeId===$.Utf8&&e.indices.typeId===$.Int&&e.indices.bitWidth<64?gle:null;break;case $.Bool:i=cle;break;case $.Date:i=e.unit?dle:fle;break}return i==null?hle(e):n?yle(i(e,t),t):i(e,t)}function vle(e,t){const n=e.length,i=ak(n,e.BYTES_PER_ELEMENT);let r=e;return n!==i&&(r=new e.constructor(i),r.set(e)),ok({type:t,length:n,buffers:[null,r]})}function dV(e,t,n,i,r=!0){const s=ble(i,e,r);return t(n,s.set),ok(s.data())}function uk(e){if(e instanceof It||e==null)return e;switch(e){case $.Binary:return new B0;case $.Bool:return new j0;case $.DateDay:return new hse;case $.DateMillisecond:case $.Date:return new pse;case $.Dictionary:return new Dc(new Fp,new kc);case $.Float16:return new BU;case $.Float32:return new ST;case $.Float64:case $.Float:return new ET;case $.Int8:return new gT;case $.Int16:return new mT;case $.Int32:case $.Int:return new kc;case $.Int64:return new yT;case $.IntervalDayTime:return new vse;case $.Interval:case $.IntervalYearMonth:return new _se;case $.Null:return new vu;case $.TimeMicrosecond:return new yse;case $.TimeMillisecond:case $.Time:return new mse;case $.TimeNanosecond:return new bse;case $.TimeSecond:return new gse;case $.Uint8:return new bT;case $.Uint16:return new vT;case $.Uint32:return new _T;case $.Uint64:return new wT;case $.Utf8:return new Fp;default:zt(`Unsupported type code: ${_a(e)}. Use a data type constructor instead?`)}}function _le(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function hV(e,t){const n=_C();return e(t,n.add),n}function _C(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(bu(t))++e.dates,_le(t)&&++e.utcdays;else if(oc(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const i=e.array_prof||(e.array_prof=_C());t.forEach(i.add)}else{++e.structs;const i=e.struct_prof||(e.struct_prof={});for(const r in t)(i[r]||(i[r]=_C())).add(t[r])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return uk(wle(e))}};return e}function wle(e){const t=e.count-e.nulls;if(t===0)return $.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?$.Float64:n<1<<7?$.Int8:n<1<<15?$.Int16:$.Int32:n>=2**32?$.Float64:n<1<<8?$.Uint8:n<1<<16?$.Uint16:$.Uint32}else{if(e.nums===t)return $.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?$.Int64:zt(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?$.Uint64:zt(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return $.Bool;if(e.utcdays===t)return $.DateDay;if(e.dates===t)return $.DateMillisecond;if(e.arrays===t){const n=Sn.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Up(e.minlen,n):new jp(n)}else if(e.structs===t){const n=e.struct_prof;return new tr(Object.keys(n).map(i=>Sn.new(i,n[i].type(),!0)))}else{if(e.strings>0)return $.Dictionary;zt("Type inference failure")}}}}function Sle(e,t,n,i,r,s=!0){if(r=uk(r),!r){const a=hV(i,t);s=a.nulls>0,r=a.type()}return dV(n,i,t,r,s)}function Ele(e,t,n,i,r,s=!0){r=uk(r);const a=e.column(t),o=!(e.isFiltered()||e.isOrdered()),l=Ale(a);if(l&&o&&d4(l.type,r))return l;const u=a.data;if(T1(u)){const c=Ole(u);if(o&&c&&d4(c,r))return vle(u,c);r=r||c,s=!1}if(!r){const c=hV(i,a);s=c.nulls>0,r=c.type()}return dV(n,i,a,r,s)}function Ale(e){return e instanceof dn?e:e.vector instanceof dn?e.vector:null}function Ole(e){const n={Float32Array:ST,Float64Array:ET,Int8Array:gT,Int16Array:mT,Int32Array:kc,Uint8Array:bT,Uint16Array:vT,Uint32Array:_T,BigInt64Array:yT,BigUint64Array:wT}[e.constructor.name];return n?new n:null}function d4(e,t){return!e||!t?!0:e.compareTo(t)}function Cle(e,t,n){const i=Math.min(e.length,n+t);return(r,s)=>{for(let a=n;a<i;++a)s(e[a][r],a)}}function Ile(e,t,n){const i=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(r,s)=>{let a=-1;i&&oc(r.data)?r.data.forEach(s):e.scan(o=>s(r.get(o),++a),!0,t,n)}}const pV=()=>zt("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function xle(){try{return vr}catch{pV()}}function Tle(){try{return rle}catch{pV()}}function gV(e,t={}){const{types:n={}}=t,{dataFrom:i,names:r,nrows:s,scan:a}=kle(e,t),o={};r.forEach(u=>{const c=i(e,u,s,a,n[u]);c.length!==s&&zt("Column length mismatch"),o[u]=c});const l=xle();return new l(o)}function kle(e,t){const{columns:n,limit:i=1/0,offset:r=0}=t,s=Qn(n)?n(e):_n(n)?n:null;if(_n(e))return{dataFrom:Sle,names:s||Object.keys(e[0]),nrows:Math.min(i,e.length-r),scan:Cle(e,i,r)};if(Mle(e))return{dataFrom:Ele,names:s||e.columnNames(),nrows:Math.min(i,e.numRows()-r),scan:Ile(e,i,r)};zt("Unsupported input data type")}function Mle(e){return e&&Qn(e.reify)}function Dle(e,t){return sle(gV(e,t))}function Rle(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Lle(e,t={}){let n=0,i=0,r=0,s=0,a=0,o=0;return e(l=>{if(++n,l==null){++i;return}const u=typeof l;if(u==="object"&&bu(l))++r,Rle(l)&&++s;else if(u==="number"&&(++a,l===l&&(l|0)!==l)){const c=l+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;o=Math.max(o,h-f-1)}}}),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,t.maxdigits||6)}}}function fw(e,t){return Qn(t)?t(e):t||e.columnNames()}function mV(e,t,n){const i=n.format||{},r=n.align||{},s={},a={};return t.forEach(o=>{const l=Lle(Nle(e,o),n);a[o]=r[o]||l.align,s[o]=i[o]||l.format}),{align:a,format:s}}function Nle(e,t){const n=e.column(t);return i=>e.scan(r=>i(n.get(r)))}function ck(e,t,n=100,i,r){const s=e.data(),a=t.length;e.scan(o=>{r.row(o);for(let l=0;l<a;++l){const u=t[l];r.cell(s[t[l]].get(o),u,l)}},!0,n,i)}function Fle(e,t={}){const n=fw(e,t.columns),i=t.format||{},r=t.delimiter||",",s=new RegExp(`["${r}
\r]`),a=u=>u==null?"":bu(u)?J2(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,o=n.map(a);let l="";return ck(e,n,t.limit||1/0,t.offset,{row(){l+=o.join(r)+`
`},cell(u,c,f){o[f]=a(i[c]?i[c](u):u)}}),l+o.join(r)}function yV(e,t={}){if(Qn(t))return t(e)+"";const n=typeof e;if(n==="object"){if(bu(e))return t.utc?J2(e):Fj(e);{const i=JSON.stringify(e,(s,a)=>T1(a)?Array.from(a):a),r=t.maxlen||30;return i.length>r?i.slice(0,28)+"\u2026"+(i[0]==="["?"]":"}"):i}}else if(n==="number"){const i=t.digits||0;let r;return e!==0&&((r=Math.abs(e))>=1e18||r<Math.pow(10,-i))?e.toExponential(i):e.toFixed(i)}else return e+""}function dw(e,t,n={}){for(const i in e)n[i]=t(e[i],i);return n}function Ple(e,t={}){const n=fw(e,t.columns),{align:i,format:r}=mV(e,n,t),s=Ble(t),a=t.null,o=g=>g==="c"?"center":g==="r"?"right":"left",l=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(g,m)=>l(yV(g,m)),c=a?(g,m)=>g==null?a(g):u(g,m):u;let f=-1,d=-1;const h=(g,m,y)=>{const b=y?o(i[m]):"",v=s[g]&&s[g](m,d,f)||"",_=(b?`text-align: ${b};`+(v?" ":""):"")+v;return`<${g}${_?` style="${_}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(g=>`${h("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+h("tbody");return ck(e,n,t.limit,t.offset,{row(g){f=g,p+=(++d?"</tr>":"")+h("tr")},cell(g,m){p+=h("td",m,1)+c(g,r[m])+"</td>"}}),p+"</tr></tbody></table>"}function Ble(e){return dw(e.style,t=>Qn(t)?t:()=>t)}function bV(e,t=!0,n=!1){return e===void 0||e?t:n}const jle=e=>bu(e)?J2(e,!0):e;function Ule(e,t={}){const n=bV(t.schema),i=t.format||{},r=fw(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map(a=>({name:a})))+'},"data":{'),r.forEach((a,o)=>{s+=(o?",":"")+JSON.stringify(a)+":[";const l=e.column(a),u=i[a]||jle;let c=-1;e.scan(f=>{const d=l.get(f);s+=(++c?",":"")+JSON.stringify(u(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function zle(e,t={}){const n=fw(e,t.columns),{align:i,format:r}=mV(e,n,t),s=l=>l==="c"?":-:":l==="r"?"-:":":-",a=l=>l.replace(/\|/g,"\\|");let o="|"+n.map(a).join("|")+`|
|`+n.map(l=>s(i[l])).join("|")+"|";return ck(e,n,t.limit,t.offset,{row(){o+=`
|`},cell(l,u){o+=a(yV(l,r[u]))+"|"}}),o+`
`}function vV(e,t){for(const[n,i]of Q2(t))e.set(n,i);return e}function Vle(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function gl(e,t,n=new Map){return t=qr(t)?e.columnName(t):t,ji(t)?n.set(t,t):_n(t)?t.forEach(i=>gl(e,i,n)):Qn(t)?gl(e,t(e),n):ar(t)?vV(n,t):zt(`Invalid column selection: ${_a(t)}`),n}function hw(e,t){return e.toObject=t,e}function _V(e){return _n(e)?e.map(_V):e&&e.toObject?e.toObject():e}function Fd(){return hw(e=>e.columnNames(),()=>({all:[]}))}function wV(...e){return e=e.flat(),hw(t=>{const n=gl(t,e);return t.columnNames(i=>!n.has(i))},()=>({not:_V(e)}))}function $le(e,t){return hw(n=>{let i=qr(e)?e:n.columnIndex(e),r=qr(t)?t:n.columnIndex(t);if(r<i){const s=r;r=i,i=s}return n.columnNames().slice(i,r+1)},()=>({range:[e,t]}))}function Hle(e){return ji(e)&&(e=RegExp(Vle(e))),hw(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Wle(e){return T1(e.data)?e.data.constructor:Array}class Ha extends Zie{static from(t,n){return new Ha(nre(t,n),n)}static new(t,n){if(t instanceof Ha)return t;const i={},r=[];for(const[s,a]of Q2(t))i[s]=a,r.push(s);return new Ha(i,n||r)}constructor(t,n,i,r,s,a){dw(t,tre,t),n=n||Object.keys(t);const o=n.length?t[n[0]].length:0;super(n,o,t,i,r,s,a)}create({data:t,names:n,filter:i,groups:r,order:s}){const a=i!==void 0?i:this.mask();return new Ha(t||this._data,n||(t?null:this._names),a,r!==void 0?r:kre(this._group,i&&a),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),i=this.reify(),r=ks(i).groupby(i.groups());return t.forEach(s=>{s=Ha.new(s),s.numRows()!==n&&zt("Assign row counts do not match"),s=s.reify(),s.columnNames(a=>r.add(a,s.column(a)))}),this.create(r.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const i=this.column(t),r=new n(this.numRows());let s=-1;return this.scan(a=>r[++s]=i.get(a),!0),r}get(t,n=0){const i=this.column(t);return this.isFiltered()||this.isOrdered()?i.get(this.indices()[n]):i.get(n)}getter(t){const n=this.column(t),i=this.isFiltered()||this.isOrdered()?this.indices():null;return i?r=>n.get(i[r]):n?r=>n.get(r):zt(`Unrecognized column: ${t}`)}object(t=0){return h4(this)(t)}objects(t={}){const{grouped:n,limit:i,offset:r}=t,s=gl(this,t.columns||Fd()),a=uU(s),o=[];if(this.scan((l,u)=>o.push(a(l,u)),!0,i,r),n&&this.isGrouped()){const l=[];return this.scan(u=>l.push(u),!0,i,r),Dre(this,l,o,n)}return o}*[Symbol.iterator](){const t=h4(this),n=this.numRows();for(let i=0;i<n;++i)yield t(i)}reify(t){const n=t?t.length:this.numRows(),i=this._names;let r,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(r=this.data());else return this;if(!r){const a=t?l=>t.forEach(l):l=>this.scan(l,!0),o=i.length;r={};for(let l=0;l<o;++l){const u=i[l],c=this.column(u),f=r[u]=new(Wle(c))(n);let d=-1;a(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Mre(this.groups(),a,!!t,n))}return this.create({data:r,names:i,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,i)=>i(n),this)}toArrow(t){return gV(this,t)}toArrowBuffer(t){return Dle(this,t)}toCSV(t){return Fle(this,t)}toHTML(t){return Ple(this,t)}toJSON(t){return Ule(this,t)}toMarkdown(t){return zle(this,t)}}function h4(e){let t=e._builder;if(!t){const n=uU(e.columnNames()),i=e.data();if(e.isOrdered()||e.isFiltered()){const r=e.indices();t=s=>n(r[s],i)}else t=r=>n(r,i);e._builder=t}return t}class qle{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function gn(e,t,n,i){const r=n[e.type]||n.Default;if(r&&r(e,t,i)===!1)return;const s=Gle[e.type];s&&s(e,t,n)}const qy=(e,t,n)=>{gn(e.argument,t,n,e)},dA=(e,t,n)=>{gn(e.left,t,n,e),gn(e.right,t,n,e)},p4=(e,t,n)=>{gn(e.test,t,n,e),gn(e.consequent,t,n,e),e.alternate&&gn(e.alternate,t,n,e)},hA=(e,t,n)=>{No(e.params,t,n,e),gn(e.body,t,n,e)},g4=(e,t,n)=>{gn(e.callee,t,n,e),No(e.arguments,t,n,e)},No=(e,t,n,i)=>{e.forEach(r=>gn(r,t,n,i))},Gle={TemplateLiteral:(e,t,n)=>{No(e.expressions,t,n,e),No(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{gn(e.object,t,n,e),gn(e.property,t,n,e)},CallExpression:g4,NewExpression:g4,ArrayExpression:(e,t,n)=>{No(e.elements,t,n,e)},AssignmentExpression:dA,AwaitExpression:qy,BinaryExpression:dA,LogicalExpression:dA,UnaryExpression:qy,UpdateExpression:qy,ConditionalExpression:p4,ObjectExpression:(e,t,n)=>{No(e.properties,t,n,e)},Property:(e,t,n)=>{gn(e.key,t,n,e),gn(e.value,t,n,e)},ArrowFunctionExpression:hA,FunctionExpression:hA,FunctionDeclaration:hA,VariableDeclaration:(e,t,n)=>{No(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{gn(e.id,t,n,e),gn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{gn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{No(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{gn(e.expression,t,n,e)},IfStatement:p4,ForStatement:(e,t,n)=>{gn(e.init,t,n,e),gn(e.test,t,n,e),gn(e.update,t,n,e),gn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{gn(e.test,t,n,e),gn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{gn(e.body,t,n,e),gn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{gn(e.discriminant,t,n,e),No(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&gn(e.test,t,n,e),No(e.consequent,t,n,e)},ReturnStatement:qy,Program:(e,t,n)=>{gn(e.body[0],t,n,e)}};function SV(e){delete e.start,delete e.end,delete e.optional}function m4(e){SV(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Yle(e){return gn(e,null,{Column:m4,Constant:m4,Default:SV}),e}function Ni(e,t){return t&&t.type===e}function Xle(e){return Ni(Nre,e)||Ni(Lre,e)}function Kle(e){return Qn(e)?e:()=>e}const Jle="Escaped functions are not valid as rollup or pivot values.";function Qle(e,t,n){e.aggronly&&zt(Jle);const i="(row,data)=>fn("+lU(e.table.columnNames())+",$)";return{escape:uT.escape(i,Kle(t.expr),n)}}var Zle=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],EV=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],eue="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",AV="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",pA={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},gA="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",tue={5:gA,"5module":gA+" export import",6:gA+" const class extends export import super"},nue=/^in(stanceof)?$/,iue=new RegExp("["+AV+"]"),rue=new RegExp("["+AV+eue+"]");function wC(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}}function wu(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&iue.test(String.fromCharCode(e)):t===!1?!1:wC(e,EV)}function qp(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&rue.test(String.fromCharCode(e)):t===!1?!1:wC(e,EV)||wC(e,Zle)}var pn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ia(e,t){return new pn(e,{beforeExpr:!0,binop:t})}var ra={beforeExpr:!0},ns={startsExpr:!0},fk={};function sn(e,t){return t===void 0&&(t={}),t.keyword=e,fk[e]=new pn(e,t)}var B={num:new pn("num",ns),regexp:new pn("regexp",ns),string:new pn("string",ns),name:new pn("name",ns),privateId:new pn("privateId",ns),eof:new pn("eof"),bracketL:new pn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new pn("]"),braceL:new pn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new pn("}"),parenL:new pn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new pn(")"),comma:new pn(",",ra),semi:new pn(";",ra),colon:new pn(":",ra),dot:new pn("."),question:new pn("?",ra),questionDot:new pn("?."),arrow:new pn("=>",ra),template:new pn("template"),invalidTemplate:new pn("invalidTemplate"),ellipsis:new pn("...",ra),backQuote:new pn("`",ns),dollarBraceL:new pn("${",{beforeExpr:!0,startsExpr:!0}),eq:new pn("=",{beforeExpr:!0,isAssign:!0}),assign:new pn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new pn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new pn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ia("||",1),logicalAND:ia("&&",2),bitwiseOR:ia("|",3),bitwiseXOR:ia("^",4),bitwiseAND:ia("&",5),equality:ia("==/!=/===/!==",6),relational:ia("</>/<=/>=",7),bitShift:ia("<</>>/>>>",8),plusMin:new pn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ia("%",10),star:ia("*",10),slash:ia("/",10),starstar:new pn("**",{beforeExpr:!0}),coalesce:ia("??",1),_break:sn("break"),_case:sn("case",ra),_catch:sn("catch"),_continue:sn("continue"),_debugger:sn("debugger"),_default:sn("default",ra),_do:sn("do",{isLoop:!0,beforeExpr:!0}),_else:sn("else",ra),_finally:sn("finally"),_for:sn("for",{isLoop:!0}),_function:sn("function",ns),_if:sn("if"),_return:sn("return",ra),_switch:sn("switch"),_throw:sn("throw",ra),_try:sn("try"),_var:sn("var"),_const:sn("const"),_while:sn("while",{isLoop:!0}),_with:sn("with"),_new:sn("new",{beforeExpr:!0,startsExpr:!0}),_this:sn("this",ns),_super:sn("super",ns),_class:sn("class",ns),_extends:sn("extends",ra),_export:sn("export"),_import:sn("import",ns),_null:sn("null",ns),_true:sn("true",ns),_false:sn("false",ns),_in:sn("in",{beforeExpr:!0,binop:7}),_instanceof:sn("instanceof",{beforeExpr:!0,binop:7}),_typeof:sn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:sn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:sn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ta=/\r\n?|\n|\u2028|\u2029/,sue=new RegExp(Ta.source,"g");function Fg(e){return e===10||e===13||e===8232||e===8233}function OV(e,t,n){n===void 0&&(n=e.length);for(var i=t;i<n;i++){var r=e.charCodeAt(i);if(Fg(r))return i<n-1&&r===13&&e.charCodeAt(i+1)===10?i+2:i+1}return-1}var CV=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,da=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,IV=Object.prototype,aue=IV.hasOwnProperty,oue=IV.toString,P1=Object.hasOwn||function(e,t){return aue.call(e,t)},y4=Array.isArray||function(e){return oue.call(e)==="[object Array]"};function dd(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}function Pc(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var lue=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,H0=function(t,n){this.line=t,this.column=n};H0.prototype.offset=function(t){return new H0(this.line,this.column+t)};var pw=function(t,n,i){this.start=n,this.end=i,t.sourceFile!==null&&(this.source=t.sourceFile)};function xV(e,t){for(var n=1,i=0;;){var r=OV(e,i,t);if(r<0)return new H0(n,t-i);++n,i=r}}var SC={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},b4=!1;function uue(e){var t={};for(var n in SC)t[n]=e&&P1(e,n)?e[n]:SC[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!b4&&typeof console=="object"&&console.warn&&(b4=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),y4(t.onToken)){var i=t.onToken;t.onToken=function(r){return i.push(r)}}return y4(t.onComment)&&(t.onComment=cue(t,t.onComment)),t}function cue(e,t){return function(n,i,r,s,a,o){var l={type:n?"Block":"Line",value:i,start:r,end:s};e.locations&&(l.loc=new pw(this,a,o)),e.ranges&&(l.range=[r,s]),t.push(l)}}var W0=1,Pg=2,dk=4,TV=8,kV=16,MV=32,hk=64,DV=128,B1=256,pk=W0|Pg|B1;function gk(e,t){return Pg|(e?dk:0)|(t?TV:0)}var Qv=0,mk=1,uu=2,RV=3,LV=4,NV=5,Ui=function(t,n,i){this.options=t=uue(t),this.sourceFile=t.sourceFile,this.keywords=dd(tue[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=pA[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=dd(r);var s=(r?r+" ":"")+pA.strict;this.reservedWordsStrict=dd(s),this.reservedWordsStrictBind=dd(s+" "+pA.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf(`
`,i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ta).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=B.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(W0),this.regexpState=null,this.privateNameStack=[]},Al={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ui.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Al.inFunction.get=function(){return(this.currentVarScope().flags&Pg)>0};Al.inGenerator.get=function(){return(this.currentVarScope().flags&TV)>0&&!this.currentVarScope().inClassFieldInit};Al.inAsync.get=function(){return(this.currentVarScope().flags&dk)>0&&!this.currentVarScope().inClassFieldInit};Al.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&B1)return!1;if(t.flags&Pg)return(t.flags&dk)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Al.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&hk)>0||n||this.options.allowSuperOutsideMethod};Al.allowDirectSuper.get=function(){return(this.currentThisScope().flags&DV)>0};Al.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Al.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Pg|B1))>0||n};Al.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&B1)>0};Ui.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i};Ui.parse=function(t,n){return new this(n,t).parse()};Ui.parseExpressionAt=function(t,n,i){var r=new this(i,t,n);return r.nextToken(),r.parseExpression()};Ui.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ui.prototype,Al);var Zr=Ui.prototype,fue=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Zr.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){da.lastIndex=e,e+=da.exec(this.input)[0].length;var t=fue.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){da.lastIndex=e+t[0].length;var n=da.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return r===";"||r==="}"||Ta.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(i+1)==="=")}e+=t[0].length,da.lastIndex=e,e+=da.exec(this.input)[0].length,this.input[e]===";"&&e++}};Zr.eat=function(e){return this.type===e?(this.next(),!0):!1};Zr.isContextual=function(e){return this.type===B.name&&this.value===e&&!this.containsEsc};Zr.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Zr.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Zr.canInsertSemicolon=function(){return this.type===B.eof||this.type===B.braceR||Ta.test(this.input.slice(this.lastTokEnd,this.start))};Zr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Zr.semicolon=function(){!this.eat(B.semi)&&!this.insertSemicolon()&&this.unexpected()};Zr.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Zr.expect=function(e){this.eat(e)||this.unexpected()};Zr.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var gw=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Zr.checkPatternErrors=function(e,t){if(!!e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}};Zr.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,i=e.doubleProto;if(!t)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")};Zr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Zr.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Et=Ui.prototype;Et.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==B.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var yk={kind:"loop"},due={kind:"switch"};Et.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;da.lastIndex=this.pos;var t=da.exec(this.input),n=this.pos+t[0].length,i=this.input.charCodeAt(n);if(i===91||i===92||i>55295&&i<56320)return!0;if(e)return!1;if(i===123)return!0;if(wu(i,!0)){for(var r=n+1;qp(i=this.input.charCodeAt(r),!0);)++r;if(i===92||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!nue.test(s))return!0}return!1};Et.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;da.lastIndex=this.pos;var e=da.exec(this.input),t=this.pos+e[0].length,n;return!Ta.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(qp(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Et.parseStatement=function(e,t,n){var i=this.type,r=this.startNode(),s;switch(this.isLet(e)&&(i=B._var,s="let"),i){case B._break:case B._continue:return this.parseBreakContinueStatement(r,i.keyword);case B._debugger:return this.parseDebuggerStatement(r);case B._do:return this.parseDoStatement(r);case B._for:return this.parseForStatement(r);case B._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!e);case B._class:return e&&this.unexpected(),this.parseClass(r,!0);case B._if:return this.parseIfStatement(r);case B._return:return this.parseReturnStatement(r);case B._switch:return this.parseSwitchStatement(r);case B._throw:return this.parseThrowStatement(r);case B._try:return this.parseTryStatement(r);case B._const:case B._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case B._while:return this.parseWhileStatement(r);case B._with:return this.parseWithStatement(r);case B.braceL:return this.parseBlock(!0,r);case B.semi:return this.parseEmptyStatement(r);case B._export:case B._import:if(this.options.ecmaVersion>10&&i===B._import){da.lastIndex=this.pos;var a=da.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(l===40||l===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===B._import?this.parseImport(r):this.parseExport(r,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!e);var u=this.value,c=this.parseExpression();return i===B.name&&c.type==="Identifier"&&this.eat(B.colon)?this.parseLabeledStatement(r,u,c,e):this.parseExpressionStatement(r,c)}};Et.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(B.semi)||this.insertSemicolon()?e.label=null:this.type!==B.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if((e.label==null||r.name===e.label.name)&&(r.kind!=null&&(n||r.kind==="loop")||e.label&&n))break}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Et.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Et.parseDoStatement=function(e){return this.next(),this.labels.push(yk),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(B._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(B.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Et.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(yk),this.enterScope(0),this.expect(B.parenL),this.type===B.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===B._var||this.type===B._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===B._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&i.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===B._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i)):(t>-1&&this.unexpected(t),this.parseFor(e,i))}var s=this.isContextual("let"),a=!1,o=new gw,l=this.parseExpression(t>-1?"await":!0,o);return this.type===B._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===B._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,o),this.checkLValPattern(l),this.parseForIn(e,l)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,l))};Et.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,v0|(n?0:EC),!1,t)};Et.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(B._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Et.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(B.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Et.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(B.braceL),this.labels.push(due),this.enterScope(0);for(var t,n=!1;this.type!==B.braceR;)if(this.type===B._case||this.type===B._default){var i=this.type===B._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(B.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Et.parseThrowStatement=function(e){return this.next(),Ta.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var hue=[];Et.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===B._catch){var t=this.startNode();if(this.next(),this.eat(B.parenL)){t.param=this.parseBindingAtom();var n=t.param.type==="Identifier";this.enterScope(n?MV:0),this.checkLValPattern(t.param,n?LV:uu),this.expect(B.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(B._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Et.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Et.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(yk),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Et.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Et.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Et.parseLabeledStatement=function(e,t,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===B._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Et.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Et.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(B.braceL),e&&this.enterScope(0);this.type!==B.braceR;){var i=this.parseStatement(null);t.body.push(i)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Et.parseFor=function(e,t){return e.init=t,this.expect(B.semi),e.test=this.type===B.semi?null:this.parseExpression(),this.expect(B.semi),e.update=this.type===B.parenR?null:this.parseExpression(),this.expect(B.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Et.parseForIn=function(e,t){var n=this.type===B._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(B.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Et.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(B.eq)?i.init=this.parseMaybeAssign(t):n==="const"&&!(this.type===B._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():i.id.type!=="Identifier"&&!(t&&(this.type===B._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(B.comma))break}return e};Et.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?mk:uu,!1)};var v0=1,EC=2,FV=4;Et.parseFunction=function(e,t,n,i,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===B.star&&t&EC&&this.unexpected(),e.generator=this.eat(B.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&v0&&(e.id=t&FV&&this.type!==B.name?null:this.parseIdent(),e.id&&!(t&EC)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?mk:uu:RV));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gk(e.async,e.generator)),t&v0||(e.id=this.type===B.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&v0?"FunctionDeclaration":"FunctionExpression")};Et.parseFunctionParams=function(e){this.expect(B.parenL),e.params=this.parseBindingList(B.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Et.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(B.braceL);this.type!==B.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&pue(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Et.parseClassElement=function(e){if(this.eat(B.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(B.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===B.star?o=!0:i="static"}if(n.static=o,!i&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===B.star)&&!this.canInsertSemicolon()?s=!0:i="async"),!i&&(t>=9||!s)&&this.eat(B.star)&&(r=!0),!i&&!s&&!r){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:i=l)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===B.parenL||a!=="method"||r||s){var u=!n.static&&Zv(n,"constructor"),c=u&&e;u&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,r,s,c)}else this.parseClassField(n);return n};Et.isClassElementNameStart=function(){return this.type===B.name||this.type===B.privateId||this.type===B.num||this.type===B.string||this.type===B.bracketL||this.type.keyword};Et.parseClassElementName=function(e){this.type===B.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Et.parseClassMethod=function(e,t,n,i){var r=e.key;e.kind==="constructor"?(t&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):e.static&&Zv(e,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,i);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Et.parseClassField=function(e){if(Zv(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Zv(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(B.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Et.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(B1|hk);this.type!==B.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Et.parseClassId=function(e,t){this.type===B.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,uu,!1)):(t===!0&&this.unexpected(),e.id=null)};Et.parseClassSuper=function(e){e.superClass=this.eat(B._extends)?this.parseExprSubscripts(!1):null};Et.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Et.exitClassBody=function(){for(var e=this.privateNameStack.pop(),t=e.declared,n=e.used,i=this.privateNameStack.length,r=i===0?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];P1(t,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function pue(e,t){var n=t.key.name,i=e[n],r="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(r=(t.static?"s":"i")+t.kind),i==="iget"&&r==="iset"||i==="iset"&&r==="iget"||i==="sget"&&r==="sset"||i==="sset"&&r==="sget"?(e[n]="true",!1):i?!0:(e[n]=r,!1)}function Zv(e,t){var n=e.computed,i=e.key;return!n&&(i.type==="Identifier"&&i.name===t||i.type==="Literal"&&i.value===t)}Et.parseExport=function(e,t){if(this.next(),this.eat(B.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==B.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(B._default)){this.checkExport(t,"default",this.lastTokStart);var n;if(this.type===B._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(i,v0|FV,!1,n)}else if(this.type===B._class){var r=this.startNode();e.declaration=this.parseClass(r,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==B.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),o.local.type==="Literal"&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Et.checkExport=function(e,t,n){!e||(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),P1(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Et.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"?this.checkPatternExport(e,t.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};Et.checkVariableExport=function(e,t){if(!!e)for(var n=0,i=t;n<i.length;n+=1){var r=i[n];this.checkPatternExport(e,r.id)}};Et.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Et.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(B.braceL);!this.eat(B.braceR);){if(n)n=!1;else if(this.expect(B.comma),this.afterTrailingComma(B.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(e,i.exported,i.exported.start),t.push(this.finishNode(i,"ExportSpecifier"))}return t};Et.parseImport=function(e){return this.next(),this.type===B.string?(e.specifiers=hue,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===B.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Et.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===B.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,uu),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(B.comma))return e}if(this.type===B.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,uu),e.push(this.finishNode(i,"ImportNamespaceSpecifier")),e}for(this.expect(B.braceL);!this.eat(B.braceR);){if(t)t=!1;else if(this.expect(B.comma),this.afterTrailingComma(B.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,uu),e.push(this.finishNode(r,"ImportSpecifier"))}return e};Et.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===B.string){var e=this.parseLiteral(this.value);return lue.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Et.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Et.isDirectiveCandidate=function(e){return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var vo=Ui.prototype;vo.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};vo.toAssignableList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];r&&this.toAssignable(r,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};vo.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};vo.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==B.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};vo.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case B.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(B.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case B.braceL:return this.parseObj(!0)}return this.parseIdent()};vo.parseBindingList=function(e,t,n){for(var i=[],r=!0;!this.eat(e);)if(r?r=!1:this.expect(B.comma),t&&this.type===B.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===B.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===B.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}}return i};vo.parseBindingListItem=function(e){return e};vo.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(B.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")};vo.checkLValSimple=function(e,t,n){t===void 0&&(t=Qv);var i=t!==Qv;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===uu&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(P1(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==NV&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}};vo.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Qv),e.type){case"ObjectPattern":for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}};vo.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Qv),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Ra=function(t,n,i,r,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!i,this.override=r,this.generator=!!s},ti={b_stat:new Ra("{",!1),b_expr:new Ra("{",!0),b_tmpl:new Ra("${",!1),p_stat:new Ra("(",!1),p_expr:new Ra("(",!0),q_tmpl:new Ra("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Ra("function",!1),f_expr:new Ra("function",!0),f_expr_gen:new Ra("function",!0,!1,null,!0),f_gen:new Ra("function",!1,!1,null,!0)},Bg=Ui.prototype;Bg.initialContext=function(){return[ti.b_stat]};Bg.curContext=function(){return this.context[this.context.length-1]};Bg.braceIsBlock=function(e){var t=this.curContext();return t===ti.f_expr||t===ti.f_stat?!0:e===B.colon&&(t===ti.b_stat||t===ti.b_expr)?!t.isExpr:e===B._return||e===B.name&&this.exprAllowed?Ta.test(this.input.slice(this.lastTokEnd,this.start)):e===B._else||e===B.semi||e===B.eof||e===B.parenR||e===B.arrow?!0:e===B.braceL?t===ti.b_stat:e===B._var||e===B._const||e===B.name?!1:!this.exprAllowed};Bg.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Bg.updateContext=function(e){var t,n=this.type;n.keyword&&e===B.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Bg.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};B.parenR.updateContext=B.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ti.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};B.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ti.b_stat:ti.b_expr),this.exprAllowed=!0};B.dollarBraceL.updateContext=function(){this.context.push(ti.b_tmpl),this.exprAllowed=!0};B.parenL.updateContext=function(e){var t=e===B._if||e===B._for||e===B._with||e===B._while;this.context.push(t?ti.p_stat:ti.p_expr),this.exprAllowed=!0};B.incDec.updateContext=function(){};B._function.updateContext=B._class.updateContext=function(e){e.beforeExpr&&e!==B._else&&!(e===B.semi&&this.curContext()!==ti.p_stat)&&!(e===B._return&&Ta.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===B.colon||e===B.braceL)&&this.curContext()===ti.b_stat)?this.context.push(ti.f_expr):this.context.push(ti.f_stat),this.exprAllowed=!1};B.backQuote.updateContext=function(){this.curContext()===ti.q_tmpl?this.context.pop():this.context.push(ti.q_tmpl),this.exprAllowed=!1};B.star.updateContext=function(e){if(e===B._function){var t=this.context.length-1;this.context[t]===ti.f_expr?this.context[t]=ti.f_expr_gen:this.context[t]=ti.f_gen}this.exprAllowed=!0};B.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==B.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kt=Ui.prototype;Kt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i=e.key,r;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);return}r="$"+r;var a=t[r];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(i.start,"Redefinition of property")}else a=t[r]={init:!1,get:!1,set:!1};a[s]=!0}};Kt.parseExpression=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(e,t);if(this.type===B.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(B.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return r};Kt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;t?(r=t.parenthesizedAssign,s=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new gw,i=!0);var o=this.start,l=this.startLoc;(this.type===B.parenL||this.type===B.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,o,l)),this.type.isAssign){var c=this.startNodeAt(o,l);return c.operator=this.value,this.type===B.eq&&(u=this.toAssignable(u,!1,t)),i||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===B.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(c,"AssignmentExpression")}else i&&this.checkExpressionErrors(t,!0);return r>-1&&(t.parenthesizedAssign=r),s>-1&&(t.trailingComma=s),u};Kt.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return r;if(this.eat(B.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(B.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return r};Kt.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||r.start===n&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,n,i,-1,e)};Kt.parseExprOp=function(e,t,n,i,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==B._in)&&s>i){var a=this.type===B.logicalOR||this.type===B.logicalAND,o=this.type===B.coalesce;o&&(s=B.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),u,c,s,r),d=this.buildBinary(t,n,e,f,l,a||o);return(a&&this.type===B.coalesce||o&&(this.type===B.logicalOR||this.type===B.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,i,r)}return e};Kt.buildBinary=function(e,t,n,i,r,s){i.type==="PrivateIdentifier"&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};Kt.parseMaybeUnary=function(e,t,n,i){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(i),t=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===B.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,i),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&o.argument.type==="Identifier"?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&PV(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===B.privateId)(i||this.privateNameStack.length===0)&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==B._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,i),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(r,s);u.operator=this.value,u.prefix=!1,u.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(B.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,i),"**",!1);else return a};function PV(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&PV(e.expression)}Kt.parseExprSubscripts=function(e,t){var n=this.start,i=this.startLoc,r=this.parseExprAtom(e,t);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,n,i,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kt.parseSubscripts=function(e,t,n,i,r){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,i,s,a,r);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var l=this.startNodeAt(t,n);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}e=o}};Kt.parseSubscript=function(e,t,n,i,r,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(B.questionDot);i&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(B.bracketL);if(u||l&&this.type!==B.parenL&&this.type!==B.backQuote||this.eat(B.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(B.bracketR)):this.type===B.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!u,o&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!i&&this.eat(B.parenL)){var f=new gw,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(B.parenR,this.options.ecmaVersion>=8,!1,f);if(r&&!l&&!this.canInsertSemicolon()&&this.eat(B.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(t,n),g,!0,a);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var m=this.startNodeAt(t,n);m.callee=e,m.arguments=g,o&&(m.optional=l),e=this.finishNode(m,"CallExpression")}else if(this.type===B.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kt.parseExprAtom=function(e,t){this.type===B.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case B._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===B.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==B.dot&&this.type!==B.bracketL&&this.type!==B.parenL&&this.unexpected(),this.finishNode(n,"Super");case B._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case B.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(B._function))return this.overrideContext(ti.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(B.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,t);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===B.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(B.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,t)}return o;case B.regexp:var l=this.value;return n=this.parseLiteral(l.value),n.regex={pattern:l.pattern,flags:l.flags},n;case B.num:case B.string:return this.parseLiteral(this.value);case B._null:case B._true:case B._false:return n=this.startNode(),n.value=this.type===B._null?null:this.type===B._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case B.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case B.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(B.bracketR,!0,!0,e),this.finishNode(n,"ArrayExpression");case B.braceL:return this.overrideContext(ti.b_expr),this.parseObj(!1,e);case B._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case B._class:return this.parseClass(this.startNode(),!1);case B._new:return this.parseNew();case B.backQuote:return this.parseTemplate();case B._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};Kt.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case B.parenL:return this.parseDynamicImport(e);case B.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};Kt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(B.parenR)){var t=this.start;this.eat(B.comma)&&this.eat(B.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kt.parseParenExpression=function(){this.expect(B.parenL);var e=this.parseExpression();return this.expect(B.parenR),e};Kt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,i=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,l=[],u=!0,c=!1,f=new gw,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==B.parenR;)if(u?u=!1:this.expect(B.comma),s&&this.afterTrailingComma(B.parenR,!0)){c=!0;break}else if(this.type===B.ellipsis){p=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===B.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var g=this.lastTokEnd,m=this.lastTokEndLoc;if(this.expect(B.parenR),e&&!this.canInsertSemicolon()&&this.eat(B.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,i,l,t);(!l.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,l.length>1?(r=this.startNodeAt(a,o),r.expressions=l,this.finishNodeAt(r,"SequenceExpression",g,m)):r=l[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,i);return y.expression=r,this.finishNode(y,"ParenthesizedExpression")}else return r};Kt.parseParenItem=function(e){return e};Kt.parseParenArrowList=function(e,t,n,i){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,i)};var gue=[];Kt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(B.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===B._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&e.callee.type==="ImportExpression"&&this.raise(i,"Cannot use new with import()"),this.eat(B.parenL)?e.arguments=this.parseExprList(B.parenR,this.options.ecmaVersion>=8,!1):e.arguments=gue,this.finishNode(e,"NewExpression")};Kt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===B.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===B.backQuote,this.finishNode(n,"TemplateElement")};Kt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:t});for(n.quasis=[i];!i.tail;)this.type===B.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(B.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(B.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===B.name||this.type===B.num||this.type===B.string||this.type===B.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===B.star)&&!Ta.test(this.input.slice(this.lastTokEnd,this.start))};Kt.parseObj=function(e,t){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(B.braceR);){if(i)i=!1;else if(this.expect(B.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(B.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,r,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kt.parseProperty=function(e,t){var n=this.startNode(),i,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(B.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===B.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(this.type===B.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),n.argument=this.parseMaybeAssign(!1,t),this.type===B.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,a=this.startLoc),e||(i=this.eat(B.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(B.star),this.parsePropertyName(n,t)):r=!1,this.parsePropertyValue(n,e,i,r,s,a,t,o),this.finishNode(n,"Property")};Kt.parsePropertyValue=function(e,t,n,i,r,s,a,o){if((n||i)&&this.type===B.colon&&this.unexpected(),this.eat(B.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===B.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,i);else if(!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==B.comma&&this.type!==B.braceR&&this.type!==B.eq){(n||i)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l=e.kind==="get"?0:1;if(e.value.params.length!==l){var u=e.value.start;e.kind==="get"?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||i)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),e.kind="init",t?e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key)):this.type===B.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(B.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(B.bracketR),e.key;e.computed=!1}return e.key=this.type===B.num||this.type===B.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kt.parseMethod=function(e,t,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(gk(t,i.generator)|hk|(n?DV:0)),this.expect(B.parenL),i.params=this.parseBindingList(B.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")};Kt.parseArrowExpression=function(e,t,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(gk(n,!1)|kV),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};Kt.parseFunctionBody=function(e,t,n,i){var r=t&&this.type!==B.braceL,s=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(i),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!s&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,NV),e.body=this.parseBlock(!1,void 0,a&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()};Kt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var i=n[t];if(i.type!=="Identifier")return!1}return!0};Kt.checkParams=function(e,t){for(var n=Object.create(null),i=0,r=e.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,mk,t?null:n)}};Kt.parseExprList=function(e,t,n,i){for(var r=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(B.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===B.comma?a=null:this.type===B.ellipsis?(a=this.parseSpread(i),i&&this.type===B.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r};Kt.checkUnreserved=function(e){var t=e.start,n=e.end,i=e.name;if(this.inGenerator&&i==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&i==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(i==="arguments"||i==="await")&&this.raise(t,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(t,"Unexpected keyword '"+i+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(i)&&(!this.inAsync&&i==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+i+"' is reserved"))}};Kt.parseIdent=function(e,t){var n=this.startNode();return this.type===B.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,(n.name==="class"||n.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),n.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=n.start)),n};Kt.parsePrivateIdent=function(){var e=this.startNode();return this.type===B.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e),e};Kt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===B.semi||this.canInsertSemicolon()||this.type!==B.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(B.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var e_=Ui.prototype;e_.raise=function(e,t){var n=xV(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i};e_.raiseRecoverable=e_.raise;e_.curPosition=function(){if(this.options.locations)return new H0(this.curLine,this.pos-this.lineStart)};var hf=Ui.prototype,mue=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};hf.enterScope=function(e){this.scopeStack.push(new mue(e))};hf.exitScope=function(){this.scopeStack.pop()};hf.treatFunctionsAsVarInScope=function(e){return e.flags&Pg||!this.inModule&&e.flags&W0};hf.declareName=function(e,t,n){var i=!1;if(t===uu){var r=this.currentScope();i=r.lexical.indexOf(e)>-1||r.functions.indexOf(e)>-1||r.var.indexOf(e)>-1,r.lexical.push(e),this.inModule&&r.flags&W0&&delete this.undefinedExports[e]}else if(t===LV){var s=this.currentScope();s.lexical.push(e)}else if(t===RV){var a=this.currentScope();this.treatFunctionsAsVar?i=a.lexical.indexOf(e)>-1:i=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var l=this.scopeStack[o];if(l.lexical.indexOf(e)>-1&&!(l.flags&MV&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){i=!0;break}if(l.var.push(e),this.inModule&&l.flags&W0&&delete this.undefinedExports[e],l.flags&pk)break}i&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};hf.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};hf.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};hf.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&pk)return t}};hf.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&pk&&!(t.flags&kV))return t}};var mw=function(t,n,i){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new pw(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},j1=Ui.prototype;j1.startNode=function(){return new mw(this,this.start,this.startLoc)};j1.startNodeAt=function(e,t){return new mw(this,e,t)};function BV(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}j1.finishNode=function(e,t){return BV.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};j1.finishNodeAt=function(e,t,n,i){return BV.call(this,e,t,n,i)};j1.copyNode=function(e){var t=new mw(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var jV="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",UV=jV+" Extended_Pictographic",zV=UV,VV=zV+" EBase EComp EMod EPres ExtPict",yue=VV,bue={9:jV,10:UV,11:zV,12:VV,13:yue},v4="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",$V="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",HV=$V+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",WV=HV+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qV=WV+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",vue=qV+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",_ue={9:$V,10:HV,11:WV,12:qV,13:vue},GV={};function wue(e){var t=GV[e]={binary:dd(bue[e]+" "+v4),nonBinary:{General_Category:dd(v4),Script:dd(_ue[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var mA=0,_4=[9,10,11,12,13];mA<_4.length;mA+=1){var Sue=_4[mA];wue(Sue)}var gt=Ui.prototype,Tu=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=GV[t.options.ecmaVersion>=13?13:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Tu.prototype.reset=function(t,n,i){var r=i.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9};Tu.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Tu.prototype.at=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var a=i.charCodeAt(t+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};Tu.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var i=this.source,r=i.length;if(t>=r)return r;var s=i.charCodeAt(t),a;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=r||(a=i.charCodeAt(t+1))<56320||a>57343?t+1:t+2};Tu.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Tu.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Tu.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Tu.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};gt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,i=0;i<n.length;i++){var r=n.charAt(i);t.indexOf(r)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};gt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};gt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var i=n[t];e.groupNames.indexOf(i)===-1&&e.raise("Invalid named capture referenced")}};gt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};gt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};gt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};gt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};gt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};gt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};gt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue),e.eat(125)))return r!==-1&&r<i&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};gt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};gt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};gt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};gt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};gt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};gt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};gt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return YV(t)?(e.lastIntValue=t,e.advance(),!0):!1};function YV(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}gt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!YV(n);)e.advance();return e.pos!==t};gt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};gt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};gt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};gt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Pc(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Pc(e.lastIntValue);return!0}return!1};gt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),Eue(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function Eue(e){return wu(e,!0)||e===36||e===95}gt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,i=e.current(n);return e.advance(n),i===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(i=e.lastIntValue),Aue(i)?(e.lastIntValue=i,!0):(e.pos=t,!1)};function Aue(e){return qp(e,!0)||e===36||e===95||e===8204||e===8205}gt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};gt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};gt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};gt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};gt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};gt.regexp_eatZero=function(e){return e.current()===48&&!yw(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};gt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};gt.regexp_eatControlLetter=function(e){var t=e.current();return XV(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function XV(e){return e>=65&&e<=90||e>=97&&e<=122}gt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,i=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(i&&r>=55296&&r<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}e.pos=s,e.lastIntValue=r}return!0}if(i&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&Oue(e.lastIntValue))return!0;i&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function Oue(e){return e>=0&&e<=1114111}gt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};gt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};gt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Cue(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function Cue(e){return e===100||e===68||e===115||e===83||e===119||e===87}gt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,i),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,r),!0}return!1};gt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){P1(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};gt.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};gt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";KV(t=e.current());)e.lastStringValue+=Pc(t),e.advance();return e.lastStringValue!==""};function KV(e){return XV(e)||e===95}gt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Iue(t=e.current());)e.lastStringValue+=Pc(t),e.advance();return e.lastStringValue!==""};function Iue(e){return KV(e)||yw(e)}gt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};gt.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};gt.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};gt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||ZV(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var i=e.current();return i!==93?(e.lastIntValue=i,e.advance(),!0):!1};gt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};gt.regexp_eatClassControlLetter=function(e){var t=e.current();return yw(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};gt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};gt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;yw(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function yw(e){return e>=48&&e<=57}gt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;JV(n=e.current());)e.lastIntValue=16*e.lastIntValue+QV(n),e.advance();return e.pos!==t};function JV(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function QV(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}gt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};gt.regexp_eatOctalDigit=function(e){var t=e.current();return ZV(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function ZV(e){return e>=48&&e<=55}gt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var i=0;i<t;++i){var r=e.current();if(!JV(r))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+QV(r),e.advance()}return!0};var bk=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new pw(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},rn=Ui.prototype;rn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new bk(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};rn.getToken=function(){return this.next(),new bk(this)};typeof Symbol<"u"&&(rn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===B.eof,value:t}}}});rn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(B.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};rn.readToken=function(e){return wu(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};rn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};rn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=t;(i=OV(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};rn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Fg(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};rn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&CV.test(String.fromCharCode(e)))++this.pos;else break e}}};rn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};rn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(B.ellipsis)):(++this.pos,this.finishToken(B.dot))};rn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(B.assign,2):this.finishOp(B.slash,1)};rn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=e===42?B.star:B.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,i=B.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(B.assign,n+1):this.finishOp(i,n)};rn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(B.assign,3)}return this.finishOp(e===124?B.logicalOR:B.logicalAND,2)}return t===61?this.finishOp(B.assign,2):this.finishOp(e===124?B.bitwiseOR:B.bitwiseAND,1)};rn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(B.assign,2):this.finishOp(B.bitwiseXOR,1)};rn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ta.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(B.incDec,2):t===61?this.finishOp(B.assign,2):this.finishOp(B.plusMin,1)};rn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(B.assign,n+1):this.finishOp(B.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(B.relational,n))};rn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(B.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(B.arrow)):this.finishOp(e===61?B.eq:B.prefix,1)};rn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(B.questionDot,2)}if(t===63){if(e>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(B.assign,3)}return this.finishOp(B.coalesce,2)}}return this.finishOp(B.question,1)};rn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),wu(t,!0)||t===92))return this.finishToken(B.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Pc(t)+"'")};rn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(B.parenL);case 41:return++this.pos,this.finishToken(B.parenR);case 59:return++this.pos,this.finishToken(B.semi);case 44:return++this.pos,this.finishToken(B.comma);case 91:return++this.pos,this.finishToken(B.bracketL);case 93:return++this.pos,this.finishToken(B.bracketR);case 123:return++this.pos,this.finishToken(B.braceL);case 125:return++this.pos,this.finishToken(B.braceR);case 58:return++this.pos,this.finishToken(B.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(B.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(B.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Pc(e)+"'")};rn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};rn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Ta.test(i)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(i==="[")t=!0;else if(i==="]"&&t)t=!1;else if(i==="/"&&!t)break;e=i==="\\"}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Tu(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(r,a)}catch{}return this.finishToken(B.regexp,{pattern:r,flags:a,value:l})};rn.readInt=function(e,t,n){for(var i=this.options.ecmaVersion>=12&&t===void 0,r=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,l=0,u=t??1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(i&&c===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;o=c,a=a*e+f}return i&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:a};function xue(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function e$(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}rn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=e$(this.input.slice(t,this.pos)),++this.pos):wu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(B.num,n)};rn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&i===110){var r=e$(this.input.slice(t,this.pos));return++this.pos,wu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(B.num,r)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),i===46&&!n&&(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),(i===69||i===101)&&!n&&(i=this.input.charCodeAt(++this.pos),(i===43||i===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),wu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=xue(this.input.slice(t,this.pos),n);return this.finishToken(B.num,s)};rn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};rn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;i===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):i===8232||i===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Fg(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(B.string,t)};var t$={};rn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===t$)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};rn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw t$;this.raise(e,t)};rn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===B.template||this.type===B.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(B.dollarBraceL)):(++this.pos,this.finishToken(B.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(B.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Fg(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};rn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(B.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};rn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Pc(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,t=this.input.charCodeAt(this.pos),(i!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-i.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Fg(t)?"":String.fromCharCode(t)}};rn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};rn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(qp(r,i))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?wu:qp)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Pc(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};rn.readWord=function(){var e=this.readWord1(),t=B.name;return this.keywords.test(e)&&(t=fk[e]),this.finishToken(t,e)};var Tue="8.7.1";Ui.acorn={Parser:Ui,version:Tue,defaultOptions:SC,Position:H0,SourceLocation:pw,getLineInfo:xV,Node:mw,TokenType:pn,tokTypes:B,keywordTypes:fk,TokContext:Ra,tokContexts:ti,isIdentifierChar:qp,isIdentifierStart:wu,Token:bk,isNewLine:Fg,lineBreak:Ta,lineBreakG:sue,nonASCIIwhitespace:CV};function kue(e,t){return Ui.parse(e,t)}var vk={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const Mue={ecmaVersion:11},w4="$",Due="d",Rue="d1",Lue="d2",er=e=>(t,n)=>n.error(t,e+" not allowed"),Nue=er("Aggregate function"),Fue=er("Window function"),Pue="Invalid argument",_k="Invalid column reference",Bue=_k+" (must be input to an aggregate function)",n$="Invalid function call",jue="Invalid member expression",Uue="Invalid operator parameter",zue="Invalid param reference",Vue="Invalid variable reference",$ue="Variable not accessible in operator call",Hue="Unsupported variable declaration",Wue="Unsupported destructuring pattern",i$="Table expressions do not support closures",r$="Use aq.escape(fn) to use a function as-is (including closures)",que="use table.params({ name: value }) to define dynamic parameters",Gue="use aq.addFunction(name, fn) to add new op functions",Yue=`
Note: ${i$}. ${r$}, or ${que}.`,s$=`
Note: ${i$}. ${r$}, or ${Gue}.`,Xue=`The ${aU} method is not valid in multi-table expressions.`;function Kue(e,t){const n=Jue(t);let i=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Xle(i)?(Zue(i,e),i=i.body):e.join?(e.scope.add(e.tuple1=Rue),e.scope.add(e.tuple2=Lue),e.scope.add(e.$param=w4)):(e.scope.add(e.tuple=Due),e.scope.add(e.$param=w4)),gn(i,e,a$),e.root}function Jue(e){try{const t=e.field?Que(e):_n(e)?_a(e):e;return kue(`expr=(${t})`,Mue).body[0].expression.right}catch{zt(`Expression parse error: ${e+""}`)}}function Que(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const a$={FunctionDeclaration:er("Function definitions"),ForStatement:er("For loops"),ForOfStatement:er("For-of loops"),ForInStatement:er("For-in loops"),WhileStatement:er("While loops"),DoWhileStatement:er("Do-while loops"),AwaitExpression:er("Await expressions"),ArrowFunctionExpression:er("Function definitions"),AssignmentExpression:er("Assignments"),FunctionExpression:er("Function definitions"),NewExpression:er('Use of "new"'),UpdateExpression:er("Update expressions"),VariableDeclarator(e,t){CC(e.id,t)},Identifier(e,t,n){u$(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Vue,Yue)},CallExpression(e,t){const n=o$(e.callee),i=iU(n)||rU(n);if(i){if((t.join||t.aggregate===!1)&&oT(i)&&Nue(e,t),(t.join||t.window===!1)&&lT(i)&&Fue(e,t),t.$op=1,t.ast)OC(e,n,t),e.arguments.forEach(r=>gn(r,t,AC));else{const r=t.op(ece(t,i,n,e.arguments));Object.assign(e,{type:Qj,name:r.id})}return t.$op=0,!1}else nU(n)?OC(e,n,t):t.error(e,n$,s$)},MemberExpression(e,t,n){const{object:i,property:r}=e;if(!Ni(bc,i))return;const{name:s}=i;if(l$(e)&&Ni(bc,r)&&co(vk,r.name)){d$(e,r.name);return}const a=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(a>=0)return S4(e,a,t,c$,n);if(s===t.$param)return S4(e,a,t,nce);t.paramsRef.has(s)?q0(e,t.paramsRef.get(s)):t.columnRef.has(s)?f$(i,s,t,e):co(t.params,s)&&q0(i,s)}};function S4(e,t,n,i,r){const{property:s,computed:a}=e;let o;if(!a)o=s.name;else if(Ni(Mg,s))o=s.value;else try{o=n.param(s)}catch{n.error(e,jue)}return i(e,o,t,n,r),!1}const AC={...a$,VariableDeclarator:er("Variable declaration in operator call"),Identifier(e,t,n){u$(e,t,n)&&t.error(e,$ue)},CallExpression(e,t){const n=o$(e.callee);nU(n)?OC(e,n,t):t.error(e,n$,s$)}};function Zue(e,t){e.generator&&er("Generator functions")(e,t),e.async&&er("Async functions")(e,t);const{params:n}=e,i=n.length,r=a=>(o,l)=>t.columnRef.set(o,[l,a]),s=(a,o)=>t.paramsRef.set(a,o);i&&(t.join?(vm(t,n[0],"tuple1",r(1)),i>1&&vm(t,n[1],"tuple2",r(2)),i>2&&vm(t,n[2],"$param",s)):(vm(t,n[0],"tuple",r(0)),i>1&&vm(t,n[1],"$param",s))),t.root=e.body}function vm(e,t,n,i){Ni(bc,t)?(e.scope.add(t.name),e[n]=t.name):Ni(Kj,t)&&t.properties.forEach(r=>{const s=Ni(bc,r.key)?r.key.name:Ni(Mg,r.key)?r.key.value:e.error(r,Pue);Ni(bc,r.value)||e.error(r.value,Wue),i(r.value.name,s)})}function ece(e,t,n,i){const r=[],s=[],a=t.param[0]||0,o=a+(t.param[1]||0);return i.forEach((l,u)=>{u<a?(gn(l,e,AC),r.push(e.field(l))):u<o?(gn(l,e,AC),s.push(e.param(l))):e.error(l,Uue)}),{name:n,fields:r,params:s,...e.spec.window||{}}}function o$(e){return Ni(bc,e)?e.name:Ni(Xj,e)?l$(e)?tce(e.property.name):e.property.name:null}function l$(e){return Ni(bc,e.object)&&e.object.name==="Math"}function tce(e){return e==="max"?"greatest":e==="min"?"least":e}function u$(e,t,n){const{name:i}=e;if(!(Ni(Xj,n)&&n.property===e)){if(!(Ni(Jj,n)&&n.key===e))if(t.paramsRef.has(i))q0(e,t.paramsRef.get(i));else if(t.columnRef.has(i))f$(e,i,t,n);else if(co(t.params,i))q0(e,i);else if(co(vk,i))d$(e,i);else return!0}}function c$(e,t,n,i,r){const s=n===0?i.table:n>0?i.join[n-1]:null,a=s&&s.column(t);s&&!a&&i.error(e,_k),i.aggronly&&!i.$op&&i.error(e,Bue),sU(e,t,n,a,r)}function f$(e,t,n,i){const[r,s]=n.columnRef.get(t);c$(e,r,s,n,i)}function nce(e,t,n,i){i.params&&!co(i.params,t)&&i.error(e,zue),q0(e,t)}function q0(e,t){e.type=Ure,e.name=t}function d$(e,t){e.type=Pre,e.name=t,e.raw=vk[t]}function OC(e,t,n){if(t===aU){const i=n.table;i||n.error(e,Xue),oU(e,e.arguments.length?e.arguments.map(r=>{const s=n.param(r),a=qr(s)?i.columnName(s):s;return i.column(a)||n.error(r,_k),a}):i.columnNames())}else e.callee={type:jre,name:t}}function CC(e,t){Ni(bc,e)?t.scope.add(e.name):Ni(Rre,e)?e.elements.forEach(n=>CC(n,t)):Ni(Kj,e)?e.properties.forEach(n=>CC(n.value,t)):t.error(e.id,Hue)}const ice={[k1]:1,[Qj]:1};function ws(e,t={}){const n=t.generate||xv,i=t.compiler||uT,r=sce(t),s={},a={},o=[],l=[];let u=0,c=-1;const f=t.join?i.join:t.index==1?i.expr2:i.expr,d={op(g){const m=rce(g);return a[m]||(g.id=++c,a[m]=g)},field(g){const m=n(g);return s[m]||(s[m]=++u)},param(g){return Ni(Mg,g)?g.value:i.param(n(g),r)},value(g,m){o.push(g);const y=m.escape||(t.ast?Yle(m):f(n(m),r));l.push(y),ice[m.type]&&y!==m&&ar(y)&&(y.field=m.name)},error(g,m,y=""){const b=g.start-6,v=g.end-6,_=String(d.spec).slice(b,v);zt(`${m}: "${_}"${y}`)}};Object.assign(d,t,{params:r});for(const[g,m]of Q2(e))d.value(g+"",m.escape?Qle(d,m,r):Kue(d,m));if(t.ast)return{names:o,exprs:l};const h=[];for(const g in s)h[s[g]]=i.expr(g,r);const p=Object.values(a);return p.forEach(g=>g.fields=g.fields.map(m=>h[m])),{names:o,exprs:l,ops:p}}function rce(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;return e.frame&&(t+=`[${e.frame.map(i=>Number.isFinite(i)?Math.abs(i):-1)},${!!e.peers}]`),t}function sce(e){return(e.table?yA(e.table):e.join?{...yA(e.join[1]),...yA(e.join[0])}:{})||{}}function yA(e){return e&&Qn(e.params)?e.params():{}}const h$="Expr",La="ExprList",p$="ExprNumber",Gm="ExprObject",np="JoinKeys",t_="JoinValues",oa="Options",wk="OrderKeys",Wu="SelectionList",Zf="TableRef",ip="TableRefList",ace="Descending",oce="Query",lce="Selection",uce="Verb",cce="Window";function bw(e,t){return e&&e.expr?new E4({...e,...t}):new E4(t,e)}class E4{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Qn(this.expr)?{func:!0}:{}}}}function fce(e){return bw(e,{desc:!0})}function Pd(e,t,n=0){const i=n?{field:!0,table:n}:{field:!0};return bw(e,t?{expr:t,...i}:i)}function dce(e,t,n){return bw(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function hce(e){const t=n=>n;return t.toString=()=>e,t}function A4(e,t){return t=t&&Qn(t.query)?t.query():t,t&&Qn(t.evaluate)?t.evaluate(null,e):e(t)}function g$(e){return ar(e)&&(_n(e.all)||_n(e.matches)||_n(e.not)||_n(e.range))}function G0(e){return e&&Qn(e.toObject)?e.toObject():Qn(e)?{expr:String(e),func:!0}:_n(e)?e.map(G0):ar(e)?dw(e,t=>G0(t)):e}function Sk(e){return _n(e)?e.map(Sk):ar(e)?_n(e.verbs)?U1.from(e):_n(e.all)?Fd():_n(e.range)?$le(...e.range):_n(e.match)?Hle(RegExp(...e.match)):_n(e.not)?wV(e.not.map(G0)):pce(e):e}function pce(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Pd(n):e.func===!0&&(t=n=hce(n)),ar(e.window)){const{frame:i,peers:r}=e.window;t=n=dce(n,i,r)}e.desc===!0&&(t=fce(n))}return e===t?dw(e,i=>Sk(i)):t}function gce(e){return _n(e)?e.map(mce):e}function mce(e){const t=[];return bs(e).forEach(n=>{qr(n)?t.push(n):ji(n)?t.push(Pd(n,null)):ar(n)&&n.expr||Qn(n)?t.push(n):zt(`Invalid key value: ${n+""}`)}),t}function yce(e){return _n(e)?e.map(bce):e}function bce(e,t){return t<2?bs(e):e}function vce(e){const t=[];return e.forEach(n=>{const i=n.expr!=null?n.expr:n;if(ar(i)&&!Qn(i))for(const r in i)t.push(i[r]);else n=qr(i)?i:ji(i)?Pd(n):Qn(i)?n:zt(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const _ce={[h$]:v$,[La]:Gp,[p$]:Cce,[Gm]:Bc,[np]:Ice,[t_]:xce,[wk]:Gp,[Wu]:Ace};function wce(e,t,n){return t===Zf?O4(e):t===ip?e.map(O4):m$(G0(e),t,n)}function m$(e,t,n){return t===oa?e&&Sce(e,n):_ce[t](e)}function Sce(e,t={}){const n={};for(const i in e){const r=e[i];n[i]=t[i]?m$(r,t[i]):r}return n}function Ece(e,t){return ws({expr:e},{...t,ast:!0}).exprs[0]}function Ek(e){return{type:k1,name:e}}function y$(e){return{type:k1,index:e}}function Bc(e,t){if(ji(e))return Ece(e,t);if(e.expr){let n;if(e.field===!0?n=Ek(e.expr):e.func===!0&&(n=Bc(e.expr,t)),n)return e.desc&&(n={type:ace,expr:n}),e.window&&(n={type:cce,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Bc(e[n],t),as:n}))}function b$(e){const t=lce;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Gp(e.not)}:e.range?{type:t,operator:"range",arguments:Gp(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:zt("Invalid input")}function Ace(e){return bs(e).map(Oce).flat()}function Oce(e){return g$(e)?b$(e):qr(e)?y$(e):ji(e)?Ek(e):ar(e)?Object.keys(e).map(t=>({type:k1,name:t,as:e[t]})):zt("Invalid input")}function v$(e){return g$(e)?b$(e):qr(e)?y$(e):ji(e)?Ek(e):ar(e)?Bc(e):zt("Invalid input")}function Gp(e){return bs(e).map(v$).flat()}function Cce(e){return qr(e)?e:Bc(e)}function Ice(e){return _n(e)?e.map(Gp):Bc(e,{join:!0})}function xce(e){return _n(e)?e.map((t,n)=>n<2?Gp(t):Bc(t,{join:!0})):Bc(e,{join:!0})}function O4(e){return e&&Qn(e.toAST)?e.toAST():e}class _${constructor(t,n=[],i=[]){this.verb=t,this.schema=n,n.forEach((r,s)=>{const a=r.type,o=i[s],l=a===np?gce(o):a===t_?yce(o):a===wk?vce(o):o;this[r.name]=l!==void 0?l:r.default})}static from(t){const n=IC[t.verb],i=(n.schema||[]).map(({name:r})=>Sk(t[r]));return n(...i)}evaluate(t,n){const i=this.schema.map(({name:r,type:s})=>{const a=this[r];return s===Zf?A4(n,a):s===ip?a.map(o=>A4(n,o)):a});return t[this.verb](...i)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=G0(this[n])}),t}toAST(){const t={type:uce,verb:this.verb};return this.schema.forEach(({name:n,type:i,props:r})=>{t[n]=wce(this[n],i,r)}),t}}function Pn(e,t){return Object.assign((...n)=>new _$(e,t,n),{schema:t})}const IC={count:Pn("count",[{name:"options",type:oa}]),derive:Pn("derive",[{name:"values",type:Gm},{name:"options",type:oa,props:{before:Wu,after:Wu}}]),filter:Pn("filter",[{name:"criteria",type:Gm}]),groupby:Pn("groupby",[{name:"keys",type:La}]),orderby:Pn("orderby",[{name:"keys",type:wk}]),relocate:Pn("relocate",[{name:"columns",type:Wu},{name:"options",type:oa,props:{before:Wu,after:Wu}}]),rename:Pn("rename",[{name:"columns",type:Wu}]),rollup:Pn("rollup",[{name:"values",type:Gm}]),sample:Pn("sample",[{name:"size",type:p$},{name:"options",type:oa,props:{weight:h$}}]),select:Pn("select",[{name:"columns",type:Wu}]),ungroup:Pn("ungroup"),unorder:Pn("unorder"),reify:Pn("reify"),dedupe:Pn("dedupe",[{name:"keys",type:La,default:[]}]),impute:Pn("impute",[{name:"values",type:Gm},{name:"options",type:oa,props:{expand:La}}]),fold:Pn("fold",[{name:"values",type:La},{name:"options",type:oa}]),pivot:Pn("pivot",[{name:"keys",type:La},{name:"values",type:La},{name:"options",type:oa}]),spread:Pn("spread",[{name:"values",type:La},{name:"options",type:oa}]),unroll:Pn("unroll",[{name:"values",type:La},{name:"options",type:oa,props:{drop:La}}]),lookup:Pn("lookup",[{name:"table",type:Zf},{name:"on",type:np},{name:"values",type:La}]),join:Pn("join",[{name:"table",type:Zf},{name:"on",type:np},{name:"values",type:t_},{name:"options",type:oa}]),cross:Pn("cross",[{name:"table",type:Zf},{name:"values",type:t_},{name:"options",type:oa}]),semijoin:Pn("semijoin",[{name:"table",type:Zf},{name:"on",type:np}]),antijoin:Pn("antijoin",[{name:"table",type:Zf},{name:"on",type:np}]),concat:Pn("concat",[{name:"tables",type:ip}]),union:Pn("union",[{name:"tables",type:ip}]),intersect:Pn("intersect",[{name:"tables",type:ip}]),except:Pn("except",[{name:"tables",type:ip}])};class U1 extends Lj{constructor(t,n,i){super(n),this._verbs=t||[],this._table=i}static from({verbs:t,table:n,params:i}){return new U1(t.map(_$.from),i,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const i of this._verbs)t=i.evaluate(t.params(this._params),n);return t}toObject(){return C4(this,"toObject")}toJSON(){return this.toObject()}toAST(){return C4(this,"toAST",{type:oce})}}function C4(e,t,n){return{...n,verbs:e._verbs.map(i=>i[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Tce(e,t){return new U1(e._verbs.concat(t),e._params,e._table)}for(const e in IC){const t=IC[e];U1.prototype["__"+e]=function(n,...i){return Tce(n,t(...i))}}function kce(e){const{data:t,length:n,nullCount:i}=e,r=t[t.length-1].dictionary,s=r.length,a=Mce(t||[e],n,i,s),o=Array(s),l=u=>u==null||u<0||u>=s?null:o[u]!==void 0?o[u]:o[u]=r.get(u);return{vector:e,length:n,get:u=>l(a[u]),key:u=>a[u],keyFor(u){if(u===null)return i?s:-1;for(let c=0;c<s;++c)if(o[c]===void 0&&(o[c]=r.get(c)),o[c]===u)return c;return-1},groups(u){const c=s+(i?1:0);return{keys:a,get:[l],names:u,rows:zj(0,c),size:c}},[Symbol.iterator](){return e[Symbol.iterator]()}}}function Mce(e,t,n,i){const r=e.length>1||n?Dce(e,t,e[0].type.indices):e[0].values;return n?Rce(e,r,i):r}function Dce(e,t,n){const i=new n.ArrayType(t),r=e.length;for(let s=0,a=0,o;s<r;++s)o=e[s].length,i.set(e[s].values.subarray(0,o),a),a+=o;return i}function Rce(e,t,n){const i=e.length;for(let r=0,s=0,a,o,l,u;r<i;++r){if(l=e[r].nullBitmap,a=e[r].length>>3,l&&l.length)for(let c=0;c<=a;++c)(u=l[c])!==255&&(o=s+(c<<3),(u&1<<0)===0&&(t[o+0]=n),(u&1<<1)===0&&(t[o+1]=n),(u&1<<2)===0&&(t[o+2]=n),(u&1<<3)===0&&(t[o+3]=n),(u&1<<4)===0&&(t[o+4]=n),(u&1<<5)===0&&(t[o+5]=n),(u&1<<6)===0&&(t[o+6]=n),(u&1<<7)===0&&(t[o+7]=n));s+=e[r].length}return t}function fh(e,t,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map((s,a)=>s.map((o,l)=>`${i[a]}${l} = ${i[a]}[${l}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...r)(...n)}const Lce=({typeId:e})=>e===-1,Nce=({typeId:e})=>e===5,Fce=({typeId:e})=>e===12,Pce=({typeId:e})=>e===13,Bce=({typeId:e})=>e===16,jce=e=>Fce(e)||Bce(e);function w$(e,t){const{type:n,length:i,numChildren:r}=e;if(Lce(n))return kce(e);const s=r&&t?xC(e):r?I4(xC(e)):Nce(n)?I4(a=>e.get(a)):null;return s?{vector:e,length:i,get:s,[Symbol.iterator]:()=>Uce(i,s)}:e}function I4(e){const t=[];return n=>{const i=t[n];return i!==void 0?i:t[n]=e(n)}}function*Uce(e,t){for(let n=0;n<e;++n)yield t(n)}const x4=e=>e.numChildren?x1(e.length,xC(e)):e.nullCount?[...e]:e.toArray(),xC=e=>jce(e.type)?zce(e):Pce(e.type)?Vce(e):zt(`Unsupported Arrow type: ${_a(e.VectorName)}`),zce=e=>e.nullCount?t=>e.isValid(t)?x4(e.get(t)):null:t=>x4(e.get(t));function Vce(e){const t=[],n=[];e.type.children.forEach((r,s)=>{t.push(w$(e.getChildAt(s),!0)),n.push(`${_a(r.name)}:_${s}.get(row)`)});const i=fh("row","({"+n+"})",t);return e.nullCount?r=>e.isValid(r)?i(r):null:i}function T4(e,t={}){e&&!e.batches&&(e=Tle()(e));const n=e.schema.fields.map(s=>s.name),i=gl({columnNames:s=>s?n.filter(s):n.slice(),columnIndex:s=>n.indexOf(s)},t.columns||Fd()),r=ks();return i.forEach((s,a)=>{r.add(s,w$(e.getChild(a)))}),new Ha(r.data,r.names)}function $ce(e){const t=e.length;for(let n=0;n<t;++n){const i=e.charCodeAt(n);if(i<48||i>57)return!1}return!0}function Hce(e,t={}){const n=bV(t.autoType);ji(e)&&(e=JSON.parse(e));let i=e.data,r;if(ar(i)&&!oc(i)?e.schema&&e.schema.fields&&(r=e.schema.fields.map(s=>s.name)):i=e,n||t.parse){const s=t.parse||{};for(const a in i){const o=i[a],l=o.length;if(s[a])for(let u=0;u<l;++u)o[u]=s[a](o[u]);else if(n)for(let u=0;u<l;++u){const c=o[u];ji(c)&&Pj(c)&&!$ce(c)&&(o[u]=new Date(c))}}}return new Ha(i,r)}function Wce(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function Ak(e,t){const n=ks();return t.forEach((i,r)=>{const s=ji(i)?i:r;if(s){const a=e.column(r)||zt(`Unrecognized column: ${r}`);n.add(s,a)}}),e.create(n)}function S$(e,t,{before:n,after:i}={}){const r=n!=null,s=i!=null;r||s||zt("relocate requires a before or after option."),r&&s&&zt("relocate accepts only one of the before or after options."),t=gl(e,t);const a=[...gl(e,r?n:i).keys()],o=r?a[0]:a.pop(),l=new Map;return e.columnNames().forEach(u=>{const c=!t.has(u);if(u===o){s&&c&&l.set(u,u);for(const[f,d]of t)l.set(f,d);if(s)return}c&&l.set(u,u)}),Ak(e,l)}function z1(e,t=i=>i,n=""){const i=e.length;if(!i)return"";let r=t(e[0],0);for(let s=1;s<i;++s)r+=n+t(e[s],s);return r}function Ok(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qce(e,t=0,n=e.length){let i=n?e[t++]:mn;for(let r=t;r<n;++r)i>e[r]&&(i=e[r]);return i}function Gce(e,t=0,n=e.length){let i=n?e[t++]:mn;for(let r=t;r<n;++r)i<e[r]&&(i=e[r]);return i}function Gy(e){return F0(e)?e:+e}function Yce(e,t){const n=e.length;if(!n)return mn;if((t=+t)<=0||n<2)return Gy(e[0]);if(t>=1)return Gy(e[n-1]);const i=(n-1)*t,r=Math.floor(i),s=Gy(e[r]);return F0(s)?s:s+(Gy(e[r+1])-s)*(i-r)}class Xce{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:qce(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Gce(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Ok)),Yce(this._sorted,t)}}const n_=(e,t,n)=>fh(t,"{"+z1(e,(i,r)=>`_${r}.${n}(${t});`)+"}",e);function Kce(e,t){const{ops:n,output:i}=Jce(e,t),r=e[0].fields,s=r.length,a=s===0?Ck:s===1?Qce:s===2?Zce:zt("Unsupported field count: "+s);return new a(r,n,i,t)}function Jce(e,t){const n={},i=[];function r(a,o=[]){const l=a+":"+o;if(n[l])return n[l];const u=iU(a),c=u.create(...o);return t<0&&u.stream&&u.stream.forEach(f=>r(f,[])),u.req&&u.req.forEach(f=>r(f,[])),n[l]=c,i.push(c),c}const s=e.map(a=>{const o=r(a.name,a.params);return o.output=a.id,o});return{ops:i,output:s}}class Ck extends qle{constructor(t,n,i,r){super(i),this._op=n,this._fields=t,this._stream=!!r}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Xce),t}write(t,n,i){const r=this._outputs,s=r.length;for(let a=0;a<s;++a)n[r[a].output][i]=r[a].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Qce extends Ck{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=n_(n,s,"add"),this._rem=n_(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i);++t.count,Qa(r)&&(++t.valid,t.list&&t.list.add(r),this._add(t,r))}rem(t,n,i){const r=this._fields[0](n,i);--t.count,Qa(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r))}}class Zce extends Ck{constructor(t,n,i,r){super(t,n,i,r);const s=["state","v1","v2"];this._add=n_(n,s,"add"),this._rem=n_(n,s,"rem")}add(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);++t.count,Qa(r)&&Qa(s)&&(++t.valid,t.list&&t.list.add([r,s]),this._add(t,r,s))}rem(t,n,i){const r=this._fields[0](n,i),s=this._fields[1](n,i);--t.count,Qa(r)&&Qa(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,r,s))}}function dh(e,t,n){if(t.length){const i=e.data(),{keys:r}=e.groups()||{},s=jg(e,t),a=r?(o,l)=>s[o][r[l]]:o=>s[o][0];n=n.map(o=>l=>o(l,i,a))}return n}function jg(e,t,n){if(!t.length)return n;const i=E$(t),r=e.groups(),s=r?r.size:1;return n=n||x1(t.length,()=>Array(s)),s>1?i.forEach(a=>{const o=O$(e,a,r);for(let l=0;l<s;++l)a.write(o[l],n,l)}):i.forEach(a=>{const o=A$(e,a);a.write(o,n,0)}),n}function E$(e,t){const n=[],i={};for(const r of e){const s=r.fields.map(a=>a+"").join(",");(i[s]||(i[s]=[])).push(r)}for(const r in i)n.push(Kce(i[r],t));return n}function A$(e,t){const n=t.init(),i=e.totalRows(),r=e.data(),s=e.mask();if(e.isOrdered()){const a=e.indices();for(let o=0;o<i;++o)t.add(n,a[o],r)}else if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))t.add(n,a,r);else for(let a=0;a<i;++a)t.add(n,a,r);return n}function O$(e,t,n){const{keys:i,size:r}=n,s=x1(r,()=>t.init()),a=e.data();if(e.isOrdered()){const o=e.indices(),l=o.length;for(let u=0;u<l;++u){const c=o[u];t.add(s[i[c]],c,a)}}else if(e.isFiltered()){const o=e.mask();for(let l=o.next(0);l>=0;l=o.next(l+1))t.add(s[i[l]],l,a)}else{const o=e.totalRows();for(let l=0;l<o;++l)t.add(s[i[l]],l,a)}return s}function C$(e,t){const{get:n,names:i,rows:r,size:s}=t,a=i.length;for(let o=0;o<a;++o){const l=e.add(i[o],Array(s)),u=n[o];for(let c=0;c<s;++c)l[c]=u(r[c])}}function I$(e){return{left(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right(t,n,i,r){for(i==null&&(i=0),r==null&&(r=t.length);i<r;){const s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}}const k4=I$(Ok);function efe(e,t,n,i,r){let s,a,o,l,u;const c=g=>a[g-1]===a[g],f=i.length,d=r.length,h=i.length?fh(["w","r","k"],"{"+z1(i,(g,m)=>`r[_${m}.id][k]=_${m}.value(w,_${m}.get);`)+"}",i):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(g,m,y,b){p.index=p.i0=p.i1=0,p.size=m.length,s=g,a=m,l=y,u=b,o=r?r.map(v=>v.init()):null;for(let v=0;v<f;++v)i[v].init();return p},value(g,m){return m(s[g],e)},step(g){const[m,y]=t,b=p.size,v=p.i0,_=p.i1;p.i0=m!=null?Math.max(0,g-Math.abs(m)):0,p.i1=y!=null?Math.min(b,g+Math.abs(y)+1):b,p.index=g,n&&(p.i0>0&&c(p.i0)&&(p.i0=k4.left(a,a[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=k4.right(a,a[p.i1-1])));for(let S=0;S<d;++S){const E=r[S],w=o[S];for(let O=v;O<p.i0;++O)E.rem(w,s[O],e);for(let O=_;O<p.i1;++O)E.add(w,s[O],e);E.write(w,l,u)}return h(p,l,u),l}};return p}const tfe=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),nfe=e=>!!e.peers;function ife(e){const{id:t,name:n,fields:i=[],params:r=[]}=e,s=rU(n).create(...r);return i.length&&(s.get=i[0]),s.id=t,s}function rfe(e,t,n,i={},r){const s=e.data(),a=sfe(r,s),o=a.length,l=fh(["r","d","op"],"{"+z1(t,(u,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,c)=>{const f=u.length,d=afe(e,u);for(let p=0;p<o;++p)a[p].init(u,d,i,c);const h=p=>i[p][c];for(let p=0;p<f;++p){for(let g=0;g<o;++g)a[g].step(p);l(u[p],s,h)}})}function sfe(e,t){const n={};return e.forEach(i=>{const r=tfe(i),s=nfe(i),a=`${r},${s}`,{aggOps:o,winOps:l}=n[a]||(n[a]={frame:r,peers:s,aggOps:[],winOps:[]});oT(i.name)?o.push(i):l.push(ife(i))}),Object.values(n).map(i=>efe(t,i.frame,i.peers,i.winOps,E$(i.aggOps,i.frame[0]!=null?-1:1)))}function afe(e,t){if(e.isOrdered()){const n=e.comparator(),i=e.data(),r=t.length,s=new Uint32Array(r);for(let a=1,o=0;a<r;++a)s[a]=n(t[a-1],t[a],i)?++o:o;return s}else return t}function ofe(e){return lT(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function Ik(e,{names:t,exprs:n,ops:i},r={}){const s=e.totalRows(),a=ks(r.drop?null:e),o=t.map(d=>a.add(d,Array(s))),[l,u]=lfe(i),c=e.isGrouped()?e.groups().size:1,f=jg(e,l,x1(i.length,()=>Array(c)));return u.length?rfe(e,o,n,f,u):ufe(e,o,n,f),e.create(a)}function lfe(e){const t=[],n=[],i=e.length;for(let r=0;r<i;++r){const s=e[r];s.id=r,(ofe(s)?n:t).push(s)}return[t,n]}function ufe(e,t,n,i){const r=e.mask(),s=e.data(),{keys:a}=e.groups()||{},o=a?(u,c)=>i[u][a[c]]:u=>i[u][0],l=t.length;for(let u=0;u<l;++u){const c=n[u],f=t[u];if(r)for(let d=r.next(0);d>=0;d=r.next(d+1))f[d]=c(d,s,o);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,o)}}}function cfe(e,t,n={}){const i=Ik(e,ws(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?i:S$(i,Object.keys(t).filter(r=>!e.column(r)),n)}function ffe(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((i,r)=>i.antijoin(r.select(n)),e).dedupe()}const Yy=2147483648,dfe=4294967295;class x${constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let i=0;i<t;++i)for(let r=this._bits[i];r;++n)r&=r-1;return n}get(t){return this._bits[t>>5]&Yy>>>t}set(t){this._bits[t>>5]|=Yy>>>t}clear(t){this._bits[t>>5]&=~(Yy>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,i=n.length;let r=t>>5,s=n[r]&dfe>>>t;for(;r<i;s=n[++r])if(s!==0)return(r<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let r=0;r<n;++r)t[r]=~t[r];const i=this._size%32;return i&&(t[n-1]&=Yy>>i-1),this}and(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]&=i[s]}return this}or(t){if(t){const n=this._bits,i=t._bits,r=n.length;for(let s=0;s<r;++s)n[s]|=i[s]}return this}}function hfe(e,t){const n=e.totalRows(),i=e.mask(),r=e.data(),s=new x$(n);if(i)for(let a=i.next(0);a>=0;a=i.next(a+1))t(a,r)&&s.set(a);else for(let a=0;a<n;++a)t(a,r)&&s.set(a);return e.create({filter:s})}function pfe(e,t){const n=ws({p:t},{table:e});let i=n.exprs[0];if(n.ops.length){const{data:r}=Ik(e,n,{drop:!0}).column("p");i=s=>r[s]}return hfe(e,i)}function T$(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(!t.length)return e;const s=r.limit>0?+r.limit:1/0,a=r.index?r.index===!0?"index":r.index+"":null,o=new Set(r.drop),l=dh(e,i,n),u=ks(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(_=>{if(!o.has(_)){const S=u.add(_,[]);c.has(_)||(f.push(e.column(_)),d.push(S))}}),t.forEach(_=>{o.has(_)||(u.has(_)||u.add(_,[]),h.push(u.data[_]))});const p=a?u.add(a,[]):null;let g=0;const m=f.length,y=h.length,b=(_,S)=>{for(let E=0;E<m;++E)d[E].length=g+S,d[E].fill(f[E].get(_),g,g+S)},v=p?(_,S)=>{for(let E=0;E<S;++E)p[_+E]=E}:()=>{};if(y===1){const _=l[0],S=h[0];e.scan((E,w)=>{const O=bs(_(E,w)),D=Math.min(O.length,s);b(E,D);for(let x=0;x<D;++x)S[g+x]=O[x];v(g,D),g+=D})}else e.scan((_,S)=>{let E=0;const w=l.map(O=>{const D=bs(O(_,S));return E=Math.min(Math.max(E,D.length),s),D});b(_,E);for(let O=0;O<y;++O){const D=h[O],x=w[O];for(let A=0;A<E;++A)D[g+A]=x[A]}v(g,E),g+=E});return e.create(u.new())}function gfe(e,{names:t=[],exprs:n=[],ops:i=[]},r={}){if(t.length===0)return e;const[s="key",a="value"]=r.as||[],o=dh(e,i,n);return T$(e,{names:[s,a],exprs:[()=>t,(l,u)=>o.map(c=>c(l,u))]},{...r,drop:t})}function ho(e,t,n,i={window:!1}){const r=new Map,s=a=>{a=qr(a)?t.columnName(a):a,ji(a)?r.set(a,Pd(a)):Qn(a)?gl(t,a).forEach(s):ar(a)?vV(r,a):zt(`Invalid ${e} value: ${a+""}`)};return bs(n).forEach(s),i.preparse&&i.preparse(r),ws(r,{table:t,...i})}function mfe(e,t,n){return gfe(e,ho("fold",e,t),n)}function M4(e,t,n,i){const r=n&&n.length;return yfe(r?bfe(e,n,i):e,t,r)}function yfe(e,{names:t,exprs:n,ops:i},r){const s=dh(e,i,n),a=r?null:ks(e),o=e.totalRows();return t.forEach((l,u)=>{const c=e.column(l),f=r?c.data:a.add(l,Array(o)),d=s[u];e.scan(h=>{const p=c.get(h);f[h]=Qa(p)?p:d(h)})}),r?e:e.create(a)}function bfe(e,t,n){const i=e.groups(),r=e.data(),s=(i?i.names:[]).concat(t),a=(i?i.get:[]).concat(t.map(p=>e.getter(p))),o=new Set,l=Tv(a);e.scan((p,g)=>o.add(l(p,g)));const u=e.columnNames(),c=ks(),f=u.map(p=>c.add(p,[]));u.forEach((p,g)=>{const m=r[p],y=f[g];e.scan(b=>y.push(m.get(b)))});const d=Tv(a.map((p,g)=>m=>m[g])),h=fh("v","{"+f.map((p,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",f,u.map(p=>s.indexOf(p)));if(i){let p=i.keys.length;const g=n.reduce((y,b)=>y*b.length,i.size),m=new Uint32Array(g+(p-o.size));m.set(i.keys),D4(i,n,(y,b)=>{o.has(d(y))||(h(y),m[p++]=b[0])}),c.groupby({...i,keys:m})}else D4(i,n,p=>{o.has(d(p))||h(p)});return e.create(c.new())}function D4(e,t,n){const i=e?e.get.length:0,r=e?1:0,s=r+t.length,a=new Int32Array(s),o=new Int32Array(s),l=[];if(e){const{get:c,rows:f,size:d}=e;a[0]=d,l.push((h,p)=>{const g=f[p];for(let m=0;m<i;++m)h[m]=c[m](g)})}t.forEach((c,f)=>{const d=f+i;a[f+r]=c.length,l.push((h,p)=>h[d]=c[p])});const u=Array(i+t.length);for(let c=0;c<s;++c)l[c](u,0);n(u,o);for(let c=s-1;c>=0;){const f=++o[c];f<a[c]?(l[c](u,f),n(u,o),c=s-1):(o[c]=0,l[c](u,0),--c)}}function xk(e,{names:t,exprs:n,ops:i}){const r=ks(),s=e.groups();return s&&C$(r,s),vfe(t,n,s,jg(e,i),r),e.create(r.new())}function vfe(e,t,n,i=[],r){if(!t.length)return;const s=n?n.size:1,a=(l,u)=>i[l][u],o=e.length;for(let l=0;l<o;++l){const u=t[l];if(u.field!=null)r.add(e[l],i[u.field]);else if(s>1){const c=r.add(e[l],Array(s));for(let f=0;f<s;++f)c[f]=u(f,null,a)}else r.add(e[l],[u(0,null,a)])}}function _fe(e,t,n={}){if(t=ws(t,{table:e}),t.names.forEach(i=>e.column(i)?0:zt(`Invalid impute column ${_a(i)}`)),n.expand){const i={preparse:wfe,aggronly:!0},r=ho("impute",e,n.expand,i),s=xk(e.ungroup(),r);return M4(e,t,r.names,r.names.map(a=>s.get(a,0)))}else return M4(e,t)}function wfe(e){e.forEach((t,n)=>t.field?e.set(n,Wj(t+"")):0)}function Sfe(e,t){const n=e.columnNames();return t.length?t.reduce((i,r)=>i.semijoin(r.select(n)),e).dedupe():e.reify([])}function k$(e,t){const n=new Map;return e.scan((i,r)=>{const s=t(i,r);s!=null&&s===s&&n.set(s,i)}),n}function Efe(e,t,n){const i=new Map,r=e.length;for(let s=0;s<r;++s){const a=e[s],o=n(a,t);o!=null&&o===o&&(i.has(o)?i.get(o).push(s):i.set(o,[s]))}return i}function Afe(e,t){const n=["i","a","j","b"];return fh(n,"{"+z1(e,(i,r)=>`_${r}.push($${r}(${n}));`)+"}",e,t)}function Ofe(e,t,n,{names:i,exprs:r},s={}){const a=e.data(),o=e.indices(!1),l=o.length,u=new Int32Array(l),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=i.length,g=ks(),m=Array(p),y=Array(p);for(let _=0;_<i.length;++_)m[_]=g.add(i[_],[]),y[_]=r[_];const b=Afe(m,y);if((_n(n)?Ife:Cfe)(b,n,a,c,o,f,u,h,l,d),s.left)for(let _=0;_<l;++_)u[_]||b(o[_],a,-1,c);if(s.right)for(let _=0;_<d;++_)h[_]||b(-1,a,f[_],c);return e.create(g.new())}function Cfe(e,t,n,i,r,s,a,o,l,u){for(let c=0;c<l;++c){const f=r[c];for(let d=0;d<u;++d){const h=s[d];t(f,n,h,i)&&(e(f,n,h,i),a[c]=1,o[d]=1)}}}function Ife(e,[t,n],i,r,s,a,o,l,u,c){let f,d,h,p,g,m,y,b,v=e;u>=c?(f=i,d=t,h=o,p=s,g=r,m=n,y=l,b=a):(f=r,d=n,h=l,p=a,g=i,m=t,y=o,b=s,v=(E,w,O,D)=>e(O,D,E,w));const _=Efe(b,g,m),S=p.length;for(let E=0;E<S;++E){const w=p[E],O=_.get(d(w,f));if(O){const D=O.length;for(let x=0;x<D;++x){const A=O[x];v(w,f,b[A],g),y[A]=1}h[E]=1}}}function i_(e,t,n){const i=new Map;bs(n).forEach((s,a)=>{s=qr(s)?t.columnName(s):s,ji(s)?i.set(a,Pd(s)):Qn(s)||ar(s)&&s.expr?i.set(a,s):zt(`Invalid ${e} key value: ${s+""}`)});const r=ws(i,{table:t,aggregate:!1,window:!1});return Tv(r.exprs,!0)}function xfe(e,t){const n=new Set(t);return e.filter(i=>n.has(i))}function Tk(e,t,n){if(n)ji(n)?n=[n,n]:_n(n)&&n.length===1&&(n=[n[0],n[0]]);else{const i=xfe(e.columnNames(),t.columnNames());i.length||zt("Natural join requires shared column names."),n=[i,i]}return n}function M$(e,t,n,i){return n.length!==i.length&&zt("Mismatched number of join keys"),[i_("join",e,n),i_("join",t,i)]}const Tfe={aggregate:!1,window:!1},kfe={...Tfe,index:1};function R4(e,t,n,i,r={}){n=Tk(e,t,n);const s={join:[e,t]};let a;if(_n(n)){const[o,l]=n.map(bs);a=M$(e,t,o,l),i||(i=Mfe(e,o,l,r))}else a=ws({on:n},s).exprs[0],i||(i=[Fd(),Fd()]);return Ofe(e,t,a,Dfe(e,t,i,s,r&&r.suffix),r)}function Mfe(e,t,n,i){const r=[];t.forEach((a,o)=>ji(a)&&a===n[o]?r.push(a):0);const s=wV(r);if(i.left&&i.right){const a=new Set(r);return[e.columnNames().map(o=>{const l=`[${_a(o)}]`;return a.has(o)?{[o]:`(a, b) => a${l} == null ? b${l} : a${l}`}:o}),s]}return i.right?[s,Fd()]:[Fd(),s]}function Dfe(e,t,n,i,r=[]){if(_n(n)){let s,a,o,l=n.length;s=a=o={names:[],exprs:[]},l--&&(s=ho("join",e,n[0],i)),l--&&(a=ho("join",t,n[1],kfe)),l--&&(o=ws(n[2],i));const u=new Set,c=new Set(s.names);return a.names.forEach(f=>{c.has(f)&&u.add(f)}),u.size&&(L4(s.names,u,r[0]||"_1"),L4(a.names,u,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}else return ws(n,i)}function L4(e,t,n){e.forEach((i,r)=>t.has(i)?e[r]=i+n:0)}function Rfe(e,t,n,i={}){const r=new x$(e.totalRows());return(_n(n)?Lfe:Nfe)(r,e,t,n),i.anti&&r.not().and(e.mask()),e.create({filter:r})}function Lfe(e,t,n,[i,r]){const s=k$(n,r);t.scan((a,o)=>{s.get(i(a,o))>=0&&e.set(a)})}function Nfe(e,t,n,i){const r=t.numRows(),s=n.numRows(),a=t.data(),o=n.data();if(t.isFiltered()||n.isFiltered()){const l=t.indices(!1),u=n.indices(!1);for(let c=0;c<r;++c){const f=l[c];for(let d=0;d<s;++d)if(i(f,a,u[d],o)){e.set(f);break}}}else for(let l=0;l<r;++l)for(let u=0;u<s;++u)if(i(l,a,u,o)){e.set(l);break}}function N4(e,t,n,i){n=Tk(e,t,n);const r=_n(n)?M$(e,t,...n.map(bs)):ws({on:n},{join:[e,t]}).exprs[0];return Rfe(e,t,r,i)}function Ffe(e,t,[n,i],{names:r,exprs:s,ops:a}){const o=ks(e),l=e.totalRows();r.forEach(d=>o.add(d,Array(l).fill(mn)));const u=k$(t,i),c=fh(["lr","rr","data"],"{"+z1(r,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",r.map(d=>o.data[d]),dh(t,a,s)),f=t.data();return e.scan((d,h)=>{const p=u.get(n(d,h));p>=0&&c(d,p,f)}),e.create(o)}function Pfe(e,t,n,i){return n=Tk(e,t,n),Ffe(e,t,[i_("lookup",e,n[0]),i_("lookup",t,n[1])],ho("lookup",t,i))}const TC=(e,t)=>e??t;function Bfe(e,t,n,i={}){const{keys:r,keyColumn:s}=jfe(e,t,i),a=TC(i.valueSeparator,"_"),o=n.names.length>1?(u,c)=>c+a+r[u]:u=>r[u],l=r.map(u=>jg(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>u===s[h]?1:NaN;return d.toString=()=>u+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,g)=>u===s[p]?d(p,g):NaN;return h.toString=()=>u+":"+d,h});return{...c,fields:f}})));return e.create(Ufe(n,o,e.groups(),l))}function jfe(e,t,n){const i=n.limit>0?+n.limit:1/0,r=TC(n.sort,!0),s=TC(n.keySeparator,"_"),a=dh(e,t.ops,t.exprs),o=a.length===1?a[0]:(f,d)=>a.map(h=>h(f,d)).join(s),l=Array(e.totalRows());e.scan((f,d)=>l[f]=o(f,d));const u=jg(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>l[f]],params:[]}])[0][0],c=r?u.sort():u;return{keys:Number.isFinite(i)?c.slice(0,i):c,keyColumn:l}}function Ufe({names:e,exprs:t},n,i,r){const s=i?i.size:1,a=ks(),o=r.length,l=e.length;let u;const c=(f,d)=>u[f][d];i&&C$(a,i);for(let f=0;f<l;++f){const d=t[f];if(d.field!=null)for(let h=0;h<o;++h)a.add(n(h,e[f]),r[h][d.field]);else if(s>1)for(let h=0;h<o;++h){u=r[h];const p=a.add(n(h,e[f]),Array(s));for(let g=0;g<s;++g)p[g]=d(g,null,c)}else for(let h=0;h<o;++h)u=r[h],a.add(n(h,e[f]),[d(0,null,c)])}return a.new()}function zfe(e,t,n,i){return Bfe(e,ho("fold",e,t),ho("fold",e,n,{preparse:Vfe,aggronly:!0}),i)}function Vfe(e){e.forEach((t,n)=>t.field?e.set(n,Vj(t+"")):0)}function $fe(e,t){const n=new Map;return e.columnNames(i=>(n.set(i,i),0)),Ak(e,gl(e,t,n))}function F4(e,t){return xk(e,ws(t,{table:e,aggronly:!0}))}function Hfe(e,t,n,i){return(t?i?qfe:Wfe:i?Yfe:Gfe)(e.length,e,n,i)}function Wfe(e,t,n){const i=n.length;for(let r=0;r<e;++r)t[r]=n[i*kg()|0];return t}function qfe(e,t,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let l=0;l<r;++l)s[l]=a+=i(n[l]);const o=I$(Ok).right;for(let l=0;l<e;++l)t[l]=n[o(s,a*kg())];return t}function Gfe(e,t,n){const i=n.length;if(e>=i)return n;for(let r=0;r<e;++r)t[r]=n[r];for(let r=e;r<i;++r){const s=r*kg();s<e&&(t[s|0]=n[r])}return t}function Yfe(e,t,n,i){const r=n.length;if(e>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let o=0;o<r;++o)a[o]=o,s[o]=-Math.log(kg())/i(n[o]);a.sort((o,l)=>s[o]-s[l]);for(let o=0;o<e;++o)t[o]=n[a[o]];return t}function Xfe(e,t=0,n=e.length){let i=n-(t=+t);for(;i;){const r=kg()*i--|0,s=e[i+t];e[i+t]=e[r+t],e[r+t]=s}return e}function Kfe(e,t,n,i={}){const{replace:r,shuffle:s}=i,a=e.partitions(!1);let o=0;t=a.map((c,f)=>{let d=t(f);return o+=d=r?d:Math.min(c.length,d),d});const l=new Uint32Array(o);let u=0;return a.forEach((c,f)=>{const d=t[f],h=l.subarray(u,u+=d);!r&&d===c.length?h.set(c):Hfe(h,r,c,n)}),s!==!1&&(a.length>1||!r)&&Xfe(l),e.reify(l)}function Jfe(e,t,n={}){return Kfe(e,Qfe(e,t),Zfe(e,n.weight),n)}const D$=e=>t=>e.get(t)||0;function Qfe(e,t){return qr(t)?()=>t:D$(xk(e,ws({size:t},{table:e})).column("size"))}function Zfe(e,t){return t==null?null:(t=qr(t)?e.columnName(t):t,D$(ji(t)?e.column(t):Ik(e,ws({w:t},{table:e}),{drop:!0}).column("w")))}function ede(e,t){return Ak(e,gl(e,t))}function tde(e,{names:t,exprs:n,ops:i=[]},r={}){if(t.length===0)return e;const s=t.length===1&&r.as||[],a=r.drop==null?!0:!!r.drop,o=r.limit==null?s.length||1/0:Math.max(1,+r.limit||1),l=dh(e,i,n),u=ks(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=nde(e,l[d],o),g=p.length;for(let m=0;m<g;++m)u.add(s[m]||`${h}_${m+1}`,p[m])};return e.columnNames().forEach(d=>{c.has(d)?(a||u.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):u.add(d,e.column(d))}),c.forEach(f),e.create(u)}function nde(e,t,n){const i=e.totalRows(),r=[];return e.scan((s,a)=>{const o=bs(t(s,a)),l=Math.min(o.length,n);for(;r.length<l;)r.push(Array(i).fill(mn));for(let u=0;u<l;++u)r[u][s]=o[u]}),r}function ide(e,t,n){return tde(e,ho("spread",e,t),n)}function rde(e,t){return e.concat(t).dedupe()}function sde(e,t,n){return T$(e,ho("unroll",e,t),n&&n.drop?{...n,drop:ho("unroll",e,n.drop).names}:n)}function ade(e,t){return e.create({groups:ode(e,t)})}function ode(e,{names:t=[],exprs:n=[],ops:i=[]}){const r=t.length;if(r===0)return null;if(r===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=dh(e,i,n);const a=Tv(s),o=e.totalRows(),l=new Uint32Array(o),u={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=a(h,f)+"",g=u[p];l[h]=g??(u[p]=c.push(h)-1)}else for(let h=0;h<o;++h){const p=a(h,f)+"",g=u[p];l[h]=g??(u[p]=c.push(h)-1)}return i.length||(s=s.map(h=>p=>h(p,f))),{keys:l,get:s,names:t,rows:c,size:c.length}}function lde(e,t){return ade(e,ho("groupby",e,t))}function ude(e,t){return e.create({order:t})}const cde=(e,t,n,i)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${i}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${i} : `;function fde(e,t){const n=[],i=[],r=[];let s=null,a="0",o="0";e.isGrouped()&&(s=e.groups().keys,a="ka",o="kb");const{ops:l}=ws(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const g=m=>`fn[${r.length}](${m}, data)`;i.push([g("a"),g("b")]),r.push(p.escape)}else i.push([xv(p,{index:"a",op:a}),xv(p,{index:"b",op:o})])},window:!1}),u=jg(e,l),c=(h,p)=>u[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[g,m]=i[h];d+=cde(g,m,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,r,e.data())}function dde(e,t){return ude(e,hde(e,t))}function hde(e,t){let n=-1;const i=new Map,r=s=>i.set(++n+"",s);return t.forEach(s=>{const a=s.expr!=null?s.expr:s;if(ar(a)&&!Qn(a))for(const o in a)r(a[o]);else r(qr(a)?Pd(s,e.columnName(a)):ji(a)?Pd(s):Qn(a)?s:zt(`Invalid orderby field: ${s+""}`))}),fde(e,i)}function pde(e,t){const n=e.numRows(),i=n+t.reduce((a,o)=>a+o.numRows(),0);if(n===i)return e;const r=[e,...t],s=ks();return e.columnNames().forEach(a=>{const o=Array(i);let l=0;r.forEach(u=>{const c=u.column(a)||{get:()=>mn};u.scan(f=>o[l++]=c.get(f))}),s.add(a,o)}),e.create(s.new())}function gde(e,t){const n=ks(),i=e.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},l=new Uint32Array(o+1);s.forEach(d=>n.add(d,null));const u=i?O$(e,t,i):[A$(e,t)];t.outputs().map(d=>n.add(d,[]));const c=l.length-1;let f=0;for(let d=0;d<c;++d)f+=l[d+1]=t.write(u[d],n.data,l[d]);if(i){const d=e.data();s.forEach((h,p)=>{const g=n.data[h]=Array(f),m=r[p];for(let y=0,b=0;y<o;++y)g.fill(m(a[y],d),b,b+=l[y+1])})}return e.create(n.new())}function mde(e){return e.isGrouped()?e.create({groups:null}):e}function yde(e){return e.isOrdered()?e.create({order:null}):e}var bde={__antijoin:(e,t,n)=>N4(e,t,n,{anti:!0}),__count:(e,t={})=>F4(e,{[t.as||"count"]:$j()}),__cross:(e,t,n,i)=>R4(e,t,()=>!0,n,{...i,left:!0,right:!0}),__concat:pde,__dedupe:Wce,__derive:cfe,__except:ffe,__filter:pfe,__fold:mfe,__impute:_fe,__intersect:Sfe,__join:R4,__lookup:Pfe,__pivot:zfe,__relocate:S$,__rename:$fe,__rollup:F4,__sample:Jfe,__select:ede,__semijoin:N4,__spread:ide,__union:rde,__unroll:sde,__groupby:lde,__orderby:dde,__ungroup:mde,__unorder:yde,__reduce:gde};Object.assign(Ha.prototype,bde);function vde(e,t){return Ha.new(e,t)}function _de(e){return bw(e,{escape:!0,toString(){zt("Escaped values can not be serialized.")}})}Ha.prototype;const _o=oi({task:"",idColumn:"",labelColumn:"",metadata:[]}),kk=oi([]),vw=oi([]),_w=oi(!1),R$=Jie(`ws://localhost:${location.port}/api/status`,{status:"connecting",doneProcessing:!1,columns:[]}),P4=I1(R$,e=>e.status,"connecting"),ml=oi(new Map),Bd=oi(vde({})),ww=oi(new oC([],e=>e.slice+"."+e.metric+"."+e.model)),Ad=oi(new Map),hd=oi([]),Su=oi(""),Yp=oi(""),jd=oi(Hce({})),r_=I1([_o,Su],([e,t])=>e.metadata.filter(n=>!(n.startsWith("zenopost_")&&!n.startsWith("zenopost_"+t+"_")))),s_=I1([r_,Su],([e,t])=>e.map(n=>n.startsWith("zenopre_")?n.slice(8):n.startsWith("zenopost_")?n.slice(10+t.length):n));function wde(){const e=fetch("/api/settings").then(r=>r.json()).then(r=>_o.set(JSON.parse(r))),t=fetch("/api/models").then(r=>r.json()).then(r=>vw.set(JSON.parse(r))),n=fetch("/api/metrics").then(r=>r.json()).then(r=>kk.set(JSON.parse(r)));Promise.all([e,t,n]).then(()=>_w.set(!0))}function Sde(e){fetch("/api/slices").then(t=>t.json()).then(t=>{const n=JSON.parse(t);n.forEach(r=>r.idxs=e.filter("(d) => "+Sw(r.predicates)).array(nc(_o).idColumn)),Mk(n);const i=new Map;n.forEach(r=>i.set(r.name,r)),ml.set(i)})}function bA(e){return e==="home"?window.location.hash="":window.location.hash="#/"+e+"/",e}function Mk(e){console.log(e),fetch("/api/results",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({slices:e})}).then(t=>t.json()).then(t=>{t=JSON.parse(t),ww.update(n=>(t.forEach(i=>{n.set({slice:i.slice,metric:i.metric,model:i.model},i.value)}),n))}).catch(t=>console.log(t))}function Sw(e){return e.map((n,i)=>{let r="";i!==0&&(r=n.join);let s="";return n.predicateType==="slice"?(s=Sw(nc(ml).get(n.name).predicates),n.operation==="IS IN"?s:`!(${s})`):(n.groupIndicator==="start"&&r?s+="&& (":n.groupIndicator==="start"&&(s+="("),r===""?s+=`(d["${nc(r_)[nc(s_).indexOf(n.name)]}"] `+n.operation+" "+(isNaN(parseFloat(n.value))?`"${n.value}"`:n.value)+")":s+=(r==="AND"?"&&":"||")+` (d["${nc(r_)[nc(s_).indexOf(n.name)]}"] `+n.operation+" "+(isNaN(parseFloat(n.value))?`"${n.value}"`:n.value)+")",n.groupIndicator==="end"&&(s+=")"),s)}).join(" ")}function Ede(e){let t=nc(Bd);const n=t.columnNames(),i=e.columns.filter(r=>!n.includes(r));i.length>0&&fetch("/api/table",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({columns:i})}).then(r=>r.arrayBuffer()).then(r=>{t.size===0?t=T4(r):t=t.assign(T4(r)),Bd.set(t),nc(ml).size===0&&e.doneProcessing&&Sde(t)})}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Df={INDETERMINATE_CLASS:"mdc-circular-progress--indeterminate",CLOSED_CLASS:"mdc-circular-progress--closed"},Vu={ARIA_HIDDEN:"aria-hidden",ARIA_VALUENOW:"aria-valuenow",DETERMINATE_CIRCLE_SELECTOR:".mdc-circular-progress__determinate-circle",RADIUS:"r",STROKE_DASHOFFSET:"stroke-dashoffset"};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ade=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"cssClasses",{get:function(){return Df},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Vu},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},getDeterminateCircleAttribute:function(){return null},hasClass:function(){return!1},removeClass:function(){},removeAttribute:function(){},setAttribute:function(){},setDeterminateCircleAttribute:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.closed=this.adapter.hasClass(Df.CLOSED_CLASS),this.determinate=!this.adapter.hasClass(Df.INDETERMINATE_CLASS),this.progress=0,this.determinate&&this.adapter.setAttribute(Vu.ARIA_VALUENOW,this.progress.toString()),this.radius=Number(this.adapter.getDeterminateCircleAttribute(Vu.RADIUS))},t.prototype.setDeterminate=function(n){this.determinate=n,this.determinate?(this.adapter.removeClass(Df.INDETERMINATE_CLASS),this.setProgress(this.progress)):(this.adapter.addClass(Df.INDETERMINATE_CLASS),this.adapter.removeAttribute(Vu.ARIA_VALUENOW))},t.prototype.isDeterminate=function(){return this.determinate},t.prototype.setProgress=function(n){if(this.progress=n,this.determinate){var i=(1-this.progress)*(2*Math.PI*this.radius);this.adapter.setDeterminateCircleAttribute(Vu.STROKE_DASHOFFSET,""+i),this.adapter.setAttribute(Vu.ARIA_VALUENOW,this.progress.toString())}},t.prototype.getProgress=function(){return this.progress},t.prototype.open=function(){this.closed=!1,this.adapter.removeClass(Df.CLOSED_CLASS),this.adapter.removeAttribute(Vu.ARIA_HIDDEN)},t.prototype.close=function(){this.closed=!0,this.adapter.addClass(Df.CLOSED_CLASS),this.adapter.setAttribute(Vu.ARIA_HIDDEN,"true")},t.prototype.isClosed=function(){return this.closed},t}(cr);function B4(e,t,n){const i=e.slice();return i[24]=t[n],i}function j4(e){let t,n,i,r,s,a,o,l;return{c(){t=K("div"),n=K("div"),n.innerHTML='<svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle></svg>',i=ae(),r=K("div"),r.innerHTML='<svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="3.2"></circle></svg>',s=ae(),a=K("div"),a.innerHTML='<svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle></svg>',o=ae(),J(n,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left"),J(r,"class","mdc-circular-progress__gap-patch"),J(a,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right"),J(t,"class",l=xe({[e[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+e[24]]:e[5]}))},m(u,c){U(u,t,c),G(t,n),G(t,i),G(t,r),G(t,s),G(t,a),G(t,o)},p(u,c){c&34&&l!==(l=xe({[u[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+u[24]]:u[5]}))&&J(t,"class",l)},d(u){u&&j(t)}}}function Ode(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g=[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},e[9]],m={};for(let S=0;S<g.length;S+=1)m=Q(m,g[S]);let y=e[5]?[1,2,3,4]:[1],b=[];for(let S=0;S<y.length;S+=1)b[S]=j4(B4(e,y,S));let v=[{class:l=xe({[e[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":e[2],"mdc-circular-progress--closed":e[3],...e[7]})},{role:"progressbar"},{"aria-valuemin":u=0},{"aria-valuemax":c=1},{"aria-valuenow":f=e[2]?void 0:e[4]},e[8],e[12]],_={};for(let S=0;S<v.length;S+=1)_=Q(_,v[S]);return{c(){t=K("div"),n=K("div"),i=$r("svg"),r=$r("circle"),s=$r("circle"),a=ae(),o=K("div");for(let S=0;S<b.length;S+=1)b[S].c();J(r,"class","mdc-circular-progress__determinate-track"),J(r,"cx","24"),J(r,"cy","24"),J(r,"r","18"),J(r,"stroke-width","4"),Sv(s,m),J(i,"class","mdc-circular-progress__determinate-circle-graphic"),J(i,"viewBox","0 0 48 48"),J(i,"xmlns","http://www.w3.org/2000/svg"),J(n,"class","mdc-circular-progress__determinate-container"),J(o,"class","mdc-circular-progress__indeterminate-container"),Se(t,_)},m(S,E){U(S,t,E),G(t,n),G(n,i),G(i,r),G(i,s),e[15](s),G(t,a),G(t,o);for(let w=0;w<b.length;w+=1)b[w].m(o,null);e[16](t),h||(p=[Ee(d=wt.call(null,t,e[0])),Ee(e[11].call(null,t))],h=!0)},p(S,[E]){if(Sv(s,m=Le(g,[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},E&512&&S[9]])),E&34){y=S[5]?[1,2,3,4]:[1];let w;for(w=0;w<y.length;w+=1){const O=B4(S,y,w);b[w]?b[w].p(O,E):(b[w]=j4(O),b[w].c(),b[w].m(o,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=y.length}Se(t,_=Le(v,[E&142&&l!==(l=xe({[S[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":S[2],"mdc-circular-progress--closed":S[3],...S[7]}))&&{class:l},{role:"progressbar"},{"aria-valuemin":u},{"aria-valuemax":c},E&20&&f!==(f=S[2]?void 0:S[4])&&{"aria-valuenow":f},E&256&&S[8],E&4096&&S[12]])),d&&rt(d.update)&&E&1&&d.update.call(null,S[0])},i:xt,o:xt,d(S){S&&j(t),e[15](null),Rn(b,S),e[16](null),h=!1,pt(p)}}}function Cde(e,t,n){const i=["use","class","indeterminate","closed","progress","fourColor","getElement"];let r=Ce(t,i);const s=St(ft());let{use:a=[]}=t,{class:o=""}=t,{indeterminate:l=!1}=t,{closed:u=!1}=t,{progress:c=0}=t,{fourColor:f=!1}=t,d,h,p={},g={},m={},y;Zn(()=>(n(14,h=new Ade({addClass:v,getDeterminateCircleAttribute:w,hasClass:b,removeClass:_,removeAttribute:E,setAttribute:S,setDeterminateCircleAttribute:O})),h.init(),()=>{h.destroy()}));function b(C){return C in p?p[C]:D().classList.contains(C)}function v(C){p[C]||n(7,p[C]=!0,p)}function _(C){(!(C in p)||p[C])&&n(7,p[C]=!1,p)}function S(C,I){g[C]!==I&&n(8,g[C]=I,g)}function E(C){(!(C in g)||g[C]!=null)&&n(8,g[C]=void 0,g)}function w(C){var I;return C in m?(I=m[C])!==null&&I!==void 0?I:null:y.getAttribute(C)}function O(C,I){m[C]!==I&&n(9,m[C]=I,m)}function D(){return d}function x(C){be[C?"unshift":"push"](()=>{y=C,n(10,y)})}function A(C){be[C?"unshift":"push"](()=>{d=C,n(6,d)})}return e.$$set=C=>{t=Q(Q({},t),vt(C)),n(12,r=Ce(t,i)),"use"in C&&n(0,a=C.use),"class"in C&&n(1,o=C.class),"indeterminate"in C&&n(2,l=C.indeterminate),"closed"in C&&n(3,u=C.closed),"progress"in C&&n(4,c=C.progress),"fourColor"in C&&n(5,f=C.fourColor)},e.$$.update=()=>{e.$$.dirty&16388&&h&&h.isDeterminate()!==!l&&h.setDeterminate(!l),e.$$.dirty&16400&&h&&h.getProgress()!==c&&h.setProgress(c),e.$$.dirty&16392&&h&&(u?h.close():h.open())},[a,o,l,u,c,f,d,p,g,m,y,s,r,D,h,x,A]}class Ide extends qe{constructor(t){super(),We(this,t,Cde,Ode,He,{use:0,class:1,indeterminate:2,closed:3,progress:4,fourColor:5,getElement:13})}get getElement(){return this.$$.ctx[13]}}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var cs;(function(e){e.RICH="mdc-tooltip--rich",e.SHOWN="mdc-tooltip--shown",e.SHOWING="mdc-tooltip--showing",e.SHOWING_TRANSITION="mdc-tooltip--showing-transition",e.HIDE="mdc-tooltip--hide",e.HIDE_TRANSITION="mdc-tooltip--hide-transition",e.MULTILINE_TOOLTIP="mdc-tooltip--multiline",e.SURFACE="mdc-tooltip__surface",e.SURFACE_ANIMATION="mdc-tooltip__surface-animation",e.TOOLTIP_CARET_TOP="mdc-tooltip__caret-surface-top",e.TOOLTIP_CARET_BOTTOM="mdc-tooltip__caret-surface-bottom"})(cs||(cs={}));var Mr={BOUNDED_ANCHOR_GAP:4,UNBOUNDED_ANCHOR_GAP:8,MIN_VIEWPORT_TOOLTIP_THRESHOLD:8,HIDE_DELAY_MS:600,SHOW_DELAY_MS:500,MIN_HEIGHT:24,MAX_WIDTH:200,CARET_INDENTATION:24,ANIMATION_SCALE:.8},Xy={ARIA_EXPANDED:"aria-expanded",ARIA_HASPOPUP:"aria-haspopup",PERSISTENT:"data-mdc-tooltip-persistent",SCROLLABLE_ANCESTOR:"tooltip-scrollable-ancestor",HAS_CARET:"data-mdc-tooltip-has-caret"},pd;(function(e){e[e.DETECTED=0]="DETECTED",e[e.START=1]="START",e[e.CENTER=2]="CENTER",e[e.END=3]="END"})(pd||(pd={}));var vp;(function(e){e[e.DETECTED=0]="DETECTED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"})(vp||(vp={}));var a_;(function(e){e[e.BOUNDED=0]="BOUNDED",e[e.UNBOUNDED=1]="UNBOUNDED"})(a_||(a_={}));var bt={LEFT:"left",RIGHT:"right",CENTER:"center",TOP:"top",BOTTOM:"bottom"},Yt;(function(e){e[e.DETECTED=0]="DETECTED",e[e.ABOVE_START=1]="ABOVE_START",e[e.ABOVE_CENTER=2]="ABOVE_CENTER",e[e.ABOVE_END=3]="ABOVE_END",e[e.TOP_SIDE_START=4]="TOP_SIDE_START",e[e.CENTER_SIDE_START=5]="CENTER_SIDE_START",e[e.BOTTOM_SIDE_START=6]="BOTTOM_SIDE_START",e[e.TOP_SIDE_END=7]="TOP_SIDE_END",e[e.CENTER_SIDE_END=8]="CENTER_SIDE_END",e[e.BOTTOM_SIDE_END=9]="BOTTOM_SIDE_END",e[e.BELOW_START=10]="BELOW_START",e[e.BELOW_CENTER=11]="BELOW_CENTER",e[e.BELOW_END=12]="BELOW_END"})(Yt||(Yt={}));var Ti;(function(e){e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e[e.SIDE_TOP=3]="SIDE_TOP",e[e.SIDE_CENTER=4]="SIDE_CENTER",e[e.SIDE_BOTTOM=5]="SIDE_BOTTOM"})(Ti||(Ti={}));var an;(function(e){e[e.START=1]="START",e[e.CENTER=2]="CENTER",e[e.END=3]="END",e[e.SIDE_START=4]="SIDE_START",e[e.SIDE_END=5]="SIDE_END"})(an||(an={}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xde=function(){function e(){this.rafIDs=new Map}return e.prototype.request=function(t,n){var i=this;this.cancel(t);var r=requestAnimationFrame(function(s){i.rafIDs.delete(t),n(s)});this.rafIDs.set(t,r)},e.prototype.cancel=function(t){var n=this.rafIDs.get(t);n&&(cancelAnimationFrame(n),this.rafIDs.delete(t))},e.prototype.cancelAll=function(){var t=this;this.rafIDs.forEach(function(n,i){t.cancel(i)})},e.prototype.getQueue=function(){var t=[];return this.rafIDs.forEach(function(n,i){t.push(i)}),t},e}();/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var U4={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function Tde(e){return Boolean(e.document)&&typeof e.document.createElement=="function"}function z4(e,t){if(Tde(e)&&t in U4){var n=e.document.createElement("div"),i=U4[t],r=i.standard,s=i.prefixed,a=r in n.style;return a?r:s}return t}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var kde=cs.RICH,vA=cs.SHOWN,_A=cs.SHOWING,Ky=cs.SHOWING_TRANSITION,_m=cs.HIDE,Jy=cs.HIDE_TRANSITION,Mde=cs.MULTILINE_TOOLTIP,kC;(function(e){e.POLL_ANCHOR="poll_anchor"})(kC||(kC={}));var V4=typeof window<"u",Dde=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.tooltipShown=!1,i.anchorGap=Mr.BOUNDED_ANCHOR_GAP,i.xTooltipPos=pd.DETECTED,i.yTooltipPos=vp.DETECTED,i.tooltipPositionWithCaret=Yt.DETECTED,i.minViewportTooltipThreshold=Mr.MIN_VIEWPORT_TOOLTIP_THRESHOLD,i.hideDelayMs=Mr.HIDE_DELAY_MS,i.showDelayMs=Mr.SHOW_DELAY_MS,i.anchorRect=null,i.parentRect=null,i.frameId=null,i.hideTimeout=null,i.showTimeout=null,i.addAncestorScrollEventListeners=new Array,i.removeAncestorScrollEventListeners=new Array,i.animFrame=new xde,i.anchorBlurHandler=function(r){i.handleAnchorBlur(r)},i.documentClickHandler=function(r){i.handleDocumentClick(r)},i.documentKeydownHandler=function(r){i.handleKeydown(r)},i.tooltipMouseEnterHandler=function(){i.handleTooltipMouseEnter()},i.tooltipMouseLeaveHandler=function(){i.handleTooltipMouseLeave()},i.richTooltipFocusOutHandler=function(r){i.handleRichTooltipFocusOut(r)},i.windowScrollHandler=function(){i.handleWindowScrollEvent()},i.windowResizeHandler=function(){i.handleWindowChangeEvent()},i}return Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},addClass:function(){},hasClass:function(){return!1},removeClass:function(){},getComputedStyleProperty:function(){return""},setStyleProperty:function(){},setSurfaceAnimationStyleProperty:function(){},getViewportWidth:function(){return 0},getViewportHeight:function(){return 0},getTooltipSize:function(){return{width:0,height:0}},getAnchorBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getParentBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getAnchorAttribute:function(){return null},setAnchorAttribute:function(){return null},isRTL:function(){return!1},anchorContainsElement:function(){return!1},tooltipContainsElement:function(){return!1},focusAnchorElement:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){},registerAnchorEventHandler:function(){},deregisterAnchorEventHandler:function(){},registerDocumentEventHandler:function(){},deregisterDocumentEventHandler:function(){},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){},notifyHidden:function(){},getTooltipCaretBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setTooltipCaretStyle:function(){},clearTooltipCaretStyles:function(){},getActiveElement:function(){return null}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.richTooltip=this.adapter.hasClass(kde),this.persistentTooltip=this.adapter.getAttribute(Xy.PERSISTENT)==="true",this.interactiveTooltip=!!this.adapter.getAnchorAttribute(Xy.ARIA_EXPANDED)&&this.adapter.getAnchorAttribute(Xy.ARIA_HASPOPUP)==="dialog",this.hasCaret=this.richTooltip&&this.adapter.getAttribute(Xy.HAS_CARET)==="true"},t.prototype.isShown=function(){return this.tooltipShown},t.prototype.isRich=function(){return this.richTooltip},t.prototype.isPersistent=function(){return this.persistentTooltip},t.prototype.handleAnchorMouseEnter=function(){var n=this;this.tooltipShown?this.show():(this.clearHideTimeout(),this.showTimeout=setTimeout(function(){n.show()},this.showDelayMs))},t.prototype.handleAnchorTouchstart=function(){var n=this;this.showTimeout=setTimeout(function(){n.show()},this.showDelayMs),this.adapter.registerWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch)},t.prototype.preventContextMenuOnLongTouch=function(n){n.preventDefault()},t.prototype.handleAnchorTouchend=function(){this.clearShowTimeout(),this.isShown()||this.adapter.deregisterWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch)},t.prototype.handleAnchorFocus=function(n){var i=this,r=n.relatedTarget,s=r instanceof HTMLElement&&this.adapter.tooltipContainsElement(r);s||(this.showTimeout=setTimeout(function(){i.show()},this.showDelayMs))},t.prototype.handleAnchorMouseLeave=function(){var n=this;this.clearShowTimeout(),this.hideTimeout=setTimeout(function(){n.hide()},this.hideDelayMs)},t.prototype.handleAnchorClick=function(){this.tooltipShown?this.hide():this.show()},t.prototype.handleDocumentClick=function(n){var i=n.target instanceof HTMLElement&&(this.adapter.anchorContainsElement(n.target)||this.adapter.tooltipContainsElement(n.target));this.richTooltip&&this.persistentTooltip&&i||this.hide()},t.prototype.handleKeydown=function(n){var i=vi(n);if(i===Vt.ESCAPE){var r=this.adapter.getActiveElement(),s=r instanceof HTMLElement&&this.adapter.tooltipContainsElement(r);s&&this.adapter.focusAnchorElement(),this.hide()}},t.prototype.handleAnchorBlur=function(n){if(this.richTooltip){var i=n.relatedTarget instanceof HTMLElement&&this.adapter.tooltipContainsElement(n.relatedTarget);if(i||n.relatedTarget===null&&this.interactiveTooltip)return}this.hide()},t.prototype.handleTooltipMouseEnter=function(){this.show()},t.prototype.handleTooltipMouseLeave=function(){var n=this;this.clearShowTimeout(),this.hideTimeout=setTimeout(function(){n.hide()},this.hideDelayMs)},t.prototype.handleRichTooltipFocusOut=function(n){var i=n.relatedTarget instanceof HTMLElement&&(this.adapter.anchorContainsElement(n.relatedTarget)||this.adapter.tooltipContainsElement(n.relatedTarget));i||n.relatedTarget===null&&this.interactiveTooltip||this.hide()},t.prototype.handleWindowScrollEvent=function(){if(this.persistentTooltip){this.handleWindowChangeEvent();return}this.hide()},t.prototype.handleWindowChangeEvent=function(){var n=this;this.animFrame.request(kC.POLL_ANCHOR,function(){n.repositionTooltipOnAnchorMove()})},t.prototype.show=function(){var n,i,r=this;if(this.clearHideTimeout(),this.clearShowTimeout(),!this.tooltipShown){this.tooltipShown=!0,this.adapter.removeAttribute("aria-hidden"),this.richTooltip&&(this.interactiveTooltip&&this.adapter.setAnchorAttribute("aria-expanded","true"),this.adapter.registerEventHandler("focusout",this.richTooltipFocusOutHandler)),this.persistentTooltip||(this.adapter.registerEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.registerEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.adapter.removeClass(_m),this.adapter.addClass(_A),this.isTooltipMultiline()&&!this.richTooltip&&this.adapter.addClass(Mde),this.anchorRect=this.adapter.getAnchorBoundingRect(),this.parentRect=this.adapter.getParentBoundingRect(),this.richTooltip?this.positionRichTooltip():this.positionPlainTooltip(),this.adapter.registerAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.registerDocumentEventHandler("click",this.documentClickHandler),this.adapter.registerDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.registerWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler);try{for(var s=wi(this.addAncestorScrollEventListeners),a=s.next();!a.done;a=s.next()){var o=a.value;o()}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.frameId=requestAnimationFrame(function(){r.clearAllAnimationClasses(),r.adapter.addClass(vA),r.adapter.addClass(Ky)})}},t.prototype.hide=function(){var n,i;if(this.clearHideTimeout(),this.clearShowTimeout(),!!this.tooltipShown){this.frameId&&cancelAnimationFrame(this.frameId),this.tooltipShown=!1,this.adapter.setAttribute("aria-hidden","true"),this.adapter.deregisterEventHandler("focusout",this.richTooltipFocusOutHandler),this.richTooltip&&this.interactiveTooltip&&this.adapter.setAnchorAttribute("aria-expanded","false"),this.persistentTooltip||(this.adapter.deregisterEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.deregisterEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.clearAllAnimationClasses(),this.adapter.addClass(_m),this.adapter.addClass(Jy),this.adapter.removeClass(vA),this.adapter.deregisterAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.deregisterDocumentEventHandler("click",this.documentClickHandler),this.adapter.deregisterDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.deregisterWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("contextmenu",this.preventContextMenuOnLongTouch);try{for(var r=wi(this.removeAncestorScrollEventListeners),s=r.next();!s.done;s=r.next()){var a=s.value;a()}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}},t.prototype.handleTransitionEnd=function(){var n=this.adapter.hasClass(_m);this.adapter.removeClass(_A),this.adapter.removeClass(Ky),this.adapter.removeClass(_m),this.adapter.removeClass(Jy),n&&this.adapter.notifyHidden()},t.prototype.clearAllAnimationClasses=function(){this.adapter.removeClass(Ky),this.adapter.removeClass(Jy)},t.prototype.setTooltipPosition=function(n){var i=n.xPos,r=n.yPos,s=n.withCaretPos;if(this.hasCaret&&s){this.tooltipPositionWithCaret=s;return}i&&(this.xTooltipPos=i),r&&(this.yTooltipPos=r)},t.prototype.setAnchorBoundaryType=function(n){n===a_.UNBOUNDED?this.anchorGap=Mr.UNBOUNDED_ANCHOR_GAP:this.anchorGap=Mr.BOUNDED_ANCHOR_GAP},t.prototype.setShowDelay=function(n){this.showDelayMs=n},t.prototype.setHideDelay=function(n){this.hideDelayMs=n},t.prototype.isTooltipMultiline=function(){var n=this.adapter.getTooltipSize();return n.height>Mr.MIN_HEIGHT&&n.width>=Mr.MAX_WIDTH},t.prototype.positionPlainTooltip=function(){var n=this.calculateTooltipStyles(this.anchorRect),i=n.top,r=n.yTransformOrigin,s=n.left,a=n.xTransformOrigin,o=V4?z4(window,"transform"):"transform";this.adapter.setSurfaceAnimationStyleProperty(o+"-origin",a+" "+r),this.adapter.setStyleProperty("top",i+"px"),this.adapter.setStyleProperty("left",s+"px")},t.prototype.positionRichTooltip=function(){var n,i,r,s,a=this.adapter.getComputedStyleProperty("width");this.adapter.setStyleProperty("width",a);var o=this.hasCaret?this.calculateTooltipWithCaretStyles(this.anchorRect):this.calculateTooltipStyles(this.anchorRect),l=o.top,u=o.yTransformOrigin,c=o.left,f=o.xTransformOrigin,d=V4?z4(window,"transform"):"transform";this.adapter.setSurfaceAnimationStyleProperty(d+"-origin",f+" "+u);var h=c-((i=(n=this.parentRect)===null||n===void 0?void 0:n.left)!==null&&i!==void 0?i:0),p=l-((s=(r=this.parentRect)===null||r===void 0?void 0:r.top)!==null&&s!==void 0?s:0);this.adapter.setStyleProperty("top",p+"px"),this.adapter.setStyleProperty("left",h+"px")},t.prototype.calculateTooltipStyles=function(n){if(!n)return{top:0,left:0};var i=this.adapter.getTooltipSize(),r=this.calculateYTooltipDistance(n,i.height),s=this.calculateXTooltipDistance(n,i.width);return{top:r.distance,yTransformOrigin:r.yTransformOrigin,left:s.distance,xTransformOrigin:s.xTransformOrigin}},t.prototype.calculateXTooltipDistance=function(n,i){var r=!this.adapter.isRTL(),s,a,o,l,u;this.richTooltip?(s=r?n.left-i:n.right,a=r?n.right:n.left-i,l=r?bt.RIGHT:bt.LEFT,u=r?bt.LEFT:bt.RIGHT):(s=r?n.left:n.right-i,a=r?n.right-i:n.left,o=n.left+(n.width-i)/2,l=r?bt.LEFT:bt.RIGHT,u=r?bt.RIGHT:bt.LEFT);var c=this.richTooltip?this.determineValidPositionOptions(s,a):this.determineValidPositionOptions(o,s,a);if(this.xTooltipPos===pd.START&&c.has(s))return{distance:s,xTransformOrigin:l};if(this.xTooltipPos===pd.END&&c.has(a))return{distance:a,xTransformOrigin:u};if(this.xTooltipPos===pd.CENTER&&c.has(o))return{distance:o,xTransformOrigin:bt.CENTER};var f=this.richTooltip?[{distance:a,xTransformOrigin:u},{distance:s,xTransformOrigin:l}]:[{distance:o,xTransformOrigin:bt.CENTER},{distance:s,xTransformOrigin:l},{distance:a,xTransformOrigin:u}],d=f.find(function(g){var m=g.distance;return c.has(m)});if(d)return d;if(n.left<0)return{distance:this.minViewportTooltipThreshold,xTransformOrigin:bt.LEFT};var h=this.adapter.getViewportWidth(),p=h-(i+this.minViewportTooltipThreshold);return{distance:p,xTransformOrigin:bt.RIGHT}},t.prototype.determineValidPositionOptions=function(){for(var n,i,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new Set,o=new Set;try{for(var l=wi(r),u=l.next();!u.done;u=l.next()){var c=u.value;this.positionHonorsViewportThreshold(c)?a.add(c):this.positionDoesntCollideWithViewport(c)&&o.add(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return a.size?a:o},t.prototype.positionHonorsViewportThreshold=function(n){var i=this.adapter.getViewportWidth(),r=this.adapter.getTooltipSize().width;return n+r<=i-this.minViewportTooltipThreshold&&n>=this.minViewportTooltipThreshold},t.prototype.positionDoesntCollideWithViewport=function(n){var i=this.adapter.getViewportWidth(),r=this.adapter.getTooltipSize().width;return n+r<=i&&n>=0},t.prototype.calculateYTooltipDistance=function(n,i){var r=n.bottom+this.anchorGap,s=n.top-(this.anchorGap+i),a=this.determineValidYPositionOptions(s,r);return this.yTooltipPos===vp.ABOVE&&a.has(s)?{distance:s,yTransformOrigin:bt.BOTTOM}:this.yTooltipPos===vp.BELOW&&a.has(r)?{distance:r,yTransformOrigin:bt.TOP}:a.has(r)?{distance:r,yTransformOrigin:bt.TOP}:a.has(s)?{distance:s,yTransformOrigin:bt.BOTTOM}:{distance:r,yTransformOrigin:bt.TOP}},t.prototype.determineValidYPositionOptions=function(n,i){var r=new Set,s=new Set;return this.yPositionHonorsViewportThreshold(n)?r.add(n):this.yPositionDoesntCollideWithViewport(n)&&s.add(n),this.yPositionHonorsViewportThreshold(i)?r.add(i):this.yPositionDoesntCollideWithViewport(i)&&s.add(i),r.size?r:s},t.prototype.yPositionHonorsViewportThreshold=function(n){var i=this.adapter.getViewportHeight(),r=this.adapter.getTooltipSize().height;return n+r+this.minViewportTooltipThreshold<=i&&n>=this.minViewportTooltipThreshold},t.prototype.yPositionDoesntCollideWithViewport=function(n){var i=this.adapter.getViewportHeight(),r=this.adapter.getTooltipSize().height;return n+r<=i&&n>=0},t.prototype.calculateTooltipWithCaretStyles=function(n){this.adapter.clearTooltipCaretStyles();var i=this.adapter.getTooltipCaretBoundingRect();if(!n||!i)return{position:Yt.DETECTED,top:0,left:0};var r=i.width/Mr.ANIMATION_SCALE,s=i.height/Mr.ANIMATION_SCALE/2,a=this.adapter.getTooltipSize(),o=this.calculateYWithCaretDistanceOptions(n,a.height,{caretWidth:r,caretHeight:s}),l=this.calculateXWithCaretDistanceOptions(n,a.width,{caretWidth:r,caretHeight:s}),u=this.validateTooltipWithCaretDistances(o,l);u.size<1&&(u=this.generateBackupPositionOption(n,a,{caretWidth:r,caretHeight:s}));var c=this.determineTooltipWithCaretDistance(u),f=c.position,d=c.xDistance,h=c.yDistance,p=this.setCaretPositionStyles(f,{caretWidth:r,caretHeight:s}),g=p.yTransformOrigin,m=p.xTransformOrigin;return{yTransformOrigin:g,xTransformOrigin:m,top:h,left:d}},t.prototype.calculateXWithCaretDistanceOptions=function(n,i,r){var s=r.caretWidth,a=r.caretHeight,o=!this.adapter.isRTL(),l=n.left+n.width/2,u=n.left-(i+this.anchorGap+a),c=n.right+this.anchorGap+a,f=o?u:c,d=o?c:u,h=l-(Mr.CARET_INDENTATION+s/2),p=l-(i-Mr.CARET_INDENTATION-s/2),g=o?h:p,m=o?p:h,y=l-i/2,b=new Map([[an.START,g],[an.CENTER,y],[an.END,m],[an.SIDE_END,d],[an.SIDE_START,f]]);return b},t.prototype.calculateYWithCaretDistanceOptions=function(n,i,r){var s=r.caretWidth,a=r.caretHeight,o=n.top+n.height/2,l=n.bottom+this.anchorGap+a,u=n.top-(this.anchorGap+i+a),c=o-(Mr.CARET_INDENTATION+s/2),f=o-i/2,d=o-(i-Mr.CARET_INDENTATION-s/2),h=new Map([[Ti.ABOVE,u],[Ti.BELOW,l],[Ti.SIDE_TOP,c],[Ti.SIDE_CENTER,f],[Ti.SIDE_BOTTOM,d]]);return h},t.prototype.repositionTooltipOnAnchorMove=function(){var n=this.adapter.getAnchorBoundingRect();!n||!this.anchorRect||(n.top!==this.anchorRect.top||n.left!==this.anchorRect.left||n.height!==this.anchorRect.height||n.width!==this.anchorRect.width)&&(this.anchorRect=n,this.parentRect=this.adapter.getParentBoundingRect(),this.richTooltip?this.positionRichTooltip():this.positionPlainTooltip())},t.prototype.validateTooltipWithCaretDistances=function(n,i){var r,s,a,o,l,u,c=new Map,f=new Map,d=new Map([[Ti.ABOVE,[an.START,an.CENTER,an.END]],[Ti.BELOW,[an.START,an.CENTER,an.END]],[Ti.SIDE_TOP,[an.SIDE_START,an.SIDE_END]],[Ti.SIDE_CENTER,[an.SIDE_START,an.SIDE_END]],[Ti.SIDE_BOTTOM,[an.SIDE_START,an.SIDE_END]]]);try{for(var h=wi(d.keys()),p=h.next();!p.done;p=h.next()){var g=p.value,m=n.get(g);if(this.yPositionHonorsViewportThreshold(m))try{for(var y=(a=void 0,wi(d.get(g))),b=y.next();!b.done;b=y.next()){var v=b.value,_=i.get(v);if(this.positionHonorsViewportThreshold(_)){var S=this.caretPositionOptionsMapping(v,g);c.set(S,{xDistance:_,yDistance:m})}}}catch(O){a={error:O}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}else if(this.yPositionDoesntCollideWithViewport(m))try{for(var E=(l=void 0,wi(d.get(g))),w=E.next();!w.done;w=E.next()){var v=w.value,_=i.get(v);if(this.positionDoesntCollideWithViewport(_)){var S=this.caretPositionOptionsMapping(v,g);f.set(S,{xDistance:_,yDistance:m})}}}catch(O){l={error:O}}finally{try{w&&!w.done&&(u=E.return)&&u.call(E)}finally{if(l)throw l.error}}}}catch(O){r={error:O}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}return c.size?c:f},t.prototype.generateBackupPositionOption=function(n,i,r){var s=!this.adapter.isRTL(),a,o;if(n.left<0)a=this.minViewportTooltipThreshold+r.caretHeight,o=s?an.END:an.START;else{var l=this.adapter.getViewportWidth();a=l-(i.width+this.minViewportTooltipThreshold+r.caretHeight),o=s?an.START:an.END}var u,c;if(n.top<0)u=this.minViewportTooltipThreshold+r.caretHeight,c=Ti.BELOW;else{var f=this.adapter.getViewportHeight();u=f-(i.height+this.minViewportTooltipThreshold+r.caretHeight),c=Ti.ABOVE}var d=this.caretPositionOptionsMapping(o,c);return new Map([[d,{xDistance:a,yDistance:u}]])},t.prototype.determineTooltipWithCaretDistance=function(n){if(n.has(this.tooltipPositionWithCaret)){var i=n.get(this.tooltipPositionWithCaret);return{position:this.tooltipPositionWithCaret,xDistance:i.xDistance,yDistance:i.yDistance}}var r=[Yt.ABOVE_START,Yt.ABOVE_CENTER,Yt.ABOVE_END,Yt.TOP_SIDE_START,Yt.CENTER_SIDE_START,Yt.BOTTOM_SIDE_START,Yt.TOP_SIDE_END,Yt.CENTER_SIDE_END,Yt.BOTTOM_SIDE_END,Yt.BELOW_START,Yt.BELOW_CENTER,Yt.BELOW_END],s=r.find(function(o){return n.has(o)}),a=n.get(s);return{position:s,xDistance:a.xDistance,yDistance:a.yDistance}},t.prototype.caretPositionOptionsMapping=function(n,i){switch(i){case Ti.ABOVE:if(n===an.START)return Yt.ABOVE_START;if(n===an.CENTER)return Yt.ABOVE_CENTER;if(n===an.END)return Yt.ABOVE_END;break;case Ti.BELOW:if(n===an.START)return Yt.BELOW_START;if(n===an.CENTER)return Yt.BELOW_CENTER;if(n===an.END)return Yt.BELOW_END;break;case Ti.SIDE_TOP:if(n===an.SIDE_START)return Yt.TOP_SIDE_START;if(n===an.SIDE_END)return Yt.TOP_SIDE_END;break;case Ti.SIDE_CENTER:if(n===an.SIDE_START)return Yt.CENTER_SIDE_START;if(n===an.SIDE_END)return Yt.CENTER_SIDE_END;break;case Ti.SIDE_BOTTOM:if(n===an.SIDE_START)return Yt.BOTTOM_SIDE_START;if(n===an.SIDE_END)return Yt.BOTTOM_SIDE_END;break}throw new Error("MDCTooltipFoundation: Invalid caret position of "+n+", "+i)},t.prototype.setCaretPositionStyles=function(n,i){var r,s,a=this.calculateCaretPositionOnTooltip(n,i);if(!a)return{yTransformOrigin:0,xTransformOrigin:0};this.adapter.clearTooltipCaretStyles(),this.adapter.setTooltipCaretStyle(a.yAlignment,a.yAxisPx),this.adapter.setTooltipCaretStyle(a.xAlignment,a.xAxisPx);var o=a.skew*(Math.PI/180),l=Math.cos(o);this.adapter.setTooltipCaretStyle("transform","rotate("+a.rotation+"deg) skewY("+a.skew+"deg) scaleX("+l+")"),this.adapter.setTooltipCaretStyle("transform-origin",a.xAlignment+" "+a.yAlignment);try{for(var u=wi(a.caretCorners),c=u.next();!c.done;c=u.next()){var f=c.value;this.adapter.setTooltipCaretStyle(f,"0")}}catch(d){r={error:d}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return{yTransformOrigin:a.yTransformOrigin,xTransformOrigin:a.xTransformOrigin}},t.prototype.calculateCaretPositionOnTooltip=function(n,i){var r=!this.adapter.isRTL(),s=this.adapter.getComputedStyleProperty("width"),a=this.adapter.getComputedStyleProperty("height");if(!(!s||!a||!i)){var o="calc(("+s+" - "+i.caretWidth+"px) / 2)",l="calc(("+a+" - "+i.caretWidth+"px) / 2)",u="0",c=Mr.CARET_INDENTATION+"px",f="calc("+s+" - "+c+")",d="calc("+a+" - "+c+")",h=35,p=Math.abs(90-h),g=["border-bottom-right-radius","border-top-left-radius"],m=["border-bottom-left-radius","border-top-right-radius"],y=20;switch(n){case Yt.BELOW_CENTER:return{yAlignment:bt.TOP,xAlignment:bt.LEFT,yAxisPx:u,xAxisPx:o,rotation:-1*h,skew:-1*y,xTransformOrigin:o,yTransformOrigin:u,caretCorners:g};case Yt.BELOW_END:return{yAlignment:bt.TOP,xAlignment:r?bt.RIGHT:bt.LEFT,yAxisPx:u,xAxisPx:c,rotation:r?h:-1*h,skew:r?y:-1*y,xTransformOrigin:r?f:c,yTransformOrigin:u,caretCorners:r?m:g};case Yt.BELOW_START:return{yAlignment:bt.TOP,xAlignment:r?bt.LEFT:bt.RIGHT,yAxisPx:u,xAxisPx:c,rotation:r?-1*h:h,skew:r?-1*y:y,xTransformOrigin:r?c:f,yTransformOrigin:u,caretCorners:r?g:m};case Yt.TOP_SIDE_END:return{yAlignment:bt.TOP,xAlignment:r?bt.LEFT:bt.RIGHT,yAxisPx:c,xAxisPx:u,rotation:r?p:-1*p,skew:r?-1*y:y,xTransformOrigin:r?u:s,yTransformOrigin:c,caretCorners:r?g:m};case Yt.CENTER_SIDE_END:return{yAlignment:bt.TOP,xAlignment:r?bt.LEFT:bt.RIGHT,yAxisPx:l,xAxisPx:u,rotation:r?p:-1*p,skew:r?-1*y:y,xTransformOrigin:r?u:s,yTransformOrigin:l,caretCorners:r?g:m};case Yt.BOTTOM_SIDE_END:return{yAlignment:bt.BOTTOM,xAlignment:r?bt.LEFT:bt.RIGHT,yAxisPx:c,xAxisPx:u,rotation:r?-1*p:p,skew:r?y:-1*y,xTransformOrigin:r?u:s,yTransformOrigin:d,caretCorners:r?m:g};case Yt.TOP_SIDE_START:return{yAlignment:bt.TOP,xAlignment:r?bt.RIGHT:bt.LEFT,yAxisPx:c,xAxisPx:u,rotation:r?-1*p:p,skew:r?y:-1*y,xTransformOrigin:r?s:u,yTransformOrigin:c,caretCorners:r?m:g};case Yt.CENTER_SIDE_START:return{yAlignment:bt.TOP,xAlignment:r?bt.RIGHT:bt.LEFT,yAxisPx:l,xAxisPx:u,rotation:r?-1*p:p,skew:r?y:-1*y,xTransformOrigin:r?s:u,yTransformOrigin:l,caretCorners:r?m:g};case Yt.BOTTOM_SIDE_START:return{yAlignment:bt.BOTTOM,xAlignment:r?bt.RIGHT:bt.LEFT,yAxisPx:c,xAxisPx:u,rotation:r?p:-1*p,skew:r?-1*y:y,xTransformOrigin:r?s:u,yTransformOrigin:d,caretCorners:r?g:m};case Yt.ABOVE_CENTER:return{yAlignment:bt.BOTTOM,xAlignment:bt.LEFT,yAxisPx:u,xAxisPx:o,rotation:h,skew:y,xTransformOrigin:o,yTransformOrigin:a,caretCorners:m};case Yt.ABOVE_END:return{yAlignment:bt.BOTTOM,xAlignment:r?bt.RIGHT:bt.LEFT,yAxisPx:u,xAxisPx:c,rotation:r?-1*h:h,skew:r?-1*y:y,xTransformOrigin:r?f:c,yTransformOrigin:a,caretCorners:r?g:m};default:case Yt.ABOVE_START:return{yAlignment:bt.BOTTOM,xAlignment:r?bt.LEFT:bt.RIGHT,yAxisPx:u,xAxisPx:c,rotation:r?h:-1*h,skew:r?y:-1*y,xTransformOrigin:r?c:f,yTransformOrigin:a,caretCorners:r?m:g}}}},t.prototype.clearShowTimeout=function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)},t.prototype.clearHideTimeout=function(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},t.prototype.attachScrollHandler=function(n){var i=this;this.addAncestorScrollEventListeners.push(function(){n("scroll",i.windowScrollHandler)})},t.prototype.removeScrollHandler=function(n){var i=this;this.removeAncestorScrollEventListeners.push(function(){n("scroll",i.windowScrollHandler)})},t.prototype.destroy=function(){var n,i;this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.clearHideTimeout(),this.clearShowTimeout(),this.adapter.removeClass(vA),this.adapter.removeClass(Ky),this.adapter.removeClass(_A),this.adapter.removeClass(_m),this.adapter.removeClass(Jy),this.richTooltip&&this.adapter.deregisterEventHandler("focusout",this.richTooltipFocusOutHandler),this.persistentTooltip||(this.adapter.deregisterEventHandler("mouseenter",this.tooltipMouseEnterHandler),this.adapter.deregisterEventHandler("mouseleave",this.tooltipMouseLeaveHandler)),this.adapter.deregisterAnchorEventHandler("blur",this.anchorBlurHandler),this.adapter.deregisterDocumentEventHandler("click",this.documentClickHandler),this.adapter.deregisterDocumentEventHandler("keydown",this.documentKeydownHandler),this.adapter.deregisterWindowEventHandler("scroll",this.windowScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler);try{for(var r=wi(this.removeAncestorScrollEventListeners),s=r.next();!s.done;s=r.next()){var a=s.value;a()}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}this.animFrame.cancelAll()},t}(cr);function Rde(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g;const m=e[31].default,y=Ue(m,e,e[30],null);let b=[{class:i=xe({[e[7]]:!0,"mdc-tooltip__surface":!0,"mdc-tooltip__surface-animation":!0})},{style:r=Object.entries(e[14]).map($4).concat([e[8]]).join(" ")},mt(e[19],"surface$")],v={};for(let E=0;E<b.length;E+=1)v=Q(v,b[E]);let _=[{class:s=xe({[e[1]]:!0,"mdc-tooltip":!0,"mdc-tooltip--rich":e[18],...e[11]})},{style:a=Object.entries(e[12]).map(H4).concat([e[2]]).join(" ")},{role:o=e[18]&&e[5]?"dialog":"tooltip"},{"aria-hidden":"true"},{id:e[3]},{tabindex:l=e[18]&&e[4]?-1:void 0},{"data-mdc-tooltip-persist":u=e[18]&&e[4]?"true":void 0},{"data-mdc-tooltip-persistent":c=e[18]&&e[4]?"true":void 0},{"data-mdc-tooltip-has-caret":void 0},{"data-hide-tooltip-from-screenreader":f=e[6]?"true":void 0},e[13],ys(e[19],["surface$"])],S={};for(let E=0;E<_.length;E+=1)S=Q(S,_[E]);return{c(){t=K("div"),n=K("div"),y&&y.c(),Se(n,v),Se(t,S)},m(E,w){U(E,t,w),G(t,n),y&&y.m(n,null),e[32](t),h=!0,p||(g=[Ee(d=wt.call(null,t,e[0])),Ee(e[15].call(null,t)),Ke(t,"transitionend",e[33])],p=!0)},p(E,w){y&&y.p&&(!h||w[0]&1073741824)&&Ve(y,m,E,E[30],h?ze(m,E[30],w,null):$e(E[30]),null),Se(n,v=Le(b,[(!h||w[0]&128&&i!==(i=xe({[E[7]]:!0,"mdc-tooltip__surface":!0,"mdc-tooltip__surface-animation":!0})))&&{class:i},(!h||w[0]&16640&&r!==(r=Object.entries(E[14]).map($4).concat([E[8]]).join(" ")))&&{style:r},w[0]&524288&&mt(E[19],"surface$")])),Se(t,S=Le(_,[(!h||w[0]&2050&&s!==(s=xe({[E[1]]:!0,"mdc-tooltip":!0,"mdc-tooltip--rich":E[18],...E[11]})))&&{class:s},(!h||w[0]&4100&&a!==(a=Object.entries(E[12]).map(H4).concat([E[2]]).join(" ")))&&{style:a},(!h||w[0]&32&&o!==(o=E[18]&&E[5]?"dialog":"tooltip"))&&{role:o},{"aria-hidden":"true"},(!h||w[0]&8)&&{id:E[3]},(!h||w[0]&16&&l!==(l=E[18]&&E[4]?-1:void 0))&&{tabindex:l},(!h||w[0]&16&&u!==(u=E[18]&&E[4]?"true":void 0))&&{"data-mdc-tooltip-persist":u},(!h||w[0]&16&&c!==(c=E[18]&&E[4]?"true":void 0))&&{"data-mdc-tooltip-persistent":c},{"data-mdc-tooltip-has-caret":void 0},(!h||w[0]&64&&f!==(f=E[6]?"true":void 0))&&{"data-hide-tooltip-from-screenreader":f},w[0]&8192&&E[13],w[0]&524288&&ys(E[19],["surface$"])])),d&&rt(d.update)&&w[0]&1&&d.update.call(null,E[0])},i(E){h||(F(y,E),h=!0)},o(E){P(y,E),h=!1},d(E){E&&j(t),y&&y.d(E),e[32](null),p=!1,pt(g)}}}let Lde=0;const $4=([e,t])=>`${e}: ${t};`,H4=([e,t])=>`${e}: ${t};`;function Nde(e,t,n){const i=["use","class","style","id","unbounded","xPos","yPos","persistent","interactive","hideFromScreenreader","showDelay","hideDelay","surface$class","surface$style","attachScrollHandler","removeScrollHandler","getElement"];let r=Ce(t,i),s,a,{$$slots:o={},$$scope:l}=t;const u=St(ft());let{use:c=[]}=t,{class:f=""}=t,{style:d=""}=t,{id:h="SMUI-tooltip-"+Lde++}=t,{unbounded:p=!1}=t,{xPos:g="detected"}=t,{yPos:m="detected"}=t,{persistent:y=!1}=t,{interactive:b=y}=t,{hideFromScreenreader:v=!1}=t,{showDelay:_=void 0}=t,{hideDelay:S=void 0}=t,{surface$class:E=""}=t,{surface$style:w=""}=t,O,D,x={setParent(V){Object.defineProperty(this,"parent",{value:V})},setNextSibling(V){Object.defineProperty(this,"nextSibling",{value:V})}},A={},C={},I={},L={},k=Zt("SMUI:tooltip:wrapper:anchor");Qe(e,k,V=>n(29,s=V));let M=Zt("SMUI:tooltip:wrapper:tooltip");Qe(e,M,V=>n(34,a=V));const N=Zt("SMUI:tooltip:rich");let R;Zn(()=>(n(9,D=new Dde({getAttribute:pe,setAttribute:Oe,removeAttribute:Re,addClass:H,hasClass:Y,removeClass:oe,getComputedStyleProperty:V=>{const X=Nt();let Ze=getComputedStyle(X).getPropertyValue(V);return Ze==="auto"&&(X.classList.add("smui-banner--force-show"),Ze=getComputedStyle(X).getPropertyValue(V),X.classList.remove("smui-banner--force-show")),Ze},setStyleProperty:_e,setSurfaceAnimationStyleProperty:re,getViewportWidth:()=>window.innerWidth,getViewportHeight:()=>window.innerHeight,getTooltipSize:()=>{const V=Nt();let X={width:V.offsetWidth,height:V.offsetHeight};return(X.width===0||X.height===0)&&(V.classList.add("smui-banner--force-show"),X={width:V.offsetWidth,height:V.offsetHeight},V.classList.remove("smui-banner--force-show")),X},getAnchorBoundingRect:()=>s?s.getBoundingClientRect():null,getParentBoundingRect:()=>{let V=Nt().parentElement;return N||(V=document.body),V?.getBoundingClientRect()||null},getAnchorAttribute:V=>s?s.getAttribute(V):null,setAnchorAttribute:(V,X)=>{s&&s.setAttribute(V,X)},isRTL:()=>getComputedStyle(Nt()).direction==="rtl",anchorContainsElement:V=>!!(s&&s.contains(V)),tooltipContainsElement:V=>Nt().contains(V),focusAnchorElement:()=>{s&&s.focus()},registerEventHandler:(V,X)=>{Nt().addEventListener(V,X)},deregisterEventHandler:(V,X)=>{Nt().removeEventListener(V,X)},registerAnchorEventHandler:(V,X)=>{s&&s.addEventListener(V,X)},deregisterAnchorEventHandler:(V,X)=>{s&&s.removeEventListener(V,X)},registerDocumentEventHandler:(V,X)=>{document.body.addEventListener(V,X)},deregisterDocumentEventHandler:(V,X)=>{document.body.removeEventListener(V,X)},registerWindowEventHandler:(V,X)=>{window.addEventListener(V,X,V==="scroll"&&{capture:!0,passive:!0})},deregisterWindowEventHandler:(V,X)=>{window.removeEventListener(V,X,V==="scroll"&&{capture:!0,passive:!0})},notifyHidden:()=>{yt(Nt(),"SMUITooltip:hidden",void 0,void 0,!0)},getTooltipCaretBoundingRect:()=>{const V=Nt().querySelector(`.${cs.TOOLTIP_CARET_TOP}`);return V?V.getBoundingClientRect():null},setTooltipCaretStyle:(V,X)=>{const Ze=Nt().querySelector(`.${cs.TOOLTIP_CARET_TOP}`),Ot=Nt().querySelector(`.${cs.TOOLTIP_CARET_BOTTOM}`);!Ze||!Ot||(Ze.style.setProperty(V,X),Ot.style.setProperty(V,X))},clearTooltipCaretStyles:()=>{const V=Nt().querySelector(`.${cs.TOOLTIP_CARET_TOP}`),X=Nt().querySelector(`.${cs.TOOLTIP_CARET_BOTTOM}`);!V||!X||(V.removeAttribute("style"),X.removeAttribute("style"))},getActiveElement:()=>document.activeElement})),yu(M,a=O,a),()=>{s&&T(s)})),na(()=>{var V;!N&&typeof document<"u"&&document.body===Nt().parentElement&&x.parent!==Nt().parentElement&&((V=x.parent)===null||V===void 0?void 0:V.insertBefore)&&x.nextSibling&&x.parent.insertBefore(Nt(),x.nextSibling)});function T(V){V.removeEventListener("focusout",W),N&&y?(V.removeEventListener("click",q),V.removeEventListener("keydown",q)):(V.removeEventListener("mouseenter",ve),V.removeEventListener("focusin",ce),V.removeEventListener("mouseleave",fe),V.removeEventListener("touchstart",we),V.removeEventListener("touchend",Xe)),N&&b?(V.removeAttribute("aria-haspopup"),V.removeAttribute("aria-expanded"),V.removeAttribute("data-tooltip-id")):V.removeAttribute("aria-describedby"),D.destroy()}function z(V){V.addEventListener("focusout",W),N&&y?(V.addEventListener("click",q),V.addEventListener("keydown",q)):(V.addEventListener("mouseenter",ve),V.addEventListener("focusin",ce),V.addEventListener("mouseleave",fe),V.addEventListener("touchstart",we),V.addEventListener("touchend",Xe)),N&&b?(V.setAttribute("aria-haspopup","dialog"),V.setAttribute("aria-expanded","false"),V.setAttribute("data-tooltip-id",h)):V.setAttribute("aria-describedby",h),N||tt(),D.init()}function Y(V){return V in A?A[V]:Nt().classList.contains(V)}function H(V){A[V]||n(11,A[V]=!0,A)}function oe(V){(!(V in A)||A[V])&&n(11,A[V]=!1,A)}function _e(V,X){C[V]!=X&&(X===""||X==null?(delete C[V],n(12,C)):n(12,C[V]=X,C))}function re(V,X){L[V]!=X&&(X===""||X==null?(delete L[V],n(14,L)):n(14,L[V]=X,L))}function pe(V){var X;return V in I?(X=I[V])!==null&&X!==void 0?X:null:Nt().getAttribute(V)}function Oe(V,X){I[V]!==X&&n(13,I[V]=X,I)}function Re(V){(!(V in I)||I[V]!=null)&&n(13,I[V]=void 0,I)}function W(V){O.contains(V.relatedTarget)||D&&D.hide()}function q(V){V.type==="keydown"&&V.key!=="Enter"&&V.key!==" "||D&&D.handleAnchorClick()}function ve(){D&&D.handleAnchorMouseEnter()}function ce(V){D&&D.handleAnchorFocus(V)}function fe(){D&&D.handleAnchorMouseLeave()}function we(){D&&D.handleAnchorTouchstart()}function Xe(){D&&D.handleAnchorTouchend()}function tt(){var V,X;s&&document.body!==Nt().parentNode&&(x.setParent((V=Nt().parentElement)!==null&&V!==void 0?V:void 0),x.setNextSibling((X=Nt().nextElementSibling)!==null&&X!==void 0?X:void 0),document.body.appendChild(Nt()))}function ct(V){D&&D.attachScrollHandler(V)}function yn(V){D&&D.removeScrollHandler(V)}function Nt(){return O}function se(V){be[V?"unshift":"push"](()=>{O=V,n(10,O)})}const Ne=()=>D&&D.handleTransitionEnd();return e.$$set=V=>{t=Q(Q({},t),vt(V)),n(19,r=Ce(t,i)),"use"in V&&n(0,c=V.use),"class"in V&&n(1,f=V.class),"style"in V&&n(2,d=V.style),"id"in V&&n(3,h=V.id),"unbounded"in V&&n(20,p=V.unbounded),"xPos"in V&&n(21,g=V.xPos),"yPos"in V&&n(22,m=V.yPos),"persistent"in V&&n(4,y=V.persistent),"interactive"in V&&n(5,b=V.interactive),"hideFromScreenreader"in V&&n(6,v=V.hideFromScreenreader),"showDelay"in V&&n(23,_=V.showDelay),"hideDelay"in V&&n(24,S=V.hideDelay),"surface$class"in V&&n(7,E=V.surface$class),"surface$style"in V&&n(8,w=V.surface$style),"$$scope"in V&&n(30,l=V.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&805306880&&D&&R!==s&&(R&&T(R),s&&z(s),n(28,R=s)),e.$$.dirty[0]&1049088&&D&&D.setAnchorBoundaryType(a_[p?"UNBOUNDED":"BOUNDED"]),e.$$.dirty[0]&6291968&&D&&D.setTooltipPosition({xPos:pd[g.toUpperCase()],yPos:vp[m.toUpperCase()]}),e.$$.dirty[0]&8389120&&D&&_!=null&&D.setShowDelay(_),e.$$.dirty[0]&16777728&&D&&S!=null&&D.setHideDelay(S)},[c,f,d,h,y,b,v,E,w,D,O,A,C,I,L,u,k,M,N,r,p,g,m,_,S,ct,yn,Nt,R,s,l,o,se,Ne]}class hh extends qe{constructor(t){super(),We(this,t,Nde,Rde,He,{use:0,class:1,style:2,id:3,unbounded:20,xPos:21,yPos:22,persistent:4,interactive:5,hideFromScreenreader:6,showDelay:23,hideDelay:24,surface$class:7,surface$style:8,attachScrollHandler:25,removeScrollHandler:26,getElement:27},null,[-1,-1])}get attachScrollHandler(){return this.$$.ctx[25]}get removeScrollHandler(){return this.$$.ctx[26]}get getElement(){return this.$$.ctx[27]}}function Fde(e){let t;const n=e[12].default,i=Ue(n,e,e[11],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&2048)&&Ve(i,n,r,r[11],t?ze(n,r[11],s,null):$e(r[11]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Pde(e){let t,n,i,r,s,a;const o=e[12].default,l=Ue(o,e,e[11],null);let u=[{class:n=xe({[e[1]]:!0,"mdc-tooltip-wrapper--rich":!0})},e[7]],c={};for(let f=0;f<u.length;f+=1)c=Q(c,u[f]);return{c(){t=K("div"),l&&l.c(),Se(t,c)},m(f,d){U(f,t,d),l&&l.m(t,null),e[13](t),r=!0,s||(a=[Ee(i=wt.call(null,t,e[0])),Ee(e[4].call(null,t))],s=!0)},p(f,d){l&&l.p&&(!r||d&2048)&&Ve(l,o,f,f[11],r?ze(o,f[11],d,null):$e(f[11]),null),Se(t,c=Le(u,[(!r||d&2&&n!==(n=xe({[f[1]]:!0,"mdc-tooltip-wrapper--rich":!0})))&&{class:n},d&128&&f[7]])),i&&rt(i.update)&&d&1&&i.update.call(null,f[0])},i(f){r||(F(l,f),r=!0)},o(f){P(l,f),r=!1},d(f){f&&j(t),l&&l.d(f),e[13](null),s=!1,pt(a)}}}function Bde(e){let t,n,i,r;const s=[Pde,Fde],a=[];function o(l,u){return l[2]?0:1}return t=o(e),n=a[t]=s[t](e),{c(){n.c(),i=_t()},m(l,u){a[t].m(l,u),U(l,i,u),r=!0},p(l,[u]){let c=t;t=o(l),t===c?a[t].p(l,u):(Be(),P(a[c],1,1,()=>{a[c]=null}),je(),n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),F(n,1),n.m(i.parentNode,i))},i(l){r||(F(n),r=!0)},o(l){P(n),r=!1},d(l){a[t].d(l),l&&j(i)}}}function jde(e,t,n){const i=["use","class","rich","getElement"];let r=Ce(t,i),s,a,{$$slots:o={},$$scope:l}=t;const u=St(ft());let{use:c=[]}=t,{class:f=""}=t,{rich:d=!1}=t,h;const p=oi(void 0);Qe(e,p,b=>n(10,a=b));const g=oi(void 0);Qe(e,g,b=>n(9,s=b)),Tt("SMUI:tooltip:wrapper:anchor",p),Tt("SMUI:tooltip:wrapper:tooltip",g),Tt("SMUI:tooltip:rich",d);function m(){return h}function y(b){be[b?"unshift":"push"](()=>{h=b,n(3,h)})}return e.$$set=b=>{t=Q(Q({},t),vt(b)),n(7,r=Ce(t,i)),"use"in b&&n(0,c=b.use),"class"in b&&n(1,f=b.class),"rich"in b&&n(2,d=b.rich),"$$scope"in b&&n(11,l=b.$$scope)},e.$$.update=()=>{e.$$.dirty&1536&&s&&!a&&yu(p,a=s.previousElementSibling,a)},[c,f,d,h,u,p,g,r,m,s,a,l,o,y]}class Ude extends qe{constructor(t){super(),We(this,t,jde,Bde,He,{use:0,class:1,rich:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}fr({class:"mdc-tooltip__title",component:zne});fr({class:"mdc-tooltip__content",component:C1});fr({class:"mdc-tooltip__content-link",component:G2});fr({class:"mdc-tooltip--rich-actions",component:C1,contexts:{"SMUI:button:context":"tooltip:rich-actions"}});const Ud=Ude;function W4(e){let t,n,i,r;return t=new Ide({props:{style:"height: 32px; width: 32px; margin-right:20px",indeterminate:!0}}),{c(){ie(t.$$.fragment),n=ae(),i=K("span")},m(s,a){te(t,s,a),U(s,n,a),U(s,i,a),i.innerHTML=e[1],r=!0},p(s,a){(!r||a&2)&&(i.innerHTML=s[1])},i(s){r||(F(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){ne(t,s),s&&j(n),s&&j(i)}}}function zde(e){let t;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",Xte)},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function Vde(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[zde]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&4&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function $de(e){let t;return{c(){t=ye("read the documentation")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Hde(e){let t,n,i,r;return t=new Ja({props:{href:"https://cabreraalex.github.io/zeno/intro.html",$$slots:{default:[Vde]},$$scope:{ctx:e}}}),i=new hh({props:{$$slots:{default:[$de]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment)},m(s,a){te(t,s,a),U(s,n,a),te(i,s,a),r=!0},p(s,a){const o={};a&4&&(o.$$scope={dirty:a,ctx:s}),t.$set(o);const l={};a&4&&(l.$$scope={dirty:a,ctx:s}),i.$set(l)},i(s){r||(F(t.$$.fragment,s),F(i.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),P(i.$$.fragment,s),r=!1},d(s){ne(t,s),s&&j(n),ne(i,s)}}}function Wde(e){let t;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",Zte)},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function qde(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[Wde]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&4&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Gde(e){let t;return{c(){t=ye("see the code on GitHub")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Yde(e){let t,n,i,r;return t=new Ja({props:{href:"https://github.com/cabreraalex/zeno",$$slots:{default:[qde]},$$scope:{ctx:e}}}),i=new hh({props:{$$slots:{default:[Gde]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment)},m(s,a){te(t,s,a),U(s,n,a),te(i,s,a),r=!0},p(s,a){const o={};a&4&&(o.$$scope={dirty:a,ctx:s}),t.$set(o);const l={};a&4&&(l.$$scope={dirty:a,ctx:s}),i.$set(l)},i(s){r||(F(t.$$.fragment,s),F(i.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),P(i.$$.fragment,s),r=!1},d(s){ne(t,s),s&&j(n),ne(i,s)}}}function Xde(e){let t,n,i,r,s,a,o,l,u,c,f,d,h=e[0]&&W4(e);return u=new Ud({props:{$$slots:{default:[Hde]},$$scope:{ctx:e}}}),f=new Ud({props:{$$slots:{default:[Yde]},$$scope:{ctx:e}}}),{c(){t=K("header"),n=K("div"),i=K("img"),s=ae(),a=K("div"),h&&h.c(),o=ae(),l=K("div"),ie(u.$$.fragment),c=ae(),ie(f.$$.fragment),vn(i,"width","100px"),vn(i,"margin-right","50px"),mu(i.src,r="zeno.png")||J(i,"src",r),J(i,"alt","Square spiral logo next to 'Zeno'"),J(i,"class","svelte-1hlgax5"),J(a,"class","status inline svelte-1hlgax5"),J(n,"class","inline svelte-1hlgax5"),J(t,"class","svelte-1hlgax5")},m(p,g){U(p,t,g),G(t,n),G(n,i),G(n,s),G(n,a),h&&h.m(a,null),G(t,o),G(t,l),te(u,l,null),G(l,c),te(f,l,null),d=!0},p(p,[g]){p[0]?h?(h.p(p,g),g&1&&F(h,1)):(h=W4(p),h.c(),F(h,1),h.m(a,null)):h&&(Be(),P(h,1,1,()=>{h=null}),je());const m={};g&4&&(m.$$scope={dirty:g,ctx:p}),u.$set(m);const y={};g&4&&(y.$$scope={dirty:g,ctx:p}),f.$set(y)},i(p){d||(F(h),F(u.$$.fragment,p),F(f.$$.fragment,p),d=!0)},o(p){P(h),P(u.$$.fragment,p),P(f.$$.fragment,p),d=!1},d(p){p&&j(t),h&&h.d(),ne(u),ne(f)}}}function Kde(e,t,n){let i;Qe(e,P4,s=>n(1,i=s));let r=!0;return P4.subscribe(s=>{s.startsWith("Done")?n(0,r=!1):n(0,r=!0)}),[r,i]}class Jde extends qe{constructor(t){super(),We(this,t,Kde,Xde,He,{})}}function q4(e){let t;return{c(){t=K("div"),J(t,"class","mdc-button__touch")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Qde(e){let t,n,i,r;const s=e[27].default,a=Ue(s,e,e[29],null);let o=e[6]&&q4();return{c(){t=K("div"),n=ae(),a&&a.c(),o&&o.c(),i=_t(),J(t,"class","mdc-button__ripple")},m(l,u){U(l,t,u),U(l,n,u),a&&a.m(l,u),o&&o.m(l,u),U(l,i,u),r=!0},p(l,u){a&&a.p&&(!r||u&536870912)&&Ve(a,s,l,l[29],r?ze(s,l[29],u,null):$e(l[29]),null),l[6]?o||(o=q4(),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i(l){r||(F(a,l),r=!0)},o(l){P(a,l),r=!1},d(l){l&&j(t),l&&j(n),a&&a.d(l),o&&o.d(l),l&&j(i)}}}function Zde(e){let t,n,i;const r=[{use:[[uo,{ripple:e[3],unbounded:!1,color:e[4],disabled:!!e[22].disabled,addClass:e[18],removeClass:e[19],addStyle:e[20]}],e[16],...e[0]]},{class:xe({[e[1]]:!0,"mdc-button":!0,"mdc-button--raised":e[5]==="raised","mdc-button--unelevated":e[5]==="unelevated","mdc-button--outlined":e[5]==="outlined","smui-button--color-secondary":e[4]==="secondary","mdc-button--touch":e[6],"mdc-card__action":e[17]==="card:action","mdc-card__action--button":e[17]==="card:action","mdc-dialog__button":e[17]==="dialog:action","mdc-top-app-bar__navigation-icon":e[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":e[17]==="top-app-bar:action","mdc-snackbar__action":e[17]==="snackbar:actions","mdc-banner__secondary-action":e[17]==="banner"&&e[8],"mdc-banner__primary-action":e[17]==="banner"&&!e[8],"mdc-tooltip__action":e[17]==="tooltip:rich-actions",...e[11]})},{style:Object.entries(e[12]).map(G4).concat([e[2]]).join(" ")},e[15],e[14],e[13],{href:e[7]},e[22]];var s=e[9];function a(o){let l={$$slots:{default:[Qde]},$$scope:{ctx:o}};for(let u=0;u<r.length;u+=1)l=Q(l,r[u]);return{props:l}}return s&&(t=new s(a(e)),e[28](t),t.$on("click",e[21])),{c(){t&&ie(t.$$.fragment),n=_t()},m(o,l){t&&te(t,o,l),U(o,n,l),i=!0},p(o,[l]){const u=l&6289919?Le(r,[l&6094873&&{use:[[uo,{ripple:o[3],unbounded:!1,color:o[4],disabled:!!o[22].disabled,addClass:o[18],removeClass:o[19],addStyle:o[20]}],o[16],...o[0]]},l&133490&&{class:xe({[o[1]]:!0,"mdc-button":!0,"mdc-button--raised":o[5]==="raised","mdc-button--unelevated":o[5]==="unelevated","mdc-button--outlined":o[5]==="outlined","smui-button--color-secondary":o[4]==="secondary","mdc-button--touch":o[6],"mdc-card__action":o[17]==="card:action","mdc-card__action--button":o[17]==="card:action","mdc-dialog__button":o[17]==="dialog:action","mdc-top-app-bar__navigation-icon":o[17]==="top-app-bar:navigation","mdc-top-app-bar__action-item":o[17]==="top-app-bar:action","mdc-snackbar__action":o[17]==="snackbar:actions","mdc-banner__secondary-action":o[17]==="banner"&&o[8],"mdc-banner__primary-action":o[17]==="banner"&&!o[8],"mdc-tooltip__action":o[17]==="tooltip:rich-actions",...o[11]})},l&4100&&{style:Object.entries(o[12]).map(G4).concat([o[2]]).join(" ")},l&32768&&kt(o[15]),l&16384&&kt(o[14]),l&8192&&kt(o[13]),l&128&&{href:o[7]},l&4194304&&kt(o[22])]):{};if(l&536870976&&(u.$$scope={dirty:l,ctx:o}),s!==(s=o[9])){if(t){Be();const c=t;P(c.$$.fragment,1,0,()=>{ne(c,1)}),je()}s?(t=new s(a(o)),o[28](t),t.$on("click",o[21]),ie(t.$$.fragment),F(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){i||(t&&F(t.$$.fragment,o),i=!0)},o(o){t&&P(t.$$.fragment,o),i=!1},d(o){e[28](null),o&&j(n),t&&ne(t,o)}}}const G4=([e,t])=>`${e}: ${t};`;function ehe(e,t,n){let i,r,s;const a=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let o=Ce(t,a),{$$slots:l={},$$scope:u}=t;const c=St(ft());let{use:f=[]}=t,{class:d=""}=t,{style:h=""}=t,{ripple:p=!0}=t,{color:g="primary"}=t,{variant:m="text"}=t,{touch:y=!1}=t,{href:b=void 0}=t,{action:v="close"}=t,{defaultAction:_=!1}=t,{secondary:S=!1}=t,E,w={},O={},D=Zt("SMUI:button:context"),{component:x=b==null?Aj:G2}=t,A=o.disabled;Tt("SMUI:label:context","button"),Tt("SMUI:icon:context","button");function C(R){w[R]||n(11,w[R]=!0,w)}function I(R){(!(R in w)||w[R])&&n(11,w[R]=!1,w)}function L(R,T){O[R]!=T&&(T===""||T==null?(delete O[R],n(12,O)):n(12,O[R]=T,O))}function k(){D==="banner"&&yt(M(),S?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function M(){return E.getElement()}function N(R){be[R?"unshift":"push"](()=>{E=R,n(10,E)})}return e.$$set=R=>{n(30,t=Q(Q({},t),vt(R))),n(22,o=Ce(t,a)),"use"in R&&n(0,f=R.use),"class"in R&&n(1,d=R.class),"style"in R&&n(2,h=R.style),"ripple"in R&&n(3,p=R.ripple),"color"in R&&n(4,g=R.color),"variant"in R&&n(5,m=R.variant),"touch"in R&&n(6,y=R.touch),"href"in R&&n(7,b=R.href),"action"in R&&n(23,v=R.action),"defaultAction"in R&&n(24,_=R.defaultAction),"secondary"in R&&n(8,S=R.secondary),"component"in R&&n(9,x=R.component),"$$scope"in R&&n(29,u=R.$$scope)},e.$$.update=()=>{n(15,i=D==="dialog:action"&&v!=null?{"data-mdc-dialog-action":v}:{action:t.action}),n(14,r=D==="dialog:action"&&_?{"data-mdc-dialog-button-default":""}:{default:t.default}),n(13,s=D==="banner"?{}:{secondary:t.secondary}),A!==o.disabled&&(M().blur(),n(26,A=o.disabled))},t=vt(t),[f,d,h,p,g,m,y,b,S,x,E,w,O,s,r,i,c,D,C,I,L,k,o,v,_,M,A,l,N,u]}class o_ extends qe{constructor(t){super(),We(this,t,ehe,Zde,He,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}function the(e){let t,n,i,r,s,a;const o=e[12].default,l=Ue(o,e,e[11],null);let u=[{class:n=xe({[e[1]]:!0,"smui-paper":!0,"smui-paper--raised":e[2]==="raised","smui-paper--unelevated":e[2]==="unelevated","smui-paper--outlined":e[2]==="outlined",["smui-paper--elevation-z"+e[5]]:e[5]!==0&&e[2]==="raised","smui-paper--rounded":!e[3],["smui-paper--color-"+e[4]]:e[4]!=="default","smui-paper-transition":e[6]})},e[9]],c={};for(let f=0;f<u.length;f+=1)c=Q(c,u[f]);return{c(){t=K("div"),l&&l.c(),Se(t,c)},m(f,d){U(f,t,d),l&&l.m(t,null),e[13](t),r=!0,s||(a=[Ee(i=wt.call(null,t,e[0])),Ee(e[8].call(null,t))],s=!0)},p(f,[d]){l&&l.p&&(!r||d&2048)&&Ve(l,o,f,f[11],r?ze(o,f[11],d,null):$e(f[11]),null),Se(t,c=Le(u,[(!r||d&126&&n!==(n=xe({[f[1]]:!0,"smui-paper":!0,"smui-paper--raised":f[2]==="raised","smui-paper--unelevated":f[2]==="unelevated","smui-paper--outlined":f[2]==="outlined",["smui-paper--elevation-z"+f[5]]:f[5]!==0&&f[2]==="raised","smui-paper--rounded":!f[3],["smui-paper--color-"+f[4]]:f[4]!=="default","smui-paper-transition":f[6]})))&&{class:n},d&512&&f[9]])),i&&rt(i.update)&&d&1&&i.update.call(null,f[0])},i(f){r||(F(l,f),r=!0)},o(f){P(l,f),r=!1},d(f){f&&j(t),l&&l.d(f),e[13](null),s=!1,pt(a)}}}function nhe(e,t,n){const i=["use","class","variant","square","color","elevation","transition","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,{variant:c="raised"}=t,{square:f=!1}=t,{color:d="default"}=t,{elevation:h=1}=t,{transition:p=!1}=t,g;function m(){return g}function y(b){be[b?"unshift":"push"](()=>{g=b,n(7,g)})}return e.$$set=b=>{t=Q(Q({},t),vt(b)),n(9,r=Ce(t,i)),"use"in b&&n(0,l=b.use),"class"in b&&n(1,u=b.class),"variant"in b&&n(2,c=b.variant),"square"in b&&n(3,f=b.square),"color"in b&&n(4,d=b.color),"elevation"in b&&n(5,h=b.elevation),"transition"in b&&n(6,p=b.transition),"$$scope"in b&&n(11,a=b.$$scope)},[l,u,c,f,d,h,p,g,o,r,m,a,s,y]}class Dk extends qe{constructor(t){super(),We(this,t,nhe,the,He,{use:0,class:1,variant:2,square:3,color:4,elevation:5,transition:6,getElement:10})}get getElement(){return this.$$.ctx[10]}}var ihe=fr({class:"smui-paper__content",component:C1});fr({class:"smui-paper__title",component:$ne});fr({class:"smui-paper__subtitle",component:Hne});/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var rhe={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var she=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.shakeAnimationEndHandler=function(){i.handleShakeAnimationEnd()},i}return Object.defineProperty(t,"cssClasses",{get:function(){return rhe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(n){var i=t.cssClasses.LABEL_SHAKE;n?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.float=function(n){var i=t.cssClasses,r=i.LABEL_FLOAT_ABOVE,s=i.LABEL_SHAKE;n?this.adapter.addClass(r):(this.adapter.removeClass(r),this.adapter.removeClass(s))},t.prototype.setRequired=function(n){var i=t.cssClasses.LABEL_REQUIRED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.handleShakeAnimationEnd=function(){var n=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(n)},t}(cr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Rf={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ahe=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.transitionEndHandler=function(r){i.handleTransitionEnd(r)},i}return Object.defineProperty(t,"cssClasses",{get:function(){return Rf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler)},t.prototype.activate=function(){this.adapter.removeClass(Rf.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Rf.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(n){this.adapter.setStyle("transform-origin",n+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(Rf.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(n){var i=this.adapter.hasClass(Rf.LINE_RIPPLE_DEACTIVATING);n.propertyName==="opacity"&&i&&(this.adapter.removeClass(Rf.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Rf.LINE_RIPPLE_DEACTIVATING))},t}(cr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ohe={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Y4={NOTCH_ELEMENT_PADDING:8},lhe={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var uhe=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"strings",{get:function(){return ohe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return lhe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Y4},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(n){var i=t.cssClasses.OUTLINE_NOTCHED;n>0&&(n+=Y4.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(n),this.adapter.addClass(i)},t.prototype.closeNotch=function(){var n=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(n),this.adapter.removeNotchWidthProperty()},t}(cr);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var wA={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},che={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon",WITH_INTERNAL_COUNTER:"mdc-text-field--with-internal-counter"},X4={LABEL_SCALE:.75},fhe=["pattern","min","max","required","step","minlength","maxlength"],dhe=["color","date","datetime-local","month","range","time","week"];/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var K4=["mousedown","touchstart"],J4=["click","keydown"],hhe=function(e){ur(t,e);function t(n,i){i===void 0&&(i={});var r=e.call(this,en(en({},t.defaultAdapter),n))||this;return r.isFocused=!1,r.receivedUserInput=!1,r.valid=!0,r.useNativeValidation=!0,r.validateOnValueChange=!0,r.helperText=i.helperText,r.characterCounter=i.characterCounter,r.leadingIcon=i.leadingIcon,r.trailingIcon=i.trailingIcon,r.inputFocusHandler=function(){r.activateFocus()},r.inputBlurHandler=function(){r.deactivateFocus()},r.inputInputHandler=function(){r.handleInput()},r.setPointerXOffset=function(s){r.setTransformOrigin(s)},r.textFieldInteractionHandler=function(){r.handleTextFieldInteraction()},r.validationAttributeChangeHandler=function(s){r.handleValidationAttributeChange(s)},r}return Object.defineProperty(t,"cssClasses",{get:function(){return che},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return wA},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return X4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat",{get:function(){var n=this.getNativeInput().type;return dhe.indexOf(n)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat||this.isFocused||!!this.getValue()||this.isBadInput()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver(function(){})},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var n,i,r,s;this.adapter.hasLabel()&&this.getNativeInput().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler);try{for(var a=wi(K4),o=a.next();!o.done;o=a.next()){var l=o.value;this.adapter.registerInputInteractionHandler(l,this.setPointerXOffset)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}try{for(var u=wi(J4),c=u.next();!c.done;c=u.next()){var l=c.value;this.adapter.registerTextFieldInteractionHandler(l,this.textFieldInteractionHandler)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}this.validationObserver=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler),this.setcharacterCounter(this.getValue().length)},t.prototype.destroy=function(){var n,i,r,s;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler);try{for(var a=wi(K4),o=a.next();!o.done;o=a.next()){var l=o.value;this.adapter.deregisterInputInteractionHandler(l,this.setPointerXOffset)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}try{for(var u=wi(J4),c=u.next();!c.done;c=u.next()){var l=c.value;this.adapter.deregisterTextFieldInteractionHandler(l,this.textFieldInteractionHandler)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver)},t.prototype.handleTextFieldInteraction=function(){var n=this.adapter.getNativeInput();n&&n.disabled||(this.receivedUserInput=!0)},t.prototype.handleValidationAttributeChange=function(n){var i=this;n.some(function(r){return fhe.indexOf(r)>-1?(i.styleValidity(!0),i.adapter.setLabelRequired(i.getNativeInput().required),!0):!1}),n.indexOf("maxlength")>-1&&this.setcharacterCounter(this.getValue().length)},t.prototype.notchOutline=function(n){if(!(!this.adapter.hasOutline()||!this.adapter.hasLabel()))if(n){var i=this.adapter.getLabelWidth()*X4.LABEL_SCALE;this.adapter.notchOutline(i)}else this.adapter.closeOutline()},t.prototype.activateFocus=function(){this.isFocused=!0,this.styleFocused(this.isFocused),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.helperText&&(this.helperText.isPersistent()||!this.helperText.isValidation()||!this.valid)&&this.helperText.showToScreenReader()},t.prototype.setTransformOrigin=function(n){if(!(this.isDisabled()||this.adapter.hasOutline())){var i=n.touches,r=i?i[0]:n,s=r.target.getBoundingClientRect(),a=r.clientX-s.left;this.adapter.setLineRippleTransformOrigin(a)}},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setcharacterCounter(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused=!1,this.adapter.deactivateLineRipple();var n=this.isValid();this.styleValidity(n),this.styleFocused(this.isFocused),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput=!1)},t.prototype.getValue=function(){return this.getNativeInput().value},t.prototype.setValue=function(n){if(this.getValue()!==n&&(this.getNativeInput().value=n),this.setcharacterCounter(n.length),this.validateOnValueChange){var i=this.isValid();this.styleValidity(i)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating(this.shouldFloat),this.validateOnValueChange&&this.adapter.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation?this.isNativeInputValid():this.valid},t.prototype.setValid=function(n){this.valid=n,this.styleValidity(n);var i=!n&&!this.isFocused&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(i)},t.prototype.setValidateOnValueChange=function(n){this.validateOnValueChange=n},t.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange},t.prototype.setUseNativeValidation=function(n){this.useNativeValidation=n},t.prototype.isDisabled=function(){return this.getNativeInput().disabled},t.prototype.setDisabled=function(n){this.getNativeInput().disabled=n,this.styleDisabled(n)},t.prototype.setHelperTextContent=function(n){this.helperText&&this.helperText.setContent(n)},t.prototype.setLeadingIconAriaLabel=function(n){this.leadingIcon&&this.leadingIcon.setAriaLabel(n)},t.prototype.setLeadingIconContent=function(n){this.leadingIcon&&this.leadingIcon.setContent(n)},t.prototype.setTrailingIconAriaLabel=function(n){this.trailingIcon&&this.trailingIcon.setAriaLabel(n)},t.prototype.setTrailingIconContent=function(n){this.trailingIcon&&this.trailingIcon.setContent(n)},t.prototype.setcharacterCounter=function(n){if(!!this.characterCounter){var i=this.getNativeInput().maxLength;if(i===-1)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter.setCounterValue(n,i)}},t.prototype.isBadInput=function(){return this.getNativeInput().validity.badInput||!1},t.prototype.isNativeInputValid=function(){return this.getNativeInput().validity.valid},t.prototype.styleValidity=function(n){var i=t.cssClasses.INVALID;if(n?this.adapter.removeClass(i):this.adapter.addClass(i),this.helperText){this.helperText.setValidity(n);var r=this.helperText.isValidation();if(!r)return;var s=this.helperText.isVisible(),a=this.helperText.getId();s&&a?this.adapter.setInputAttr(wA.ARIA_DESCRIBEDBY,a):this.adapter.removeInputAttr(wA.ARIA_DESCRIBEDBY)}},t.prototype.styleFocused=function(n){var i=t.cssClasses.FOCUSED;n?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.styleDisabled=function(n){var i=t.cssClasses,r=i.DISABLED,s=i.INVALID;n?(this.adapter.addClass(r),this.adapter.removeClass(s)):this.adapter.removeClass(r),this.leadingIcon&&this.leadingIcon.setDisabled(n),this.trailingIcon&&this.trailingIcon.setDisabled(n)},t.prototype.styleFloating=function(n){var i=t.cssClasses.LABEL_FLOATING;n?this.adapter.addClass(i):this.adapter.removeClass(i)},t.prototype.getNativeInput=function(){var n=this.adapter?this.adapter.getNativeInput():null;return n||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(cr);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Mo={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},zl={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+Mo.ROOT};/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var phe=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"cssClasses",{get:function(){return Mo},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return zl},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return this.adapter.getAttr(zl.ARIA_HIDDEN)!=="true"},t.prototype.setContent=function(n){this.adapter.setContent(n)},t.prototype.isPersistent=function(){return this.adapter.hasClass(Mo.HELPER_TEXT_PERSISTENT)},t.prototype.setPersistent=function(n){n?this.adapter.addClass(Mo.HELPER_TEXT_PERSISTENT):this.adapter.removeClass(Mo.HELPER_TEXT_PERSISTENT)},t.prototype.isValidation=function(){return this.adapter.hasClass(Mo.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidation=function(n){n?this.adapter.addClass(Mo.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(Mo.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter.removeAttr(zl.ARIA_HIDDEN)},t.prototype.setValidity=function(n){var i=this.adapter.hasClass(Mo.HELPER_TEXT_PERSISTENT),r=this.adapter.hasClass(Mo.HELPER_TEXT_VALIDATION_MSG),s=r&&!n;s?(this.showToScreenReader(),this.adapter.getAttr(zl.ROLE)==="alert"?this.refreshAlertRole():this.adapter.setAttr(zl.ROLE,"alert")):this.adapter.removeAttr(zl.ROLE),!i&&!s&&this.hide()},t.prototype.hide=function(){this.adapter.setAttr(zl.ARIA_HIDDEN,"true")},t.prototype.refreshAlertRole=function(){var n=this;this.adapter.removeAttr(zl.ROLE),requestAnimationFrame(function(){n.adapter.setAttr(zl.ROLE,"alert")})},t}(cr);function ghe(e){let t,n,i,r,s,a,o,l;const u=e[22].default,c=Ue(u,e,e[21],null);let f=[{class:n=xe({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})},{style:i=Object.entries(e[9]).map(Z4).concat([e[4]]).join(" ")},{for:r=e[5]||(e[11]?e[11].id:void 0)},e[12]],d={};for(let h=0;h<f.length;h+=1)d=Q(d,f[h]);return{c(){t=K("label"),c&&c.c(),Se(t,d)},m(h,p){U(h,t,p),c&&c.m(t,null),e[24](t),a=!0,o||(l=[Ee(s=wt.call(null,t,e[2])),Ee(e[10].call(null,t))],o=!0)},p(h,p){c&&c.p&&(!a||p&2097152)&&Ve(c,u,h,h[21],a?ze(u,h[21],p,null):$e(h[21]),null),Se(t,d=Le(f,[(!a||p&267&&n!==(n=xe({[h[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":h[0],"mdc-floating-label--required":h[1],...h[8]})))&&{class:n},(!a||p&528&&i!==(i=Object.entries(h[9]).map(Z4).concat([h[4]]).join(" ")))&&{style:i},(!a||p&32&&r!==(r=h[5]||(h[11]?h[11].id:void 0)))&&{for:r},p&4096&&h[12]])),s&&rt(s.update)&&p&4&&s.update.call(null,h[2])},i(h){a||(F(c,h),a=!0)},o(h){P(c,h),a=!1},d(h){h&&j(t),c&&c.d(h),e[24](null),o=!1,pt(l)}}}function mhe(e){let t,n,i,r,s,a,o;const l=e[22].default,u=Ue(l,e,e[21],null);let c=[{class:n=xe({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})},{style:i=Object.entries(e[9]).map(Q4).concat([e[4]]).join(" ")},e[12]],f={};for(let d=0;d<c.length;d+=1)f=Q(f,c[d]);return{c(){t=K("span"),u&&u.c(),Se(t,f)},m(d,h){U(d,t,h),u&&u.m(t,null),e[23](t),s=!0,a||(o=[Ee(r=wt.call(null,t,e[2])),Ee(e[10].call(null,t))],a=!0)},p(d,h){u&&u.p&&(!s||h&2097152)&&Ve(u,l,d,d[21],s?ze(l,d[21],h,null):$e(d[21]),null),Se(t,f=Le(c,[(!s||h&267&&n!==(n=xe({[d[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":d[0],"mdc-floating-label--required":d[1],...d[8]})))&&{class:n},(!s||h&528&&i!==(i=Object.entries(d[9]).map(Q4).concat([d[4]]).join(" ")))&&{style:i},h&4096&&d[12]])),r&&rt(r.update)&&h&4&&r.update.call(null,d[2])},i(d){s||(F(u,d),s=!0)},o(d){P(u,d),s=!1},d(d){d&&j(t),u&&u.d(d),e[23](null),a=!1,pt(o)}}}function yhe(e){let t,n,i,r;const s=[mhe,ghe],a=[];function o(l,u){return l[6]?0:1}return t=o(e),n=a[t]=s[t](e),{c(){n.c(),i=_t()},m(l,u){a[t].m(l,u),U(l,i,u),r=!0},p(l,[u]){let c=t;t=o(l),t===c?a[t].p(l,u):(Be(),P(a[c],1,1,()=>{a[c]=null}),je(),n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),F(n,1),n.m(i.parentNode,i))},i(l){r||(F(n),r=!0)},o(l){P(n),r=!1},d(l){a[t].d(l),l&&j(i)}}}const Q4=([e,t])=>`${e}: ${t};`,Z4=([e,t])=>`${e}: ${t};`;function bhe(e,t,n){const i=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;var o;const l=St(ft());let{use:u=[]}=t,{class:c=""}=t,{style:f=""}=t,{for:d=void 0}=t,{floatAbove:h=!1}=t,{required:p=!1}=t,{wrapped:g=!1}=t,m,y,b={},v={},_=(o=Zt("SMUI:generic:input:props"))!==null&&o!==void 0?o:{},S=h,E=p;Zn(()=>{n(18,y=new she({addClass:w,removeClass:O,getWidth:()=>{var T,z;const Y=k(),H=Y.cloneNode(!0);(T=Y.parentNode)===null||T===void 0||T.appendChild(H),H.classList.add("smui-floating-label--remove-transition"),H.classList.add("smui-floating-label--force-size"),H.classList.remove("mdc-floating-label--float-above");const oe=H.scrollWidth;return(z=Y.parentNode)===null||z===void 0||z.removeChild(H),oe},registerInteractionHandler:(T,z)=>k().addEventListener(T,z),deregisterInteractionHandler:(T,z)=>k().removeEventListener(T,z)}));const R={get element(){return k()},addStyle:D,removeStyle:x};return yt(m,"SMUIFloatingLabel:mount",R),y.init(),()=>{yt(m,"SMUIFloatingLabel:unmount",R),y.destroy()}});function w(R){b[R]||n(8,b[R]=!0,b)}function O(R){(!(R in b)||b[R])&&n(8,b[R]=!1,b)}function D(R,T){v[R]!=T&&(T===""||T==null?(delete v[R],n(9,v)):n(9,v[R]=T,v))}function x(R){R in v&&(delete v[R],n(9,v))}function A(R){y.shake(R)}function C(R){n(0,h=R)}function I(R){n(1,p=R)}function L(){return y.getWidth()}function k(){return m}function M(R){be[R?"unshift":"push"](()=>{m=R,n(7,m)})}function N(R){be[R?"unshift":"push"](()=>{m=R,n(7,m)})}return e.$$set=R=>{t=Q(Q({},t),vt(R)),n(12,r=Ce(t,i)),"use"in R&&n(2,u=R.use),"class"in R&&n(3,c=R.class),"style"in R&&n(4,f=R.style),"for"in R&&n(5,d=R.for),"floatAbove"in R&&n(0,h=R.floatAbove),"required"in R&&n(1,p=R.required),"wrapped"in R&&n(6,g=R.wrapped),"$$scope"in R&&n(21,a=R.$$scope)},e.$$.update=()=>{e.$$.dirty&786433&&y&&S!==h&&(n(19,S=h),y.float(h)),e.$$.dirty&1310722&&y&&E!==p&&(n(20,E=p),y.setRequired(p))},[h,p,u,c,f,d,g,m,b,v,l,_,r,A,C,I,L,k,y,S,E,a,s,M,N]}class Ew extends qe{constructor(t){super(),We(this,t,bhe,yhe,He,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function vhe(e){let t,n,i,r,s,a,o=[{class:n=xe({[e[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":e[3],...e[5]})},{style:i=Object.entries(e[6]).map(eF).concat([e[2]]).join(" ")},e[8]],l={};for(let u=0;u<o.length;u+=1)l=Q(l,o[u]);return{c(){t=K("div"),Se(t,l)},m(u,c){U(u,t,c),e[13](t),s||(a=[Ee(r=wt.call(null,t,e[0])),Ee(e[7].call(null,t))],s=!0)},p(u,[c]){Se(t,l=Le(o,[c&42&&n!==(n=xe({[u[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":u[3],...u[5]}))&&{class:n},c&68&&i!==(i=Object.entries(u[6]).map(eF).concat([u[2]]).join(" "))&&{style:i},c&256&&u[8]])),r&&rt(r.update)&&c&1&&r.update.call(null,u[0])},i:xt,o:xt,d(u){u&&j(t),e[13](null),s=!1,pt(a)}}}const eF=([e,t])=>`${e}: ${t};`;function _he(e,t,n){const i=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let r=Ce(t,i);const s=St(ft());let{use:a=[]}=t,{class:o=""}=t,{style:l=""}=t,{active:u=!1}=t,c,f,d={},h={};Zn(()=>(f=new ahe({addClass:g,removeClass:m,hasClass:p,setStyle:y,registerEventHandler:(w,O)=>S().addEventListener(w,O),deregisterEventHandler:(w,O)=>S().removeEventListener(w,O)}),f.init(),()=>{f.destroy()}));function p(w){return w in d?d[w]:S().classList.contains(w)}function g(w){d[w]||n(5,d[w]=!0,d)}function m(w){(!(w in d)||d[w])&&n(5,d[w]=!1,d)}function y(w,O){h[w]!=O&&(O===""||O==null?(delete h[w],n(6,h)):n(6,h[w]=O,h))}function b(){f.activate()}function v(){f.deactivate()}function _(w){f.setRippleCenter(w)}function S(){return c}function E(w){be[w?"unshift":"push"](()=>{c=w,n(4,c)})}return e.$$set=w=>{t=Q(Q({},t),vt(w)),n(8,r=Ce(t,i)),"use"in w&&n(0,a=w.use),"class"in w&&n(1,o=w.class),"style"in w&&n(2,l=w.style),"active"in w&&n(3,u=w.active)},[a,o,l,u,c,d,h,s,r,b,v,_,S,E]}class L$ extends qe{constructor(t){super(),We(this,t,_he,vhe,He,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}function tF(e){let t,n,i;const r=e[14].default,s=Ue(r,e,e[13],null);return{c(){t=K("div"),s&&s.c(),J(t,"class","mdc-notched-outline__notch"),J(t,"style",n=Object.entries(e[7]).map(nF).join(" "))},m(a,o){U(a,t,o),s&&s.m(t,null),i=!0},p(a,o){s&&s.p&&(!i||o&8192)&&Ve(s,r,a,a[13],i?ze(r,a[13],o,null):$e(a[13]),null),(!i||o&128&&n!==(n=Object.entries(a[7]).map(nF).join(" ")))&&J(t,"style",n)},i(a){i||(F(s,a),i=!0)},o(a){P(s,a),i=!1},d(a){a&&j(t),s&&s.d(a)}}}function whe(e){let t,n,i,r,s,a,o,l,u,c,f=!e[3]&&tF(e),d=[{class:a=xe({[e[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":e[2],"mdc-notched-outline--no-label":e[3],...e[6]})},e[9]],h={};for(let p=0;p<d.length;p+=1)h=Q(h,d[p]);return{c(){t=K("div"),n=K("div"),i=ae(),f&&f.c(),r=ae(),s=K("div"),J(n,"class","mdc-notched-outline__leading"),J(s,"class","mdc-notched-outline__trailing"),Se(t,h)},m(p,g){U(p,t,g),G(t,n),G(t,i),f&&f.m(t,null),G(t,r),G(t,s),e[15](t),l=!0,u||(c=[Ee(o=wt.call(null,t,e[0])),Ee(e[8].call(null,t)),Ke(t,"SMUIFloatingLabel:mount",e[16]),Ke(t,"SMUIFloatingLabel:unmount",e[17])],u=!0)},p(p,[g]){p[3]?f&&(Be(),P(f,1,1,()=>{f=null}),je()):f?(f.p(p,g),g&8&&F(f,1)):(f=tF(p),f.c(),F(f,1),f.m(t,r)),Se(t,h=Le(d,[(!l||g&78&&a!==(a=xe({[p[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":p[2],"mdc-notched-outline--no-label":p[3],...p[6]})))&&{class:a},g&512&&p[9]])),o&&rt(o.update)&&g&1&&o.update.call(null,p[0])},i(p){l||(F(f),l=!0)},o(p){P(f),l=!1},d(p){p&&j(t),f&&f.d(),e[15](null),u=!1,pt(c)}}}const nF=([e,t])=>`${e}: ${t};`;function She(e,t,n){const i=["use","class","notched","noLabel","notch","closeNotch","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,{notched:c=!1}=t,{noLabel:f=!1}=t,d,h,p,g={},m={};Zn(()=>(h=new uhe({addClass:y,removeClass:b,setNotchWidthProperty:A=>v("width",A+"px"),removeNotchWidthProperty:()=>_("width")}),h.init(),()=>{h.destroy()}));function y(A){g[A]||n(6,g[A]=!0,g)}function b(A){(!(A in g)||g[A])&&n(6,g[A]=!1,g)}function v(A,C){m[A]!=C&&(C===""||C==null?(delete m[A],n(7,m)):n(7,m[A]=C,m))}function _(A){A in m&&(delete m[A],n(7,m))}function S(A){h.notch(A)}function E(){h.closeNotch()}function w(){return d}function O(A){be[A?"unshift":"push"](()=>{d=A,n(5,d)})}const D=A=>n(4,p=A.detail),x=()=>n(4,p=void 0);return e.$$set=A=>{t=Q(Q({},t),vt(A)),n(9,r=Ce(t,i)),"use"in A&&n(0,l=A.use),"class"in A&&n(1,u=A.class),"notched"in A&&n(2,c=A.notched),"noLabel"in A&&n(3,f=A.noLabel),"$$scope"in A&&n(13,a=A.$$scope)},e.$$.update=()=>{e.$$.dirty&16&&(p?(p.addStyle("transition-duration","0s"),y("mdc-notched-outline--upgraded"),requestAnimationFrame(()=>{p&&p.removeStyle("transition-duration")})):b("mdc-notched-outline--upgraded"))},[l,u,c,f,p,d,g,m,o,r,S,E,w,a,s,O,D,x]}class N$ extends qe{constructor(t){super(),We(this,t,She,whe,He,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}var Ehe=fr({class:"mdc-text-field-helper-line",component:C1}),Ahe=fr({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:uh}),Ohe=fr({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:uh});function Che(e){let t,n,i,r,s,a=[{class:n=xe({[e[1]]:!0,"mdc-text-field__input":!0})},{type:e[2]},{placeholder:e[3]},e[4],e[6],e[10]],o={};for(let l=0;l<a.length;l+=1)o=Q(o,a[l]);return{c(){t=K("input"),Se(t,o)},m(l,u){U(l,t,u),t.autofocus&&t.focus(),e[26](t),r||(s=[Ee(i=wt.call(null,t,e[0])),Ee(e[7].call(null,t)),Ke(t,"input",e[27]),Ke(t,"change",e[9]),Ke(t,"blur",e[24]),Ke(t,"focus",e[25])],r=!0)},p(l,[u]){Se(t,o=Le(a,[u&2&&n!==(n=xe({[l[1]]:!0,"mdc-text-field__input":!0}))&&{class:n},u&4&&{type:l[2]},u&8&&{placeholder:l[3]},u&16&&l[4],u&64&&l[6],u&1024&&l[10]])),i&&rt(i.update)&&u&1&&i.update.call(null,l[0])},i:xt,o:xt,d(l){l&&j(t),e[26](null),r=!1,pt(s)}}}function Ihe(e){if(e===""){const t=new Number(Number.NaN);return t.length=0,t}return+e}function xhe(e,t,n){const i=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","blur","getElement"];let r=Ce(t,i);const s=St(ft());let a=()=>{};function o(T){return T===a}let{use:l=[]}=t,{class:u=""}=t,{type:c="text"}=t,{placeholder:f=" "}=t,{value:d=a}=t;const h=o(d);h&&(d="");let{files:p=null}=t,{dirty:g=!1}=t,{invalid:m=!1}=t,{updateInvalid:y=!0}=t,{emptyValueNull:b=d===null}=t;h&&b&&(d=null);let{emptyValueUndefined:v=d===void 0}=t;h&&v&&(d=void 0);let _,S={},E={};Zn(()=>{y&&n(14,m=_.matches(":invalid"))});function w(T){if(c==="file"){n(12,p=T.currentTarget.files);return}if(T.currentTarget.value===""&&b){n(11,d=null);return}if(T.currentTarget.value===""&&v){n(11,d=void 0);return}switch(c){case"number":case"range":n(11,d=Ihe(T.currentTarget.value));break;default:n(11,d=T.currentTarget.value);break}}function O(T){(c==="file"||c==="range")&&w(T),n(13,g=!0),y&&n(14,m=_.matches(":invalid"))}function D(T){var z;return T in S?(z=S[T])!==null&&z!==void 0?z:null:L().getAttribute(T)}function x(T,z){S[T]!==z&&n(6,S[T]=z,S)}function A(T){(!(T in S)||S[T]!=null)&&n(6,S[T]=void 0,S)}function C(){L().focus()}function I(){L().blur()}function L(){return _}function k(T){lo.call(this,e,T)}function M(T){lo.call(this,e,T)}function N(T){be[T?"unshift":"push"](()=>{_=T,n(5,_)})}const R=T=>c!=="file"&&w(T);return e.$$set=T=>{t=Q(Q({},t),vt(T)),n(10,r=Ce(t,i)),"use"in T&&n(0,l=T.use),"class"in T&&n(1,u=T.class),"type"in T&&n(2,c=T.type),"placeholder"in T&&n(3,f=T.placeholder),"value"in T&&n(11,d=T.value),"files"in T&&n(12,p=T.files),"dirty"in T&&n(13,g=T.dirty),"invalid"in T&&n(14,m=T.invalid),"updateInvalid"in T&&n(15,y=T.updateInvalid),"emptyValueNull"in T&&n(16,b=T.emptyValueNull),"emptyValueUndefined"in T&&n(17,v=T.emptyValueUndefined)},e.$$.update=()=>{e.$$.dirty&2068&&(c==="file"?(delete E.value,n(4,E),n(2,c),n(11,d)):n(4,E.value=d??"",E))},[l,u,c,f,E,_,S,s,w,O,r,d,p,g,m,y,b,v,D,x,A,C,I,L,k,M,N,R]}class The extends qe{constructor(t){super(),We(this,t,xhe,Che,He,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,blur:22,getElement:23})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get blur(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}function khe(e){let t,n,i,r,s,a,o=[{class:n=xe({[e[2]]:!0,"mdc-text-field__input":!0})},{style:i=`${e[4]?"":"resize: none; "}${e[3]}`},e[6],e[9]],l={};for(let u=0;u<o.length;u+=1)l=Q(l,o[u]);return{c(){t=K("textarea"),Se(t,l)},m(u,c){U(u,t,c),t.autofocus&&t.focus(),e[21](t),vN(t,e[0]),s||(a=[Ee(r=wt.call(null,t,e[1])),Ee(e[7].call(null,t)),Ke(t,"change",e[8]),Ke(t,"blur",e[19]),Ke(t,"focus",e[20]),Ke(t,"input",e[22])],s=!0)},p(u,[c]){Se(t,l=Le(o,[c&4&&n!==(n=xe({[u[2]]:!0,"mdc-text-field__input":!0}))&&{class:n},c&24&&i!==(i=`${u[4]?"":"resize: none; "}${u[3]}`)&&{style:i},c&64&&u[6],c&512&&u[9]])),r&&rt(r.update)&&c&2&&r.update.call(null,u[1]),c&1&&vN(t,u[0])},i:xt,o:xt,d(u){u&&j(t),e[21](null),s=!1,pt(a)}}}function Mhe(e,t,n){const i=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","blur","getElement"];let r=Ce(t,i);const s=St(ft());let{use:a=[]}=t,{class:o=""}=t,{style:l=""}=t,{value:u=""}=t,{dirty:c=!1}=t,{invalid:f=!1}=t,{updateInvalid:d=!0}=t,{resizable:h=!0}=t,p,g={};Zn(()=>{d&&n(11,f=p.matches(":invalid"))});function m(){n(10,c=!0),d&&n(11,f=p.matches(":invalid"))}function y(A){var C;return A in g?(C=g[A])!==null&&C!==void 0?C:null:E().getAttribute(A)}function b(A,C){g[A]!==C&&n(6,g[A]=C,g)}function v(A){(!(A in g)||g[A]!=null)&&n(6,g[A]=void 0,g)}function _(){E().focus()}function S(){E().blur()}function E(){return p}function w(A){lo.call(this,e,A)}function O(A){lo.call(this,e,A)}function D(A){be[A?"unshift":"push"](()=>{p=A,n(5,p)})}function x(){u=this.value,n(0,u)}return e.$$set=A=>{t=Q(Q({},t),vt(A)),n(9,r=Ce(t,i)),"use"in A&&n(1,a=A.use),"class"in A&&n(2,o=A.class),"style"in A&&n(3,l=A.style),"value"in A&&n(0,u=A.value),"dirty"in A&&n(10,c=A.dirty),"invalid"in A&&n(11,f=A.invalid),"updateInvalid"in A&&n(12,d=A.updateInvalid),"resizable"in A&&n(4,h=A.resizable)},[u,a,o,l,h,p,g,s,m,r,c,f,d,y,b,v,_,S,E,w,O,D,x]}class Dhe extends qe{constructor(t){super(),We(this,t,Mhe,khe,He,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,blur:17,getElement:18})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get blur(){return this.$$.ctx[17]}get getElement(){return this.$$.ctx[18]}}const Rhe=e=>({}),iF=e=>({}),Lhe=e=>({}),rF=e=>({}),Nhe=e=>({}),sF=e=>({}),Fhe=e=>({}),aF=e=>({}),Phe=e=>({}),oF=e=>({}),Bhe=e=>({}),lF=e=>({}),jhe=e=>({}),uF=e=>({}),Uhe=e=>({}),cF=e=>({}),zhe=e=>({}),fF=e=>({}),Vhe=e=>({}),dF=e=>({}),$he=e=>({}),hF=e=>({}),Hhe=e=>({}),pF=e=>({});function Whe(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p;const g=e[51].label,m=Ue(g,e,e[90],oF);i=new Lp({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[Ghe]},$$scope:{ctx:e}}});const y=e[51].default,b=Ue(y,e,e[90],null);a=new Lp({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[Yhe]},$$scope:{ctx:e}}});const v=e[51].ripple,_=Ue(v,e,e[90],rF);let S=[{class:l=xe({[e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":e[12],"mdc-text-field--textarea":e[14],"mdc-text-field--filled":e[15]==="filled","mdc-text-field--outlined":e[15]==="outlined","smui-text-field--standard":e[15]==="standard"&&!e[14],"mdc-text-field--no-label":e[16]||!e[42].label,"mdc-text-field--with-leading-icon":e[42].leadingIcon,"mdc-text-field--with-trailing-icon":e[42].trailingIcon,"mdc-text-field--invalid":e[1],...e[25]})},{style:u=Object.entries(e[26]).map(OF).concat([e[10]]).join(" ")},ys(e[41],["input$","label$","ripple$","outline$","helperLine$"])],E={};for(let w=0;w<S.length;w+=1)E=Q(E,S[w]);return{c(){t=K("div"),m&&m.c(),n=ae(),ie(i.$$.fragment),r=ae(),b&&b.c(),s=ae(),ie(a.$$.fragment),o=ae(),_&&_.c(),Se(t,E)},m(w,O){U(w,t,O),m&&m.m(t,null),G(t,n),te(i,t,null),G(t,r),b&&b.m(t,null),G(t,s),te(a,t,null),G(t,o),_&&_.m(t,null),e[80](t),d=!0,h||(p=[Ee(c=uo.call(null,t,{ripple:e[11],unbounded:!1,addClass:e[38],removeClass:e[39],addStyle:e[40]})),Ee(f=wt.call(null,t,e[8])),Ee(e[34].call(null,t)),Ke(t,"SMUITextfieldLeadingIcon:mount",e[81]),Ke(t,"SMUITextfieldLeadingIcon:unmount",e[82]),Ke(t,"SMUITextfieldTrailingIcon:mount",e[83]),Ke(t,"SMUITextfieldTrailingIcon:unmount",e[84])],h=!0)},p(w,O){m&&m.p&&(!d||O[2]&268435456)&&Ve(m,g,w,w[90],d?ze(g,w[90],O,Phe):$e(w[90]),oF);const D={};O[2]&268435456&&(D.$$scope={dirty:O,ctx:w}),i.$set(D),b&&b.p&&(!d||O[2]&268435456)&&Ve(b,y,w,w[90],d?ze(y,w[90],O,null):$e(w[90]),null);const x={};O[2]&268435456&&(x.$$scope={dirty:O,ctx:w}),a.$set(x),_&&_.p&&(!d||O[2]&268435456)&&Ve(_,v,w,w[90],d?ze(v,w[90],O,Lhe):$e(w[90]),rF),Se(t,E=Le(S,[(!d||O[0]&33673730|O[1]&2048&&l!==(l=xe({[w[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":w[12],"mdc-text-field--textarea":w[14],"mdc-text-field--filled":w[15]==="filled","mdc-text-field--outlined":w[15]==="outlined","smui-text-field--standard":w[15]==="standard"&&!w[14],"mdc-text-field--no-label":w[16]||!w[42].label,"mdc-text-field--with-leading-icon":w[42].leadingIcon,"mdc-text-field--with-trailing-icon":w[42].trailingIcon,"mdc-text-field--invalid":w[1],...w[25]})))&&{class:l},(!d||O[0]&67109888&&u!==(u=Object.entries(w[26]).map(OF).concat([w[10]]).join(" ")))&&{style:u},O[1]&1024&&ys(w[41],["input$","label$","ripple$","outline$","helperLine$"])])),c&&rt(c.update)&&O[0]&2048&&c.update.call(null,{ripple:w[11],unbounded:!1,addClass:w[38],removeClass:w[39],addStyle:w[40]}),f&&rt(f.update)&&O[0]&256&&f.update.call(null,w[8])},i(w){d||(F(m,w),F(i.$$.fragment,w),F(b,w),F(a.$$.fragment,w),F(_,w),d=!0)},o(w){P(m,w),P(i.$$.fragment,w),P(b,w),P(a.$$.fragment,w),P(_,w),d=!1},d(w){w&&j(t),m&&m.d(w),ne(i),b&&b.d(w),ne(a),_&&_.d(w),e[80](null),h=!1,pt(p)}}}function qhe(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g,m,y,b,v=!e[14]&&e[15]!=="outlined"&&gF(e),_=(e[14]||e[15]==="outlined")&&bF(e);r=new Lp({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[Qhe]},$$scope:{ctx:e}}});const S=e[51].default,E=Ue(S,e,e[90],null),w=[epe,Zhe],O=[];function D(I,L){return I[14]&&typeof I[0]=="string"?0:1}o=D(e),l=O[o]=w[o](e),c=new Lp({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[ipe]},$$scope:{ctx:e}}});let x=!e[14]&&e[15]!=="outlined"&&e[11]&&SF(e),A=[{class:d=xe({[e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":e[12],"mdc-text-field--textarea":e[14],"mdc-text-field--filled":e[15]==="filled","mdc-text-field--outlined":e[15]==="outlined","smui-text-field--standard":e[15]==="standard"&&!e[14],"mdc-text-field--no-label":e[16]||e[17]==null&&!e[42].label,"mdc-text-field--label-floating":e[28]||e[0]!=null&&e[0]!=="","mdc-text-field--with-leading-icon":e[35](e[22])?e[42].leadingIcon:e[22],"mdc-text-field--with-trailing-icon":e[35](e[23])?e[42].trailingIcon:e[23],"mdc-text-field--with-internal-counter":e[14]&&e[42].internalCounter,"mdc-text-field--invalid":e[1],...e[25]})},{style:h=Object.entries(e[26]).map(AF).concat([e[10]]).join(" ")},{for:void 0},ys(e[41],["input$","label$","ripple$","outline$","helperLine$"])],C={};for(let I=0;I<A.length;I+=1)C=Q(C,A[I]);return{c(){t=K("label"),v&&v.c(),n=ae(),_&&_.c(),i=ae(),ie(r.$$.fragment),s=ae(),E&&E.c(),a=ae(),l.c(),u=ae(),ie(c.$$.fragment),f=ae(),x&&x.c(),Se(t,C)},m(I,L){U(I,t,L),v&&v.m(t,null),G(t,n),_&&_.m(t,null),G(t,i),te(r,t,null),G(t,s),E&&E.m(t,null),G(t,a),O[o].m(t,null),G(t,u),te(c,t,null),G(t,f),x&&x.m(t,null),e[73](t),m=!0,y||(b=[Ee(p=uo.call(null,t,{ripple:!e[14]&&e[15]==="filled",unbounded:!1,addClass:e[38],removeClass:e[39],addStyle:e[40],eventTarget:e[33],activeTarget:e[33],initPromise:e[37]})),Ee(g=wt.call(null,t,e[8])),Ee(e[34].call(null,t)),Ke(t,"SMUITextfieldLeadingIcon:mount",e[74]),Ke(t,"SMUITextfieldLeadingIcon:unmount",e[75]),Ke(t,"SMUITextfieldTrailingIcon:mount",e[76]),Ke(t,"SMUITextfieldTrailingIcon:unmount",e[77]),Ke(t,"SMUITextfieldCharacterCounter:mount",e[78]),Ke(t,"SMUITextfieldCharacterCounter:unmount",e[79])],y=!0)},p(I,L){!I[14]&&I[15]!=="outlined"?v?(v.p(I,L),L[0]&49152&&F(v,1)):(v=gF(I),v.c(),F(v,1),v.m(t,n)):v&&(Be(),P(v,1,1,()=>{v=null}),je()),I[14]||I[15]==="outlined"?_?(_.p(I,L),L[0]&49152&&F(_,1)):(_=bF(I),_.c(),F(_,1),_.m(t,i)):_&&(Be(),P(_,1,1,()=>{_=null}),je());const k={};L[2]&268435456&&(k.$$scope={dirty:L,ctx:I}),r.$set(k),E&&E.p&&(!m||L[2]&268435456)&&Ve(E,S,I,I[90],m?ze(S,I[90],L,null):$e(I[90]),null);let M=o;o=D(I),o===M?O[o].p(I,L):(Be(),P(O[M],1,1,()=>{O[M]=null}),je(),l=O[o],l?l.p(I,L):(l=O[o]=w[o](I),l.c()),F(l,1),l.m(t,u));const N={};L[2]&268435456&&(N.$$scope={dirty:L,ctx:I}),c.$set(N),!I[14]&&I[15]!=="outlined"&&I[11]?x?(x.p(I,L),L[0]&51200&&F(x,1)):(x=SF(I),x.c(),F(x,1),x.m(t,null)):x&&(Be(),P(x,1,1,()=>{x=null}),je()),Se(t,C=Le(A,[(!m||L[0]&314823171|L[1]&2048&&d!==(d=xe({[I[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":I[12],"mdc-text-field--textarea":I[14],"mdc-text-field--filled":I[15]==="filled","mdc-text-field--outlined":I[15]==="outlined","smui-text-field--standard":I[15]==="standard"&&!I[14],"mdc-text-field--no-label":I[16]||I[17]==null&&!I[42].label,"mdc-text-field--label-floating":I[28]||I[0]!=null&&I[0]!=="","mdc-text-field--with-leading-icon":I[35](I[22])?I[42].leadingIcon:I[22],"mdc-text-field--with-trailing-icon":I[35](I[23])?I[42].trailingIcon:I[23],"mdc-text-field--with-internal-counter":I[14]&&I[42].internalCounter,"mdc-text-field--invalid":I[1],...I[25]})))&&{class:d},(!m||L[0]&67109888&&h!==(h=Object.entries(I[26]).map(AF).concat([I[10]]).join(" ")))&&{style:h},{for:void 0},L[1]&1024&&ys(I[41],["input$","label$","ripple$","outline$","helperLine$"])])),p&&rt(p.update)&&L[0]&49152|L[1]&4&&p.update.call(null,{ripple:!I[14]&&I[15]==="filled",unbounded:!1,addClass:I[38],removeClass:I[39],addStyle:I[40],eventTarget:I[33],activeTarget:I[33],initPromise:I[37]}),g&&rt(g.update)&&L[0]&256&&g.update.call(null,I[8])},i(I){m||(F(v),F(_),F(r.$$.fragment,I),F(E,I),F(l),F(c.$$.fragment,I),F(x),m=!0)},o(I){P(v),P(_),P(r.$$.fragment,I),P(E,I),P(l),P(c.$$.fragment,I),P(x),m=!1},d(I){I&&j(t),v&&v.d(),_&&_.d(),ne(r),E&&E.d(I),O[o].d(),ne(c),x&&x.d(),e[73](null),y=!1,pt(b)}}}function Ghe(e){let t;const n=e[51].leadingIcon,i=Ue(n,e,e[90],aF);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&268435456)&&Ve(i,n,r,r[90],t?ze(n,r[90],s,Fhe):$e(r[90]),aF)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Yhe(e){let t;const n=e[51].trailingIcon,i=Ue(n,e,e[90],sF);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&268435456)&&Ve(i,n,r,r[90],t?ze(n,r[90],s,Nhe):$e(r[90]),sF)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function gF(e){let t,n,i,r=e[15]==="filled"&&mF(),s=!e[16]&&(e[17]!=null||e[42].label)&&yF(e);return{c(){r&&r.c(),t=ae(),s&&s.c(),n=_t()},m(a,o){r&&r.m(a,o),U(a,t,o),s&&s.m(a,o),U(a,n,o),i=!0},p(a,o){a[15]==="filled"?r||(r=mF(),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),!a[16]&&(a[17]!=null||a[42].label)?s?(s.p(a,o),o[0]&196608|o[1]&2048&&F(s,1)):(s=yF(a),s.c(),F(s,1),s.m(n.parentNode,n)):s&&(Be(),P(s,1,1,()=>{s=null}),je())},i(a){i||(F(s),i=!0)},o(a){P(s),i=!1},d(a){r&&r.d(a),a&&j(t),s&&s.d(a),a&&j(n)}}}function mF(e){let t;return{c(){t=K("span"),J(t,"class","mdc-text-field__ripple")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function yF(e){let t,n;const i=[{floatAbove:e[28]||e[0]!=null&&e[0]!==""},{required:e[13]},{wrapped:!0},mt(e[41],"label$")];let r={$$slots:{default:[Xhe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new Ew({props:r}),e[52](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&268443649|a[1]&1024?Le(i,[a[0]&268435457&&{floatAbove:s[28]||s[0]!=null&&s[0]!==""},a[0]&8192&&{required:s[13]},i[2],a[1]&1024&&kt(mt(s[41],"label$"))]):{};a[0]&131072|a[2]&268435456&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[52](null),ne(t,s)}}}function Xhe(e){let t=(e[17]==null?"":e[17])+"",n,i;const r=e[51].label,s=Ue(r,e,e[90],pF);return{c(){n=ye(t),s&&s.c()},m(a,o){U(a,n,o),s&&s.m(a,o),i=!0},p(a,o){(!i||o[0]&131072)&&t!==(t=(a[17]==null?"":a[17])+"")&&et(n,t),s&&s.p&&(!i||o[2]&268435456)&&Ve(s,r,a,a[90],i?ze(r,a[90],o,Hhe):$e(a[90]),pF)},i(a){i||(F(s,a),i=!0)},o(a){P(s,a),i=!1},d(a){a&&j(n),s&&s.d(a)}}}function bF(e){let t,n;const i=[{noLabel:e[16]||e[17]==null&&!e[42].label},mt(e[41],"outline$")];let r={$$slots:{default:[Jhe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new N$({props:r}),e[54](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&196608|a[1]&3072?Le(i,[a[0]&196608|a[1]&2048&&{noLabel:s[16]||s[17]==null&&!s[42].label},a[1]&1024&&kt(mt(s[41],"outline$"))]):{};a[0]&268640289|a[1]&3072|a[2]&268435456&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[54](null),ne(t,s)}}}function vF(e){let t,n;const i=[{floatAbove:e[28]||e[0]!=null&&e[0]!==""},{required:e[13]},{wrapped:!0},mt(e[41],"label$")];let r={$$slots:{default:[Khe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new Ew({props:r}),e[53](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&268443649|a[1]&1024?Le(i,[a[0]&268435457&&{floatAbove:s[28]||s[0]!=null&&s[0]!==""},a[0]&8192&&{required:s[13]},i[2],a[1]&1024&&kt(mt(s[41],"label$"))]):{};a[0]&131072|a[2]&268435456&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[53](null),ne(t,s)}}}function Khe(e){let t=(e[17]==null?"":e[17])+"",n,i;const r=e[51].label,s=Ue(r,e,e[90],hF);return{c(){n=ye(t),s&&s.c()},m(a,o){U(a,n,o),s&&s.m(a,o),i=!0},p(a,o){(!i||o[0]&131072)&&t!==(t=(a[17]==null?"":a[17])+"")&&et(n,t),s&&s.p&&(!i||o[2]&268435456)&&Ve(s,r,a,a[90],i?ze(r,a[90],o,$he):$e(a[90]),hF)},i(a){i||(F(s,a),i=!0)},o(a){P(s,a),i=!1},d(a){a&&j(n),s&&s.d(a)}}}function Jhe(e){let t,n,i=!e[16]&&(e[17]!=null||e[42].label)&&vF(e);return{c(){i&&i.c(),t=_t()},m(r,s){i&&i.m(r,s),U(r,t,s),n=!0},p(r,s){!r[16]&&(r[17]!=null||r[42].label)?i?(i.p(r,s),s[0]&196608|s[1]&2048&&F(i,1)):(i=vF(r),i.c(),F(i,1),i.m(t.parentNode,t)):i&&(Be(),P(i,1,1,()=>{i=null}),je())},i(r){n||(F(i),n=!0)},o(r){P(i),n=!1},d(r){i&&i.d(r),r&&j(t)}}}function Qhe(e){let t;const n=e[51].leadingIcon,i=Ue(n,e,e[90],dF);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&268435456)&&Ve(i,n,r,r[90],t?ze(n,r[90],s,Vhe):$e(r[90]),dF)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Zhe(e){let t,n,i,r,s,a,o,l,u,c;const f=e[51].prefix,d=Ue(f,e,e[90],cF);let h=e[20]!=null&&_F(e);const p=[{type:e[18]},{disabled:e[12]},{required:e[13]},{updateInvalid:e[19]},{"aria-controls":e[27]},{"aria-describedby":e[27]},e[16]&&e[17]!=null?{placeholder:e[17]}:{},mt(e[41],"input$")];function g(w){e[64](w)}function m(w){e[65](w)}function y(w){e[66](w)}function b(w){e[67](w)}let v={};for(let w=0;w<p.length;w+=1)v=Q(v,p[w]);e[0]!==void 0&&(v.value=e[0]),e[3]!==void 0&&(v.files=e[3]),e[4]!==void 0&&(v.dirty=e[4]),e[1]!==void 0&&(v.invalid=e[1]),i=new The({props:v}),e[63](i),be.push(()=>In(i,"value",g)),be.push(()=>In(i,"files",m)),be.push(()=>In(i,"dirty",y)),be.push(()=>In(i,"invalid",b)),i.$on("blur",e[68]),i.$on("focus",e[69]),i.$on("blur",e[70]),i.$on("focus",e[71]);let _=e[21]!=null&&wF(e);const S=e[51].suffix,E=Ue(S,e,e[90],uF);return{c(){d&&d.c(),t=ae(),h&&h.c(),n=ae(),ie(i.$$.fragment),l=ae(),_&&_.c(),u=ae(),E&&E.c()},m(w,O){d&&d.m(w,O),U(w,t,O),h&&h.m(w,O),U(w,n,O),te(i,w,O),U(w,l,O),_&&_.m(w,O),U(w,u,O),E&&E.m(w,O),c=!0},p(w,O){d&&d.p&&(!c||O[2]&268435456)&&Ve(d,f,w,w[90],c?ze(f,w[90],O,Uhe):$e(w[90]),cF),w[20]!=null?h?(h.p(w,O),O[0]&1048576&&F(h,1)):(h=_F(w),h.c(),F(h,1),h.m(n.parentNode,n)):h&&(Be(),P(h,1,1,()=>{h=null}),je());const D=O[0]&135213056|O[1]&1024?Le(p,[O[0]&262144&&{type:w[18]},O[0]&4096&&{disabled:w[12]},O[0]&8192&&{required:w[13]},O[0]&524288&&{updateInvalid:w[19]},O[0]&134217728&&{"aria-controls":w[27]},O[0]&134217728&&{"aria-describedby":w[27]},O[0]&196608&&kt(w[16]&&w[17]!=null?{placeholder:w[17]}:{}),O[1]&1024&&kt(mt(w[41],"input$"))]):{};!r&&O[0]&1&&(r=!0,D.value=w[0],Cn(()=>r=!1)),!s&&O[0]&8&&(s=!0,D.files=w[3],Cn(()=>s=!1)),!a&&O[0]&16&&(a=!0,D.dirty=w[4],Cn(()=>a=!1)),!o&&O[0]&2&&(o=!0,D.invalid=w[1],Cn(()=>o=!1)),i.$set(D),w[21]!=null?_?(_.p(w,O),O[0]&2097152&&F(_,1)):(_=wF(w),_.c(),F(_,1),_.m(u.parentNode,u)):_&&(Be(),P(_,1,1,()=>{_=null}),je()),E&&E.p&&(!c||O[2]&268435456)&&Ve(E,S,w,w[90],c?ze(S,w[90],O,jhe):$e(w[90]),uF)},i(w){c||(F(d,w),F(h),F(i.$$.fragment,w),F(_),F(E,w),c=!0)},o(w){P(d,w),P(h),P(i.$$.fragment,w),P(_),P(E,w),c=!1},d(w){d&&d.d(w),w&&j(t),h&&h.d(w),w&&j(n),e[63](null),ne(i,w),w&&j(l),_&&_.d(w),w&&j(u),E&&E.d(w)}}}function epe(e){let t,n,i,r,s,a,o,l;const u=[{disabled:e[12]},{required:e[13]},{updateInvalid:e[19]},{"aria-controls":e[27]},{"aria-describedby":e[27]},mt(e[41],"input$")];function c(m){e[56](m)}function f(m){e[57](m)}function d(m){e[58](m)}let h={};for(let m=0;m<u.length;m+=1)h=Q(h,u[m]);e[0]!==void 0&&(h.value=e[0]),e[4]!==void 0&&(h.dirty=e[4]),e[1]!==void 0&&(h.invalid=e[1]),n=new Dhe({props:h}),e[55](n),be.push(()=>In(n,"value",c)),be.push(()=>In(n,"dirty",f)),be.push(()=>In(n,"invalid",d)),n.$on("blur",e[59]),n.$on("focus",e[60]),n.$on("blur",e[61]),n.$on("focus",e[62]);const p=e[51].internalCounter,g=Ue(p,e,e[90],fF);return{c(){t=K("span"),ie(n.$$.fragment),a=ae(),g&&g.c(),J(t,"class",o=xe({"mdc-text-field__resizer":!("input$resizable"in e[41])||e[41].input$resizable}))},m(m,y){U(m,t,y),te(n,t,null),G(t,a),g&&g.m(t,null),l=!0},p(m,y){const b=y[0]&134754304|y[1]&1024?Le(u,[y[0]&4096&&{disabled:m[12]},y[0]&8192&&{required:m[13]},y[0]&524288&&{updateInvalid:m[19]},y[0]&134217728&&{"aria-controls":m[27]},y[0]&134217728&&{"aria-describedby":m[27]},y[1]&1024&&kt(mt(m[41],"input$"))]):{};!i&&y[0]&1&&(i=!0,b.value=m[0],Cn(()=>i=!1)),!r&&y[0]&16&&(r=!0,b.dirty=m[4],Cn(()=>r=!1)),!s&&y[0]&2&&(s=!0,b.invalid=m[1],Cn(()=>s=!1)),n.$set(b),g&&g.p&&(!l||y[2]&268435456)&&Ve(g,p,m,m[90],l?ze(p,m[90],y,zhe):$e(m[90]),fF),(!l||y[1]&1024&&o!==(o=xe({"mdc-text-field__resizer":!("input$resizable"in m[41])||m[41].input$resizable})))&&J(t,"class",o)},i(m){l||(F(n.$$.fragment,m),F(g,m),l=!0)},o(m){P(n.$$.fragment,m),P(g,m),l=!1},d(m){m&&j(t),e[55](null),ne(n),g&&g.d(m)}}}function _F(e){let t,n;return t=new Ahe({props:{$$slots:{default:[tpe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[0]&1048576|r[2]&268435456&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function tpe(e){let t;return{c(){t=ye(e[20])},m(n,i){U(n,t,i)},p(n,i){i[0]&1048576&&et(t,n[20])},d(n){n&&j(t)}}}function wF(e){let t,n;return t=new Ohe({props:{$$slots:{default:[npe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[0]&2097152|r[2]&268435456&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function npe(e){let t;return{c(){t=ye(e[21])},m(n,i){U(n,t,i)},p(n,i){i[0]&2097152&&et(t,n[21])},d(n){n&&j(t)}}}function ipe(e){let t;const n=e[51].trailingIcon,i=Ue(n,e,e[90],lF);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&268435456)&&Ve(i,n,r,r[90],t?ze(n,r[90],s,Bhe):$e(r[90]),lF)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function SF(e){let t,n;const i=[mt(e[41],"ripple$")];let r={};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new L$({props:r}),e[72](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[1]&1024?Le(i,[kt(mt(s[41],"ripple$"))]):{};t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[72](null),ne(t,s)}}}function EF(e){let t,n;const i=[mt(e[41],"helperLine$")];let r={$$slots:{default:[rpe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new Ehe({props:r}),t.$on("SMUITextfieldHelperText:id",e[85]),t.$on("SMUITextfieldHelperText:mount",e[86]),t.$on("SMUITextfieldHelperText:unmount",e[87]),t.$on("SMUITextfieldCharacterCounter:mount",e[88]),t.$on("SMUITextfieldCharacterCounter:unmount",e[89]),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[1]&1024?Le(i,[kt(mt(s[41],"helperLine$"))]):{};a[2]&268435456&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){ne(t,s)}}}function rpe(e){let t;const n=e[51].helper,i=Ue(n,e,e[90],iF);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&268435456)&&Ve(i,n,r,r[90],t?ze(n,r[90],s,Rhe):$e(r[90]),iF)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function spe(e){let t,n,i,r,s;const a=[qhe,Whe],o=[];function l(c,f){return c[36]?0:1}t=l(e),n=o[t]=a[t](e);let u=e[42].helper&&EF(e);return{c(){n.c(),i=ae(),u&&u.c(),r=_t()},m(c,f){o[t].m(c,f),U(c,i,f),u&&u.m(c,f),U(c,r,f),s=!0},p(c,f){n.p(c,f),c[42].helper?u?(u.p(c,f),f[1]&2048&&F(u,1)):(u=EF(c),u.c(),F(u,1),u.m(r.parentNode,r)):u&&(Be(),P(u,1,1,()=>{u=null}),je())},i(c){s||(F(n),F(u),s=!0)},o(c){P(n),P(u),s=!1},d(c){o[t].d(c),c&&j(i),u&&u.d(c),c&&j(r)}}}const AF=([e,t])=>`${e}: ${t};`,OF=([e,t])=>`${e}: ${t};`;function ape(e,t,n){let i;const r=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","blur","layout","getElement"];let s=Ce(t,r),{$$slots:a={},$$scope:o}=t;const l=q2(a),{applyPassive:u}=Cj,c=St(ft());let f=()=>{};function d(ee){return ee===f}let{use:h=[]}=t,{class:p=""}=t,{style:g=""}=t,{ripple:m=!0}=t,{disabled:y=!1}=t,{required:b=!1}=t,{textarea:v=!1}=t,{variant:_=v?"outlined":"standard"}=t,{noLabel:S=!1}=t,{label:E=void 0}=t,{type:w="text"}=t,{value:O=s.input$emptyValueUndefined?void 0:f}=t,{files:D=f}=t;const x=!d(O)||!d(D);d(O)&&(O=void 0),d(D)&&(D=null);let{invalid:A=f}=t,{updateInvalid:C=d(A)}=t;d(A)&&(A=!1);let{dirty:I=!1}=t,{prefix:L=void 0}=t,{suffix:k=void 0}=t,{validateOnValueChange:M=C}=t,{useNativeValidation:N=C}=t,{withLeadingIcon:R=f}=t,{withTrailingIcon:T=f}=t,{input:z=void 0}=t,{floatingLabel:Y=void 0}=t,{lineRipple:H=void 0}=t,{notchedOutline:oe=void 0}=t,_e,re,pe={},Oe={},Re,W=!1,q=Zt("SMUI:addLayoutListener"),ve,ce,fe=new Promise(ee=>ce=ee),we,Xe,tt,ct,yn=O;q&&(ve=q(Ot)),Zn(()=>{if(n(49,re=new hhe({addClass:se,removeClass:Ne,hasClass:Nt,registerTextFieldInteractionHandler:(ee,ui)=>le().addEventListener(ee,ui),deregisterTextFieldInteractionHandler:(ee,ui)=>le().removeEventListener(ee,ui),registerValidationAttributeChangeHandler:ee=>{const ui=pm=>pm.map(Z=>Z.attributeName).filter(Z=>Z),Fy=new MutationObserver(pm=>{N&&ee(ui(pm))}),QE={attributes:!0};return z&&Fy.observe(z.getElement(),QE),Fy},deregisterValidationAttributeChangeHandler:ee=>{ee.disconnect()},getNativeInput:()=>{var ee;return(ee=z?.getElement())!==null&&ee!==void 0?ee:null},setInputAttr:(ee,ui)=>{z?.addAttr(ee,ui)},removeInputAttr:ee=>{z?.removeAttr(ee)},isFocused:()=>document.activeElement===z?.getElement(),registerInputInteractionHandler:(ee,ui)=>{z?.getElement().addEventListener(ee,ui,u())},deregisterInputInteractionHandler:(ee,ui)=>{z?.getElement().removeEventListener(ee,ui,u())},floatLabel:ee=>Y&&Y.float(ee),getLabelWidth:()=>Y?Y.getWidth():0,hasLabel:()=>!!Y,shakeLabel:ee=>Y&&Y.shake(ee),setLabelRequired:ee=>Y&&Y.setRequired(ee),activateLineRipple:()=>H&&H.activate(),deactivateLineRipple:()=>H&&H.deactivate(),setLineRippleTransformOrigin:ee=>H&&H.setRippleCenter(ee),closeOutline:()=>oe&&oe.closeNotch(),hasOutline:()=>!!oe,notchOutline:ee=>oe&&oe.notch(ee)},{get helperText(){return tt},get characterCounter(){return ct},get leadingIcon(){return we},get trailingIcon(){return Xe}})),x){if(z==null)throw new Error("SMUI Textfield initialized without Input component.");re.init()}else bj().then(()=>{if(z==null)throw new Error("SMUI Textfield initialized without Input component.");re.init()});return ce(),()=>{re.destroy()}}),na(()=>{ve&&ve()});function Nt(ee){var ui;return ee in pe?(ui=pe[ee])!==null&&ui!==void 0?ui:null:le().classList.contains(ee)}function se(ee){pe[ee]||n(25,pe[ee]=!0,pe)}function Ne(ee){(!(ee in pe)||pe[ee])&&n(25,pe[ee]=!1,pe)}function V(ee,ui){Oe[ee]!=ui&&(ui===""||ui==null?(delete Oe[ee],n(26,Oe)):n(26,Oe[ee]=ui,Oe))}function X(){z?.focus()}function Ze(){z?.blur()}function Ot(){if(re){const ee=re.shouldFloat;re.notchOutline(ee)}}function le(){return _e}function Ge(ee){be[ee?"unshift":"push"](()=>{Y=ee,n(5,Y)})}function me(ee){be[ee?"unshift":"push"](()=>{Y=ee,n(5,Y)})}function nt(ee){be[ee?"unshift":"push"](()=>{oe=ee,n(7,oe)})}function Je(ee){be[ee?"unshift":"push"](()=>{z=ee,n(2,z)})}function Ln(ee){O=ee,n(0,O)}function Io(ee){I=ee,n(4,I)}function hm(ee){A=ee,n(1,A),n(49,re),n(19,C)}const OE=()=>n(28,W=!1),CE=()=>n(28,W=!0),IE=ee=>yt(_e,"blur",ee),xE=ee=>yt(_e,"focus",ee);function TE(ee){be[ee?"unshift":"push"](()=>{z=ee,n(2,z)})}function Mh(ee){O=ee,n(0,O)}function kE(ee){D=ee,n(3,D)}function Ly(ee){I=ee,n(4,I)}function ME(ee){A=ee,n(1,A),n(49,re),n(19,C)}const Ny=()=>n(28,W=!1),Dh=()=>n(28,W=!0),DE=ee=>yt(_e,"blur",ee),RE=ee=>yt(_e,"focus",ee);function LE(ee){be[ee?"unshift":"push"](()=>{H=ee,n(6,H)})}function NE(ee){be[ee?"unshift":"push"](()=>{_e=ee,n(24,_e)})}const FE=ee=>n(29,we=ee.detail),PE=()=>n(29,we=void 0),BE=ee=>n(30,Xe=ee.detail),jE=()=>n(30,Xe=void 0),UE=ee=>n(32,ct=ee.detail),zE=()=>n(32,ct=void 0);function VE(ee){be[ee?"unshift":"push"](()=>{_e=ee,n(24,_e)})}const $E=ee=>n(29,we=ee.detail),HE=()=>n(29,we=void 0),WE=ee=>n(30,Xe=ee.detail),qE=()=>n(30,Xe=void 0),GE=ee=>n(27,Re=ee.detail),YE=ee=>n(31,tt=ee.detail),XE=()=>{n(27,Re=void 0),n(31,tt=void 0)},KE=ee=>n(32,ct=ee.detail),JE=()=>n(32,ct=void 0);return e.$$set=ee=>{t=Q(Q({},t),vt(ee)),n(41,s=Ce(t,r)),"use"in ee&&n(8,h=ee.use),"class"in ee&&n(9,p=ee.class),"style"in ee&&n(10,g=ee.style),"ripple"in ee&&n(11,m=ee.ripple),"disabled"in ee&&n(12,y=ee.disabled),"required"in ee&&n(13,b=ee.required),"textarea"in ee&&n(14,v=ee.textarea),"variant"in ee&&n(15,_=ee.variant),"noLabel"in ee&&n(16,S=ee.noLabel),"label"in ee&&n(17,E=ee.label),"type"in ee&&n(18,w=ee.type),"value"in ee&&n(0,O=ee.value),"files"in ee&&n(3,D=ee.files),"invalid"in ee&&n(1,A=ee.invalid),"updateInvalid"in ee&&n(19,C=ee.updateInvalid),"dirty"in ee&&n(4,I=ee.dirty),"prefix"in ee&&n(20,L=ee.prefix),"suffix"in ee&&n(21,k=ee.suffix),"validateOnValueChange"in ee&&n(43,M=ee.validateOnValueChange),"useNativeValidation"in ee&&n(44,N=ee.useNativeValidation),"withLeadingIcon"in ee&&n(22,R=ee.withLeadingIcon),"withTrailingIcon"in ee&&n(23,T=ee.withTrailingIcon),"input"in ee&&n(2,z=ee.input),"floatingLabel"in ee&&n(5,Y=ee.floatingLabel),"lineRipple"in ee&&n(6,H=ee.lineRipple),"notchedOutline"in ee&&n(7,oe=ee.notchedOutline),"$$scope"in ee&&n(90,o=ee.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(33,i=z&&z.getElement()),e.$$.dirty[0]&524290|e.$$.dirty[1]&262144&&re&&re.isValid()!==!A&&(C?n(1,A=!re.isValid()):re.setValid(!A)),e.$$.dirty[1]&266240&&re&&re.getValidateOnValueChange()!==M&&re.setValidateOnValueChange(d(M)?!1:M),e.$$.dirty[1]&270336&&re&&re.setUseNativeValidation(d(N)?!0:N),e.$$.dirty[0]&4096|e.$$.dirty[1]&262144&&re&&re.setDisabled(y),e.$$.dirty[0]&1|e.$$.dirty[1]&786432&&re&&x&&yn!==O){n(50,yn=O);const ee=`${O}`;re.getValue()!==ee&&re.setValue(ee)}},[O,A,z,D,I,Y,H,oe,h,p,g,m,y,b,v,_,S,E,w,C,L,k,R,T,_e,pe,Oe,Re,W,we,Xe,tt,ct,i,c,d,x,fe,se,Ne,V,s,l,M,N,X,Ze,Ot,le,re,yn,a,Ge,me,nt,Je,Ln,Io,hm,OE,CE,IE,xE,TE,Mh,kE,Ly,ME,Ny,Dh,DE,RE,LE,NE,FE,PE,BE,jE,UE,zE,VE,$E,HE,WE,qE,GE,YE,XE,KE,JE,o]}class Rk extends qe{constructor(t){super(),We(this,t,ape,spe,He,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,blur:46,layout:47,getElement:48},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get layout(){return this.$$.ctx[47]}get getElement(){return this.$$.ctx[48]}}function ope(e){let t;return{c(){t=ye(e[8])},m(n,i){U(n,t,i)},p(n,i){i&256&&et(t,n[8])},i:xt,o:xt,d(n){n&&j(t)}}}function lpe(e){let t;const n=e[13].default,i=Ue(n,e,e[12],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&4096)&&Ve(i,n,r,r[12],t?ze(n,r[12],s,null):$e(r[12]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function upe(e){let t,n,i,r,s,a,o,l,u;const c=[lpe,ope],f=[];function d(g,m){return g[8]==null?0:1}n=d(e),i=f[n]=c[n](e);let h=[{class:r=xe({[e[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":e[3],"mdc-text-field-helper-text--validation-msg":e[4],...e[6]})},{"aria-hidden":s=e[3]?void 0:"true"},{id:e[2]},e[7],e[10]],p={};for(let g=0;g<h.length;g+=1)p=Q(p,h[g]);return{c(){t=K("div"),i.c(),Se(t,p)},m(g,m){U(g,t,m),f[n].m(t,null),e[14](t),o=!0,l||(u=[Ee(a=wt.call(null,t,e[0])),Ee(e[9].call(null,t))],l=!0)},p(g,[m]){let y=n;n=d(g),n===y?f[n].p(g,m):(Be(),P(f[y],1,1,()=>{f[y]=null}),je(),i=f[n],i?i.p(g,m):(i=f[n]=c[n](g),i.c()),F(i,1),i.m(t,null)),Se(t,p=Le(h,[(!o||m&90&&r!==(r=xe({[g[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":g[3],"mdc-text-field-helper-text--validation-msg":g[4],...g[6]})))&&{class:r},(!o||m&8&&s!==(s=g[3]?void 0:"true"))&&{"aria-hidden":s},(!o||m&4)&&{id:g[2]},m&128&&g[7],m&1024&&g[10]])),a&&rt(a.update)&&m&1&&a.update.call(null,g[0])},i(g){o||(F(i),o=!0)},o(g){P(i),o=!1},d(g){g&&j(t),f[n].d(),e[14](null),l=!1,pt(u)}}}let cpe=0;function fpe(e,t,n){const i=["use","class","id","persistent","validationMsg","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,{id:c="SMUI-textfield-helper-text-"+cpe++}=t,{persistent:f=!1}=t,{validationMsg:d=!1}=t,h,p,g={},m={},y;Zn(()=>(p=new phe({addClass:v,removeClass:_,hasClass:b,getAttr:S,setAttr:E,removeAttr:w,setContent:x=>{n(8,y=x)}}),c.startsWith("SMUI-textfield-helper-text-")&&yt(O(),"SMUITextfieldHelperText:id",c),yt(O(),"SMUITextfieldHelperText:mount",p),p.init(),()=>{yt(O(),"SMUITextfieldHelperText:unmount",p),p.destroy()}));function b(x){return x in g?g[x]:O().classList.contains(x)}function v(x){g[x]||n(6,g[x]=!0,g)}function _(x){(!(x in g)||g[x])&&n(6,g[x]=!1,g)}function S(x){var A;return x in m?(A=m[x])!==null&&A!==void 0?A:null:O().getAttribute(x)}function E(x,A){m[x]!==A&&n(7,m[x]=A,m)}function w(x){(!(x in m)||m[x]!=null)&&n(7,m[x]=void 0,m)}function O(){return h}function D(x){be[x?"unshift":"push"](()=>{h=x,n(5,h)})}return e.$$set=x=>{t=Q(Q({},t),vt(x)),n(10,r=Ce(t,i)),"use"in x&&n(0,l=x.use),"class"in x&&n(1,u=x.class),"id"in x&&n(2,c=x.id),"persistent"in x&&n(3,f=x.persistent),"validationMsg"in x&&n(4,d=x.validationMsg),"$$scope"in x&&n(12,a=x.$$scope)},[l,u,c,f,d,h,g,m,y,o,r,O,a,s,D]}class F$ extends qe{constructor(t){super(),We(this,t,fpe,upe,He,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const P$=new Set,qs=new WeakMap,_p=new WeakMap,zd=new WeakMap,MC=new WeakMap,dpe=new WeakMap,Xp=new WeakMap,l_=new WeakMap;let jc;const gd="__aa_tgt",DC="__aa_del",hpe=e=>{const t=bpe(e);t&&t.forEach(n=>vpe(n))},ppe=e=>{e.forEach(t=>{t.target===jc&&mpe(),qs.has(t.target)&&ph(t.target)})};function gpe(e){const t=MC.get(e);t?.disconnect();let n=qs.get(e),i=0;const r=5;n||(n=Kp(e),qs.set(e,n));const{offsetWidth:s,offsetHeight:a}=jc,l=[n.top-r,s-(n.left+r+n.width),a-(n.top+r+n.height),n.left-r].map(c=>`${-1*Math.floor(c)}px`).join(" "),u=new IntersectionObserver(()=>{++i>1&&ph(e)},{root:jc,threshold:1,rootMargin:l});u.observe(e),MC.set(e,u)}function ph(e){clearTimeout(l_.get(e));const t=Aw(e),n=typeof t=="function"?500:t.duration;l_.set(e,setTimeout(()=>{const i=zd.get(e);(!i||i.finished)&&(qs.set(e,Kp(e)),gpe(e))},n))}function mpe(){clearTimeout(l_.get(jc)),l_.set(jc,setTimeout(()=>{P$.forEach(e=>U$(e,t=>B$(()=>ph(t))))},100))}function ype(e){setTimeout(()=>{dpe.set(e,setInterval(()=>B$(ph.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function B$(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}let RC,rp;typeof window<"u"&&(jc=document.documentElement,RC=new MutationObserver(hpe),rp=new ResizeObserver(ppe),rp.observe(jc));function bpe(e){return e.reduce((t,n)=>{if(t===!1)return!1;if(n.target instanceof Element){if(SA(n.target),!t.has(n.target)){t.add(n.target);for(let i=0;i<n.target.children.length;i++){const r=n.target.children.item(i);if(!!r){if(DC in r)return!1;SA(n.target,r),t.add(r)}}}if(n.removedNodes.length)for(let i=0;i<n.removedNodes.length;i++){const r=n.removedNodes[i];if(DC in r)return!1;r instanceof Element&&(t.add(r),SA(n.target,r),_p.set(r,[n.previousSibling,n.nextSibling]))}}return t},new Set)}function SA(e,t){!t&&!(gd in e)?Object.defineProperty(e,gd,{value:e}):t&&!(gd in t)&&Object.defineProperty(t,gd,{value:e})}function vpe(e){var t;const n=jc.contains(e),i=qs.has(e);n&&_p.has(e)&&_p.delete(e),zd.has(e)&&((t=zd.get(e))===null||t===void 0||t.cancel()),i&&n?_pe(e):i&&!n?Spe(e):wpe(e)}function Fo(e){return Number(e.replace(/[^0-9.\-]/g,""))}function Kp(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,width:t.width,height:t.height}}function j$(e,t,n){let i=t.width,r=t.height,s=n.width,a=n.height;const o=getComputedStyle(e);if(o.getPropertyValue("box-sizing")==="content-box"){const u=Fo(o.paddingTop)+Fo(o.paddingBottom)+Fo(o.borderTopWidth)+Fo(o.borderBottomWidth),c=Fo(o.paddingLeft)+Fo(o.paddingRight)+Fo(o.borderRightWidth)+Fo(o.borderLeftWidth);i-=c,s-=c,r-=u,a-=u}return[i,s,r,a].map(Math.round)}function Aw(e){return gd in e&&Xp.has(e[gd])?Xp.get(e[gd]):{duration:250,easing:"ease-in-out"}}function U$(e,...t){t.forEach(n=>n(e,Xp.has(e)));for(let n=0;n<e.children.length;n++){const i=e.children.item(n);i&&t.forEach(r=>r(i,Xp.has(i)))}}function _pe(e){const t=qs.get(e),n=Kp(e);let i;if(!t)return;const r=Aw(e);if(typeof r!="function"){const s=t.left-n.left,a=t.top-n.top,[o,l,u,c]=j$(e,t,n),f={transform:`translate(${s}px, ${a}px)`},d={transform:"translate(0, 0)"};o!==l&&(f.width=`${o}px`,d.width=`${l}px`),u!==c&&(f.height=`${u}px`,d.height=`${c}px`),i=e.animate([f,d],r)}else i=new Animation(r(e,"remain",t,n)),i.play();zd.set(e,i),qs.set(e,n),i.addEventListener("finish",ph.bind(null,e))}function wpe(e){const t=Kp(e);qs.set(e,t);const n=Aw(e);let i;typeof n!="function"?i=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:n.duration*1.5,easing:"ease-in"}):(i=new Animation(n(e,"add",t)),i.play()),zd.set(e,i),i.addEventListener("finish",ph.bind(null,e))}function Spe(e){if(!_p.has(e)||!qs.has(e))return;const[t,n]=_p.get(e);Object.defineProperty(e,DC,{value:!0}),n&&n.parentNode&&n.parentNode instanceof Element?n.parentNode.insertBefore(e,n):t&&t.parentNode&&t.parentNode.appendChild(e);const[i,r,s,a]=Epe(e),o=Aw(e),l=qs.get(e);let u;Object.assign(e.style,{position:"absolute",top:`${i}px`,left:`${r}px`,width:`${s}px`,height:`${a}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof o!="function"?u=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:o.duration,easing:"ease-out"}):(u=new Animation(o(e,"remove",l)),u.play()),zd.set(e,u),u.addEventListener("finish",()=>{var c;e.remove(),qs.delete(e),_p.delete(e),zd.delete(e),(c=MC.get(e))===null||c===void 0||c.disconnect()})}function Epe(e){const t=qs.get(e),[n,,i]=j$(e,t,Kp(e));let r=e.parentElement;for(;r&&(getComputedStyle(r).position==="static"||r instanceof HTMLBodyElement);)r=r.parentElement;r||(r=document.body);const s=getComputedStyle(r),a=qs.get(r)||Kp(r),o=Math.round(t.top-a.top)-Fo(s.borderTopWidth),l=Math.round(t.left-a.left)-Fo(s.borderLeftWidth);return[o,l,n,i]}function Ape(e,t={}){if(RC&&rp){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),U$(e,ph,ype,i=>rp?.observe(i)),typeof t=="function"?Xp.set(e,t):Xp.set(e,{duration:250,easing:"ease-in-out",...t}),RC.observe(e,{childList:!0}),P$.add(e)}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ope={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},Cpe={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},wm={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67,TOUCH_EVENT_WAIT_MS:30},yi;(function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"})(yi||(yi={}));var Od;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"})(Od||(Od={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var z$=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.isSurfaceOpen=!1,i.isQuickOpen=!1,i.isHoistedElement=!1,i.isFixedPosition=!1,i.isHorizontallyCenteredOnViewport=!1,i.maxHeight=0,i.openAnimationEndTimerId=0,i.closeAnimationEndTimerId=0,i.animationRequestId=0,i.anchorCorner=Od.TOP_START,i.originCorner=Od.TOP_START,i.anchorMargin={top:0,right:0,bottom:0,left:0},i.position={x:0,y:0},i}return Object.defineProperty(t,"cssClasses",{get:function(){return Ope},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Cpe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return wm},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return Od},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var n=t.cssClasses,i=n.ROOT,r=n.OPEN;if(!this.adapter.hasClass(i))throw new Error(i+" class required in root element.");this.adapter.hasClass(r)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(n){this.anchorCorner=n},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^yi.RIGHT},t.prototype.setAnchorMargin=function(n){this.anchorMargin.top=n.top||0,this.anchorMargin.right=n.right||0,this.anchorMargin.bottom=n.bottom||0,this.anchorMargin.left=n.left||0},t.prototype.setIsHoisted=function(n){this.isHoistedElement=n},t.prototype.setFixedPosition=function(n){this.isFixedPosition=n},t.prototype.isFixed=function(){return this.isFixedPosition},t.prototype.setAbsolutePosition=function(n,i){this.position.x=this.isFinite(n)?n:0,this.position.y=this.isFinite(i)?i:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(n){this.isHorizontallyCenteredOnViewport=n},t.prototype.setQuickOpen=function(n){this.isQuickOpen=n},t.prototype.setMaxHeight=function(n){this.maxHeight=n},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var n=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame(function(){n.dimensions=n.adapter.getInnerDimensions(),n.autoposition(),n.adapter.addClass(t.cssClasses.OPEN),n.openAnimationEndTimerId=setTimeout(function(){n.openAnimationEndTimerId=0,n.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),n.adapter.notifyOpen()},wm.TRANSITION_OPEN_DURATION)}),this.isSurfaceOpen=!0))},t.prototype.close=function(n){var i=this;if(n===void 0&&(n=!1),!!this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen){this.isSurfaceOpen=!1,n||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose();return}this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame(function(){i.adapter.removeClass(t.cssClasses.OPEN),i.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),i.closeAnimationEndTimerId=setTimeout(function(){i.closeAnimationEndTimerId=0,i.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),i.adapter.notifyClose()},wm.TRANSITION_CLOSE_DURATION)}),this.isSurfaceOpen=!1,n||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(n){var i=n.target;this.adapter.isElementInContainer(i)||this.close()},t.prototype.handleKeydown=function(n){var i=n.keyCode,r=n.key,s=r==="Escape"||i===27;s&&this.close()},t.prototype.autoposition=function(){var n;this.measurements=this.getAutoLayoutmeasurements();var i=this.getoriginCorner(),r=this.getMenuSurfaceMaxHeight(i),s=this.hasBit(i,yi.BOTTOM)?"bottom":"top",a=this.hasBit(i,yi.RIGHT)?"right":"left",o=this.getHorizontalOriginOffset(i),l=this.getVerticalOriginOffset(i),u=this.measurements,c=u.anchorSize,f=u.surfaceSize,d=(n={},n[a]=o,n[s]=l,n);c.width/f.width>wm.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(a="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(d),this.adapter.setTransformOrigin(a+" "+s),this.adapter.setPosition(d),this.adapter.setMaxHeight(r?r+"px":""),this.hasBit(i,yi.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var n=this.adapter.getAnchorDimensions(),i=this.adapter.getBodyDimensions(),r=this.adapter.getWindowDimensions(),s=this.adapter.getWindowScroll();return n||(n={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:n,bodySize:i,surfaceSize:this.dimensions,viewportDistance:{top:n.top,right:r.width-n.right,bottom:r.height-n.bottom,left:n.left},viewportSize:r,windowScroll:s}},t.prototype.getoriginCorner=function(){var n=this.originCorner,i=this.measurements,r=i.viewportDistance,s=i.anchorSize,a=i.surfaceSize,o=t.numbers.MARGIN_TO_EDGE,l=this.hasBit(this.anchorCorner,yi.BOTTOM),u,c;l?(u=r.top-o+this.anchorMargin.bottom,c=r.bottom-o-this.anchorMargin.bottom):(u=r.top-o+this.anchorMargin.top,c=r.bottom-o+s.height-this.anchorMargin.top);var f=c-a.height>0;!f&&u>c&&(n=this.setBit(n,yi.BOTTOM));var d=this.adapter.isRtl(),h=this.hasBit(this.anchorCorner,yi.FLIP_RTL),p=this.hasBit(this.anchorCorner,yi.RIGHT)||this.hasBit(n,yi.RIGHT),g=!1;d&&h?g=!p:g=p;var m,y;g?(m=r.left+s.width+this.anchorMargin.right,y=r.right-this.anchorMargin.right):(m=r.left+this.anchorMargin.left,y=r.right+s.width-this.anchorMargin.left);var b=m-a.width>0,v=y-a.width>0,_=this.hasBit(n,yi.FLIP_RTL)&&this.hasBit(n,yi.RIGHT);return v&&_&&d||!b&&_?n=this.unsetBit(n,yi.RIGHT):(b&&g&&d||b&&!g&&p||!v&&m>=y)&&(n=this.setBit(n,yi.RIGHT)),n},t.prototype.getMenuSurfaceMaxHeight=function(n){if(this.maxHeight>0)return this.maxHeight;var i=this.measurements.viewportDistance,r=0,s=this.hasBit(n,yi.BOTTOM),a=this.hasBit(this.anchorCorner,yi.BOTTOM),o=t.numbers.MARGIN_TO_EDGE;return s?(r=i.top+this.anchorMargin.top-o,a||(r+=this.measurements.anchorSize.height)):(r=i.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-o,a&&(r-=this.measurements.anchorSize.height)),r},t.prototype.getHorizontalOriginOffset=function(n){var i=this.measurements.anchorSize,r=this.hasBit(n,yi.RIGHT),s=this.hasBit(this.anchorCorner,yi.RIGHT);if(r){var a=s?i.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?a-(this.measurements.viewportSize.width-this.measurements.bodySize.width):a}return s?i.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(n){var i=this.measurements.anchorSize,r=this.hasBit(n,yi.BOTTOM),s=this.hasBit(this.anchorCorner,yi.BOTTOM),a=0;return r?a=s?i.height-this.anchorMargin.top:-this.anchorMargin.bottom:a=s?i.height+this.anchorMargin.bottom:this.anchorMargin.top,a},t.prototype.adjustPositionForHoistedElement=function(n){var i,r,s=this.measurements,a=s.windowScroll,o=s.viewportDistance,l=s.surfaceSize,u=s.viewportSize,c=Object.keys(n);try{for(var f=wi(c),d=f.next();!d.done;d=f.next()){var h=d.value,p=n[h]||0;if(this.isHorizontallyCenteredOnViewport&&(h==="left"||h==="right")){n[h]=(u.width-l.width)/2;continue}p+=o[h],this.isFixedPosition||(h==="top"?p+=a.y:h==="bottom"?p-=a.y:h==="left"?p+=a.x:p-=a.x),n[h]=p}}catch(g){i={error:g}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(i)throw i.error}}},t.prototype.maybeRestoreFocus=function(){var n=this,i=this.adapter.isFocused(),r=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(i||r)&&setTimeout(function(){n.adapter.restoreFocus()},wm.TOUCH_EVENT_WAIT_MS)},t.prototype.hasBit=function(n,i){return Boolean(n&i)},t.prototype.setBit=function(n,i){return n|i},t.prototype.unsetBit=function(n,i){return n^i},t.prototype.isFinite=function(n){return typeof n=="number"&&isFinite(n)},t}(cr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var wp={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Fh={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected",SKIP_RESTORE_FOCUS:"data-menu-item-skip-restore-focus"},Ipe={FOCUS_ROOT_INDEX:-1},sp;(function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"})(sp||(sp={}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var xpe=function(e){ur(t,e);function t(n){var i=e.call(this,en(en({},t.defaultAdapter),n))||this;return i.closeAnimationEndTimerId=0,i.defaultFocusState=sp.LIST_ROOT,i.selectedIndex=-1,i}return Object.defineProperty(t,"cssClasses",{get:function(){return wp},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Fh},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ipe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},getAttributeFromElementAtIndex:function(){return null},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId&&clearTimeout(this.closeAnimationEndTimerId),this.adapter.closeSurface()},t.prototype.handleKeydown=function(n){var i=n.key,r=n.keyCode,s=i==="Tab"||r===9;s&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(n){var i=this,r=this.adapter.getElementIndex(n);if(!(r<0)){this.adapter.notifySelected({index:r});var s=this.adapter.getAttributeFromElementAtIndex(r,Fh.SKIP_RESTORE_FOCUS)==="true";this.adapter.closeSurface(s),this.closeAnimationEndTimerId=setTimeout(function(){var a=i.adapter.getElementIndex(n);a>=0&&i.adapter.isSelectableItemAtIndex(a)&&i.setSelectedIndex(a)},z$.numbers.TRANSITION_CLOSE_DURATION)}},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState){case sp.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case sp.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case sp.NONE:break;default:this.adapter.focusListRoot();break}},t.prototype.setDefaultFocusState=function(n){this.defaultFocusState=n},t.prototype.getSelectedIndex=function(){return this.selectedIndex},t.prototype.setSelectedIndex=function(n){if(this.validatedIndex(n),!this.adapter.isSelectableItemAtIndex(n))throw new Error("MDCMenuFoundation: No selection group at specified index.");var i=this.adapter.getSelectedSiblingOfItemAtIndex(n);i>=0&&(this.adapter.removeAttributeFromElementAtIndex(i,Fh.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(i,wp.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(n,wp.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(n,Fh.ARIA_CHECKED_ATTR,"true"),this.selectedIndex=n},t.prototype.setEnabled=function(n,i){this.validatedIndex(n),i?(this.adapter.removeClassFromElementAtIndex(n,qt.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,Fh.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(n,qt.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(n,Fh.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex=function(n){var i=this.adapter.getMenuItemCount(),r=n>=0&&n<i;if(!r)throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(cr);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ii={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},EA={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},Lf={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330};/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Tpe=function(e){ur(t,e);function t(n,i){i===void 0&&(i={});var r=e.call(this,en(en({},t.defaultAdapter),n))||this;return r.disabled=!1,r.isMenuOpen=!1,r.useDefaultValidation=!0,r.customValidity=!0,r.lastSelectedIndex=Lf.UNSET_INDEX,r.clickDebounceTimeout=0,r.recentlyClicked=!1,r.leadingIcon=i.leadingIcon,r.helperText=i.helperText,r}return Object.defineProperty(t,"cssClasses",{get:function(){return ii},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Lf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return EA},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},t.prototype.setSelectedIndex=function(n,i,r){i===void 0&&(i=!1),r===void 0&&(r=!1),!(n>=this.adapter.getMenuItemCount())&&(n===Lf.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(n).trim()),this.adapter.setSelectedIndex(n),i&&this.adapter.closeMenu(),!r&&this.lastSelectedIndex!==n&&this.handleChange(),this.lastSelectedIndex=n)},t.prototype.setValue=function(n,i){i===void 0&&(i=!1);var r=this.adapter.getMenuItemValues().indexOf(n);this.setSelectedIndex(r,!1,i)},t.prototype.getValue=function(){var n=this.adapter.getSelectedIndex(),i=this.adapter.getMenuItemValues();return n!==Lf.UNSET_INDEX?i[n]:""},t.prototype.getDisabled=function(){return this.disabled},t.prototype.setDisabled=function(n){this.disabled=n,this.disabled?(this.adapter.addClass(ii.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(ii.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},t.prototype.openMenu=function(){this.adapter.addClass(ii.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},t.prototype.setHelperTextContent=function(n){this.helperText&&this.helperText.setContent(n)},t.prototype.layout=function(){if(this.adapter.hasLabel()){var n=this.getValue().length>0,i=this.adapter.hasClass(ii.FOCUSED),r=n||i,s=this.adapter.hasClass(ii.REQUIRED);this.notchOutline(r),this.adapter.floatLabel(r),this.adapter.setLabelRequired(s)}},t.prototype.layoutOptions=function(){var n=this.adapter.getMenuItemValues(),i=n.indexOf(this.getValue());this.setSelectedIndex(i,!1,!0)},t.prototype.handleMenuOpened=function(){if(this.adapter.getMenuItemValues().length!==0){var n=this.getSelectedIndex(),i=n>=0?n:0;this.adapter.focusMenuItemAtIndex(i)}},t.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},t.prototype.handleMenuClosed=function(){this.adapter.removeClass(ii.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},t.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue());var n=this.adapter.hasClass(ii.REQUIRED);n&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.handleMenuItemAction=function(n){this.setSelectedIndex(n,!0)},t.prototype.handleFocus=function(){this.adapter.addClass(ii.FOCUSED),this.layout(),this.adapter.activateBottomLine()},t.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},t.prototype.handleClick=function(n){if(!(this.disabled||this.recentlyClicked)){if(this.setClickDebounceTimeout(),this.isMenuOpen){this.adapter.closeMenu();return}this.adapter.setRippleCenter(n),this.openMenu()}},t.prototype.handleKeydown=function(n){if(!(this.isMenuOpen||!this.adapter.hasClass(ii.FOCUSED))){var i=vi(n)===Vt.ENTER,r=vi(n)===Vt.SPACEBAR,s=vi(n)===Vt.ARROW_UP,a=vi(n)===Vt.ARROW_DOWN,o=n.ctrlKey||n.metaKey;if(!o&&(!r&&n.key&&n.key.length===1||r&&this.adapter.isTypeaheadInProgress())){var l=r?" ":n.key,u=this.adapter.typeaheadMatchItem(l,this.getSelectedIndex());u>=0&&this.setSelectedIndex(u),n.preventDefault();return}!i&&!r&&!s&&!a||(s&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):a&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),n.preventDefault())}},t.prototype.notchOutline=function(n){if(!!this.adapter.hasOutline()){var i=this.adapter.hasClass(ii.FOCUSED);if(n){var r=Lf.LABEL_SCALE,s=this.adapter.getLabelWidth()*r;this.adapter.notchOutline(s)}else i||this.adapter.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(n){this.leadingIcon&&this.leadingIcon.setAriaLabel(n)},t.prototype.setLeadingIconContent=function(n){this.leadingIcon&&this.leadingIcon.setContent(n)},t.prototype.getUseDefaultValidation=function(){return this.useDefaultValidation},t.prototype.setUseDefaultValidation=function(n){this.useDefaultValidation=n},t.prototype.setValid=function(n){this.useDefaultValidation||(this.customValidity=n),this.adapter.setSelectAnchorAttr("aria-invalid",(!n).toString()),n?(this.adapter.removeClass(ii.INVALID),this.adapter.removeMenuClass(ii.MENU_INVALID)):(this.adapter.addClass(ii.INVALID),this.adapter.addMenuClass(ii.MENU_INVALID)),this.syncHelperTextValidity(n)},t.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(ii.REQUIRED)&&!this.adapter.hasClass(ii.DISABLED)?this.getSelectedIndex()!==Lf.UNSET_INDEX&&(this.getSelectedIndex()!==0||Boolean(this.getValue())):this.customValidity},t.prototype.setRequired=function(n){n?this.adapter.addClass(ii.REQUIRED):this.adapter.removeClass(ii.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",n.toString()),this.adapter.setLabelRequired(n)},t.prototype.getRequired=function(){return this.adapter.getSelectAnchorAttr("aria-required")==="true"},t.prototype.init=function(){var n=this.adapter.getAnchorElement();n&&(this.adapter.setMenuAnchorElement(n),this.adapter.setMenuAnchorCorner(Od.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(ii.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(ii.INVALID)),this.layout(),this.layoutOptions()},t.prototype.blur=function(){this.adapter.removeClass(ii.FOCUSED),this.layout(),this.adapter.deactivateBottomLine();var n=this.adapter.hasClass(ii.REQUIRED);n&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.syncHelperTextValidity=function(n){if(!!this.helperText){this.helperText.setValidity(n);var i=this.helperText.isVisible(),r=this.helperText.getId();i&&r?this.adapter.setSelectAnchorAttr(EA.ARIA_DESCRIBEDBY,r):this.adapter.removeSelectAnchorAttr(EA.ARIA_DESCRIBEDBY)}},t.prototype.setClickDebounceTimeout=function(){var n=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout(function(){n.recentlyClicked=!1},Lf.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},t}(cr);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Nf={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},Ff={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var kpe=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"cssClasses",{get:function(){return Ff},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Nf},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return this.adapter.getAttr(Nf.ARIA_HIDDEN)!=="true"},t.prototype.setContent=function(n){this.adapter.setContent(n)},t.prototype.setValidation=function(n){n?this.adapter.addClass(Ff.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(Ff.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidationMsgPersistent=function(n){n?this.adapter.addClass(Ff.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(Ff.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},t.prototype.setValidity=function(n){var i=this.adapter.hasClass(Ff.HELPER_TEXT_VALIDATION_MSG);if(!!i){var r=this.adapter.hasClass(Ff.HELPER_TEXT_VALIDATION_MSG_PERSISTENT),s=!n||r;if(s){this.showToScreenReader(),n?this.adapter.removeAttr(Nf.ROLE):this.adapter.setAttr(Nf.ROLE,"alert");return}this.adapter.removeAttr(Nf.ROLE),this.hide()}},t.prototype.showToScreenReader=function(){this.adapter.removeAttr(Nf.ARIA_HIDDEN)},t.prototype.hide=function(){this.adapter.setAttr(Nf.ARIA_HIDDEN,"true")},t}(cr);const{document:Mpe}=Wte;function Dpe(e){let t,n,i,r,s,a,o,l;const u=e[31].default,c=Ue(u,e,e[30],null);let f=[{class:i=xe({[e[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":e[5],"mdc-menu-surface--open":e[4],"smui-menu-surface--static":e[4],"mdc-menu-surface--fullwidth":e[7],...e[10]})},{style:r=Object.entries(e[11]).map(CF).concat([e[3]]).join(" ")},e[13]],d={};for(let h=0;h<f.length;h+=1)d=Q(d,f[h]);return{c(){t=ae(),n=K("div"),c&&c.c(),Se(n,d)},m(h,p){U(h,t,p),U(h,n,p),c&&c.m(n,null),e[33](n),a=!0,o||(l=[Ke(Mpe.body,"click",e[32],!0),Ee(s=wt.call(null,n,e[1])),Ee(e[12].call(null,n)),Ke(n,"keydown",e[34])],o=!0)},p(h,p){c&&c.p&&(!a||p[0]&1073741824)&&Ve(c,u,h,h[30],a?ze(u,h[30],p,null):$e(h[30]),null),Se(n,d=Le(f,[(!a||p[0]&1204&&i!==(i=xe({[h[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":h[5],"mdc-menu-surface--open":h[4],"smui-menu-surface--static":h[4],"mdc-menu-surface--fullwidth":h[7],...h[10]})))&&{class:i},(!a||p[0]&2056&&r!==(r=Object.entries(h[11]).map(CF).concat([h[3]]).join(" ")))&&{style:r},p[0]&8192&&h[13]])),s&&rt(s.update)&&p[0]&2&&s.update.call(null,h[1])},i(h){a||(F(c,h),a=!0)},o(h){P(c,h),a=!1},d(h){h&&j(t),h&&j(n),c&&c.d(h),e[33](null),o=!1,pt(l)}}}const CF=([e,t])=>`${e}: ${t};`;function Rpe(e,t,n){const i=["use","class","style","static","anchor","fixed","open","managed","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","isFixed","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;var o,l,u;const c=St(ft());let{use:f=[]}=t,{class:d=""}=t,{style:h=""}=t,{static:p=!1}=t,{anchor:g=!0}=t,{fixed:m=!1}=t,{open:y=p}=t,{managed:b=!1}=t,{fullWidth:v=!1}=t,{quickOpen:_=!1}=t,{anchorElement:S=void 0}=t,{anchorCorner:E=void 0}=t,{anchorMargin:w={top:0,right:0,bottom:0,left:0}}=t,{maxHeight:O=0}=t,{horizontallyCenteredOnViewport:D=!1}=t,x,A,C={},I={},L;Tt("SMUI:list:role","menu"),Tt("SMUI:list:item:role","menuitem");const k=Od;Zn(()=>(n(9,A=new z$({addClass:N,removeClass:R,hasClass:M,hasAnchor:()=>!!S,notifyClose:()=>{b||n(0,y=p),y||yt(x,"SMUIMenuSurface:closed",void 0,void 0,!0)},notifyClosing:()=>{b||n(0,y=p),y||yt(x,"SMUIMenuSurface:closing",void 0,void 0,!0)},notifyOpen:()=>{b||n(0,y=!0),y&&yt(x,"SMUIMenuSurface:opened",void 0,void 0,!0)},isElementInContainer:q=>x.contains(q),isRtl:()=>getComputedStyle(x).getPropertyValue("direction")==="rtl",setTransformOrigin:q=>{n(11,I["transform-origin"]=q,I)},isFocused:()=>document.activeElement===x,saveFocus:()=>{var q;L=(q=document.activeElement)!==null&&q!==void 0?q:void 0},restoreFocus:()=>{(!x||x.contains(document.activeElement))&&L&&document.contains(L)&&"focus"in L&&L.focus()},getInnerDimensions:()=>({width:x.offsetWidth,height:x.offsetHeight}),getAnchorDimensions:()=>S?S.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:q=>{n(11,I.left="left"in q?`${q.left}px`:"",I),n(11,I.right="right"in q?`${q.right}px`:"",I),n(11,I.top="top"in q?`${q.top}px`:"",I),n(11,I.bottom="bottom"in q?`${q.bottom}px`:"",I)},setMaxHeight:q=>{n(11,I.maxHeight=q,I)}})),yt(x,"SMUIMenuSurface:mount",{get open(){return y},set open(q){n(0,y=q)},closeProgrammatic:T}),A.init(),()=>{var q;const ve=A.isHoistedElement;A.destroy(),ve&&((q=x.parentNode)===null||q===void 0||q.removeChild(x))})),na(()=>{var W;g&&x&&((W=x.parentElement)===null||W===void 0||W.classList.remove("mdc-menu-surface--anchor"))});function M(W){return W in C?C[W]:re().classList.contains(W)}function N(W){C[W]||n(10,C[W]=!0,C)}function R(W){(!(W in C)||C[W])&&n(10,C[W]=!1,C)}function T(W){A.close(W),n(0,y=!1)}function z(){return y}function Y(W){n(0,y=W)}function H(W,q){return A.setAbsolutePosition(W,q)}function oe(W){return A.setIsHoisted(W)}function _e(){return A.isFixed()}function re(){return x}const pe=W=>A&&y&&!b&&A.handleBodyClick(W);function Oe(W){be[W?"unshift":"push"](()=>{x=W,n(8,x)})}const Re=W=>A&&A.handleKeydown(W);return e.$$set=W=>{t=Q(Q({},t),vt(W)),n(13,r=Ce(t,i)),"use"in W&&n(1,f=W.use),"class"in W&&n(2,d=W.class),"style"in W&&n(3,h=W.style),"static"in W&&n(4,p=W.static),"anchor"in W&&n(15,g=W.anchor),"fixed"in W&&n(5,m=W.fixed),"open"in W&&n(0,y=W.open),"managed"in W&&n(6,b=W.managed),"fullWidth"in W&&n(7,v=W.fullWidth),"quickOpen"in W&&n(16,_=W.quickOpen),"anchorElement"in W&&n(14,S=W.anchorElement),"anchorCorner"in W&&n(17,E=W.anchorCorner),"anchorMargin"in W&&n(18,w=W.anchorMargin),"maxHeight"in W&&n(19,O=W.maxHeight),"horizontallyCenteredOnViewport"in W&&n(20,D=W.horizontallyCenteredOnViewport),"$$scope"in W&&n(30,a=W.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&939557120&&x&&g&&!(!(n(27,o=x.parentElement)===null||o===void 0)&&o.classList.contains("mdc-menu-surface--anchor"))&&(n(28,l=x.parentElement)===null||l===void 0||l.classList.add("mdc-menu-surface--anchor"),n(14,S=n(29,u=x.parentElement)!==null&&u!==void 0?u:void 0)),e.$$.dirty[0]&513&&A&&A.isOpen()!==y&&(y?A.open():A.close()),e.$$.dirty[0]&66048&&A&&A.setQuickOpen(_),e.$$.dirty[0]&544&&A&&A.setFixedPosition(m),e.$$.dirty[0]&524800&&A&&O>0&&A.setMaxHeight(O),e.$$.dirty[0]&1049088&&A&&A.setIsHorizontallyCenteredOnViewport(D),e.$$.dirty[0]&131584&&A&&E!=null&&(typeof E=="string"?A.setAnchorCorner(k[E]):A.setAnchorCorner(E)),e.$$.dirty[0]&262656&&A&&A.setAnchorMargin(w)},[y,f,d,h,p,m,b,v,x,A,C,I,c,r,S,g,_,E,w,O,D,z,Y,H,oe,_e,re,o,l,u,a,s,pe,Oe,Re]}class Lpe extends qe{constructor(t){super(),We(this,t,Rpe,Dpe,He,{use:1,class:2,style:3,static:4,anchor:15,fixed:5,open:0,managed:6,fullWidth:7,quickOpen:16,anchorElement:14,anchorCorner:17,anchorMargin:18,maxHeight:19,horizontallyCenteredOnViewport:20,isOpen:21,setOpen:22,setAbsolutePosition:23,setIsHoisted:24,isFixed:25,getElement:26},null,[-1,-1])}get isOpen(){return this.$$.ctx[21]}get setOpen(){return this.$$.ctx[22]}get setAbsolutePosition(){return this.$$.ctx[23]}get setIsHoisted(){return this.$$.ctx[24]}get isFixed(){return this.$$.ctx[25]}get getElement(){return this.$$.ctx[26]}}function V$(e,{addClass:t=i=>e.classList.add(i),removeClass:n=i=>e.classList.remove(i)}={}){return t("mdc-menu-surface--anchor"),{destroy(){n("mdc-menu-surface--anchor")}}}function Npe(e){let t;const n=e[16].default,i=Ue(n,e,e[21],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&2097152)&&Ve(i,n,r,r[21],t?ze(n,r[21],s,null):$e(r[21]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Fpe(e){let t,n,i;const r=[{use:e[5]},{class:xe({[e[1]]:!0,"mdc-menu":!0})},e[9]];function s(o){e[18](o)}let a={$$slots:{default:[Npe]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)a=Q(a,r[o]);return e[0]!==void 0&&(a.open=e[0]),t=new Lpe({props:a}),e[17](t),be.push(()=>In(t,"open",s)),t.$on("SMUIMenuSurface:mount",e[7]),t.$on("SMUIList:mount",e[8]),t.$on("SMUIMenuSurface:opened",e[19]),t.$on("keydown",e[6]),t.$on("SMUIList:action",e[20]),{c(){ie(t.$$.fragment)},m(o,l){te(t,o,l),i=!0},p(o,[l]){const u=l&546?Le(r,[l&32&&{use:o[5]},l&2&&{class:xe({[o[1]]:!0,"mdc-menu":!0})},l&512&&kt(o[9])]):{};l&2097152&&(u.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,u.open=o[0],Cn(()=>n=!1)),t.$set(u)},i(o){i||(F(t.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),i=!1},d(o){e[17](null),ne(t,o)}}}function Ppe(e,t,n){let i;const r=["use","class","open","isOpen","setOpen","setDefaultFocusState","getSelectedIndex","getElement"];let s=Ce(t,r),{$$slots:a={},$$scope:o}=t;const{closest:l}=Y2,u=St(ft());let{use:c=[]}=t,{class:f=""}=t,{open:d=!1}=t,h,p,g,m;Zn(()=>(n(3,p=new xpe({addClassToElementAtIndex:(I,L)=>{m.addClassForElementIndex(I,L)},removeClassFromElementAtIndex:(I,L)=>{m.removeClassForElementIndex(I,L)},addAttributeToElementAtIndex:(I,L,k)=>{m.setAttributeForElementIndex(I,L,k)},removeAttributeFromElementAtIndex:(I,L)=>{m.removeAttributeForElementIndex(I,L)},getAttributeFromElementAtIndex:(I,L)=>m.getAttributeFromElementIndex(I,L),elementContainsClass:(I,L)=>I.classList.contains(L),closeSurface:I=>g.closeProgrammatic(I),getElementIndex:I=>m.getOrderedList().map(L=>L.element).indexOf(I),notifySelected:I=>yt(O(),"SMUIMenu:selected",{index:I.index,item:m.getOrderedList()[I.index].element},void 0,!0),getMenuItemCount:()=>m.items.length,focusItemAtIndex:I=>m.focusItemAtIndex(I),focusListRoot:()=>"focus"in m.element&&m.element.focus(),isSelectableItemAtIndex:I=>!!l(m.getOrderedList()[I].element,`.${wp.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:I=>{const L=m.getOrderedList(),k=l(L[I].element,`.${wp.MENU_SELECTION_GROUP}`),M=k?.querySelector(`.${wp.MENU_SELECTED_LIST_ITEM}`);return M?L.map(N=>N.element).indexOf(M):-1}})),yt(O(),"SMUIMenu:mount",p),p.init(),()=>{p.destroy()}));function y(I){p&&p.handleKeydown(I)}function b(I){g||(g=I.detail)}function v(I){m||n(4,m=I.detail)}function _(){return d}function S(I){n(0,d=I)}function E(I){p.setDefaultFocusState(I)}function w(){return p.getSelectedIndex()}function O(){return h.getElement()}function D(I){be[I?"unshift":"push"](()=>{h=I,n(2,h)})}function x(I){d=I,n(0,d)}const A=()=>p&&p.handleMenuSurfaceOpened(),C=I=>p&&p.handleItemAction(m.getOrderedList()[I.detail.index].element);return e.$$set=I=>{t=Q(Q({},t),vt(I)),n(9,s=Ce(t,r)),"use"in I&&n(10,c=I.use),"class"in I&&n(1,f=I.class),"open"in I&&n(0,d=I.open),"$$scope"in I&&n(21,o=I.$$scope)},e.$$.update=()=>{e.$$.dirty&1024&&n(5,i=[u,...c])},[d,f,h,p,m,i,y,b,v,s,c,_,S,E,w,O,a,D,x,A,C,o]}class $$ extends qe{constructor(t){super(),We(this,t,Ppe,Fpe,He,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getSelectedIndex:14,getElement:15})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getSelectedIndex(){return this.$$.ctx[14]}get getElement(){return this.$$.ctx[15]}}fr({class:"mdc-menu__selection-group-icon",component:Hie});function Bpe(e){let t;return{c(){t=ye(e[8])},m(n,i){U(n,t,i)},p(n,i){i&256&&et(t,n[8])},i:xt,o:xt,d(n){n&&j(t)}}}function jpe(e){let t;const n=e[13].default,i=Ue(n,e,e[12],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&4096)&&Ve(i,n,r,r[12],t?ze(n,r[12],s,null):$e(r[12]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Upe(e){let t,n,i,r,s,a,o,l,u;const c=[jpe,Bpe],f=[];function d(g,m){return g[8]==null?0:1}n=d(e),i=f[n]=c[n](e);let h=[{class:r=xe({[e[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":e[4],"mdc-select-helper-text--validation-msg-persistent":e[3],...e[6]})},{"aria-hidden":s=e[3]?void 0:"true"},{id:e[2]},e[7],e[10]],p={};for(let g=0;g<h.length;g+=1)p=Q(p,h[g]);return{c(){t=K("div"),i.c(),Se(t,p)},m(g,m){U(g,t,m),f[n].m(t,null),e[14](t),o=!0,l||(u=[Ee(a=wt.call(null,t,e[0])),Ee(e[9].call(null,t))],l=!0)},p(g,[m]){let y=n;n=d(g),n===y?f[n].p(g,m):(Be(),P(f[y],1,1,()=>{f[y]=null}),je(),i=f[n],i?i.p(g,m):(i=f[n]=c[n](g),i.c()),F(i,1),i.m(t,null)),Se(t,p=Le(h,[(!o||m&90&&r!==(r=xe({[g[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":g[4],"mdc-select-helper-text--validation-msg-persistent":g[3],...g[6]})))&&{class:r},(!o||m&8&&s!==(s=g[3]?void 0:"true"))&&{"aria-hidden":s},(!o||m&4)&&{id:g[2]},m&128&&g[7],m&1024&&g[10]])),a&&rt(a.update)&&m&1&&a.update.call(null,g[0])},i(g){o||(F(i),o=!0)},o(g){P(i),o=!1},d(g){g&&j(t),f[n].d(),e[14](null),l=!1,pt(u)}}}let zpe=0;function Vpe(e,t,n){const i=["use","class","id","persistent","validationMsg","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,{id:c="SMUI-select-helper-text-"+zpe++}=t,{persistent:f=!1}=t,{validationMsg:d=!1}=t,h,p,g={},m={},y;Zn(()=>(p=new kpe({addClass:v,removeClass:_,hasClass:b,getAttr:S,setAttr:E,removeAttr:w,setContent:x=>{n(8,y=x)}}),c.startsWith("SMUI-select-helper-text-")&&yt(O(),"SMUISelectHelperText:id",c),yt(O(),"SMUISelectHelperText:mount",p),p.init(),()=>{yt(O(),"SMUISelectHelperText:unmount",p),p.destroy()}));function b(x){return x in g?g[x]:O().classList.contains(x)}function v(x){g[x]||n(6,g[x]=!0,g)}function _(x){(!(x in g)||g[x])&&n(6,g[x]=!1,g)}function S(x){var A;return x in m?(A=m[x])!==null&&A!==void 0?A:null:O().getAttribute(x)}function E(x,A){m[x]!==A&&n(7,m[x]=A,m)}function w(x){(!(x in m)||m[x]!=null)&&n(7,m[x]=void 0,m)}function O(){return h}function D(x){be[x?"unshift":"push"](()=>{h=x,n(5,h)})}return e.$$set=x=>{t=Q(Q({},t),vt(x)),n(10,r=Ce(t,i)),"use"in x&&n(0,l=x.use),"class"in x&&n(1,u=x.class),"id"in x&&n(2,c=x.id),"persistent"in x&&n(3,f=x.persistent),"validationMsg"in x&&n(4,d=x.validationMsg),"$$scope"in x&&n(12,a=x.$$scope)},[l,u,c,f,d,h,g,m,y,o,r,O,a,s,D]}class $pe extends qe{constructor(t){super(),We(this,t,Vpe,Upe,He,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const Hpe=e=>({}),IF=e=>({}),Wpe=e=>({}),xF=e=>({}),qpe=e=>({}),TF=e=>({}),Gpe=e=>({}),kF=e=>({});function MF(e){let t,n=[{type:"hidden"},{required:e[10]},{disabled:e[6]},{value:e[0]},mt(e[53],"input$")],i={};for(let r=0;r<n.length;r+=1)i=Q(i,n[r]);return{c(){t=K("input"),Se(t,i)},m(r,s){U(r,t,s),t.autofocus&&t.focus()},p(r,s){Se(t,i=Le(n,[{type:"hidden"},s[0]&1024&&{required:r[10]},s[0]&64&&{disabled:r[6]},s[0]&1&&{value:r[0]},s[1]&4194304&&mt(r[53],"input$")]))},d(r){r&&j(t)}}}function DF(e){let t;return{c(){t=K("span"),J(t,"class","mdc-select__ripple")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function RF(e){let t,n;const i=[{id:e[11]+"-smui-label"},{floatAbove:e[43]!==""},{required:e[10]},mt(e[53],"label$")];let r={$$slots:{default:[Ype]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new Ew({props:r}),e[66](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&3072|a[1]&4198400?Le(i,[a[0]&2048&&{id:s[11]+"-smui-label"},a[1]&4096&&{floatAbove:s[43]!==""},a[0]&1024&&{required:s[10]},a[1]&4194304&&kt(mt(s[53],"label$"))]):{};a[0]&512|a[2]&134217728&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[66](null),ne(t,s)}}}function Ype(e){let t=(e[9]==null?"":e[9])+"",n,i;const r=e[63].label,s=Ue(r,e,e[89],kF);return{c(){n=ye(t),s&&s.c()},m(a,o){U(a,n,o),s&&s.m(a,o),i=!0},p(a,o){(!i||o[0]&512)&&t!==(t=(a[9]==null?"":a[9])+"")&&et(n,t),s&&s.p&&(!i||o[2]&134217728)&&Ve(s,r,a,a[89],i?ze(r,a[89],o,Gpe):$e(a[89]),kF)},i(a){i||(F(s,a),i=!0)},o(a){P(s,a),i=!1},d(a){a&&j(n),s&&s.d(a)}}}function LF(e){let t,n;const i=[{noLabel:e[8]||e[9]==null&&!e[52].label},mt(e[53],"outline$")];let r={$$slots:{default:[Kpe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new N$({props:r}),e[68](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&768|a[1]&6291456?Le(i,[a[0]&768|a[1]&2097152&&{noLabel:s[8]||s[9]==null&&!s[52].label},a[1]&4194304&&kt(mt(s[53],"outline$"))]):{};a[0]&3840|a[1]&6296064|a[2]&134217728&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[68](null),ne(t,s)}}}function NF(e){let t,n;const i=[{id:e[11]+"-smui-label"},{floatAbove:e[43]!==""},{required:e[10]},mt(e[53],"label$")];let r={$$slots:{default:[Xpe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new Ew({props:r}),e[67](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&3072|a[1]&4198400?Le(i,[a[0]&2048&&{id:s[11]+"-smui-label"},a[1]&4096&&{floatAbove:s[43]!==""},a[0]&1024&&{required:s[10]},a[1]&4194304&&kt(mt(s[53],"label$"))]):{};a[0]&512|a[2]&134217728&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[67](null),ne(t,s)}}}function Xpe(e){let t=(e[9]==null?"":e[9])+"",n,i;const r=e[63].label,s=Ue(r,e,e[89],TF);return{c(){n=ye(t),s&&s.c()},m(a,o){U(a,n,o),s&&s.m(a,o),i=!0},p(a,o){(!i||o[0]&512)&&t!==(t=(a[9]==null?"":a[9])+"")&&et(n,t),s&&s.p&&(!i||o[2]&134217728)&&Ve(s,r,a,a[89],i?ze(r,a[89],o,qpe):$e(a[89]),TF)},i(a){i||(F(s,a),i=!0)},o(a){P(s,a),i=!1},d(a){a&&j(n),s&&s.d(a)}}}function Kpe(e){let t,n,i=!e[8]&&(e[9]!=null||e[52].label)&&NF(e);return{c(){i&&i.c(),t=_t()},m(r,s){i&&i.m(r,s),U(r,t,s),n=!0},p(r,s){!r[8]&&(r[9]!=null||r[52].label)?i?(i.p(r,s),s[0]&768|s[1]&2097152&&F(i,1)):(i=NF(r),i.c(),F(i,1),i.m(t.parentNode,t)):i&&(Be(),P(i,1,1,()=>{i=null}),je())},i(r){n||(F(i),n=!0)},o(r){P(i),n=!1},d(r){i&&i.d(r),r&&j(t)}}}function FF(e){let t,n;const i=[mt(e[53],"ripple$")];let r={};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new L$({props:r}),e[70](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[1]&4194304?Le(i,[kt(mt(s[53],"ripple$"))]):{};t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[70](null),ne(t,s)}}}function Jpe(e){let t;const n=e[63].default,i=Ue(n,e,e[89],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&134217728)&&Ve(i,n,r,r[89],t?ze(n,r[89],s,null):$e(r[89]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function Qpe(e){let t,n,i;const r=[{role:"listbox"},{wrapFocus:e[36]},mt(e[53],"list$")];function s(o){e[76](o)}let a={$$slots:{default:[Jpe]},$$scope:{ctx:e}};for(let o=0;o<r.length;o+=1)a=Q(a,r[o]);return e[24]!==void 0&&(a.selectedIndex=e[24]),t=new iT({props:a}),be.push(()=>In(t,"selectedIndex",s)),t.$on("SMUIList:mount",e[77]),{c(){ie(t.$$.fragment)},m(o,l){te(t,o,l),i=!0},p(o,l){const u=l[1]&4194336?Le(r,[r[0],l[1]&32&&{wrapFocus:o[36]},l[1]&4194304&&kt(mt(o[53],"list$"))]):{};l[2]&134217728&&(u.$$scope={dirty:l,ctx:o}),!n&&l[0]&16777216&&(n=!0,u.selectedIndex=o[24],Cn(()=>n=!1)),t.$set(u)},i(o){i||(F(t.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),i=!1},d(o){ne(t,o)}}}function PF(e){let t,n;const i=[mt(e[53],"helperText$")];let r={$$slots:{default:[Zpe]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new $pe({props:r}),t.$on("SMUISelectHelperText:id",e[86]),t.$on("SMUISelectHelperText:mount",e[87]),t.$on("SMUISelectHelperText:unmount",e[88]),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[1]&4194304?Le(i,[kt(mt(s[53],"helperText$"))]):{};a[2]&134217728&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){ne(t,s)}}}function Zpe(e){let t;const n=e[63].helperText,i=Ue(n,e,e[89],IF);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[2]&134217728)&&Ve(i,n,r,r[89],t?ze(n,r[89],s,Hpe):$e(r[89]),IF)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function ege(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g,m,y,b,v,_,S,E,w,O,D,x,A,C,I,L,k,M,N,R,T,z,Y,H,oe,_e,re=e[12]&&MF(e),pe=e[7]==="filled"&&DF(),Oe=e[7]!=="outlined"&&!e[8]&&(e[9]!=null||e[52].label)&&RF(e),Re=e[7]==="outlined"&&LF(e);const W=e[63].leadingIcon,q=Ue(W,e,e[89],xF);let ve=[{id:f=e[11]+"-smui-selected-text"},{class:d=xe({[e[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":h=e[11]+"-smui-label"},mt(e[53],"selectedText$")],ce={};for(let le=0;le<ve.length;le+=1)ce=Q(ce,ve[le]);let fe=[{class:g=xe({[e[17]]:!0,"mdc-select__selected-text-container":!0})},mt(e[53],"selectedTextContainer$")],we={};for(let le=0;le<fe.length;le+=1)we=Q(we,fe[le]);let Xe=[{class:E=xe({[e[21]]:!0,"mdc-select__dropdown-icon":!0})},mt(e[53],"dropdownIcon$")],tt={};for(let le=0;le<Xe.length;le+=1)tt=Q(tt,Xe[le]);let ct=e[7]!=="outlined"&&e[5]&&FF(e),yn=[{class:D=xe({[e[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":x=e[10]?"true":void 0},{"aria-disabled":A=e[6]?"true":void 0},{"aria-controls":e[31]},{"aria-describedby":e[31]},e[29],mt(e[53],"anchor$")],Nt={};for(let le=0;le<yn.length;le+=1)Nt=Q(Nt,yn[le]);const se=[{class:xe({[e[22]]:!0,"mdc-select__menu":!0,...e[33]})},{fullWidth:!0},{anchor:!1},{anchorElement:e[34]},{anchorCorner:e[35]},mt(e[53],"menu$")];function Ne(le){e[78](le)}let V={$$slots:{default:[Qpe]},$$scope:{ctx:e}};for(let le=0;le<se.length;le+=1)V=Q(V,se[le]);e[32]!==void 0&&(V.open=e[32]),L=new $$({props:V}),be.push(()=>In(L,"open",Ne)),L.$on("SMUIMenu:selected",e[79]),L.$on("SMUIMenuSurface:closing",e[80]),L.$on("SMUIMenuSurface:closed",e[81]),L.$on("SMUIMenuSurface:opened",e[82]);let X=[{class:M=xe({[e[3]]:!0,"mdc-select":!0,"mdc-select--required":e[10],"mdc-select--disabled":e[6],"mdc-select--filled":e[7]==="filled","mdc-select--outlined":e[7]==="outlined","smui-select--standard":e[7]==="standard","mdc-select--with-leading-icon":e[45](e[13])?e[52].leadingIcon:e[13],"mdc-select--no-label":e[8]||e[9]==null&&!e[52].label,"mdc-select--invalid":e[1],"mdc-select--activated":e[32],"mdc-data-table__pagination-rows-per-page-select":e[46]==="data-table:pagination",...e[26]})},{style:N=Object.entries(e[27]).map(BF).concat([e[4]]).join(" ")},ys(e[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],Ze={};for(let le=0;le<X.length;le+=1)Ze=Q(Ze,X[le]);let Ot=e[52].helperText&&PF(e);return{c(){t=K("div"),re&&re.c(),n=ae(),i=K("div"),pe&&pe.c(),r=ae(),Oe&&Oe.c(),s=ae(),Re&&Re.c(),a=ae(),q&&q.c(),o=ae(),l=K("span"),u=K("span"),c=ye(e[43]),y=ae(),b=K("span"),v=$r("svg"),_=$r("polygon"),S=$r("polygon"),O=ae(),ct&&ct.c(),I=ae(),ie(L.$$.fragment),z=ae(),Ot&&Ot.c(),Y=_t(),Se(u,ce),Se(l,we),J(_,"class","mdc-select__dropdown-icon-inactive"),J(_,"stroke","none"),J(_,"fill-rule","evenodd"),J(_,"points","7 10 12 15 17 10"),J(S,"class","mdc-select__dropdown-icon-active"),J(S,"stroke","none"),J(S,"fill-rule","evenodd"),J(S,"points","7 15 12 10 17 15"),J(v,"class","mdc-select__dropdown-icon-graphic"),J(v,"viewBox","7 10 10 5"),J(v,"focusable","false"),Se(b,tt),Se(i,Nt),Se(t,Ze)},m(le,Ge){U(le,t,Ge),re&&re.m(t,null),G(t,n),G(t,i),pe&&pe.m(i,null),G(i,r),Oe&&Oe.m(i,null),G(i,s),Re&&Re.m(i,null),G(i,a),q&&q.m(i,null),G(i,o),G(i,l),G(l,u),G(u,c),e[69](u),G(i,y),G(i,b),G(b,v),G(v,_),G(v,S),G(i,O),ct&&ct.m(i,null),e[71](i),G(t,I),te(L,t,null),e[83](t),U(le,z,Ge),Ot&&Ot.m(le,Ge),U(le,Y,Ge),H=!0,oe||(_e=[Ee(p=wt.call(null,u,e[18])),Ee(m=wt.call(null,l,e[16])),Ee(w=wt.call(null,b,e[20])),Ee(C=wt.call(null,i,e[14])),Ke(i,"focus",e[72]),Ke(i,"blur",e[73]),Ke(i,"click",e[74]),Ke(i,"keydown",e[75]),Ke(i,"focus",e[64]),Ke(i,"blur",e[65]),Ee(R=uo.call(null,t,{ripple:e[7]==="filled",unbounded:!1,addClass:e[49],removeClass:e[50],addStyle:e[51]})),Ee(V$.call(null,t,{addClass:e[49],removeClass:e[50]})),Ee(T=wt.call(null,t,e[2])),Ee(e[44].call(null,t)),Ke(t,"SMUISelectLeadingIcon:mount",e[84]),Ke(t,"SMUISelectLeadingIcon:unmount",e[85])],oe=!0)},p(le,Ge){le[12]?re?re.p(le,Ge):(re=MF(le),re.c(),re.m(t,n)):re&&(re.d(1),re=null),le[7]==="filled"?pe||(pe=DF(),pe.c(),pe.m(i,r)):pe&&(pe.d(1),pe=null),le[7]!=="outlined"&&!le[8]&&(le[9]!=null||le[52].label)?Oe?(Oe.p(le,Ge),Ge[0]&896|Ge[1]&2097152&&F(Oe,1)):(Oe=RF(le),Oe.c(),F(Oe,1),Oe.m(i,s)):Oe&&(Be(),P(Oe,1,1,()=>{Oe=null}),je()),le[7]==="outlined"?Re?(Re.p(le,Ge),Ge[0]&128&&F(Re,1)):(Re=LF(le),Re.c(),F(Re,1),Re.m(i,a)):Re&&(Be(),P(Re,1,1,()=>{Re=null}),je()),q&&q.p&&(!H||Ge[2]&134217728)&&Ve(q,W,le,le[89],H?ze(W,le[89],Ge,Wpe):$e(le[89]),xF),(!H||Ge[1]&4096)&&et(c,le[43]),Se(u,ce=Le(ve,[(!H||Ge[0]&2048&&f!==(f=le[11]+"-smui-selected-text"))&&{id:f},(!H||Ge[0]&524288&&d!==(d=xe({[le[19]]:!0,"mdc-select__selected-text":!0})))&&{class:d},{role:"button"},{"aria-haspopup":"listbox"},(!H||Ge[0]&2048&&h!==(h=le[11]+"-smui-label"))&&{"aria-labelledby":h},Ge[1]&4194304&&mt(le[53],"selectedText$")])),p&&rt(p.update)&&Ge[0]&262144&&p.update.call(null,le[18]),Se(l,we=Le(fe,[(!H||Ge[0]&131072&&g!==(g=xe({[le[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:g},Ge[1]&4194304&&mt(le[53],"selectedTextContainer$")])),m&&rt(m.update)&&Ge[0]&65536&&m.update.call(null,le[16]),Se(b,tt=Le(Xe,[(!H||Ge[0]&2097152&&E!==(E=xe({[le[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:E},Ge[1]&4194304&&mt(le[53],"dropdownIcon$")])),w&&rt(w.update)&&Ge[0]&1048576&&w.update.call(null,le[20]),le[7]!=="outlined"&&le[5]?ct?(ct.p(le,Ge),Ge[0]&160&&F(ct,1)):(ct=FF(le),ct.c(),F(ct,1),ct.m(i,null)):ct&&(Be(),P(ct,1,1,()=>{ct=null}),je()),Se(i,Nt=Le(yn,[(!H||Ge[0]&32768&&D!==(D=xe({[le[15]]:!0,"mdc-select__anchor":!0})))&&{class:D},(!H||Ge[0]&1024&&x!==(x=le[10]?"true":void 0))&&{"aria-required":x},(!H||Ge[0]&64&&A!==(A=le[6]?"true":void 0))&&{"aria-disabled":A},(!H||Ge[1]&1)&&{"aria-controls":le[31]},(!H||Ge[1]&1)&&{"aria-describedby":le[31]},Ge[0]&536870912&&le[29],Ge[1]&4194304&&mt(le[53],"anchor$")])),C&&rt(C.update)&&Ge[0]&16384&&C.update.call(null,le[14]);const me=Ge[0]&4194304|Ge[1]&4194332?Le(se,[Ge[0]&4194304|Ge[1]&4&&{class:xe({[le[22]]:!0,"mdc-select__menu":!0,...le[33]})},se[1],se[2],Ge[1]&8&&{anchorElement:le[34]},Ge[1]&16&&{anchorCorner:le[35]},Ge[1]&4194304&&kt(mt(le[53],"menu$"))]):{};Ge[0]&16777216|Ge[1]&4194400|Ge[2]&134217728&&(me.$$scope={dirty:Ge,ctx:le}),!k&&Ge[1]&2&&(k=!0,me.open=le[32],Cn(()=>k=!1)),L.$set(me),Se(t,Ze=Le(X,[(!H||Ge[0]&67119050|Ge[1]&2097154&&M!==(M=xe({[le[3]]:!0,"mdc-select":!0,"mdc-select--required":le[10],"mdc-select--disabled":le[6],"mdc-select--filled":le[7]==="filled","mdc-select--outlined":le[7]==="outlined","smui-select--standard":le[7]==="standard","mdc-select--with-leading-icon":le[45](le[13])?le[52].leadingIcon:le[13],"mdc-select--no-label":le[8]||le[9]==null&&!le[52].label,"mdc-select--invalid":le[1],"mdc-select--activated":le[32],"mdc-data-table__pagination-rows-per-page-select":le[46]==="data-table:pagination",...le[26]})))&&{class:M},(!H||Ge[0]&134217744&&N!==(N=Object.entries(le[27]).map(BF).concat([le[4]]).join(" ")))&&{style:N},Ge[1]&4194304&&ys(le[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),R&&rt(R.update)&&Ge[0]&128&&R.update.call(null,{ripple:le[7]==="filled",unbounded:!1,addClass:le[49],removeClass:le[50],addStyle:le[51]}),T&&rt(T.update)&&Ge[0]&4&&T.update.call(null,le[2]),le[52].helperText?Ot?(Ot.p(le,Ge),Ge[1]&2097152&&F(Ot,1)):(Ot=PF(le),Ot.c(),F(Ot,1),Ot.m(Y.parentNode,Y)):Ot&&(Be(),P(Ot,1,1,()=>{Ot=null}),je())},i(le){H||(F(Oe),F(Re),F(q,le),F(ct),F(L.$$.fragment,le),F(Ot),H=!0)},o(le){P(Oe),P(Re),P(q,le),P(ct),P(L.$$.fragment,le),P(Ot),H=!1},d(le){le&&j(t),re&&re.d(),pe&&pe.d(),Oe&&Oe.d(),Re&&Re.d(),q&&q.d(le),e[69](null),ct&&ct.d(),e[71](null),ne(L),e[83](null),le&&j(z),Ot&&Ot.d(le),le&&j(Y),oe=!1,pt(_e)}}}let tge=0;function nge(e){const t=e.currentTarget.getBoundingClientRect();return(ige(e)?e.touches[0].clientX:e.clientX)-t.left}function ige(e){return"touches"in e}const BF=([e,t])=>`${e}: ${t};`;function rge(e,t,n){const i=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","getUseDefaultValidation","setUseDefaultValidation","focus","layout","getElement"];let r=Ce(t,i),s,a,{$$slots:o={},$$scope:l}=t;const u=q2(o),c=St(ft());let f=()=>{};function d(Z){return Z===f}let{use:h=[]}=t,{class:p=""}=t,{style:g=""}=t,{ripple:m=!0}=t,{disabled:y=!1}=t,{variant:b="standard"}=t,{noLabel:v=!1}=t,{label:_=void 0}=t,{value:S=""}=t,{key:E=Z=>Z}=t,{dirty:w=!1}=t,{invalid:O=f}=t,{updateInvalid:D=d(O)}=t;const x=d(O);d(O)&&(O=!1);let{required:A=!1}=t,{inputId:C="SMUI-select-"+tge++}=t,{hiddenInput:I=!1}=t,{withLeadingIcon:L=f}=t,{anchor$use:k=[]}=t,{anchor$class:M=""}=t,{selectedTextContainer$use:N=[]}=t,{selectedTextContainer$class:R=""}=t,{selectedText$use:T=[]}=t,{selectedText$class:z=""}=t,{dropdownIcon$use:Y=[]}=t,{dropdownIcon$class:H=""}=t,{menu$class:oe=""}=t,_e,re,pe={},Oe={},Re,W={},q,ve=-1,ce,fe=Zt("SMUI:addLayoutListener"),we,Xe=!1,tt={},ct,yn,Nt=!1,se,Ne=Zt("SMUI:select:context"),V,X,Ze,Ot,le;Tt("SMUI:list:role",""),Tt("SMUI:list:nav",!1);const Ge=oi("");Qe(e,Ge,Z=>n(43,s=Z)),Tt("SMUI:select:selectedText",Ge);const me=oi(S);Qe(e,me,Z=>n(91,a=Z)),Tt("SMUI:select:value",me);let nt=ve;fe&&(we=fe(Ny)),Zn(()=>(n(23,re=new Tpe({setSelectedText:Z=>{yu(Ge,s=Z,s)},isSelectAnchorFocused:()=>document.activeElement===Re,getSelectAnchorAttr:IE,setSelectAnchorAttr:xE,removeSelectAnchorAttr:TE,addMenuClass:OE,removeMenuClass:CE,openMenu:()=>{n(32,Xe=!0)},closeMenu:()=>{n(32,Xe=!1)},getAnchorElement:()=>Re,setMenuAnchorElement:Z=>{n(34,ct=Z)},setMenuAnchorCorner:Z=>{n(35,yn=Z)},setMenuWrapFocus:Z=>{n(36,Nt=Z)},getSelectedIndex:()=>ve,setSelectedIndex:Z=>{n(62,nt=Z),n(24,ve=Z),n(0,S=Mh()[ve])},focusMenuItemAtIndex:Z=>{se.focusItemAtIndex(Z)},getMenuItemCount:()=>se.items.length,getMenuItemValues:()=>Mh().map(E),getMenuItemTextAtIndex:Z=>se.getPrimaryTextAtIndex(Z),isTypeaheadInProgress:()=>se.typeaheadInProgress,typeaheadMatchItem:(Z,Ns)=>se.typeaheadMatchItem(Z,Ns),addClass:Ln,removeClass:Io,hasClass:Je,setRippleCenter:Z=>Ot&&Ot.setRippleCenter(Z),activateBottomLine:()=>Ot&&Ot.activate(),deactivateBottomLine:()=>Ot&&Ot.deactivate(),notifyChange:Z=>{n(54,w=!0),D&&n(1,O=!re.isValid()),yt(Dh(),"SMUISelect:change",{value:S,index:ve},void 0,!0)},hasOutline:()=>!!le,notchOutline:Z=>le&&le.notch(Z),closeOutline:()=>le&&le.closeNotch(),hasLabel:()=>!!Ze,floatLabel:Z=>Ze&&Ze.float(Z),getLabelWidth:()=>Ze?Ze.getWidth():0,setLabelRequired:Z=>Ze&&Ze.setRequired(Z)},{get helperText(){return X},get leadingIcon(){return V}})),n(24,ve=Mh().indexOf(S)),re.init(),Ly(x),()=>{re.destroy()})),na(()=>{we&&we()});function Je(Z){return Z in pe?pe[Z]:Dh().classList.contains(Z)}function Ln(Z){pe[Z]||n(26,pe[Z]=!0,pe)}function Io(Z){(!(Z in pe)||pe[Z])&&n(26,pe[Z]=!1,pe)}function hm(Z,Ns){Oe[Z]!=Ns&&(Ns===""||Ns==null?(delete Oe[Z],n(27,Oe)):n(27,Oe[Z]=Ns,Oe))}function OE(Z){tt[Z]||n(33,tt[Z]=!0,tt)}function CE(Z){(!(Z in tt)||tt[Z])&&n(33,tt[Z]=!1,tt)}function IE(Z){var Ns;return Z in W?(Ns=W[Z])!==null&&Ns!==void 0?Ns:null:Dh().getAttribute(Z)}function xE(Z,Ns){W[Z]!==Ns&&n(29,W[Z]=Ns,W)}function TE(Z){(!(Z in W)||W[Z]!=null)&&n(29,W[Z]=void 0,W)}function Mh(){return se.getOrderedList().map(Z=>Z.getValue())}function kE(){return re.getUseDefaultValidation()}function Ly(Z){re.setUseDefaultValidation(Z)}function ME(){Re.focus()}function Ny(){re.layout()}function Dh(){return _e}function DE(Z){lo.call(this,e,Z)}function RE(Z){lo.call(this,e,Z)}function LE(Z){be[Z?"unshift":"push"](()=>{Ze=Z,n(40,Ze)})}function NE(Z){be[Z?"unshift":"push"](()=>{Ze=Z,n(40,Ze)})}function FE(Z){be[Z?"unshift":"push"](()=>{le=Z,n(42,le)})}function PE(Z){be[Z?"unshift":"push"](()=>{q=Z,n(30,q)})}function BE(Z){be[Z?"unshift":"push"](()=>{Ot=Z,n(41,Ot)})}function jE(Z){be[Z?"unshift":"push"](()=>{Re=Z,n(28,Re)})}const UE=()=>re&&re.handleFocus(),zE=()=>re&&re.handleBlur(),VE=Z=>{Re.focus(),re&&re.handleClick(nge(Z))},$E=Z=>re&&re.handleKeydown(Z);function HE(Z){ve=Z,n(24,ve)}const WE=Z=>n(37,se=Z.detail);function qE(Z){Xe=Z,n(32,Xe)}const GE=Z=>re&&re.handleMenuItemAction(Z.detail.index),YE=()=>re&&re.handleMenuClosing(),XE=()=>re&&re.handleMenuClosed(),KE=()=>re&&re.handleMenuOpened();function JE(Z){be[Z?"unshift":"push"](()=>{_e=Z,n(25,_e)})}const ee=Z=>n(38,V=Z.detail),ui=()=>n(38,V=void 0),Fy=Z=>n(31,ce=Z.detail),QE=Z=>n(39,X=Z.detail),pm=()=>{n(31,ce=void 0),n(39,X=void 0)};return e.$$set=Z=>{t=Q(Q({},t),vt(Z)),n(53,r=Ce(t,i)),"use"in Z&&n(2,h=Z.use),"class"in Z&&n(3,p=Z.class),"style"in Z&&n(4,g=Z.style),"ripple"in Z&&n(5,m=Z.ripple),"disabled"in Z&&n(6,y=Z.disabled),"variant"in Z&&n(7,b=Z.variant),"noLabel"in Z&&n(8,v=Z.noLabel),"label"in Z&&n(9,_=Z.label),"value"in Z&&n(0,S=Z.value),"key"in Z&&n(55,E=Z.key),"dirty"in Z&&n(54,w=Z.dirty),"invalid"in Z&&n(1,O=Z.invalid),"updateInvalid"in Z&&n(56,D=Z.updateInvalid),"required"in Z&&n(10,A=Z.required),"inputId"in Z&&n(11,C=Z.inputId),"hiddenInput"in Z&&n(12,I=Z.hiddenInput),"withLeadingIcon"in Z&&n(13,L=Z.withLeadingIcon),"anchor$use"in Z&&n(14,k=Z.anchor$use),"anchor$class"in Z&&n(15,M=Z.anchor$class),"selectedTextContainer$use"in Z&&n(16,N=Z.selectedTextContainer$use),"selectedTextContainer$class"in Z&&n(17,R=Z.selectedTextContainer$class),"selectedText$use"in Z&&n(18,T=Z.selectedText$use),"selectedText$class"in Z&&n(19,z=Z.selectedText$class),"dropdownIcon$use"in Z&&n(20,Y=Z.dropdownIcon$use),"dropdownIcon$class"in Z&&n(21,H=Z.dropdownIcon$class),"menu$class"in Z&&n(22,oe=Z.menu$class),"$$scope"in Z&&n(89,l=Z.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&25165825|e.$$.dirty[2]&1&&nt!==ve)if(n(62,nt=ve),re)re.setSelectedIndex(ve,!1,!0);else{const Z=Mh();S!==Z[ve]&&n(0,S=Z[ve])}e.$$.dirty[0]&1&&yu(me,a=S,a),e.$$.dirty[0]&8388609|e.$$.dirty[1]&16777216&&re&&re.getValue()!==E(S)&&re.setValue(E(S)),e.$$.dirty[0]&8388672&&re&&re.getDisabled()!==y&&re.setDisabled(y),e.$$.dirty[0]&8388610|e.$$.dirty[1]&41943040&&re&&w&&re.isValid()!==!O&&(D?n(1,O=!re.isValid()):re.setValid(!O)),e.$$.dirty[0]&8389632&&re&&re.getRequired()!==A&&re.setRequired(A)},[S,O,h,p,g,m,y,b,v,_,A,C,I,L,k,M,N,R,T,z,Y,H,oe,re,ve,_e,pe,Oe,Re,W,q,ce,Xe,tt,ct,yn,Nt,se,V,X,Ze,Ot,le,s,c,d,Ne,Ge,me,Ln,Io,hm,u,r,w,E,D,kE,Ly,ME,Ny,Dh,nt,o,DE,RE,LE,NE,FE,PE,BE,jE,UE,zE,VE,$E,HE,WE,qE,GE,YE,XE,KE,JE,ee,ui,Fy,QE,pm,l]}class Uc extends qe{constructor(t){super(),We(this,t,rge,ege,He,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,getUseDefaultValidation:57,setUseDefaultValidation:58,focus:59,layout:60,getElement:61},null,[-1,-1,-1,-1])}get getUseDefaultValidation(){return this.$$.ctx[57]}get setUseDefaultValidation(){return this.$$.ctx[58]}get focus(){return this.$$.ctx[59]}get layout(){return this.$$.ctx[60]}get getElement(){return this.$$.ctx[61]}}function sge(e){let t;const n=e[11].default,i=Ue(n,e,e[13],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&8192)&&Ve(i,n,r,r[13],t?ze(n,r[13],s,null):$e(r[13]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function age(e){let t,n;const i=[{use:e[3]},{"data-value":e[0]},{value:e[0]},{selected:e[2]},e[6]];let r={$$slots:{default:[sge]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new yc({props:r}),e[12](t),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,[a]){const o=a&77?Le(i,[a&8&&{use:s[3]},a&1&&{"data-value":s[0]},a&1&&{value:s[0]},a&4&&{selected:s[2]},a&64&&kt(s[6])]):{};a&8192&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){e[12](null),ne(t,s)}}}function oge(e,t,n){let i,r;const s=["use","class","value","getElement"];let a=Ce(t,s),o,l,{$$slots:u={},$$scope:c}=t;const f=St(ft());let{use:d=[]}=t;const h="";let{value:p=""}=t,g;const m=Zt("SMUI:select:selectedText");Qe(e,m,S=>n(14,o=S));const y=Zt("SMUI:select:value");Qe(e,y,S=>n(10,l=S)),Tt("SMUI:list:item:role","option"),Zn(b),na(b);function b(){r&&g&&yu(m,o=g.getPrimaryText(),o)}function v(){return g.getElement()}function _(S){be[S?"unshift":"push"](()=>{g=S,n(1,g)})}return e.$$set=S=>{t=Q(Q({},t),vt(S)),n(6,a=Ce(t,s)),"use"in S&&n(7,d=S.use),"value"in S&&n(0,p=S.value),"$$scope"in S&&n(13,c=S.$$scope)},e.$$.update=()=>{e.$$.dirty&128&&n(3,i=[f,...d]),e.$$.dirty&1025&&n(2,r=p!=null&&p!==""&&l===p)},[p,g,r,i,m,y,a,d,h,v,l,u,_,c]}class lge extends qe{constructor(t){super(),We(this,t,oge,age,He,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const Za=lge;function jF(e,t,n){const i=e.slice();return i[55]=t[n],i[57]=n,i}const uge=e=>({}),UF=e=>({}),cge=e=>({match:e[0]&32768}),zF=e=>({match:e[55]}),fge=e=>({}),VF=e=>({}),dge=e=>({}),$F=e=>({});function hge(e){let t,n,i;const r=[{label:e[6]},{disabled:e[7]},mt(e[27],"textfield$")];function s(o){e[43](o)}let a={};for(let o=0;o<r.length;o+=1)a=Q(a,r[o]);return e[1]!==void 0&&(a.value=e[1]),t=new Rk({props:a}),be.push(()=>In(t,"value",s)),{c(){ie(t.$$.fragment)},m(o,l){te(t,o,l),i=!0},p(o,l){const u=l[0]&134217920?Le(r,[l[0]&64&&{label:o[6]},l[0]&128&&{disabled:o[7]},l[0]&134217728&&kt(mt(o[27],"textfield$"))]):{};!n&&l[0]&2&&(n=!0,u.value=o[1],Cn(()=>n=!1)),t.$set(u)},i(o){i||(F(t.$$.fragment,o),i=!0)},o(o){P(t.$$.fragment,o),i=!1},d(o){ne(t,o)}}}function pge(e){let t,n,i=e[15],r=[];for(let o=0;o<i.length;o+=1)r[o]=WF(jF(e,i,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});let a=null;return i.length||(a=HF(e)),{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=_t(),a&&a.c()},m(o,l){for(let u=0;u<r.length;u+=1)r[u].m(o,l);U(o,t,l),a&&a.m(o,l),n=!0},p(o,l){if(l[0]&25396017|l[1]&2097152){i=o[15];let u;for(u=0;u<i.length;u+=1){const c=jF(o,i,u);r[u]?(r[u].p(c,l),F(r[u],1)):(r[u]=WF(c),r[u].c(),F(r[u],1),r[u].m(t.parentNode,t))}for(Be(),u=i.length;u<r.length;u+=1)s(u);je(),!i.length&&a?a.p(o,l):i.length?a&&(Be(),P(a,1,1,()=>{a=null}),je()):(a=HF(o),a.c(),F(a,1),a.m(t.parentNode,t))}},i(o){if(!n){for(let l=0;l<i.length;l+=1)F(r[l]);n=!0}},o(o){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)P(r[l]);n=!1},d(o){Rn(r,o),o&&j(t),a&&a.d(o)}}}function gge(e){let t,n;return t=new yc({props:{disabled:!0,$$slots:{default:[Oge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function mge(e){let t,n;return t=new yc({props:{disabled:!0,$$slots:{default:[xge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function HF(e){let t,n;return t=new yc({props:{disabled:e[9],$$slots:{default:[vge]},$$scope:{ctx:e}}}),t.$on("SMUI:action",e[49]),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[0]&512&&(s.disabled=i[9]),r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function yge(e){let t;return{c(){t=ye("No matches found.")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function bge(e){let t,n;return t=new K2({props:{$$slots:{default:[yge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function vge(e){let t,n;const i=e[42]["no-matches"],r=Ue(i,e,e[52],UF),s=r||bge(e);return{c(){s&&s.c(),t=ae()},m(a,o){s&&s.m(a,o),U(a,t,o),n=!0},p(a,o){r&&r.p&&(!n||o[1]&2097152)&&Ve(r,i,a,a[52],n?ze(i,a[52],o,uge):$e(a[52]),UF)},i(a){n||(F(s,a),n=!0)},o(a){P(s,a),n=!1},d(a){s&&s.d(a),a&&j(t)}}}function _ge(e){let t=e[5](e[55])+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r[0]&32800&&t!==(t=i[5](i[55])+"")&&et(n,t)},d(i){i&&j(n)}}}function wge(e){let t,n;return t=new K2({props:{$$slots:{default:[_ge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[0]&32800|r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Sge(e){let t,n;const i=e[42].match,r=Ue(i,e,e[52],zF),s=r||wge(e);return{c(){s&&s.c(),t=ae()},m(a,o){s&&s.m(a,o),U(a,t,o),n=!0},p(a,o){r?r.p&&(!n||o[0]&32768|o[1]&2097152)&&Ve(r,i,a,a[52],n?ze(i,a[52],o,cge):$e(a[52]),zF):s&&s.p&&(!n||o[0]&32800)&&s.p(a,n?o:[-1,-1])},i(a){n||(F(s,a),n=!0)},o(a){P(s,a),n=!1},d(a){s&&s.d(a),a&&j(t)}}}function WF(e){let t,n;function i(){return e[47](e[57])}function r(){return e[48](e[55])}return t=new yc({props:{disabled:e[4](e[55]),selected:e[55]===e[0],$$slots:{default:[Sge]},$$scope:{ctx:e}}}),t.$on("mouseenter",i),t.$on("SMUI:action",r),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){e=s;const o={};a[0]&32784&&(o.disabled=e[4](e[55])),a[0]&32769&&(o.selected=e[55]===e[0]),a[0]&32800|a[1]&2097152&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){ne(t,s)}}}function Ege(e){let t;return{c(){t=ye("Error while fetching suggestions.")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Age(e){let t,n;return t=new K2({props:{$$slots:{default:[Ege]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Oge(e){let t;const n=e[42].error,i=Ue(n,e,e[52],VF),r=i||Age(e);return{c(){r&&r.c()},m(s,a){r&&r.m(s,a),t=!0},p(s,a){i&&i.p&&(!t||a[1]&2097152)&&Ve(i,n,s,s[52],t?ze(n,s[52],a,fge):$e(s[52]),VF)},i(s){t||(F(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){r&&r.d(s)}}}function Cge(e){let t;return{c(){t=ye("Loading...")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Ige(e){let t,n;return t=new K2({props:{$$slots:{default:[Cge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function xge(e){let t;const n=e[42].loading,i=Ue(n,e,e[52],$F),r=i||Ige(e);return{c(){r&&r.c()},m(s,a){r&&r.m(s,a),t=!0},p(s,a){i&&i.p&&(!t||a[1]&2097152)&&Ve(i,n,s,s[52],t?ze(n,s[52],a,dge):$e(s[52]),$F)},i(s){t||(F(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){r&&r.d(s)}}}function Tge(e){let t,n,i,r;const s=[mge,gge,pge],a=[];function o(l,u){return l[13]?0:l[19]?1:2}return t=o(e),n=a[t]=s[t](e),{c(){n.c(),i=_t()},m(l,u){a[t].m(l,u),U(l,i,u),r=!0},p(l,u){let c=t;t=o(l),t===c?a[t].p(l,u):(Be(),P(a[c],1,1,()=>{a[c]=null}),je(),n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),F(n,1),n.m(i.parentNode,i))},i(l){r||(F(n),r=!0)},o(l){P(n),r=!1},d(l){a[t].d(l),l&&j(i)}}}function kge(e){let t,n;const i=[mt(e[27],"list$")];let r={$$slots:{default:[Tge]},$$scope:{ctx:e}};for(let s=0;s<i.length;s+=1)r=Q(r,i[s]);return t=new iT({props:r}),{c(){ie(t.$$.fragment)},m(s,a){te(t,s,a),n=!0},p(s,a){const o=a[0]&134217728?Le(i,[kt(mt(s[27],"list$"))]):{};a[0]&762673|a[1]&2097152&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){n||(F(t.$$.fragment,s),n=!0)},o(s){P(t.$$.fragment,s),n=!1},d(s){ne(t,s)}}}function Mge(e){let t,n,i,r,s,a,o,l,u,c;const f=e[42].default,d=Ue(f,e,e[52],null),h=d||hge(e),p=[{class:xe({[e[10]]:!0,"smui-autocomplete__menu":!0})},{managed:!0},{open:e[20]},{anchor:e[11]},{anchorCorner:e[12]},mt(e[27],"menu$")];function g(v){e[50](v)}let m={$$slots:{default:[kge]},$$scope:{ctx:e}};for(let v=0;v<p.length;v+=1)m=Q(m,p[v]);e[17]!==void 0&&(m.anchorElement=e[17]),r=new $$({props:m}),be.push(()=>In(r,"anchorElement",g)),r.$on("SMUIList:mount",e[22]);let y=[{class:a=xe({[e[3]]:!0,"smui-autocomplete":!0})},ys(e[27],["menu$","textfield$","list$"])],b={};for(let v=0;v<y.length;v+=1)b=Q(b,y[v]);return{c(){t=K("div"),n=K("div"),h&&h.c(),i=ae(),ie(r.$$.fragment),Se(t,b)},m(v,_){U(v,t,_),G(t,n),h&&h.m(n,null),e[44](n),G(t,i),te(r,t,null),e[51](t),l=!0,u||(c=[Ke(n,"focusin",e[45]),Ke(n,"focusout",e[26]),Ke(n,"input",e[46]),Ke(n,"keydown",e[25],!0),Ee(V$.call(null,t)),Ee(o=wt.call(null,t,e[2])),Ee(e[21].call(null,t))],u=!0)},p(v,_){d?d.p&&(!l||_[1]&2097152)&&Ve(d,f,v,v[52],l?ze(f,v[52],_,null):$e(v[52]),null):h&&h.p&&(!l||_[0]&134217922)&&h.p(v,l?_:[-1,-1]);const S=_[0]&135273472?Le(p,[_[0]&1024&&{class:xe({[v[10]]:!0,"smui-autocomplete__menu":!0})},p[1],_[0]&1048576&&{open:v[20]},_[0]&2048&&{anchor:v[11]},_[0]&4096&&{anchorCorner:v[12]},_[0]&134217728&&kt(mt(v[27],"menu$"))]):{};_[0]&134980401|_[1]&2097152&&(S.$$scope={dirty:_,ctx:v}),!s&&_[0]&131072&&(s=!0,S.anchorElement=v[17],Cn(()=>s=!1)),r.$set(S),Se(t,b=Le(y,[(!l||_[0]&8&&a!==(a=xe({[v[3]]:!0,"smui-autocomplete":!0})))&&{class:a},_[0]&134217728&&ys(v[27],["menu$","textfield$","list$"])])),o&&rt(o.update)&&_[0]&4&&o.update.call(null,v[2])},i(v){l||(F(h,v),F(r.$$.fragment,v),l=!0)},o(v){P(h,v),P(r.$$.fragment,v),l=!1},d(v){v&&j(t),h&&h.d(v),e[44](null),ne(r),e[51](null),u=!1,pt(c)}}}function Dge(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Rge(e,t,n){let i;const r=["use","class","options","value","getOptionDisabled","getOptionLabel","text","label","disabled","toggle","combobox","clearOnBlur","selectOnExactMatch","showMenuWithNoInput","noMatchesActionDisabled","search","menu$class","menu$anchor","menu$anchorCorner","focus","blur","getElement"];let s=Ce(t,r),{$$slots:a={},$$scope:o}=t;const l=St(ft());let{use:u=[]}=t,{class:c=""}=t,{options:f=[]}=t,{value:d=void 0}=t,{getOptionDisabled:h=()=>!1}=t,{getOptionLabel:p=X=>X==null?"":`${X}`}=t,{text:g=p(d)}=t,{label:m=void 0}=t,{disabled:y=!1}=t,{toggle:b=!1}=t,{combobox:v=!1}=t,{clearOnBlur:_=!v}=t,{selectOnExactMatch:S=!0}=t,{showMenuWithNoInput:E=!0}=t,{noMatchesActionDisabled:w=!0}=t,{search:O=async X=>{const Ze=X.toLowerCase(),Ot=typeof f=="function"?await f():f||[];if(Ze==="")return Ot;const le=Ot.filter(Ge=>p(Ge).toLowerCase().includes(Ze));return le.sort((Ge,me)=>{const nt=p(Ge).toLowerCase(),Je=p(me).toLowerCase();return nt.startsWith(Ze)&&!Je.startsWith(Ze)?-1:Je.startsWith(Ze)&&!nt.startsWith(Ze)?1:0}),le}}=t,{menu$class:D=""}=t,{menu$anchor:x=!1}=t,{menu$anchorCorner:A="BOTTOM_START"}=t,C,I,L=!1,k=!1,M=!1,N,R=[],T=-1,z,Y,H=d,oe;function _e(X){N||n(37,N=X.detail)}function re(X,Ze=!0){Ze&&n(1,g=p(X)),n(0,d=X),Ze||n(40,H=X),yt(C,"SMUIAutocomplete:selected",X)}function pe(X,Ze=!0){Ze&&n(1,g=""),n(0,d=void 0),Ze||n(40,H=void 0),yt(C,"SMUIAutocomplete:deselected",X)}function Oe(X){X===d?pe(X):re(X)}function Re(){return N?N.getOrderedList().filter(X=>!X.disabled):[]}function W(X){if(!(v&&!R.length)){if(X.key==="ArrowDown")X.preventDefault(),T===-1||T===Re().length-1?n(16,T=0):n(16,T++,T);else if(X.key==="ArrowUp")X.preventDefault(),T===-1||T===0?n(16,T=Re().length-1):n(16,T--,T);else if(X.key==="Enter"){X.preventDefault();const Ze=Re();z&&(Ze[T]&&Ze[T].action(X),n(16,T=-1))}}}async function q(X){X.relatedTarget&&Re().map(Ze=>Ze.element).indexOf(X.relatedTarget)!==-1||(n(16,T=-1),n(14,M=!1),_&&d==null&&n(1,g=""))}function ve(){if(I){const X=I.querySelector("input.mdc-text-field__input");X&&X.focus()}}function ce(){if(I){const X=I.querySelector("input.mdc-text-field__input");X&&X.blur()}}function fe(){return C}function we(X){g=X,n(1,g),n(29,v),n(40,H),n(0,d),n(5,p)}function Xe(X){be[X?"unshift":"push"](()=>{I=X,n(18,I)})}const tt=()=>{n(14,M=!0)},ct=()=>{n(16,T=-1)},yn=X=>{n(16,T=X)},Nt=X=>b?Oe(X):re(X),se=X=>yt(C,"SMUIAutocomplete:noMatchesAction",X);function Ne(X){C=X,n(17,C)}function V(X){be[X?"unshift":"push"](()=>{C=X,n(17,C)})}return e.$$set=X=>{t=Q(Q({},t),vt(X)),n(27,s=Ce(t,r)),"use"in X&&n(2,u=X.use),"class"in X&&n(3,c=X.class),"options"in X&&n(28,f=X.options),"value"in X&&n(0,d=X.value),"getOptionDisabled"in X&&n(4,h=X.getOptionDisabled),"getOptionLabel"in X&&n(5,p=X.getOptionLabel),"text"in X&&n(1,g=X.text),"label"in X&&n(6,m=X.label),"disabled"in X&&n(7,y=X.disabled),"toggle"in X&&n(8,b=X.toggle),"combobox"in X&&n(29,v=X.combobox),"clearOnBlur"in X&&n(30,_=X.clearOnBlur),"selectOnExactMatch"in X&&n(31,S=X.selectOnExactMatch),"showMenuWithNoInput"in X&&n(32,E=X.showMenuWithNoInput),"noMatchesActionDisabled"in X&&n(9,w=X.noMatchesActionDisabled),"search"in X&&n(33,O=X.search),"menu$class"in X&&n(10,D=X.menu$class),"menu$anchor"in X&&n(11,x=X.menu$anchor),"menu$anchorCorner"in X&&n(12,A=X.menu$anchorCorner),"$$scope"in X&&n(52,o=X.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&536870947|e.$$.dirty[1]&512&&(!v&&H!==d?(n(1,g=p(d)),n(40,H=d)):v&&n(0,d=g)),e.$$.dirty[0]&536903715|e.$$.dirty[1]&261&&Y!==g&&(!v&&d!=null&&p(d)!==g&&pe(d,!1),(async()=>{n(13,L=!0),n(19,k=!1);try{const X=await O(g);if(X!==!1&&(n(15,R=X),S)){const Ze=R.find(Ot=>p(Ot)===g);Ze&&d!==Ze&&re(Ze)}}catch{n(19,k=!0)}n(13,L=!1)})(),n(39,Y=g)),e.$$.dirty[0]&536928259|e.$$.dirty[1]&2&&n(20,i=M&&(g!==""||E)&&(L||!v&&!(R.length===1&&R[0]===d)||v&&!!R.length&&!(R.length===1&&R[0]===d))),e.$$.dirty[0]&65536|e.$$.dirty[1]&1216&&oe!==T){const X=Re();T===-1?n(38,z=void 0):(n(38,z=X[T]),z&&(n(38,z.activated=!0,z),Dge(z.element)||z.element.scrollIntoView({block:"end",inline:"nearest"}))),X.forEach((Ze,Ot)=>{Ot!==T&&(Ze.activated=!1)}),N&&N.getOrderedList().forEach(Ze=>{Ze.tabindex=-1}),n(41,oe=T)}},[d,g,u,c,h,p,m,y,b,w,D,x,A,L,M,R,T,C,I,k,i,l,_e,re,Oe,W,q,s,f,v,_,S,E,O,ve,ce,fe,N,z,Y,H,oe,a,we,Xe,tt,ct,yn,Nt,se,Ne,V,o]}class Lge extends qe{constructor(t){super(),We(this,t,Rge,Mge,He,{use:2,class:3,options:28,value:0,getOptionDisabled:4,getOptionLabel:5,text:1,label:6,disabled:7,toggle:8,combobox:29,clearOnBlur:30,selectOnExactMatch:31,showMenuWithNoInput:32,noMatchesActionDisabled:9,search:33,menu$class:10,menu$anchor:11,menu$anchorCorner:12,focus:34,blur:35,getElement:36},null,[-1,-1])}get focus(){return this.$$.ctx[34]}get blur(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function qF(e,t,n){const i=e.slice();return i[11]=t[n],i}function Nge(e,t,n){const i=e.slice();return i[11]=t[n],i}function Fge(e,t,n){const i=e.slice();return i[11]=t[n],i}function Pge(e){let t,n,i;function r(a){e[6](a)}let s={label:"Operation",style:"margin-right: 20px;",$$slots:{default:[zge]},$$scope:{ctx:e}};return e[0].join!==void 0&&(s.value=e[0].join),t=new Uc({props:s}),be.push(()=>In(t,"value",r)),{c(){ie(t.$$.fragment)},m(a,o){te(t,a,o),i=!0},p(a,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:a}),!n&&o&1&&(n=!0,l.value=a[0].join,Cn(()=>n=!1)),t.$set(l)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){P(t.$$.fragment,a),i=!1},d(a){ne(t,a)}}}function Bge(e){let t;return{c(){t=K("span"),t.textContent="Where",J(t,"id","where"),J(t,"class","svelte-10er9tc")},m(n,i){U(n,t,i)},p:xt,i:xt,o:xt,d(n){n&&j(t)}}}function jge(e){let t;return{c(){t=ye(e[11])},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function Uge(e){let t,n;return t=new Za({props:{value:e[11],$$slots:{default:[jge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function zge(e){let t,n,i=["AND","OR"],r=[];for(let s=0;s<2;s+=1)r[s]=Uge(Fge(e,i,s));return{c(){for(let s=0;s<2;s+=1)r[s].c();t=_t()},m(s,a){for(let o=0;o<2;o+=1)r[o].m(s,a);U(s,t,a),n=!0},p:xt,i(s){if(!n){for(let a=0;a<2;a+=1)F(r[a]);n=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<2;a+=1)P(r[a]);n=!1},d(s){Rn(r,s),s&&j(t)}}}function GF(e){let t,n,i;function r(a){e[7](a)}let s={label:"Operation",style:"margin-right: 20px;",$$slots:{default:[Hge]},$$scope:{ctx:e}};return e[0].operation!==void 0&&(s.value=e[0].operation),t=new Uc({props:s}),be.push(()=>In(t,"value",r)),{c(){ie(t.$$.fragment)},m(a,o){te(t,a,o),i=!0},p(a,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:a}),!n&&o&1&&(n=!0,l.value=a[0].operation,Cn(()=>n=!1)),t.$set(l)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){P(t.$$.fragment,a),i=!1},d(a){ne(t,a)}}}function Vge(e){let t;return{c(){t=ye(e[11])},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function $ge(e){let t,n;return t=new Za({props:{value:e[11],$$slots:{default:[Vge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Hge(e){let t,n,i=["IS IN","IS NOT IN"],r=[];for(let s=0;s<2;s+=1)r[s]=$ge(Nge(e,i,s));return{c(){for(let s=0;s<2;s+=1)r[s].c();t=_t()},m(s,a){for(let o=0;o<2;o+=1)r[o].m(s,a);U(s,t,a),n=!0},p:xt,i(s){if(!n){for(let a=0;a<2;a+=1)F(r[a]);n=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<2;a+=1)P(r[a]);n=!1},d(s){Rn(r,s),s&&j(t)}}}function YF(e){let t,n,i,r,s,a,o,l;function u(h){e[9](h)}let c={label:"Operation",style:"margin-right: 20px;",$$slots:{default:[qge]},$$scope:{ctx:e}};e[0].operation!==void 0&&(c.value=e[0].operation),n=new Uc({props:c}),be.push(()=>In(n,"value",u));function f(h){e[10](h)}let d={label:"Value",$$slots:{helper:[Yge]},$$scope:{ctx:e}};return e[0].value!==void 0&&(d.value=e[0].value),a=new Rk({props:d}),be.push(()=>In(a,"value",f)),{c(){t=K("div"),ie(n.$$.fragment),r=ae(),s=K("div"),ie(a.$$.fragment),J(t,"class","selector svelte-10er9tc"),J(s,"class","selector svelte-10er9tc")},m(h,p){U(h,t,p),te(n,t,null),U(h,r,p),U(h,s,p),te(a,s,null),l=!0},p(h,p){const g={};p&262144&&(g.$$scope={dirty:p,ctx:h}),!i&&p&1&&(i=!0,g.value=h[0].operation,Cn(()=>i=!1)),n.$set(g);const m={};p&262144&&(m.$$scope={dirty:p,ctx:h}),!o&&p&1&&(o=!0,m.value=h[0].value,Cn(()=>o=!1)),a.$set(m)},i(h){l||(F(n.$$.fragment,h),F(a.$$.fragment,h),l=!0)},o(h){P(n.$$.fragment,h),P(a.$$.fragment,h),l=!1},d(h){h&&j(t),ne(n),h&&j(r),h&&j(s),ne(a)}}}function Wge(e){let t=e[11]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p:xt,d(i){i&&j(n)}}}function XF(e){let t,n;return t=new Za({props:{value:e[11],$$slots:{default:[Wge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function qge(e){let t,n,i=e[5],r=[];for(let a=0;a<i.length;a+=1)r[a]=XF(qF(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&32){i=a[5];let l;for(l=0;l<i.length;l+=1){const u=qF(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=XF(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function Gge(e){let t;return{c(){t=ye("0")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function Yge(e){let t,n;return t=new F$({props:{slot:"helper",$$slots:{default:[Gge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Xge(e){let t;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",ene)},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function Kge(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[Xge]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Jge(e){let t,n,i,r,s,a,o,l,u,c,f,d,h;const p=[Bge,Pge],g=[];function m(S,E){return S[2]?0:1}n=m(e),i=g[n]=p[n](e);let y=e[0].predicateType==="slice"&&GF(e);function b(S){e[8](S)}let v={options:[...e[3],...e[4].keys()],label:"Metadata or Slice"};e[0].name!==void 0&&(v.value=e[0].name),o=new Lge({props:v}),be.push(()=>In(o,"value",b));let _=e[0].predicateType==="metadata"&&YF(e);return d=new Ja({props:{$$slots:{default:[Kge]},$$scope:{ctx:e}}}),d.$on("click",function(){rt(e[1])&&e[1].apply(this,arguments)}),{c(){t=K("div"),i.c(),r=ae(),y&&y.c(),s=ae(),a=K("div"),ie(o.$$.fragment),u=ae(),_&&_.c(),c=ae(),f=K("div"),ie(d.$$.fragment),J(a,"class","selector svelte-10er9tc"),J(f,"class","selector svelte-10er9tc"),J(t,"id","group"),J(t,"class","svelte-10er9tc")},m(S,E){U(S,t,E),g[n].m(t,null),G(t,r),y&&y.m(t,null),G(t,s),G(t,a),te(o,a,null),G(t,u),_&&_.m(t,null),G(t,c),G(t,f),te(d,f,null),h=!0},p(S,[E]){e=S;let w=n;n=m(e),n===w?g[n].p(e,E):(Be(),P(g[w],1,1,()=>{g[w]=null}),je(),i=g[n],i?i.p(e,E):(i=g[n]=p[n](e),i.c()),F(i,1),i.m(t,r)),e[0].predicateType==="slice"?y?(y.p(e,E),E&1&&F(y,1)):(y=GF(e),y.c(),F(y,1),y.m(t,s)):y&&(Be(),P(y,1,1,()=>{y=null}),je());const O={};E&24&&(O.options=[...e[3],...e[4].keys()]),!l&&E&1&&(l=!0,O.value=e[0].name,Cn(()=>l=!1)),o.$set(O),e[0].predicateType==="metadata"?_?(_.p(e,E),E&1&&F(_,1)):(_=YF(e),_.c(),F(_,1),_.m(t,c)):_&&(Be(),P(_,1,1,()=>{_=null}),je());const D={};E&262144&&(D.$$scope={dirty:E,ctx:e}),d.$set(D)},i(S){h||(F(i),F(y),F(o.$$.fragment,S),F(_),F(d.$$.fragment,S),h=!0)},o(S){P(i),P(y),P(o.$$.fragment,S),P(_),P(d.$$.fragment,S),h=!1},d(S){S&&j(t),g[n].d(),y&&y.d(),ne(o),_&&_.d(),ne(d)}}}function Qge(e,t,n){let i,r;Qe(e,s_,p=>n(3,i=p)),Qe(e,ml,p=>n(4,r=p));let{predicate:s}=t,{deletePredicate:a}=t,{first:o}=t,l=["==","!=",">","<",">=","<="];function u(p){e.$$.not_equal(s.join,p)&&(s.join=p,n(0,s),n(3,i))}function c(p){e.$$.not_equal(s.operation,p)&&(s.operation=p,n(0,s),n(3,i))}function f(p){e.$$.not_equal(s.name,p)&&(s.name=p,n(0,s),n(3,i))}function d(p){e.$$.not_equal(s.operation,p)&&(s.operation=p,n(0,s),n(3,i))}function h(p){e.$$.not_equal(s.value,p)&&(s.value=p,n(0,s),n(3,i))}return e.$$set=p=>{"predicate"in p&&n(0,s=p.predicate),"deletePredicate"in p&&n(1,a=p.deletePredicate),"first"in p&&n(2,o=p.first)},e.$$.update=()=>{e.$$.dirty&9&&(!s.name||i.includes(s.name)?n(0,s.predicateType="metadata",s):n(0,s.predicateType="slice",s))},[s,a,o,i,r,l,u,c,f,d,h]}class Zge extends qe{constructor(t){super(),We(this,t,Qge,Jge,He,{predicate:0,deletePredicate:1,first:2})}}function KF(e,t,n){const i=e.slice();return i[16]=t[n],i[17]=t,i[18]=n,i}function eme(e){let t,n;return{c(){t=K("h4"),n=ye(e[0])},m(i,r){U(i,t,r),G(t,n)},p(i,r){r&1&&et(n,i[0])},i:xt,o:xt,d(i){i&&j(t)}}}function tme(e){let t,n,i;function r(a){e[9](a)}let s={label:"Name",$$slots:{helper:[ime]},$$scope:{ctx:e}};return e[0]!==void 0&&(s.value=e[0]),t=new Rk({props:s}),be.push(()=>In(t,"value",r)),e[10](t),{c(){ie(t.$$.fragment)},m(a,o){te(t,a,o),i=!0},p(a,o){const l={};o&524288&&(l.$$scope={dirty:o,ctx:a}),!n&&o&1&&(n=!0,l.value=a[0],Cn(()=>n=!1)),t.$set(l)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){P(t.$$.fragment,a),i=!1},d(a){e[10](null),ne(t,a)}}}function nme(e){let t;return{c(){t=ye("Slice 1")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function ime(e){let t,n;return t=new F$({props:{slot:"helper",$$slots:{default:[nme]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function JF(e){let t,n,i,r,s;function a(){return e[11](e[18])}function o(u){e[12](u,e[16],e[17],e[18])}let l={first:e[18]===0,deletePredicate:a};return e[16]!==void 0&&(l.predicate=e[16]),n=new Zge({props:l}),be.push(()=>In(n,"predicate",o)),{c(){t=K("li"),ie(n.$$.fragment),r=ae()},m(u,c){U(u,t,c),te(n,t,null),G(t,r),s=!0},p(u,c){e=u;const f={};!i&&c&2&&(i=!0,f.predicate=e[16],Cn(()=>i=!1)),n.$set(f)},i(u){s||(F(n.$$.fragment,u),s=!0)},o(u){P(n.$$.fragment,u),s=!1},d(u){u&&j(t),ne(n)}}}function rme(e){let t=e[2]==="edit"?"Edit Slice":"Create Slice",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&4&&t!==(t=i[2]==="edit"?"Edit Slice":"Create Slice")&&et(n,t)},d(i){i&&j(n)}}}function QF(e){let t;return{c(){t=K("p"),t.textContent="slice already exists",vn(t,"margin-right","10px",!1),vn(t,"color","red",!1)},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function sme(e){let t,n,i,r,s,a,o,l,u,c,f=e[4].has(e[0])&&e[2]==="create",d,h,p;const g=[tme,eme],m=[];function y(E,w){return E[2]==="create"?0:1}t=y(e),n=m[t]=g[t](e);let b=e[1],v=[];for(let E=0;E<b.length;E+=1)v[E]=JF(KF(e,b,E));const _=E=>P(v[E],1,1,()=>{v[E]=null});u=new o_({props:{variant:"outlined",disabled:e[4].has(e[0])&&e[2]==="create",$$slots:{default:[rme]},$$scope:{ctx:e}}}),u.$on("click",e[6]);let S=f&&QF();return{c(){n.c(),i=ae(),r=K("ul");for(let E=0;E<v.length;E+=1)v[E].c();s=ae(),a=K("div"),a.textContent="add filter",o=ae(),l=K("div"),ie(u.$$.fragment),c=ae(),S&&S.c(),J(r,"class","svelte-1nib5f5"),J(a,"class","add svelte-1nib5f5"),J(l,"id","submit"),J(l,"class","svelte-1nib5f5")},m(E,w){m[t].m(E,w),U(E,i,w),U(E,r,w);for(let O=0;O<v.length;O+=1)v[O].m(r,null);U(E,s,w),U(E,a,w),U(E,o,w),U(E,l,w),te(u,l,null),G(l,c),S&&S.m(l,null),d=!0,h||(p=[Ee(Ape.call(null,r)),Ke(a,"click",e[13])],h=!0)},p(E,w){let O=t;if(t=y(E),t===O?m[t].p(E,w):(Be(),P(m[O],1,1,()=>{m[O]=null}),je(),n=m[t],n?n.p(E,w):(n=m[t]=g[t](E),n.c()),F(n,1),n.m(i.parentNode,i)),w&34){b=E[1];let x;for(x=0;x<b.length;x+=1){const A=KF(E,b,x);v[x]?(v[x].p(A,w),F(v[x],1)):(v[x]=JF(A),v[x].c(),F(v[x],1),v[x].m(r,null))}for(Be(),x=b.length;x<v.length;x+=1)_(x);je()}const D={};w&21&&(D.disabled=E[4].has(E[0])&&E[2]==="create"),w&524292&&(D.$$scope={dirty:w,ctx:E}),u.$set(D),w&21&&(f=E[4].has(E[0])&&E[2]==="create"),f?S||(S=QF(),S.c(),S.m(l,null)):S&&(S.d(1),S=null)},i(E){if(!d){F(n);for(let w=0;w<b.length;w+=1)F(v[w]);F(u.$$.fragment,E),d=!0}},o(E){P(n),v=v.filter(Boolean);for(let w=0;w<v.length;w+=1)P(v[w]);P(u.$$.fragment,E),d=!1},d(E){m[t].d(E),E&&j(i),E&&j(r),Rn(v,E),E&&j(s),E&&j(a),E&&j(o),E&&j(l),ne(u),S&&S.d(),h=!1,pt(p)}}}function ame(e){let t,n;return t=new ihe({props:{$$slots:{default:[sme]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&524319&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function ome(e){let t,n,i;return n=new Dk({props:{elevation:7,$$slots:{default:[ame]},$$scope:{ctx:e}}}),{c(){t=K("div"),ie(n.$$.fragment),J(t,"id","paper-container"),J(t,"class","svelte-1nib5f5")},m(r,s){U(r,t,s),te(n,t,null),i=!0},p(r,[s]){const a={};s&524319&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){i||(F(n.$$.fragment,r),i=!0)},o(r){P(n.$$.fragment,r),i=!1},d(r){r&&j(t),ne(n)}}}function lme(e,t,n){let i,r,s;Qe(e,_o,v=>n(14,i=v)),Qe(e,Bd,v=>n(15,r=v)),Qe(e,ml,v=>n(4,s=v));let{name:a}=t,{newSlice:o}=t,{mode:l="create"}=t,{predicates:u}=t,{metadataSelections:c}=t,f;c.size!==0?(u=[],[...c.values()].forEach(v=>{if(v.type==="range")u.push({name:v.name,predicateType:"metadata",operation:">=",value:v.values[0],join:"AND"}),u.push({name:v.name,predicateType:"metadata",operation:"<=",value:v.values[1],join:"AND"});else if(v.type==="binary"){let _=v.values[0]==="is"?"1":"0";u.push({name:v.name,predicateType:"metadata",operation:"==",value:_,join:"AND"})}else v.values.forEach((_,S)=>{let E;v.values.length>1&&S===0?E="start":v.values.length>1&&S===v.values.length-1&&(E="end"),u.push({name:v.name,predicateType:"metadata",operation:"==",value:_,join:"OR",groupIndicator:E})})})):u.length===0&&u.push({name:"",predicateType:"metadata",operation:"",value:"",join:""});function d(v){u.splice(v,1),n(1,u)}function h(){a.length===0&&n(0,a="Slice "+s.size),n(7,o=!1);const v=Sw(u);let _=r.filter(`(d) => ${v}`);jd.set(_),Mk([{name:a,predicates:u,idxs:_.array(i.idColumn)}]),ml.update(S=>(S.set(a,{name:a,predicates:u}),S))}Zn(()=>f.getElement().focus());function p(v){a=v,n(0,a)}function g(v){be[v?"unshift":"push"](()=>{f=v,n(3,f)})}const m=v=>d(v);function y(v,_,S,E){S[E]=v,n(1,u)}const b=()=>{u.push({name:"",predicateType:"metadata",operation:"",value:"",join:"AND"}),n(1,u)};return e.$$set=v=>{"name"in v&&n(0,a=v.name),"newSlice"in v&&n(7,o=v.newSlice),"mode"in v&&n(2,l=v.mode),"predicates"in v&&n(1,u=v.predicates),"metadataSelections"in v&&n(8,c=v.metadataSelections)},[a,u,l,f,s,d,h,o,c,p,g,m,y,b]}class ume extends qe{constructor(t){super(),We(this,t,lme,ome,He,{name:0,newSlice:7,mode:2,predicates:1,metadataSelections:8})}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var cme=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),fme=Object.prototype.hasOwnProperty;function LC(e,t){return fme.call(e,t)}function NC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)LC(e,r)&&i.push(r);return i}function Hs(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function FC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Xf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function H$(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function PC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(PC(e[t]))return!0}else if(typeof e=="object"){for(var i=NC(e),r=i.length,s=0;s<r;s++)if(PC(e[i[s]]))return!0}}return!1}function ZF(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var W$=function(e){cme(t,e);function t(n,i,r,s,a){var o=this.constructor,l=e.call(this,ZF(n,{name:i,index:r,operation:s,tree:a}))||this;return l.name=i,l.index=r,l.operation=s,l.tree=a,Object.setPrototypeOf(l,o.prototype),l.message=ZF(n,{name:i,index:r,operation:s,tree:a}),l}return t}(Error),fi=W$,dme=Hs,ap={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=u_(n,this.path);i&&(i=Hs(i));var r=Cd(n,{op:"remove",path:this.from}).removed;return Cd(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=u_(n,this.from);return Cd(n,{op:"add",path:this.path,value:Hs(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Y0(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},hme={add:function(e,t,n){return FC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:ap.move,copy:ap.copy,test:ap.test,_get:ap._get};function u_(e,t){if(t=="")return e;var n={op:"_get",path:t};return Cd(e,n),n.value}function Cd(e,t,n,i,r,s){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):c_(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=u_(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=Y0(e,t.value),a.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return a}}else{i||(e=Hs(e));var o=t.path||"",l=o.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=c_;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=H$(h)),r&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!FC(h))throw new fi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);FC(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new fi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var a=hme[t.op].call(t,u,h,e);if(a.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}}else if(c>=f){var a=ap[t.op].call(t,u,h,e);if(a.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new fi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function Ow(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Hs(e));for(var s=new Array(t.length),a=0,o=t.length;a<o;a++)s[a]=Cd(e,t[a],n,!0,r,a),e=s[a].newDocument;return s.newDocument=e,s}function pme(e,t,n){var i=Cd(e,t);if(i.test===!1)throw new fi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function c_(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new fi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ap[e.op]){if(typeof e.path!="string")throw new fi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new fi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new fi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&PC(e.value))throw new fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new fi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new fi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},o=q$([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new fi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function q$(e,t,n){try{if(!Array.isArray(e))throw new fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Ow(Hs(t),Hs(e),n||!0);else{n=n||c_;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof fi)return r;throw r}}function Y0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,s,a;if(n&&i){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!Y0(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(s=o.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=s;r--!==0;)if(a=o[r],!Y0(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var gme=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:fi,deepClone:dme,getValueByPointer:u_,applyOperation:Cd,applyPatch:Ow,applyReducer:pme,validator:c_,validate:q$,_areEquals:Y0},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Lk=new WeakMap,mme=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),yme=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function bme(e){return Lk.get(e)}function vme(e,t){return e.observers.get(t)}function _me(e,t){e.observers.delete(t.callback)}function wme(e,t){t.unobserve()}function Sme(e,t){var n=[],i,r=bme(e);if(!r)r=new mme(e),Lk.set(e,r);else{var s=vme(r,t);i=s&&s.observer}if(i)return i;if(i={},r.value=Hs(e),t){i.callback=t,i.next=null;var a=function(){BC(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){BC(i),clearTimeout(i.next),_me(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new yme(t,i)),i}function BC(e,t){t===void 0&&(t=!1);var n=Lk.get(e.object);Nk(n.value,e.object,e.patches,"",t),e.patches.length&&Ow(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Nk(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=NC(t),a=NC(e),o=!1,l=a.length-1;l>=0;l--){var u=a[l],c=e[u];if(LC(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Nk(c,f,n,i+"/"+Xf(u),r):c!==f&&(r&&n.push({op:"test",path:i+"/"+Xf(u),value:Hs(c)}),n.push({op:"replace",path:i+"/"+Xf(u),value:Hs(f)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Xf(u),value:Hs(c)}),n.push({op:"remove",path:i+"/"+Xf(u)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&s.length==a.length))for(var l=0;l<s.length;l++){var u=s[l];!LC(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+Xf(u),value:Hs(t[u])})}}}function Eme(e,t,n){n===void 0&&(n=!1);var i=[];return Nk(e,t,i,"",n),i}var Ame=Object.freeze(Object.defineProperty({__proto__:null,unobserve:wme,observe:Sme,generate:BC,compare:Eme},Symbol.toStringTag,{value:"Module"}));Object.assign({},gme,Ame,{JsonPatchError:W$,deepClone:Hs,escapePathComponent:Xf,unescapePathComponent:H$});function Ome(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cme=/("(?:[^\\"]|\\.)*")|[:,]/g,AA=function(t,n){var i,r,s;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),r=i===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function a(o,l,u){var c,f,d,h,p,g,m,y,b,v,_,S;if(o&&typeof o.toJSON=="function"&&(o=o.toJSON()),_=JSON.stringify(o,s),_===void 0)return _;if(m=r-l.length-u,_.length<=m&&(b=_.replace(Cme,function(E,w){return w||E+" "}),b.length<=m))return b;if(s!=null&&(o=JSON.parse(_),s=void 0),typeof o=="object"&&o!==null){if(y=l+i,d=[],f=0,Array.isArray(o))for(v="[",c="]",m=o.length;f<m;f++)d.push(a(o[f],y,f===m-1?0:1)||"null");else for(v="{",c="}",g=Object.keys(o),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",S=a(o[h],y,p.length+(f===m-1?0:1)),S!==void 0&&d.push(p+S);if(d.length>0)return[v,i+d.join(`,
`+y),c].join(`
`+l)}return _}(t,"",0)};function Rs(e,t,n){return e.fields=t||[],e.fname=n,e}function gi(e){return e==null?null:e.fname}function Ar(e){return e==null?null:e.fields}function G$(e){return e.length===1?Ime(e[0]):xme(e)}const Ime=e=>function(t){return t[e]},xme=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function he(e){throw Error(e)}function Ol(e){const t=[],n=e.length;let i=null,r=0,s="",a,o,l;e=e+"";function u(){t.push(s+e.substring(a,o)),s="",a=o+1}for(a=o=0;o<n;++o)if(l=e[o],l==="\\")s+=e.substring(a,o),s+=e.substring(++o,++o),a=o;else if(l===i)u(),i=null,r=-1;else{if(i)continue;a===r&&l==='"'||a===r&&l==="'"?(a=o+1,i=l):l==="."&&!r?o>a?u():a=o+1:l==="["?(o>a&&u(),r=a=o+1):l==="]"&&(r||he("Access path missing open bracket: "+e),r>0&&u(),r=0,a=o+1)}return r&&he("Access path missing closing bracket: "+e),i&&he("Access path missing closing quote: "+e),o>a&&(o++,u()),t}function Ss(e,t,n){const i=Ol(e);return e=i.length===1?i[0]:e,Rs((n&&n.get||G$)(i),[e],t||e)}const V1=Ss("id"),Tr=Rs(e=>e,[],"identity"),rc=Rs(()=>0,[],"zero"),Ug=Rs(()=>1,[],"one"),Sa=Rs(()=>!0,[],"true"),qu=Rs(()=>!1,[],"false");function Tme(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const Y$=0,Fk=1,Pk=2,X$=3,K$=4;function Bk(e,t,n=Tme){let i=e||Y$;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=Fk&&n(t||"error","ERROR",arguments),this},warn(){return i>=Pk&&n(t||"warn","WARN",arguments),this},info(){return i>=X$&&n(t||"log","INFO",arguments),this},debug(){return i>=K$&&n(t||"log","DEBUG",arguments),this}}}var ge=Array.isArray;function Ye(e){return e===Object(e)}const e6=e=>e!=="__proto__";function zg(...e){return e.reduce((t,n)=>{for(const i in n)if(i==="signals")t.signals=kme(t.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;Vg(t,i,n[i],r)}return t},{})}function Vg(e,t,n,i){if(!e6(t))return;let r,s;if(Ye(n)&&!ge(n)){s=Ye(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Vg(s,r,n[r]):e6(r)&&(s[r]=n[r])}else e[t]=n}function kme(e,t){if(e==null)return t;const n={},i=[];function r(s){n[s.name]||(n[s.name]=1,i.push(s))}return t.forEach(r),e.forEach(r),i}function ln(e){return e[e.length-1]}function wr(e){return e==null||e===""?null:+e}const J$=e=>t=>e*Math.exp(t),Q$=e=>t=>Math.log(e*t),Z$=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),eH=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,f_=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Cw(e,t,n,i){const r=n(e[0]),s=n(ln(e)),a=(s-r)*t;return[i(r-a),i(s-a)]}function tH(e,t){return Cw(e,t,wr,Tr)}function nH(e,t){var n=Math.sign(e[0]);return Cw(e,t,Q$(n),J$(n))}function iH(e,t,n){return Cw(e,t,f_(n),f_(1/n))}function rH(e,t,n){return Cw(e,t,Z$(n),eH(n))}function Iw(e,t,n,i,r){const s=i(e[0]),a=i(ln(e)),o=t!=null?i(t):(s+a)/2;return[r(o+(s-o)*n),r(o+(a-o)*n)]}function jk(e,t,n){return Iw(e,t,n,wr,Tr)}function Uk(e,t,n){const i=Math.sign(e[0]);return Iw(e,t,n,Q$(i),J$(i))}function d_(e,t,n,i){return Iw(e,t,n,f_(i),f_(1/i))}function zk(e,t,n,i){return Iw(e,t,n,Z$(i),eH(i))}function sH(e){return 1+~~(new Date(e).getMonth()/3)}function aH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Pe(e){return e!=null?ge(e)?e:[e]:[]}function oH(e,t,n){let i=e[0],r=e[1],s;return r<i&&(s=r,r=i,i=s),s=r-i,s>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-s),i+s]}function Ht(e){return typeof e=="function"}const Mme="descending";function Vk(e,t,n){n=n||{},t=Pe(t)||[];const i=[],r=[],s={},a=n.comparator||Dme;return Pe(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===Mme?-1:1),r.push(o=Ht(o)?o:Ss(o,null,n)),(Ar(o)||[]).forEach(u=>s[u]=1))}),r.length===0?null:Rs(a(r,i),Object.keys(s))}const xw=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Dme=(e,t)=>e.length===1?Rme(e[0],t[0]):Lme(e,t,e.length),Rme=(e,t)=>function(n,i){return xw(e(n),e(i))*t},Lme=(e,t,n)=>(t.push(0),function(i,r){let s,a=0,o=-1;for(;a===0&&++o<n;)s=e[o],a=xw(s(i),s(r));return a*t[o]});function kr(e){return Ht(e)?e:()=>e}function $k(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function $t(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function yl(e,t){let n=0,i,r,s,a;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(s=a=r;n<i;++n)r=e[n],r!=null&&(r<s&&(s=r),r>a&&(a=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(s=a=r;n<i;++n)r=t(e[n]),r!=null&&(r<s&&(s=r),r>a&&(a=r))}return[s,a]}function lH(e,t){const n=e.length;let i=-1,r,s,a,o,l;if(t==null){for(;++i<n;)if(s=e[i],s!=null&&s>=s){r=a=s;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)s=e[i],s!=null&&(r>s&&(r=s,o=i),a<s&&(a=s,l=i))}else{for(;++i<n;)if(s=t(e[i],i,e),s!=null&&s>=s){r=a=s;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)s=t(e[i],i,e),s!=null&&(r>s&&(r=s,o=i),a<s&&(a=s,l=i))}return[o,l]}const Nme=Object.prototype.hasOwnProperty;function at(e,t){return Nme.call(e,t)}const Qy={};function $g(e){let t={},n;function i(s){return at(t,s)&&t[s]!==Qy}const r={size:0,empty:0,object:t,has:i,get(s){return i(s)?t[s]:void 0},set(s,a){return i(s)||(++r.size,t[s]===Qy&&--r.empty),t[s]=a,this},delete(s){return i(s)&&(--r.size,++r.empty,t[s]=Qy),this},clear(){r.size=r.empty=0,r.object=t={}},test(s){return arguments.length?(n=s,r):n},clean(){const s={};let a=0;for(const o in t){const l=t[o];l!==Qy&&(!n||!n(l))&&(s[o]=l,++a)}r.size=a,r.empty=0,r.object=t=s}};return e&&Object.keys(e).forEach(s=>{r.set(s,e[s])}),r}function uH(e,t,n,i,r,s){if(!n&&n!==0)return s;const a=+n;let o=e[0],l=ln(e),u;l<o&&(u=o,o=l,l=u),u=Math.abs(t-o);const c=Math.abs(l-t);return u<c&&u<=a?i:c<=a?r:s}function Te(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),$t(i,n)}function op(e,t,n,i){let r=t[0],s=t[t.length-1],a;return r>s&&(a=r,r=s,s=a),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=s:e<s)}function pf(e){return typeof e=="boolean"}function _c(e){return Object.prototype.toString.call(e)==="[object Date]"}function cH(e){return e&&Ht(e[Symbol.iterator])}function Un(e){return typeof e=="number"}function fH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Fe(e){return typeof e=="string"}function Hk(e,t,n){e&&(e=t?Pe(e).map(o=>o.replace(/\\(.)/g,"$1")):Pe(e));const i=e&&e.length,r=n&&n.get||G$,s=o=>r(t?[o]:Ol(o));let a;if(!i)a=function(){return""};else if(i===1){const o=s(e[0]);a=function(l){return""+o(l)}}else{const o=e.map(s);a=function(l){let u=""+o[0](l),c=0;for(;++c<i;)u+="|"+o[c](l);return u}}return Rs(a,e,"key")}function dH(e,t){const n=e[0],i=ln(e),r=+t;return r?r===1?i:n+r*(i-n):n}const Fme=1e4;function hH(e){e=+e||Fme;let t,n,i;const r=()=>{t={},n={},i=0},s=(a,o)=>(++i>e&&(n=t,t={},i=1),t[a]=o);return r(),{clear:r,has:a=>at(t,a)||at(n,a),get:a=>at(t,a)?t[a]:at(n,a)?s(a,n[a]):void 0,set:(a,o)=>at(t,a)?t[a]=o:s(a,o)}}function pH(e,t,n,i){const r=t.length,s=n.length;if(!s)return t;if(!r)return n;const a=i||new t.constructor(r+s);let o=0,l=0,u=0;for(;o<r&&l<s;++u)a[u]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++u)a[u]=t[o];for(;l<s;++l,++u)a[u]=n[l];return a}function Ym(e,t){let n="";for(;--t>=0;)n+=e;return n}function gH(e,t,n,i){const r=n||" ",s=e+"",a=t-s.length;return a<=0?s:i==="left"?Ym(r,a)+s:i==="center"?Ym(r,~~(a/2))+s+Ym(r,Math.ceil(a/2)):s+Ym(r,a)}function $1(e){return e&&ln(e)-e[0]||0}function ke(e){return ge(e)?"["+e.map(ke)+"]":Ye(e)||Fe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Wk(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Pme=e=>Un(e)||_c(e)?e:Date.parse(e);function qk(e,t){return t=t||Pme,e==null||e===""?null:t(e)}function Gk(e){return e==null||e===""?null:e+""}function po(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function mH(e,t,n,i){const r=i??"\u2026",s=e+"",a=s.length,o=Math.max(0,t-r.length);return a<=t?s:n==="left"?r+s.slice(a-o):n==="center"?s.slice(0,Math.ceil(o/2))+r+s.slice(a-~~(o/2)):s.slice(0,o)+r}function Ju(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const s=t(e[r]);s&&n(s,r,e)}}else e.forEach(n)}var t6={},OA={},CA=34,Sm=10,IA=13;function yH(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Bme(e,t){var n=yH(e);return function(i,r){return t(n(i),r,e)}}function n6(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function is(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function jme(e){return e<0?"-"+is(-e,6):e>9999?"+"+is(e,6):is(e,4)}function Ume(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":jme(e.getUTCFullYear())+"-"+is(e.getUTCMonth()+1,2)+"-"+is(e.getUTCDate(),2)+(r?"T"+is(t,2)+":"+is(n,2)+":"+is(i,2)+"."+is(r,3)+"Z":i?"T"+is(t,2)+":"+is(n,2)+":"+is(i,2)+"Z":n||t?"T"+is(t,2)+":"+is(n,2)+"Z":"")}function zme(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(f,d){var h,p,g=r(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?Bme(m,d):yH(m)});return g.columns=p||[],g}function r(f,d){var h=[],p=f.length,g=0,m=0,y,b=p<=0,v=!1;f.charCodeAt(p-1)===Sm&&--p,f.charCodeAt(p-1)===IA&&--p;function _(){if(b)return OA;if(v)return v=!1,t6;var E,w=g,O;if(f.charCodeAt(w)===CA){for(;g++<p&&f.charCodeAt(g)!==CA||f.charCodeAt(++g)===CA;);return(E=g)>=p?b=!0:(O=f.charCodeAt(g++))===Sm?v=!0:O===IA&&(v=!0,f.charCodeAt(g)===Sm&&++g),f.slice(w+1,E-1).replace(/""/g,'"')}for(;g<p;){if((O=f.charCodeAt(E=g++))===Sm)v=!0;else if(O===IA)v=!0,f.charCodeAt(g)===Sm&&++g;else if(O!==n)continue;return f.slice(w,E)}return b=!0,f.slice(w,p)}for(;(y=_())!==OA;){for(var S=[];y!==t6&&y!==OA;)S.push(y),y=_();d&&(S=d(S,m++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function a(f,d){return d==null&&(d=n6(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function o(f,d){return d==null&&(d=n6(f)),s(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Ume(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:a,formatBody:o,formatRows:l,formatRow:u,formatValue:c}}function Vme(e){return e}function $me(e){if(e==null)return Vme;var t,n,i=e.scale[0],r=e.scale[1],s=e.translate[0],a=e.translate[1];return function(o,l){l||(t=n=0);var u=2,c=o.length,f=new Array(c);for(f[0]=(t+=o[0])*i+s,f[1]=(n+=o[1])*r+a;u<c;)f[u]=o[u],++u;return f}}function Hme(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function Wme(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return i6(e,n)})}:i6(e,t)}function i6(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,s=bH(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function bH(e,t){var n=$me(e.transform),i=e.arcs;function r(c,f){f.length&&f.pop();for(var d=i[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Hme(f,p)}function s(c){return n(c)}function a(c){for(var f=[],d=0,h=c.length;d<h;++d)r(c[d],f);return f.length<2&&f.push(f[0]),f}function o(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(o)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function qme(e,t){var n={},i={},r={},s=[],a=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=u,t[c]=d)}),t.forEach(function(u){var c=o(u),f=c[0],d=c[1],h,p;if(h=r[f])if(delete r[h.end],h.push(u),h.end=d,p=i[d]){delete i[p.start];var g=p===h?h:h.concat(p);i[g.start=h.start]=r[g.end=p.end]=g}else i[h.start]=r[h.end]=h;else if(h=i[d])if(delete i[h.start],h.unshift(u),h.start=f,p=r[f]){delete r[p.end];var m=p===h?h:p.concat(h);i[m.start=p.start]=r[m.end=h.end]=m}else i[h.start]=r[h.end]=h;else h=[u],i[h.start=f]=r[h.end=d]=h});function o(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function Gme(e){return bH(e,Yme.apply(this,arguments))}function Yme(e,t,n){var i,r,s;if(arguments.length>1)i=Xme(e,t,n);else for(r=0,i=new Array(s=e.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:qme(e,i)}}function Xme(e,t,n){var i=[],r=[],s;function a(f){var d=f<0?~f:f;(r[d]||(r[d]=[])).push({i:f,g:s})}function o(f){f.forEach(a)}function l(f){f.forEach(o)}function u(f){f.forEach(l)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":o(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),r.forEach(n==null?function(f){i.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function cu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kme(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function H1(e){let t,n,i;e.length!==2?(t=cu,n=(o,l)=>cu(e(o),l),i=(o,l)=>e(o)-l):(t=e===cu||e===Kme?e:Jme,n=e,i=e);function r(o,l,u=0,c=o.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){const f=r(o,l,u,c-1);return f>u&&i(o[f-1],l)>-i(o[f],l)?f-1:f}return{left:r,center:a,right:s}}function Jme(){return 0}function vH(e){return e===null?NaN:+e}function*Qme(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const _H=H1(cu),h_=_H.right,Zme=_H.left;H1(vH).center;var W1=h_;function e0e(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r));else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r))}if(n>1)return s/(n-1)}function t0e(e,t){const n=e0e(e,t);return n&&Math.sqrt(n)}class Hr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],a=t+s,o=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);o&&(n[i++]=o),t=a}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,a=0;if(n>0){for(a=t[--n];n>0&&(i=a,r=t[--n],a=i+r,s=r-(a-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}function n0e(e,t){return Array.from(t,n=>e[n])}function i0e(e=cu){if(e===cu)return wH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function wH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}var jC=Math.sqrt(50),UC=Math.sqrt(10),zC=Math.sqrt(2);function VC(e,t,n){var i,r=-1,s,a,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(s=e,e=t,t=s),(o=SH(e,t,n))===0||!isFinite(o))return[];if(o>0){let l=Math.round(e/o),u=Math.round(t/o);for(l*o<e&&++l,u*o>t&&--u,a=new Array(s=u-l+1);++r<s;)a[r]=(l+r)*o}else{o=-o;let l=Math.round(e*o),u=Math.round(t*o);for(l/o<e&&++l,u/o>t&&--u,a=new Array(s=u-l+1);++r<s;)a[r]=(l+r)/o}return i&&a.reverse(),a}function SH(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=jC?10:s>=UC?5:s>=zC?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=jC?10:s>=UC?5:s>=zC?2:1)}function zc(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=jC?r*=10:s>=UC?r*=5:s>=zC&&(r*=2),t<e?-r:r}function Id(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function $C(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function EH(e,t,n=0,i=e.length-1,r){for(r=r===void 0?wH:i0e(r);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(i,Math.floor(t+(l-u)*f/l+d));EH(e,t,h,p,r)}const s=e[t];let a=n,o=i;for(Em(e,n,t),r(e[i],s)>0&&Em(e,n,i);a<o;){for(Em(e,a,o),++a,--o;r(e[a],s)<0;)++a;for(;r(e[o],s)>0;)--o}r(e[n],s)===0?Em(e,n,o):(++o,Em(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Em(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function HC(e,t,n){if(e=Float64Array.from(Qme(e,n)),!!(i=e.length)){if((t=+t)<=0||i<2)return $C(e);if(t>=1)return Id(e);var i,r=(i-1)*t,s=Math.floor(r),a=Id(EH(e,s).subarray(0,s+1)),o=$C(e.subarray(s+1));return a+(o-a)*(r-s)}}function AH(e,t,n=vH){if(!!(i=e.length)){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),a=+n(e[s],s,e),o=+n(e[s+1],s+1,e);return a+(o-a)*(r-s)}}function r0e(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function OH(e,t){return HC(e,.5,t)}function*s0e(e){for(const t of e)yield*t}function CH(e){return Array.from(s0e(e))}function Ws(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function IH(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function a0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function p_(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Jp(e){return e=p_(Math.abs(e)),e?e[1]:NaN}function o0e(e,t){return function(n,i){for(var r=n.length,s=[],a=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function l0e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var u0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vd(e){if(!(t=u0e.exec(e)))throw new Error("invalid format: "+e);var t;return new Yk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vd.prototype=Yk.prototype;function Yk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function c0e(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var xH;function f0e(e,t){var n=p_(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(xH=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+p_(e,Math.max(0,t+s-1))[0]}function r6(e,t){var n=p_(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var s6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:a0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>r6(e*100,t),r:r6,s:f0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a6(e){return e}var o6=Array.prototype.map,l6=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function TH(e){var t=e.grouping===void 0||e.thousands===void 0?a6:o0e(o6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?a6:l0e(o6.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Vd(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,b=f.comma,v=f.precision,_=f.trim,S=f.type;S==="n"?(b=!0,S="g"):s6[S]||(v===void 0&&(v=12),_=!0,S="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=g==="$"?i:/[%p]/.test(S)?a:"",O=s6[S],D=/[defgprs%]/.test(S);v=v===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(A){var C=E,I=w,L,k,M;if(S==="c")I=O(A)+I,A="";else{A=+A;var N=A<0||1/A<0;if(A=isNaN(A)?l:O(Math.abs(A),v),_&&(A=c0e(A)),N&&+A==0&&p!=="+"&&(N=!1),C=(N?p==="("?p:o:p==="-"||p==="("?"":p)+C,I=(S==="s"?l6[8+xH/3]:"")+I+(N&&p==="("?")":""),D){for(L=-1,k=A.length;++L<k;)if(M=A.charCodeAt(L),48>M||M>57){I=(M===46?r+A.slice(L+1):A.slice(L))+I,A=A.slice(0,L);break}}}b&&!m&&(A=t(A,1/0));var R=C.length+A.length+I.length,T=R<y?new Array(y-R+1).join(d):"";switch(b&&m&&(A=t(T+A,T.length?y-I.length:1/0),T=""),h){case"<":A=C+A+I+T;break;case"=":A=C+T+A+I;break;case"^":A=T.slice(0,R=T.length>>1)+C+A+I+T.slice(R);break;default:A=T+C+A+I;break}return s(A)}return x.toString=function(){return f+""},x}function c(f,d){var h=u((f=Vd(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Jp(d)/3)))*3,g=Math.pow(10,-p),m=l6[8+p/3];return function(y){return h(g*y)+m}}return{format:u,formatPrefix:c}}var Zy,Tw,Xk;d0e({thousands:",",grouping:[3],currency:["$",""]});function d0e(e){return Zy=TH(e),Tw=Zy.format,Xk=Zy.formatPrefix,Zy}function kH(e){return Math.max(0,-Jp(Math.abs(e)))}function MH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jp(t)/3)))*3-Jp(Math.abs(e)))}function DH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jp(t)-Jp(e))+1}var xA=new Date,TA=new Date;function Qi(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=function(s){return e(s=new Date(+s)),s},r.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},r.round=function(s){var a=r(s),o=r.ceil(s);return s-a<o-s?a:o},r.offset=function(s,a){return t(s=new Date(+s),a==null?1:Math.floor(a)),s},r.range=function(s,a,o){var l=[],u;if(s=r.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;do l.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<a);return l},r.filter=function(s){return Qi(function(a){if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););})},n&&(r.count=function(s,a){return xA.setTime(+s),TA.setTime(+a),e(xA),e(TA),Math.floor(n(xA,TA))},r.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?function(a){return i(a)%s===0}:function(a){return r.count(0,a)%s===0}):r}),r}var g_=Qi(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});g_.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Qi(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):g_};var Kk=g_;g_.range;const iu=1e3,ha=iu*60,ru=ha*60,$d=ru*24,Jk=$d*7,u6=$d*30,kA=$d*365;var RH=Qi(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*iu)},function(e,t){return(t-e)/iu},function(e){return e.getUTCSeconds()}),lc=RH;RH.range;var LH=Qi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*iu)},function(e,t){e.setTime(+e+t*ha)},function(e,t){return(t-e)/ha},function(e){return e.getMinutes()}),Qk=LH;LH.range;var NH=Qi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*iu-e.getMinutes()*ha)},function(e,t){e.setTime(+e+t*ru)},function(e,t){return(t-e)/ru},function(e){return e.getHours()}),Zk=NH;NH.range;var FH=Qi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ha)/$d,e=>e.getDate()-1),wc=FH;FH.range;function gh(e){return Qi(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ha)/Jk})}var Hg=gh(0),m_=gh(1),h0e=gh(2),p0e=gh(3),Qp=gh(4),g0e=gh(5),m0e=gh(6);Hg.range;m_.range;h0e.range;p0e.range;Qp.range;g0e.range;m0e.range;var PH=Qi(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),y_=PH;PH.range;var e3=Qi(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});e3.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Qi(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var Vc=e3;e3.range;var BH=Qi(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*ha)},function(e,t){return(t-e)/ha},function(e){return e.getUTCMinutes()}),t3=BH;BH.range;var jH=Qi(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*ru)},function(e,t){return(t-e)/ru},function(e){return e.getUTCHours()}),n3=jH;jH.range;var UH=Qi(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/$d},function(e){return e.getUTCDate()-1}),Sc=UH;UH.range;function mh(e){return Qi(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/Jk})}var Wg=mh(0),b_=mh(1),y0e=mh(2),b0e=mh(3),Zp=mh(4),v0e=mh(5),_0e=mh(6);Wg.range;b_.range;y0e.range;b0e.range;Zp.range;v0e.range;_0e.range;var zH=Qi(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()}),v_=zH;zH.range;var i3=Qi(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});i3.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Qi(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var $c=i3;i3.range;function VH(e,t,n,i,r,s){const a=[[lc,1,iu],[lc,5,5*iu],[lc,15,15*iu],[lc,30,30*iu],[s,1,ha],[s,5,5*ha],[s,15,15*ha],[s,30,30*ha],[r,1,ru],[r,3,3*ru],[r,6,6*ru],[r,12,12*ru],[i,1,$d],[i,2,2*$d],[n,1,Jk],[t,1,u6],[t,3,3*u6],[e,1,kA]];function o(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=H1(([,,m])=>m).right(a,d);if(h===a.length)return e.every(zc(u/kA,c/kA,f));if(h===0)return Kk.every(Math.max(zc(u,c,f),1));const[p,g]=a[d/a[h-1][2]<a[h][2]/d?h-1:h];return p.every(g)}return[o,l]}const[w0e,S0e]=VH($c,v_,Wg,Sc,n3,t3),[E0e,A0e]=VH(Vc,y_,Hg,wc,Zk,Qk),sr="year",Es="quarter",Or="month",Fi="week",As="date",_r="day",bl="dayofyear",Js="hours",Qs="minutes",Ea="seconds",go="milliseconds",r3=[sr,Es,Or,Fi,As,_r,bl,Js,Qs,Ea,go],MA=r3.reduce((e,t,n)=>(e[t]=1+n,e),{});function s3(e){const t=Pe(e).slice(),n={};return t.length||he("Missing time unit."),t.forEach(r=>{at(MA,r)?n[r]=1:he("Invalid time unit: ".concat(r,"."))}),(n[Fi]||n[_r]?1:0)+(n[Es]||n[Or]||n[As]?1:0)+(n[bl]?1:0)>1&&he("Incompatible time units: ".concat(e)),t.sort((r,s)=>MA[r]-MA[s]),t}const O0e={[sr]:"%Y ",[Es]:"Q%q ",[Or]:"%b ",[As]:"%d ",[Fi]:"W%U ",[_r]:"%a ",[bl]:"%j ",[Js]:"%H:00",[Qs]:"00:%M",[Ea]:":%S",[go]:".%L",["".concat(sr,"-").concat(Or)]:"%Y-%m ",["".concat(sr,"-").concat(Or,"-").concat(As)]:"%Y-%m-%d ",["".concat(Js,"-").concat(Qs)]:"%H:%M"};function $H(e,t){const n=$t({},O0e,t),i=s3(e),r=i.length;let s="",a=0,o,l;for(a=0;a<r;)for(o=i.length;o>a;--o)if(l=i.slice(a,o).join("-"),n[l]!=null){s+=n[l],a=o;break}return s.trim()}const ed=new Date;function a3(e){return ed.setFullYear(e),ed.setMonth(0),ed.setDate(1),ed.setHours(0,0,0,0),ed}function HH(e){return qH(new Date(e))}function WH(e){return WC(new Date(e))}function qH(e){return wc.count(a3(e.getFullYear())-1,e)}function WC(e){return Hg.count(a3(e.getFullYear())-1,e)}function qC(e){return a3(e).getDay()}function C0e(e,t,n,i,r,s,a){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,s,a);return o.setFullYear(e),o}return new Date(e,t,n,i,r,s,a)}function GH(e){return XH(new Date(e))}function YH(e){return GC(new Date(e))}function XH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Sc.count(t-1,e)}function GC(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Wg.count(t-1,e)}function YC(e){return ed.setTime(Date.UTC(e,0,1)),ed.getUTCDay()}function I0e(e,t,n,i,r,s,a){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,s,a));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,s,a))}function KH(e,t,n,i,r){const s=t||1,a=ln(e),o=(y,b,v)=>(v=v||y,x0e(n[v],i[v],y===a&&s,b)),l=new Date,u=po(e),c=u[sr]?o(sr):kr(2012),f=u[Or]?o(Or):u[Es]?o(Es):rc,d=u[Fi]&&u[_r]?o(_r,1,Fi+_r):u[Fi]?o(Fi,1):u[_r]?o(_r,1):u[As]?o(As,1):u[bl]?o(bl,1):Ug,h=u[Js]?o(Js):rc,p=u[Qs]?o(Qs):rc,g=u[Ea]?o(Ea):rc,m=u[go]?o(go):rc;return function(y){l.setTime(+y);const b=c(l);return r(b,f(l),d(l,b),h(l),p(l),g(l),m(l))}}function x0e(e,t,n,i){const r=n<=1?e:i?(s,a)=>i+n*Math.floor((e(s,a)-i)/n):(s,a)=>n*Math.floor(e(s,a)/n);return t?(s,a)=>t(r(s,a),a):r}function eg(e,t,n){return t+e*7-(n+6)%7}const T0e={[sr]:e=>e.getFullYear(),[Es]:e=>Math.floor(e.getMonth()/3),[Or]:e=>e.getMonth(),[As]:e=>e.getDate(),[Js]:e=>e.getHours(),[Qs]:e=>e.getMinutes(),[Ea]:e=>e.getSeconds(),[go]:e=>e.getMilliseconds(),[bl]:e=>qH(e),[Fi]:e=>WC(e),[Fi+_r]:(e,t)=>eg(WC(e),e.getDay(),qC(t)),[_r]:(e,t)=>eg(1,e.getDay(),qC(t))},k0e={[Es]:e=>3*e,[Fi]:(e,t)=>eg(e,0,qC(t))};function JH(e,t){return KH(e,t||1,T0e,k0e,C0e)}const M0e={[sr]:e=>e.getUTCFullYear(),[Es]:e=>Math.floor(e.getUTCMonth()/3),[Or]:e=>e.getUTCMonth(),[As]:e=>e.getUTCDate(),[Js]:e=>e.getUTCHours(),[Qs]:e=>e.getUTCMinutes(),[Ea]:e=>e.getUTCSeconds(),[go]:e=>e.getUTCMilliseconds(),[bl]:e=>XH(e),[Fi]:e=>GC(e),[_r]:(e,t)=>eg(1,e.getUTCDay(),YC(t)),[Fi+_r]:(e,t)=>eg(GC(e),e.getUTCDay(),YC(t))},D0e={[Es]:e=>3*e,[Fi]:(e,t)=>eg(e,0,YC(t))};function QH(e,t){return KH(e,t||1,M0e,D0e,I0e)}const R0e={[sr]:Vc,[Es]:y_.every(3),[Or]:y_,[Fi]:Hg,[As]:wc,[_r]:wc,[bl]:wc,[Js]:Zk,[Qs]:Qk,[Ea]:lc,[go]:Kk},L0e={[sr]:$c,[Es]:v_.every(3),[Or]:v_,[Fi]:Wg,[As]:Sc,[_r]:Sc,[bl]:Sc,[Js]:n3,[Qs]:t3,[Ea]:lc,[go]:Kk};function qg(e){return R0e[e]}function Gg(e){return L0e[e]}function ZH(e,t,n){return e?e.offset(t,n):void 0}function eW(e,t,n){return ZH(qg(e),t,n)}function tW(e,t,n){return ZH(Gg(e),t,n)}function nW(e,t,n,i){return e?e.range(t,n,i):void 0}function iW(e,t,n,i){return nW(qg(e),t,n,i)}function rW(e,t,n,i){return nW(Gg(e),t,n,i)}const Xm=1e3,Km=Xm*60,Jm=Km*60,kw=Jm*24,N0e=kw*7,c6=kw*30,XC=kw*365,sW=[sr,Or,As,Js,Qs,Ea,go],Qm=sW.slice(0,-1),Zm=Qm.slice(0,-1),e0=Zm.slice(0,-1),F0e=e0.slice(0,-1),P0e=[sr,Fi],f6=[sr,Or],aW=[sr],Am=[[Qm,1,Xm],[Qm,5,5*Xm],[Qm,15,15*Xm],[Qm,30,30*Xm],[Zm,1,Km],[Zm,5,5*Km],[Zm,15,15*Km],[Zm,30,30*Km],[e0,1,Jm],[e0,3,3*Jm],[e0,6,6*Jm],[e0,12,12*Jm],[F0e,1,kw],[P0e,1,N0e],[f6,1,c6],[f6,3,3*c6],[aW,1,XC]];function oW(e){const t=e.extent,n=e.maxbins||40,i=Math.abs($1(t))/n;let r=H1(o=>o[2]).right(Am,i),s,a;return r===Am.length?(s=aW,a=zc(t[0]/XC,t[1]/XC,n)):r?(r=Am[i/Am[r-1][2]<Am[r][2]/i?r-1:r],s=r[0],a=r[1]):(s=sW,a=Math.max(zc(t[0],t[1],n),1)),{units:s,step:a}}function DA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function RA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Om(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lW(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,u=Cm(r),c=Im(r),f=Cm(s),d=Im(s),h=Cm(a),p=Im(a),g=Cm(o),m=Im(o),y=Cm(l),b=Im(l),v={a:N,A:R,b:T,B:z,c:null,d:y6,e:y6,f:a1e,g:m1e,G:b1e,H:i1e,I:r1e,j:s1e,L:uW,m:o1e,M:l1e,p:Y,q:H,Q:_6,s:w6,S:u1e,u:c1e,U:f1e,V:d1e,w:h1e,W:p1e,x:null,X:null,y:g1e,Y:y1e,Z:v1e,"%":v6},_={a:oe,A:_e,b:re,B:pe,c:null,d:b6,e:b6,f:E1e,g:R1e,G:N1e,H:_1e,I:w1e,j:S1e,L:fW,m:A1e,M:O1e,p:Oe,q:Re,Q:_6,s:w6,S:C1e,u:I1e,U:x1e,V:T1e,w:k1e,W:M1e,x:null,X:null,y:D1e,Y:L1e,Z:F1e,"%":v6},S={a:x,A,b:C,B:I,c:L,d:g6,e:g6,f:Z0e,g:p6,G:h6,H:m6,I:m6,j:X0e,L:Q0e,m:Y0e,M:K0e,p:D,q:G0e,Q:t1e,s:n1e,S:J0e,u:V0e,U:$0e,V:H0e,w:z0e,W:W0e,x:k,X:M,y:p6,Y:h6,Z:q0e,"%":e1e};v.x=E(n,v),v.X=E(i,v),v.c=E(t,v),_.x=E(n,_),_.X=E(i,_),_.c=E(t,_);function E(W,q){return function(ve){var ce=[],fe=-1,we=0,Xe=W.length,tt,ct,yn;for(ve instanceof Date||(ve=new Date(+ve));++fe<Xe;)W.charCodeAt(fe)===37&&(ce.push(W.slice(we,fe)),(ct=d6[tt=W.charAt(++fe)])!=null?tt=W.charAt(++fe):ct=tt==="e"?" ":"0",(yn=q[tt])&&(tt=yn(ve,ct)),ce.push(tt),we=fe+1);return ce.push(W.slice(we,fe)),ce.join("")}}function w(W,q){return function(ve){var ce=Om(1900,void 0,1),fe=O(ce,W,ve+="",0),we,Xe;if(fe!=ve.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(q&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(we=RA(Om(ce.y,0,1)),Xe=we.getUTCDay(),we=Xe>4||Xe===0?b_.ceil(we):b_(we),we=Sc.offset(we,(ce.V-1)*7),ce.y=we.getUTCFullYear(),ce.m=we.getUTCMonth(),ce.d=we.getUTCDate()+(ce.w+6)%7):(we=DA(Om(ce.y,0,1)),Xe=we.getDay(),we=Xe>4||Xe===0?m_.ceil(we):m_(we),we=wc.offset(we,(ce.V-1)*7),ce.y=we.getFullYear(),ce.m=we.getMonth(),ce.d=we.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Xe="Z"in ce?RA(Om(ce.y,0,1)).getUTCDay():DA(Om(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Xe+5)%7:ce.w+ce.U*7-(Xe+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,RA(ce)):DA(ce)}}function O(W,q,ve,ce){for(var fe=0,we=q.length,Xe=ve.length,tt,ct;fe<we;){if(ce>=Xe)return-1;if(tt=q.charCodeAt(fe++),tt===37){if(tt=q.charAt(fe++),ct=S[tt in d6?q.charAt(fe++):tt],!ct||(ce=ct(W,ve,ce))<0)return-1}else if(tt!=ve.charCodeAt(ce++))return-1}return ce}function D(W,q,ve){var ce=u.exec(q.slice(ve));return ce?(W.p=c.get(ce[0].toLowerCase()),ve+ce[0].length):-1}function x(W,q,ve){var ce=h.exec(q.slice(ve));return ce?(W.w=p.get(ce[0].toLowerCase()),ve+ce[0].length):-1}function A(W,q,ve){var ce=f.exec(q.slice(ve));return ce?(W.w=d.get(ce[0].toLowerCase()),ve+ce[0].length):-1}function C(W,q,ve){var ce=y.exec(q.slice(ve));return ce?(W.m=b.get(ce[0].toLowerCase()),ve+ce[0].length):-1}function I(W,q,ve){var ce=g.exec(q.slice(ve));return ce?(W.m=m.get(ce[0].toLowerCase()),ve+ce[0].length):-1}function L(W,q,ve){return O(W,t,q,ve)}function k(W,q,ve){return O(W,n,q,ve)}function M(W,q,ve){return O(W,i,q,ve)}function N(W){return a[W.getDay()]}function R(W){return s[W.getDay()]}function T(W){return l[W.getMonth()]}function z(W){return o[W.getMonth()]}function Y(W){return r[+(W.getHours()>=12)]}function H(W){return 1+~~(W.getMonth()/3)}function oe(W){return a[W.getUTCDay()]}function _e(W){return s[W.getUTCDay()]}function re(W){return l[W.getUTCMonth()]}function pe(W){return o[W.getUTCMonth()]}function Oe(W){return r[+(W.getUTCHours()>=12)]}function Re(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var q=E(W+="",v);return q.toString=function(){return W},q},parse:function(W){var q=w(W+="",!1);return q.toString=function(){return W},q},utcFormat:function(W){var q=E(W+="",_);return q.toString=function(){return W},q},utcParse:function(W){var q=w(W+="",!0);return q.toString=function(){return W},q}}}var d6={"-":"",_:" ",0:"0"},Zi=/^\s*\d+/,B0e=/^%/,j0e=/[\\^$*+?|[\]().{}]/g;function En(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function U0e(e){return e.replace(j0e,"\\$&")}function Cm(e){return new RegExp("^(?:"+e.map(U0e).join("|")+")","i")}function Im(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function z0e(e,t,n){var i=Zi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function V0e(e,t,n){var i=Zi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function $0e(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function H0e(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function W0e(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function h6(e,t,n){var i=Zi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function p6(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function q0e(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function G0e(e,t,n){var i=Zi.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function Y0e(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function g6(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function X0e(e,t,n){var i=Zi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function m6(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function K0e(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function J0e(e,t,n){var i=Zi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Q0e(e,t,n){var i=Zi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Z0e(e,t,n){var i=Zi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function e1e(e,t,n){var i=B0e.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function t1e(e,t,n){var i=Zi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function n1e(e,t,n){var i=Zi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function y6(e,t){return En(e.getDate(),t,2)}function i1e(e,t){return En(e.getHours(),t,2)}function r1e(e,t){return En(e.getHours()%12||12,t,2)}function s1e(e,t){return En(1+wc.count(Vc(e),e),t,3)}function uW(e,t){return En(e.getMilliseconds(),t,3)}function a1e(e,t){return uW(e,t)+"000"}function o1e(e,t){return En(e.getMonth()+1,t,2)}function l1e(e,t){return En(e.getMinutes(),t,2)}function u1e(e,t){return En(e.getSeconds(),t,2)}function c1e(e){var t=e.getDay();return t===0?7:t}function f1e(e,t){return En(Hg.count(Vc(e)-1,e),t,2)}function cW(e){var t=e.getDay();return t>=4||t===0?Qp(e):Qp.ceil(e)}function d1e(e,t){return e=cW(e),En(Qp.count(Vc(e),e)+(Vc(e).getDay()===4),t,2)}function h1e(e){return e.getDay()}function p1e(e,t){return En(m_.count(Vc(e)-1,e),t,2)}function g1e(e,t){return En(e.getFullYear()%100,t,2)}function m1e(e,t){return e=cW(e),En(e.getFullYear()%100,t,2)}function y1e(e,t){return En(e.getFullYear()%1e4,t,4)}function b1e(e,t){var n=e.getDay();return e=n>=4||n===0?Qp(e):Qp.ceil(e),En(e.getFullYear()%1e4,t,4)}function v1e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+En(t/60|0,"0",2)+En(t%60,"0",2)}function b6(e,t){return En(e.getUTCDate(),t,2)}function _1e(e,t){return En(e.getUTCHours(),t,2)}function w1e(e,t){return En(e.getUTCHours()%12||12,t,2)}function S1e(e,t){return En(1+Sc.count($c(e),e),t,3)}function fW(e,t){return En(e.getUTCMilliseconds(),t,3)}function E1e(e,t){return fW(e,t)+"000"}function A1e(e,t){return En(e.getUTCMonth()+1,t,2)}function O1e(e,t){return En(e.getUTCMinutes(),t,2)}function C1e(e,t){return En(e.getUTCSeconds(),t,2)}function I1e(e){var t=e.getUTCDay();return t===0?7:t}function x1e(e,t){return En(Wg.count($c(e)-1,e),t,2)}function dW(e){var t=e.getUTCDay();return t>=4||t===0?Zp(e):Zp.ceil(e)}function T1e(e,t){return e=dW(e),En(Zp.count($c(e),e)+($c(e).getUTCDay()===4),t,2)}function k1e(e){return e.getUTCDay()}function M1e(e,t){return En(b_.count($c(e)-1,e),t,2)}function D1e(e,t){return En(e.getUTCFullYear()%100,t,2)}function R1e(e,t){return e=dW(e),En(e.getUTCFullYear()%100,t,2)}function L1e(e,t){return En(e.getUTCFullYear()%1e4,t,4)}function N1e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Zp(e):Zp.ceil(e),En(e.getUTCFullYear()%1e4,t,4)}function F1e(){return"+0000"}function v6(){return"%"}function _6(e){return+e}function w6(e){return Math.floor(+e/1e3)}var Ph,o3,hW,l3,pW;P1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function P1e(e){return Ph=lW(e),o3=Ph.format,hW=Ph.parse,l3=Ph.utcFormat,pW=Ph.utcParse,Ph}function t0(e){const t={};return n=>t[n]||(t[n]=e(n))}function B1e(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let s=j1e(i,r);const a=s<i.length?i.slice(s):"";for(;--s>r;)if(i[s]!=="0"){++s;break}return i.slice(0,s)+a}}function j1e(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function gW(e){const t=t0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Vd(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return B1e(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,s,a){a=Vd(a??",f");const o=zc(i,r,s),l=Math.max(Math.abs(i),Math.abs(r));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=MH(o,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=DH(o,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=kH(o))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let KC;mW();function mW(){return KC=gW({format:Tw,formatPrefix:Xk})}function yW(e){return gW(TH(e))}function __(e){return arguments.length?KC=yW(e):KC}function S6(e,t,n){n=n||{},Ye(n)||he("Invalid time multi-format specifier: ".concat(n));const i=t(Ea),r=t(Qs),s=t(Js),a=t(As),o=t(Fi),l=t(Or),u=t(Es),c=t(sr),f=e(n[go]||".%L"),d=e(n[Ea]||":%S"),h=e(n[Qs]||"%I:%M"),p=e(n[Js]||"%I %p"),g=e(n[As]||n[_r]||"%a %d"),m=e(n[Fi]||"%b %d"),y=e(n[Or]||"%B"),b=e(n[Es]||"%B"),v=e(n[sr]||"%Y");return _=>(i(_)<_?f:r(_)<_?d:s(_)<_?h:a(_)<_?p:l(_)<_?o(_)<_?g:m:c(_)<_?u(_)<_?y:b:v)(_)}function bW(e){const t=t0(e.format),n=t0(e.utcFormat);return{timeFormat:i=>Fe(i)?t(i):S6(t,qg,i),utcFormat:i=>Fe(i)?n(i):S6(n,Gg,i),timeParse:t0(e.parse),utcParse:t0(e.utcParse)}}let JC;vW();function vW(){return JC=bW({format:o3,parse:hW,utcFormat:l3,utcParse:pW})}function _W(e){return bW(lW(e))}function X0(e){return arguments.length?JC=_W(e):JC}const QC=(e,t)=>$t({},e,t);function wW(e,t){const n=e?yW(e):__(),i=t?_W(t):X0();return QC(n,i)}function u3(e,t){const n=arguments.length;return n&&n!==2&&he("defaultLocale expects either zero or two arguments."),n?QC(__(e),X0(t)):QC(__(),X0())}function U1e(){return mW(),vW(),u3()}const z1e=/^(data:|([A-Za-z]+:)?\/\/)/,V1e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,$1e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,E6="file://";function H1e(e,t){return n=>({options:n||{},sanitize:q1e,load:W1e,fileAccess:!!t,file:G1e(t),http:X1e(e)})}async function W1e(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function q1e(e,t){t=$t({},this.options,t);const n=this.fileAccess,i={href:null};let r,s,a;const o=V1e.test(e.replace($1e,""));(e==null||typeof e!="string"||!o)&&he("Sanitize failure, invalid URI: "+ke(e));const l=z1e.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),s=(r=e.startsWith(E6))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(E6.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!s}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function G1e(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,s)=>{r?i(r):n(s)})}):Y1e}async function Y1e(){he("No file system access.")}function X1e(e){return e?async function(t,n){const i=$t({},this.options.http,n),r=n&&n.response,s=await e(t,i);return s.ok?Ht(s[r])?s[r]():s.text():he(s.status+""+s.statusText)}:K1e}async function K1e(){he("No HTTP fetch method available.")}const J1e=e=>e!=null&&e===e,Q1e=e=>e==="true"||e==="false"||e===!0||e===!1,Z1e=e=>!Number.isNaN(Date.parse(e)),SW=e=>!Number.isNaN(+e)&&!(e instanceof Date),eye=e=>SW(e)&&Number.isInteger(+e),ZC={boolean:Wk,integer:wr,number:wr,date:qk,string:Gk,unknown:Tr},eb=[Q1e,eye,SW,Z1e],tye=["boolean","integer","number","date"];function EW(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=eb.length,r=eb.map((s,a)=>a+1);for(let s=0,a=0,o,l;s<n;++s)for(l=t?e[s][t]:e[s],o=0;o<i;++o)if(r[o]&&J1e(l)&&!eb[o](l)&&(r[o]=0,++a,a===eb.length))return"string";return tye[r.reduce((s,a)=>s===0?a:s,0)-1]}function AW(e,t){return t.reduce((n,i)=>(n[i]=EW(e,i),n),{})}function A6(e){const t=function(n,i){const r={delimiter:e};return c3(n,i?$t(i,r):r)};return t.responseType="text",t}function c3(e,t){return t.header&&(e=t.header.map(ke).join(t.delimiter)+`
`+e),zme(t.delimiter).parse(e+"")}c3.responseType="text";function nye(e){return typeof Buffer=="function"&&Ht(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function f3(e,t){const n=t&&t.property?Ss(t.property):Tr;return Ye(e)&&!nye(e)?iye(n(e),t):n(JSON.parse(e))}f3.responseType="json";function iye(e,t){return!ge(e)&&cH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const rye={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function OW(e,t){let n,i,r,s;return e=f3(e,t),t&&t.feature?(n=Wme,r=t.feature):t&&t.mesh?(n=Gme,r=t.mesh,s=rye[t.filter]):he("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,s):he("Invalid TopoJSON object: "+r),i&&i.features||[i]}OW.responseType="json";const Jb={dsv:c3,csv:A6(","),tsv:A6("	"),json:f3,topojson:OW};function d3(e,t){return arguments.length>1?(Jb[e]=t,this):at(Jb,e)?Jb[e]:null}function CW(e){const t=d3(e);return t&&t.responseType||"text"}function IW(e,t,n,i){t=t||{};const r=d3(t.type||"json");return r||he("Unknown data format type: "+t.type),e=r(e,t),t.parse&&sye(e,t.parse,n,i),at(e,"columns")&&delete e.columns,e}function sye(e,t,n,i){if(!e.length)return;const r=X0();n=n||r.timeParse,i=i||r.utcParse;let s=e.columns||Object.keys(e[0]),a,o,l,u,c,f;t==="auto"&&(t=AW(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?i:n)(m);if(!ZC[p])throw Error("Illegal format pattern: "+h+":"+p);return ZC[p]});for(l=0,c=e.length,f=s.length;l<c;++l)for(a=e[l],u=0;u<f;++u)o=s[u],a[o]=d[u](a[o])}const Mw=H1e(typeof fetch<"u"&&fetch,null);function Dw(e){const t=e||Tr,n=[],i={};return n.add=r=>{const s=t(r);return i[s]||(i[s]=1,n.push(r)),n},n.remove=r=>{const s=t(r);if(i[s]){i[s]=0;const a=n.indexOf(r);a>=0&&n.splice(a,1)}return n},n}async function Qb(e,t){try{await t(e)}catch(n){e.error(n)}}const xW=Symbol("vega_id");let aye=1;function Rw(e){return!!(e&&lt(e))}function lt(e){return e[xW]}function TW(e,t){return e[xW]=t,e}function xn(e){const t=e===Object(e)?e:{data:e};return lt(t)?t:TW(t,aye++)}function h3(e){return Lw(e,xn({}))}function Lw(e,t){for(const n in e)t[n]=e[n];return t}function kW(e,t){return TW(t,lt(e))}function yh(e,t){return e?t?(n,i)=>e(n,i)||lt(t(n))-lt(t(i)):(n,i)=>e(n,i)||lt(n)-lt(i):null}function MW(e){return e&&e.constructor===bh}function bh(){const e=[],t=[],n=[],i=[],r=[];let s=null,a=!1;return{constructor:bh,insert(o){const l=Pe(o),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(o){const l=Ht(o)?i:t,u=Pe(o),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(o,l,u){const c={field:l,value:kr(u)};return Ht(o)?(c.filter=o,r.push(c)):(c.tuple=o,n.push(c)),this},encode(o,l){return Ht(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return s=o,this},reflow(){return a=!0,this},pulse(o,l){const u={},c={};let f,d,h,p,g,m;for(f=0,d=l.length;f<d;++f)u[lt(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[lt(g)]=-1;for(f=0,d=i.length;f<d;++f)p=i[f],l.forEach(b=>{p(b)&&(u[lt(b)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=lt(g),u[m]?u[m]=1:o.add.push(xn(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[lt(g)]<0&&o.rem.push(g);function y(b,v,_){_?b[v]=_(b):o.encode=v,a||(c[lt(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=u[lt(g)],m>0&&(y(g,p,h.value),o.modifies(p));for(f=0,d=r.length;f<d;++f)h=r[f],p=h.filter,l.forEach(b=>{p(b)&&u[lt(b)]>0&&y(b,h.field,h.value)}),o.modifies(h.field);if(a)o.mod=t.length||i.length?l.filter(b=>u[lt(b)]>0):l.slice();else for(m in c)o.mod.push(c[m]);return(s||s==null&&(t.length||i.length))&&o.clean(!0),o}}}const Zb="_:mod:_";function Nw(){Object.defineProperty(this,Zb,{writable:!0,value:{}})}Nw.prototype={set(e,t,n,i){const r=this,s=r[e],a=r[Zb];return t!=null&&t>=0?(s[t]!==n||i)&&(s[t]=n,a[t+":"+e]=-1,a[e]=-1):(s!==n||i)&&(r[e]=n,a[e]=ge(n)?1+n.length:-1),r},modified(e,t){const n=this[Zb];if(arguments.length){if(ge(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Zb]={},this}};let oye=0;const lye="pulse",uye=new Nw,cye=1,fye=2;function Hn(e,t,n,i){this.id=++oye,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function O6(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Hn.prototype={targets(){return this._targets||(this._targets=Dw(V1))},set(e){return this.value!==e?(this.value=e,1):0},skip:O6(cye),modified:O6(fye),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Nw,r=this._argops=this._argops||[],s=[];let a,o,l,u;const c=(f,d,h)=>{h instanceof Hn?(h!==this&&(t&&h.targets().add(this),s.push(h)),r.push({op:h,name:f,index:d})):i.set(f,d,h)};for(a in e)if(o=e[a],a===lye)Pe(o).forEach(f=>{f instanceof Hn?f!==this&&(f.targets().add(this),s.push(f)):he("Pulse parameters must be operator instances.")}),this.source=o;else if(ge(o))for(i.set(a,-1,Array(l=o.length)),u=0;u<l;++u)c(a,u,o[u]);else c(a,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),s},marshall(e){const t=this._argval||uye,n=this._argops;let i,r,s,a;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],s=i.op,a=s.modified()&&s.stamp===e,t.set(i.name,i.index,s.value,a);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function dye(e,t,n,i){let r=1,s;return e instanceof Hn?s=e:e&&e.prototype instanceof Hn?s=new e:Ht(e)?s=new Hn(null,e):(r=0,s=new Hn(e,t)),this.rank(s),r&&(i=n,n=t),n&&this.connect(s,s.parameters(n,i)),this.touch(s),s}function hye(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let pye=0;function Fw(e,t,n){this.id=++pye,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Gu(e,t,n){return new Fw(e,t,n)}Fw.prototype={_filter:Sa,_apply:Tr,targets(){return this._targets||(this._targets=Dw(V1))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Gu(e);return this.targets().add(t),t},apply(e){const t=Gu(null,e);return this.targets().add(t),t},merge(){const e=Gu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Gu();return this.targets().add(Gu(null,null,$k(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Gu(null,null,()=>n=!0)),t.targets().add(Gu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Sa,this._targets=null}};function gye(e,t,n,i){const r=this,s=Gu(n,i),a=function(u){u.dataflow=r;try{s.receive(u)}catch(c){r.error(c)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Pe(e);const l=o.length;for(let u=0;u<l;++u)o[u].addEventListener(t,a);return s}function mye(e,t){const n=this.locale();return IW(e,t,n.timeParse,n.utcParse)}function yye(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function bye(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:CW(t&&t.type)});try{r=n.parse(r,t)}catch(s){i=-2,n.warn("Data ingestion failed",e,s)}}catch(s){i=-1,n.warn("Loading failed",e,s)}return{data:r,status:i}}async function vye(e,t,n){const i=this,r=i._pending||_ye(i);r.requests+=1;const s=await i.request(t,n);return i.pulse(e,i.changeset().remove(Sa).insert(s.data||[])),r.done(),s}function _ye(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const wye={skip:!0};function Sye(e,t,n,i,r){return(e instanceof Hn?Aye:Eye)(this,e,t,n,i,r),this}function Eye(e,t,n,i,r,s){const a=$t({},s,wye);let o,l;Ht(n)||(n=kr(n)),i===void 0?o=u=>e.touch(n(u)):Ht(i)?(l=new Hn(null,i,r,!1),o=u=>{l.evaluate(u);const c=n(u),f=l.value;MW(f)?e.pulse(c,f,s):e.update(c,f,a)}):o=u=>e.update(n(u),i,a),t.apply(o)}function Aye(e,t,n,i,r,s){if(i===void 0)t.targets().add(n);else{const a=s||{},o=new Hn(null,Oye(n,i),r,!1);o.modified(a.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function Oye(e,t){return t=Ht(t)?t:kr(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function Cye(e){e.rank=++this._rank}function Iye(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&he("Cycle detected in dataflow graph.")}const w_={},Bo=1<<0,Qu=1<<1,Gl=1<<2,xye=Bo|Qu,C6=Bo|Gl,Bh=Bo|Qu|Gl,I6=1<<3,xm=1<<4,x6=1<<5,T6=1<<6;function Ec(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function LA(e,t){const n=[];return Ju(e,t,i=>n.push(i)),n}function k6(e,t){const n={};return e.visit(t,i=>{n[lt(i)]=1}),i=>n[lt(i)]?null:i}function tb(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}Ec.prototype={StopPropagation:w_,ADD:Bo,REM:Qu,MOD:Gl,ADD_REM:xye,ADD_MOD:C6,ALL:Bh,REFLOW:I6,SOURCE:xm,NO_SOURCE:x6,NO_FIELDS:T6,fork(e){return new Ec(this.dataflow).init(this,e)},clone(){const e=this.fork(Bh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Bh|xm)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ec(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&T6)&&(n.fields=e.fields),t&Bo?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Qu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Gl?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&x6?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Bh;return t&Bo&&this.add.length||t&Qu&&this.rem.length||t&Gl&&this.mod.length},reflow(e){if(e)return this.fork(Bh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Gl,k6(this,Bo))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ge(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ge(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Bo&&(n.addF=tb(n.addF,t)),e&Qu&&(n.remF=tb(n.remF,t)),e&Gl&&(n.modF=tb(n.modF,t)),e&xm&&(n.srcF=tb(n.srcF,t)),n},materialize(e){e=e||Bh;const t=this;return e&Bo&&t.addF&&(t.add=LA(t.add,t.addF),t.addF=null),e&Qu&&t.remF&&(t.rem=LA(t.rem,t.remF),t.remF=null),e&Gl&&t.modF&&(t.mod=LA(t.mod,t.modF),t.modF=null),e&xm&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&xm)return Ju(n.source,n.srcF,i),n;e&Bo&&Ju(n.add,n.addF,i),e&Qu&&Ju(n.rem,n.remF,i),e&Gl&&Ju(n.mod,n.modF,i);const r=n.source;if(e&I6&&r){const s=n.add.length+n.mod.length;s===r.length||(s?Ju(r,k6(n,C6),i):Ju(r,n.srcF,i))}return n}};function p3(e,t,n,i){const r=this,s=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(let o=0;o<s;++o){const l=n[o];if(l.stamp===t){if(l.fields){const u=r.fields||(r.fields={});for(const c in l.fields)u[c]=1}l.changed(r.ADD)&&(a|=r.ADD),l.changed(r.REM)&&(a|=r.REM),l.changed(r.MOD)&&(a|=r.MOD)}}this.changes=a}Te(p3,Ec,{fork(e){const t=new Ec(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ge(e)?e.some(i=>n[i]):n[e]:0},filter(){he("MultiPulse does not support filtering.")},materialize(){he("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let s=0;if(e&n.SOURCE)for(;s<r;++s)i[s].visit(e,t);else for(;s<r;++s)i[s].stamp===n.stamp&&i[s].visit(e,t);return n}});async function Tye(e,t,n){const i=this,r=[];if(i._pulse)return DW(i);if(i._pending&&await i._pending,t&&await Qb(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const s=++i._clock;i._pulse=new Ec(i,s,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=Dw(V1);let a=0,o,l,u;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=w_),l!==w_&&o._targets&&o._targets.forEach(c=>i._enqueue(c)),++a}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${s}: ${a} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((f,d)=>d.priority-f.priority);i._postrun=[];for(let f=0;f<c.length;++f)await Qb(i,c[f].callback)}return n&&await Qb(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(f=>{try{f(i)}catch(d){i.error(d)}})})),i}async function kye(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Mye(e,t,n){return this._pulse?DW(this):(this.evaluate(e,t,n),this)}function Dye(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function DW(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Rye(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Lye(e,t){const n=e.source,i=this._clock;return n&&ge(n)?new p3(this,i,n.map(r=>r.pulse),t):this._input[e.id]||Nye(this._pulse,n&&n.pulse)}function Nye(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==w_&&(e.source=t.source),e)}const g3={skip:!1,force:!1};function Fye(e,t){const n=t||g3;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Pye(e,t,n){const i=n||g3;return(e.set(t)||i.force)&&this.touch(e,i),this}function Bye(e,t,n){this.touch(e,n||g3);const i=new Ec(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function jye(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),RW(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,Uye(t,0,e)):i=n,i}}}function RW(e,t,n,i){let r,s;const a=e[n];for(;n>t;){if(s=n-1>>1,r=e[s],i(a,r)<0){e[n]=r,n=s;continue}break}return e[n]=a}function Uye(e,t,n){const i=t,r=e.length,s=e[t];let a=(t<<1)+1,o;for(;a<r;)o=a+1,o<r&&n(e[a],e[o])>=0&&(a=o),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=s,RW(e,i,t,n)}function Sp(){this.logger(Bk()),this.logLevel(Fk),this._clock=0,this._rank=0,this._locale=u3();try{this._loader=Mw()}catch{}this._touched=Dw(V1),this._input={},this._pulse=null,this._heap=jye((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Tm(e){return function(){return this._log[e].apply(this,arguments)}}Sp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Tm("error"),warn:Tm("warn"),info:Tm("info"),debug:Tm("debug"),logLevel:Tm("level"),cleanThreshold:1e4,add:dye,connect:hye,rank:Cye,rerank:Iye,pulse:Bye,touch:Fye,update:Pye,changeset:bh,ingest:yye,parse:mye,preload:vye,request:bye,events:gye,on:Sye,evaluate:Tye,run:Mye,runAsync:kye,runAfter:Dye,_enqueue:Rye,_getPulse:Lye};function ue(e,t){Hn.call(this,e,null,t)}Te(ue,Hn,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const tg={};function LW(e){const t=NW(e);return t&&t.Definition||null}function NW(e){return e=e&&e.toLowerCase(),at(tg,e)?tg[e]:null}function*FW(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function m3(e,t,n){const i=Float64Array.from(FW(e,n));return i.sort(cu),t.map(r=>AH(i,r))}function y3(e,t){return m3(e,[.25,.5,.75],t)}function b3(e,t){const n=e.length,i=t0e(e,t),r=y3(e,t),s=(r[2]-r[0])/1.34,a=Math.min(i,s)||i||Math.abs(r[0])||1;return 1.06*a*Math.pow(n,-.2)}function PW(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let s=e.extent[0],a=e.extent[1],o,l,u,c,f,d;const h=e.span||a-s||Math.abs(s)||1;if(e.step)o=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);o=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,o=Math.max(u,Math.pow(n,Math.round(Math.log(h)/i)-l));Math.ceil(h/o)>t;)o*=n;for(f=0,d=r.length;f<d;++f)c=o/r[f],c>=u&&h/c<=t&&(o=c)}c=Math.log(o);const p=c>=0?0:~~(-c/i)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/o+g)*o,s=s<c?c-o:c,a=Math.ceil(a/o)*o),{start:s,stop:a===s?s+o:a,step:o}}var Aa=Math.random;function zye(e){Aa=e}function BW(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(FW(e,i)),s=r.length,a=t;let o,l,u,c;for(u=0,c=Array(a);u<a;++u){for(o=0,l=0;l<s;++l)o+=r[~~(Aa()*s)];c[u]=o/s}return c.sort(cu),[HC(c,n/2),HC(c,1-n/2)]}function jW(e,t,n,i){i=i||(d=>d);const r=e.length,s=new Float64Array(r);let a=0,o=1,l=i(e[0]),u=l,c=l+t,f;for(;o<r;++o){if(f=i(e[o]),f>=c){for(u=(l+u)/2;a<o;++a)s[a]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;a<o;++a)s[a]=u;return n?Vye(s,t+t/4):s}function Vye(e,t){const n=e.length;let i=0,r=1,s,a;for(;e[i]===e[r];)++r;for(;r<n;){for(s=r+1;e[r]===e[s];)++s;if(e[r]-e[r-1]<t){for(a=r+(i+s-r-r>>1);a<r;)e[a++]=e[r];for(;a>r;)e[a--]=e[i]}i=r,r=s}return e}function $ye(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Hye(e,t){t==null&&(t=e,e=0);let n,i,r;const s={min(a){return arguments.length?(n=a||0,r=i-n,s):n},max(a){return arguments.length?(i=a||0,r=i-n,s):i},sample(){return n+Math.floor(r*Aa())},pdf(a){return a===Math.floor(a)&&a>=n&&a<i?1/r:0},cdf(a){const o=Math.floor(a);return o<n?0:o>=i?1:(o-n+1)/r},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*r):NaN}};return s.min(e).max(t)}const UW=Math.sqrt(2*Math.PI),Wye=Math.SQRT2;let km=NaN;function Pw(e,t){e=e||0,t=t??1;let n=0,i=0,r,s;if(km===km)n=km,km=NaN;else{do n=Aa()*2-1,i=Aa()*2-1,r=n*n+i*i;while(r===0||r>1);s=Math.sqrt(-2*Math.log(r)/r),n*=s,km=i*s}return e+n*t}function v3(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*UW)}function Bw(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let s;if(r>37)s=0;else{const a=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,s=a*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,s=s/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,s=a/o/2.506628274631)}return i>0?1-s:s}function jw(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Wye*qye(2*e-1)}function qye(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function _3(e,t){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s??1,r):i},sample:()=>Pw(n,i),pdf:s=>v3(s,n,i),cdf:s=>Bw(s,n,i),icdf:s=>jw(s,n,i)};return r.mean(e).stdev(t)}function w3(e,t){const n=_3();let i=0;const r={data(s){return arguments.length?(e=s,i=s?s.length:0,r.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=b3(e)),r):t},sample(){return e[~~(Aa()*i)]+t*n.sample()},pdf(s){let a=0,o=0;for(;o<i;++o)a+=n.pdf((s-e[o])/t);return a/t/i},cdf(s){let a=0,o=0;for(;o<i;++o)a+=n.cdf((s-e[o])/t);return a/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function S3(e,t){return e=e||0,t=t??1,Math.exp(e+Pw()*t)}function E3(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*UW*e)}function A3(e,t,n){return Bw(Math.log(e),t,n)}function O3(e,t,n){return Math.exp(jw(e,t,n))}function zW(e,t){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s??1,r):i},sample:()=>S3(n,i),pdf:s=>E3(s,n,i),cdf:s=>A3(s,n,i),icdf:s=>O3(s,n,i)};return r.mean(e).stdev(t)}function VW(e,t){let n=0,i;function r(a){const o=[];let l=0,u;for(u=0;u<n;++u)l+=o[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)o[u]/=l;return o}const s={weights(a){return arguments.length?(i=r(t=a||[]),s):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),s.weights(t)):e},sample(){const a=Aa();let o=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(a<l){o=e[u];break}return o.sample()},pdf(a){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(a);return o},cdf(a){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(a);return o},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function C3(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Aa()}function I3(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function x3(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function T3(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function $W(e,t){let n,i;const r={min(s){return arguments.length?(n=s||0,r):n},max(s){return arguments.length?(i=s??1,r):i},sample:()=>C3(n,i),pdf:s=>I3(s,n,i),cdf:s=>x3(s,n,i),icdf:s=>T3(s,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function q1(e,t,n,i){const r=i-e*e,s=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-s*e,s]}function Uw(e,t,n,i){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),i&&e.sort((h,p)=>t(h)-t(p));const r=e.length,s=new Float64Array(r),a=new Float64Array(r);let o=0,l=0,u=0,c,f,d;for(d of e)s[o]=c=+t(d),a[o]=f=+n(d),++o,l+=(c-l)/o,u+=(f-u)/o;for(o=0;o<r;++o)s[o]-=l,a[o]-=u;return[s,a,l,u]}function G1(e,t,n,i){let r=-1,s,a;for(const o of e)s=t(o),a=n(o),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&i(s,a,++r)}function Yg(e,t,n,i,r){let s=0,a=0;return G1(e,t,n,(o,l)=>{const u=l-r(o),c=l-i;s+=u*u,a+=c*c}),1-s/a}function k3(e,t,n){let i=0,r=0,s=0,a=0,o=0;G1(e,t,n,(c,f)=>{++o,i+=(c-i)/o,r+=(f-r)/o,s+=(c*f-s)/o,a+=(c*c-a)/o});const l=q1(i,r,s,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Yg(e,t,n,r,u)}}function HW(e,t,n){let i=0,r=0,s=0,a=0,o=0;G1(e,t,n,(c,f)=>{++o,c=Math.log(c),i+=(c-i)/o,r+=(f-r)/o,s+=(c*f-s)/o,a+=(c*c-a)/o});const l=q1(i,r,s,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Yg(e,t,n,r,u)}}function WW(e,t,n){const[i,r,s,a]=Uw(e,t,n);let o=0,l=0,u=0,c=0,f=0,d,h,p;G1(e,t,n,(b,v)=>{d=i[f++],h=Math.log(v),p=d*v,o+=(v*h-o)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,m]=q1(l/a,o/a,u/a,c/a),y=b=>Math.exp(g+m*(b-s));return{coef:[Math.exp(g-m*s),m],predict:y,rSquared:Yg(e,t,n,a,y)}}function qW(e,t,n){let i=0,r=0,s=0,a=0,o=0,l=0;G1(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,i+=(h-i)/l,r+=(p-r)/l,s+=(h*p-s)/l,a+=(h*h-a)/l,o+=(d-o)/l});const u=q1(i,r,s,a),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Yg(e,t,n,o,c)}}function M3(e,t,n){const[i,r,s,a]=Uw(e,t,n),o=i.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<o;)p=i[h],g=r[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-l*l,b=l*y-u*u,v=(d*l-f*u)/b,_=(f*y-d*u)/b,S=-v*l,E=w=>(w=w-s,v*w*w+_*w+S+a);return{coef:[S-_*s+v*s*s+a,_-2*v*s,v],predict:E,rSquared:Yg(e,t,n,a,E)}}function GW(e,t,n,i){if(i===1)return k3(e,t,n);if(i===2)return M3(e,t,n);const[r,s,a,o]=Uw(e,t,n),l=r.length,u=[],c=[],f=i+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],d)*s[p];for(u.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],d+h);m[h]=g}c.push(m)}c.push(u);const y=Yye(c),b=v=>{v-=a;let _=o+y[0]+y[1]*v+y[2]*v*v;for(d=3;d<f;++d)_+=y[d]*Math.pow(v,d);return _};return{coef:Gye(f,y,-a,o),predict:b,rSquared:Yg(e,t,n,o,b)}}function Gye(e,t,n,i){const r=Array(e);let s,a,o,l;for(s=0;s<e;++s)r[s]=0;for(s=e-1;s>=0;--s)for(o=t[s],l=1,r[s]+=o,a=1;a<=s;++a)l*=(s+1-a)/a,r[s-a]+=o*Math.pow(n,a)*l;return r[0]+=i,r}function Yye(e){const t=e.length-1,n=[];let i,r,s,a,o;for(i=0;i<t;++i){for(a=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][a])&&(a=r);for(s=i;s<t+1;++s)o=e[s][i],e[s][i]=e[s][a],e[s][a]=o;for(r=i+1;r<t;++r)for(s=t;s>=i;s--)e[s][r]-=e[s][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,s=r+1;s<t;++s)o+=e[s][r]*n[s];n[r]=(e[t][r]-o)/e[r][r]}return n}const M6=2,D6=1e-12;function YW(e,t,n,i){const[r,s,a,o]=Uw(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=M6;){const p=[0,u-1];for(let m=0;m<l;++m){const y=r[m],b=p[0],v=p[1],_=y-r[b]>r[v]-y?b:v;let S=0,E=0,w=0,O=0,D=0;const x=1/Math.abs(r[_]-y||1);for(let I=b;I<=v;++I){const L=r[I],k=s[I],M=Xye(Math.abs(y-L)*x)*d[I],N=L*M;S+=M,E+=N,w+=k*M,O+=k*N,D+=L*N}const[A,C]=q1(E/S,w/S,O/S,D/S);c[m]=A+C*y,f[m]=Math.abs(s[m]-c[m]),Kye(r,m+1,p)}if(h===M6)break;const g=OH(f);if(Math.abs(g)<D6)break;for(let m=0,y,b;m<l;++m)y=f[m]/(6*g),d[m]=y>=1?D6:(b=1-y*y)*b}return Jye(r,c,a,o)}function Xye(e){return(e=1-e*e*e)*e*e}function Kye(e,t,n){const i=e[t];let r=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>r&&e[s]-i<=i-e[r];)n[0]=++r,n[1]=s,++s}function Jye(e,t,n,i){const r=e.length,s=[];let a=0,o=0,l=[],u;for(;a<r;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++o:(o=0,l[1]+=i,l=[u,t[a]],s.push(l));return l[1]+=i,s}const Qye=.5*Math.PI/180;function zw(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=g=>[g,e(g)],s=t[0],a=t[1],o=a-s,l=o/i,u=[r(s)],c=[];if(n===i){for(let g=1;g<i;++g)u.push(r(s+g/n*o));return u.push(r(a)),u}else{c.push(r(a));for(let g=n;--g>0;)c.push(r(s+g/n*o))}let f=u[0],d=c[c.length-1];const h=1/o,p=Zye(f[1],c);for(;d;){const g=r((f[0]+d[0])/2);g[0]-f[0]>=l&&ebe(f,g,d,h,p)>Qye?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function Zye(e,t){let n=e,i=e;const r=t.length;for(let s=0;s<r;++s){const a=t[s][1];a<n&&(n=a),a>i&&(i=a)}return 1/(i-n)}function ebe(e,t,n,i,r){const s=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),a=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(s-a)}function tbe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function eI(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:tbe(e)}function XW(e,t,n){return n||e+(t?"_"+t:"")}const NA=()=>{},nbe={init:NA,add:NA,rem:NA,idx:0},K0={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},Y1=Object.keys(K0);function ibe(e,t){return n=>$t({name:e,out:n||e},nbe,t)}Y1.forEach(e=>{K0[e]=ibe(e,K0[e])});function KW(e,t){return K0[e](t)}function JW(e,t){return e.idx-t.idx}function rbe(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{!i.req||i.req.forEach(r=>{t[r]||n(t[r]=K0[r]())})};return e.forEach(n),Object.values(t).sort(JW)}function sbe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function abe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function obe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function lbe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function QW(e,t){const n=t||Tr,i=rbe(e),r=e.slice().sort(JW);function s(a){this._ops=i,this._out=r,this.cell=a,this.init()}return s.prototype.init=sbe,s.prototype.add=abe,s.prototype.rem=obe,s.prototype.set=lbe,s.prototype.get=n,s.fields=e.map(a=>a.out),s}function D3(e){this._key=e?Ss(e):lt,this.reset()}const dr=D3.prototype;dr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};dr.add=function(e){this._add.push(e)};dr.rem=function(e){this._rem.push(e)};dr.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,s=Array(i-r),a={};let o,l,u;for(o=0;o<r;++o)a[n(t[o])]=1;for(o=0,l=0;o<i;++o)a[n(u=e[o])]?a[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};dr.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,s;for(;--i>=0;)s=e(t[i])+"",at(n,s)||(n[s]=1,++r);return r};dr.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=lH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};dr.argmin=function(e){return this.extent(e)[0]||{}};dr.argmax=function(e){return this.extent(e)[1]||{}};dr.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};dr.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};dr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=y3(this.values(),e),this._get=e),this._q};dr.q1=function(e){return this.quartile(e)[0]};dr.q2=function(e){return this.quartile(e)[1]};dr.q3=function(e){return this.quartile(e)[2]};dr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=BW(this.values(),1e3,.05,e),this._get=e),this._ci};dr.ci0=function(e){return this.ci(e)[0]};dr.ci1=function(e){return this.ci(e)[1]};function Hc(e){ue.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Hc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Y1},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Te(Hc,ue,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function s(o){let l,u,c,f;for(l in o)for(c=o[l].tuple,u=0;u<r;++u)i[u][f=c[n[u]]]=f}s(e._prev),s(t);function a(o,l,u){const c=n[u],f=i[u++];for(const d in f){const h=o?o+"|"+d:d;l[c]=f[d],u<r?a(h,l,u):t[h]||e.cell(h,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(m){const y=Pe(Ar(m)),b=y.length;let v=0,_;for(;v<b;++v)i[_=y[v]]||(i[_]=1,t.push(_))}this._dims=Pe(e.groupby),this._dnames=this._dims.map(m=>{const y=gi(m);return r(m),n.push(y),y}),this.cellkey=e.key?e.key:eI(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],a=e.ops||["count"],o=e.as||[],l=s.length,u={};let c,f,d,h,p,g;for(l!==a.length&&he("Unmatched number of fields and aggregate ops."),g=0;g<l;++g){if(c=s[g],f=a[g],c==null&&f!=="count"&&he("Null aggregate field specified."),h=gi(c),p=XW(f,h,o[g]),n.push(p),f==="count"){this._counts.push(p);continue}d=u[h],d||(r(c),d=u[h]=[],d.field=c,this._measures.push(d)),f!=="count"&&(this._countOnly=!1),d.push(KW(f,p))}return this._measures=this._measures.map(m=>QW(m,m.field)),{}},cellkey:eI(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let s=0;s<r;++s)n.agg[s]=new i[s](n)}return n.store&&(n.data=new D3),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,s={};for(let a=0;a<r;++a)s[n[a]]=i[a](e);return t?kW(t.tuple,s):xn(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,s=i.length;r<s;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,s=e.add,a=e.rem,o=e.mod;let l,u,c,f;if(i)for(u in i)l=i[u],(!r||l.num)&&a.push(l.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&r?a:o).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const ube=1e-14;function R3(e){ue.call(this,null,e)}R3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Te(R3,ue,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,s=i.step,a=e.as||["bin0","bin1"],o=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Ar(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=i(c);c[o]=f,c[l]=f==null?null:r+s*(1+(f-r)/s)}:c=>c[o]=i(c)),t.modifies(n?a:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=PW(e),i=n.step;let r=n.start,s=r+Math.ceil((n.stop-r)/i)*i,a,o;(a=e.anchor)!=null&&(o=a-(r+i*Math.floor((a-r)/i)),r+=o,s+=o);const l=function(u){let c=wr(t(u));return c==null?null:c<r?-1/0:c>s?1/0:(c=Math.max(r,Math.min(c,s-i)),r+i*Math.floor(ube+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Rs(l,Ar(t),e.name||"bin_"+gi(t))}});function ZW(e,t,n){const i=e;let r=t||[],s=n||[],a={},o=0;return{add:l=>s.push(l),remove:l=>a[i(l)]=++o,size:()=>r.length,data:(l,u)=>(o&&(r=r.filter(c=>!a[i(c)]),a={},o=0),u&&l&&r.sort(l),s.length&&(r=l?pH(l,r,s.sort(l)):r.concat(s),s=[]),r)}}function L3(e){ue.call(this,[],e)}L3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Te(L3,ue,{transform(e,t){const n=t.fork(t.ALL),i=ZW(lt,this.value,n.materialize(n.ADD).add),r=e.sort,s=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(s),this.value=n.source=i.data(yh(r),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function eq(e){Hn.call(this,null,cbe,e)}Te(eq,Hn);function cbe(e){return this.value&&!e.modified()?this.value:Vk(e.fields,e.orders)}function N3(e){ue.call(this,null,e)}N3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function fbe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Te(N3,ue,{transform(e,t){const n=f=>d=>{for(var h=fbe(o(d),e.case,s)||[],p,g=0,m=h.length;g<m;++g)a.test(p=h[g])||f(p)},i=this._parameterCheck(e,t),r=this._counts,s=this._match,a=this._stop,o=e.field,l=e.as||["text","count"],u=n(f=>r[f]=1+(r[f]||0)),c=n(f=>r[f]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],s=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,u;for(o in n)l=i[o],u=n[o]||0,!l&&u?(i[o]=l=xn({}),l[r]=o,l[s]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[o]=null,i[o]=null):l[s]!==u&&(l[s]=u,a.mod.push(l));return a.modifies(t)}});function F3(e){ue.call(this,null,e)}F3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Te(F3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],s=i[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return a?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=dbe(o,r,s,e.filter||Sa)):n.mod=o,n.source=this.value,n.modifies(i)}});function dbe(e,t,n,i){for(var r=[],s={},a=e.length,o=0,l,u;o<a;++o)for(s[t]=u=e[o],l=0;l<a;++l)s[n]=e[l],i(s)&&(r.push(xn(s)),s={},s[t]=u);return r}const R6={kde:w3,mixture:VW,normal:_3,lognormal:zW,uniform:$W},hbe="distributions",L6="function",pbe="field";function tq(e,t){const n=e[L6];at(R6,n)||he("Unknown distribution function: "+n);const i=R6[n]();for(const r in e)r===pbe?i.data((e.from||t()).map(e[r])):r===hbe?i[r](e[r].map(s=>tq(s,t))):typeof i[r]===L6&&i[r](e[r]);return i}function P3(e){ue.call(this,null,e)}const nq=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],gbe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:nq},{name:"weights",type:"number",array:!0}]};P3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:nq.concat(gbe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Te(P3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=tq(e.distribution,mbe(t)),r=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&he("Invalid density method: "+a),!e.extent&&!i.data&&he("Missing density extent parameter."),a=i[a];const o=e.as||["value","density"],l=e.extent||yl(i.data()),u=zw(a,l,r,s).map(c=>{const f={};return f[o[0]]=c[0],f[o[1]]=c[1],xn(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function mbe(e){return()=>e.materialize(e.SOURCE).source}function iq(e,t){return e?e.map((n,i)=>t[i]||gi(n)):null}function B3(e,t,n){const i=[],r=f=>f(l);let s,a,o,l,u,c;if(t==null)i.push(e.map(n));else for(s={},a=0,o=e.length;a<o;++a)l=e[a],u=t.map(r),c=s[u],c||(s[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}const rq="bin";function j3(e){ue.call(this,null,e)}j3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:rq}]};const ybe=(e,t)=>$1(yl(e,t))/30;Te(j3,ue,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=B3(t.source,e.groupby,Tr),r=e.smooth||!1,s=e.field,a=e.step||ybe(n,s),o=yh((p,g)=>s(p)-s(g)),l=e.as||rq,u=i.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=i[d].sort(o);h=-1;for(const g of jW(p,a,r,s))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:a},t.reflow(!0).modifies(l)}});function sq(e){Hn.call(this,null,bbe,e),this.modified(!0)}Te(sq,Hn);function bbe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Rs(n=>t(n,e),Ar(t),gi(t))}function U3(e){ue.call(this,[void 0,void 0],e)}U3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Te(U3,ue,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let s=n[0],a=n[1];if((r||s==null)&&(s=1/0,a=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=wr(i(o));l!=null&&(l<s&&(s=l),l>a&&(a=l))}),!Number.isFinite(s)||!Number.isFinite(a)){let o=gi(i);o&&(o=' for field "'.concat(o,'"')),t.dataflow.warn("Infinite extent".concat(o,": [").concat(s,", ").concat(a,"]")),s=a=void 0}this.value=[s,a]}});function z3(e,t){Hn.call(this,e),this.parent=t,this.count=0}Te(z3,Hn,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Vw(e){ue.call(this,{},e),this._keys=$g();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}Te(Vw,ue,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let s=at(r,e)&&r[e],a,o;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=i||(o=this._group[e])&&o.tuple,a=n.dataflow,s=new z3(n.fork(n.NO_SOURCE),this),a.add(s).connect(t(a,e,o)),r[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,s=this._keys,a=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=lt(l),c=s.get(u);c!==void 0&&(s.delete(u),o(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);s.set(lt(l),u),o(u).add(l)}),a||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=lt(l),c=s.get(u),f=i(l);c===f?o(f).mod(l):(s.set(u,f),o(c).rem(l),o(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(s.get(lt(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=lt(l),c=s.get(u),f=i(l);c!==f&&(s.set(u,f),o(c).rem(l),o(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function aq(e){Hn.call(this,null,vbe,e)}Te(aq,Hn);function vbe(e){return this.value&&!e.modified()?this.value:ge(e.name)?Pe(e.name).map(t=>Ss(t)):Ss(e.name,e.as)}function V3(e){ue.call(this,$g(),e)}V3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Te(V3,ue,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),s=r.add,a=r.rem,o=r.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=lt(f);i.has(d)?i.delete(d):a.push(f)}),t.visit(t.ADD,f=>{l(f,e)?s.push(f):i.set(lt(f),1)});function c(f){const d=lt(f),h=l(f,e),p=i.get(d);h&&p?(i.delete(d),s.push(f)):!h&&!p?(i.set(d,1),a.push(f)):u&&h&&!p&&o.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function $3(e){ue.call(this,[],e)}$3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Te($3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=iq(i,e.as||[]),s=e.index||null,a=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(p=>p(o)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=h3(o),f=0;f<a;++f)d[r[f]]=(h=l[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(r)}});function H3(e){ue.call(this,[],e)}H3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Te(H3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(gi),s=e.as||["key","value"],a=s[0],o=s[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=h3(u),f[a]=r[c],f[o]=i[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function W3(e){ue.call(this,null,e)}W3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Te(W3,ue,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),s=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(s,a=>a[i]=n(a,e))}});function oq(e){ue.call(this,[],e)}Te(oq,ue,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,s=e.size-r.length,a,o,l;if(s>0){for(a=[];--s>=0;)a.push(l=xn(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else o=r.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-s);return n.source=this.value=r,n}});const nb={value:"value",median:OH,mean:r0e,min:$C,max:Id},_be=[];function q3(e){ue.call(this,[],e)}q3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function wbe(e){var t=e.method||nb.value,n;if(nb[t]==null)he("Unrecognized imputation method: "+t);else return t===nb.value?(n=e.value!==void 0?e.value:0,()=>n):nb[t]}function Sbe(e){const t=e.field;return n=>n?t(n):NaN}Te(q3,ue,{transform(e,t){var n=t.fork(t.ALL),i=wbe(e),r=Sbe(e),s=gi(e.field),a=gi(e.key),o=(e.groupby||[]).map(gi),l=Ebe(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,m,y,b,v,_,S;for(m=0,v=l.length;m<v;++m)for(d=l[m],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(g=l.domain[b],S={_impute:!0},y=0,_=p.length;y<_;++y)S[o[y]]=p[y];S[a]=g,S[s]=Number.isNaN(h)?h=i(d,r):h,u.push(xn(S))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function Ebe(e,t,n,i){var r=y=>y(m),s=[],a=i?i.slice():[],o={},l={},u,c,f,d,h,p,g,m;for(a.forEach((y,b)=>o[y]=b+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=o[p]||(o[p]=a.push(p)),c=(u=t?t.map(r):_be)+"",(f=l[c])||(f=l[c]=[],s.push(f),f.values=u),f[h-1]=m;return s.domain=a,s}function G3(e){Hc.call(this,e)}G3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Y1},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Te(G3,Hc,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(r=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{$t(s,r[n.cellkey(s)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Y3(e){ue.call(this,null,e)}Y3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Te(Y3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=B3(i,e.groupby,e.field),s=(e.groupby||[]).map(gi),a=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&he("Invalid density method: "+o),e.resolve==="shared"&&(c||(c=yl(i,e.field)),f=d=e.steps||d),r.forEach(h=>{const p=w3(h,a)[o],g=e.counts?h.length:1,m=c||yl(h);zw(p,m,f,d).forEach(y=>{const b={};for(let v=0;v<s.length;++v)b[s[v]]=h.dims[v];b[l[0]]=y[0],b[l[1]]=y[1]*g,u.push(xn(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function lq(e){Hn.call(this,null,Abe,e)}Te(lq,Hn);function Abe(e){return this.value&&!e.modified()?this.value:Hk(e.fields,e.flat)}function uq(e){ue.call(this,[],e),this._pending=null}Te(uq,ue,{transform(e,t){const n=t.dataflow;return this._pending?FA(this,t,this._pending):Obe(e)?t.StopPropagation:e.values?FA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Pe(r.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(i=>FA(this,t,Pe(i.data)))}});function Obe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function FA(e,t,n){n.forEach(xn);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function X3(e){ue.call(this,{},e)}X3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Te(X3,ue,{transform(e,t){const n=e.fields,i=e.index,r=e.values,s=e.default==null?null:e.default,a=e.modified(),o=n.length;let l=a?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return r?(d=r.length,o>1&&!c&&he('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==o*d&&he('The "as" parameter has too few output field names.'),c=c||r.map(gi),f=function(p){for(var g=0,m=0,y,b;g<o;++g)if(b=i.get(n[g](p)),b==null)for(y=0;y<d;++y,++m)p[c[m]]=s;else for(y=0;y<d;++y,++m)p[c[m]]=r[y](b)}):(c||he("Missing output field names."),f=function(p){for(var g=0,m;g<o;++g)m=i.get(n[g](p)),p[c[g]]=m??s}),a?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function cq(e){Hn.call(this,null,Cbe,e)}Te(cq,Hn);function Cbe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,s,a;for(s=0;s<n;++s)a=t[s],a[0]<i&&(i=a[0]),a[1]>r&&(r=a[1]);return[i,r]}function fq(e){Hn.call(this,null,Ibe,e)}Te(fq,Hn);function Ibe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function dq(e){ue.call(this,null,e)}Te(dq,ue,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function K3(e){Hc.call(this,e)}K3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Y1,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Te(K3,Hc,{_transform:Hc.prototype.transform,transform(e,t){return this._transform(xbe(e,t),t)}});function xbe(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",s=Ar(n).concat(Ar(i)),a=kbe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>r),fields:a.map(o=>Tbe(o,n,i,s)),as:a.map(o=>o+""),modified:e.modified.bind(e)}}function Tbe(e,t,n,i){return Rs(r=>t(r)===e?n(r):NaN,i,e+"")}function kbe(e,t,n){const i={},r=[];return n.visit(n.SOURCE,s=>{const a=e(s);i[a]||(i[a]=1,r.push(a))}),r.sort(xw),t?r.slice(0,t):r}function hq(e){Vw.call(this,e)}Te(hq,Vw,{transform(e,t){const n=e.subflow,i=e.field,r=s=>this.subflow(lt(s),n,t,s);return(e.modified("field")||i&&t.modified(Ar(i)))&&he("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,s=>{const a=r(s);i(s).forEach(o=>a.mod(o))}),t.visit(t.ADD,s=>{const a=r(s);i(s).forEach(o=>a.add(xn(o)))}),t.visit(t.REM,s=>{const a=r(s);i(s).forEach(o=>a.rem(o))})):(t.visit(t.MOD,s=>r(s).mod(s)),t.visit(t.ADD,s=>r(s).add(s)),t.visit(t.REM,s=>r(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function J3(e){ue.call(this,null,e)}J3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Te(J3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=iq(e.fields,e.as||[]),s=i?(o,l)=>Mbe(o,l,i,r):Lw;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,o=>{const l=lt(o);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,o=>{const l=s(o,xn({}));a[lt(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(s(o,a[lt(o)]))}),n}});function Mbe(e,t,n,i){for(let r=0,s=n.length;r<s;++r)t[i[r]]=n[r](e);return t}function pq(e){ue.call(this,null,e)}Te(pq,ue,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Q3(e){ue.call(this,null,e)}Q3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Dbe=1e-14;Te(Q3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,s=B3(r,e.groupby,e.field),a=(e.groupby||[]).map(gi),o=[],l=e.step||.01,u=e.probs||Ws(l/2,1-Dbe,l),c=u.length;return s.forEach(f=>{const d=m3(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<a.length;++g)p[a[g]]=f.dims[g];p[i[0]]=u[h],p[i[1]]=d[h],o.push(xn(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function gq(e){ue.call(this,null,e)}Te(gq,ue,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const s=lt(r);n.rem.push(i[s]),i[s]=null}),t.visit(t.ADD,r=>{const s=h3(r);i[lt(r)]=s,n.add.push(s)}),t.visit(t.MOD,r=>{const s=i[lt(r)];for(const a in r)s[a]=r[a],n.modifies(a);n.mod.push(s)})),n}});function Z3(e){ue.call(this,[],e),this.count=0}Z3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Te(Z3,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,s=this.value.reduce((c,f)=>(c[lt(f)]=1,c),{});let a=this.value,o=this.count,l=0;function u(c){let f,d;a.length<r?a.push(c):(d=~~((o+1)*Aa()),d<a.length&&d>=l&&(f=a[d],s[lt(f)]&&n.rem.push(f),a[d]=c)),++o}if(t.rem.length&&(t.visit(t.REM,c=>{const f=lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--o}),a=a.filter(c=>s[lt(c)]!==-1)),(t.rem.length||i)&&a.length<r&&t.source&&(l=o=a.length,t.visit(t.SOURCE,c=>{s[lt(c)]||u(c)}),l=-1),i&&a.length>r){const c=a.length-r;for(let f=0;f<c;++f)s[lt(a[f])]=-1,n.rem.push(a[f]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(c=>!s[lt(c)])),this.count=o,this.value=n.source=a,n}});function eM(e){ue.call(this,null,e)}eM.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Te(eM,ue,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ws(e.start,e.stop,e.step||1).map(r=>{const s={};return s[i]=r,xn(s)}),n.add=t.add.concat(this.value),n}});function mq(e){ue.call(this,null,e),this.modified(!0)}Te(mq,ue,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function tM(e){ue.call(this,null,e)}const yq=["unit0","unit1"];tM.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:r3,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:yq}]};Te(tM,ue,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",s=this._floor(e,t),a=(r?Gg:qg)(s.unit).offset,o=e.as||yq,l=o[0],u=o[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ar(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[l]=null,i&&(p[u]=null)):(p[l]=m=y=s(g),i&&(p[u]=y=a(m,c)),m<f&&(f=m),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:oW({extent:e.extent||yl(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=s3(i),a=this.value||{},o=(n?QH:JH)(s,r);return o.unit=ln(s),o.units=s,o.step=r,o.start=a.start,o.stop=a.stop,this.value=o}});function bq(e){ue.call(this,$g(),e)}Te(bq,ue,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,s=o=>r.set(i(o),o);let a=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,s)):a=!1,this.modified(a),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function vq(e){ue.call(this,null,e)}Te(vq,ue,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(yh(e.sort)):t.source).map(e.field))}});function Rbe(e,t,n,i){const r=J0[e](t,n);return{init:r.init||rc,update:function(s,a){a[i]=r.next(s)}}}const J0={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=J0.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||he("ntile num must be greater than zero.");const n=J0.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||he("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=Lbe(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function Lbe(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Nbe=Object.keys(J0);function _q(e){const t=Pe(e.ops),n=Pe(e.fields),i=Pe(e.params),r=Pe(e.as),s=this.outputs=[],a=this.windows=[],o={},l={},u=[],c=[];let f=!0;function d(h){Pe(Ar(h)).forEach(p=>o[p]=1)}d(e.sort),t.forEach((h,p)=>{const g=n[p],m=gi(g),y=XW(h,m,r[p]);if(d(g),s.push(y),at(J0,h))a.push(Rbe(h,n[p],i[p],y));else{if(g==null&&h!=="count"&&he("Null aggregate field specified."),h==="count"){u.push(y);return}f=!1;let b=l[m];b||(b=l[m]=[],b.field=g,c.push(b)),b.push(KW(h,y))}}),(u.length||c.length)&&(this.cell=Fbe(c,u,f)),this.inputs=Object.keys(o)}const wq=_q.prototype;wq.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};wq.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,s=i&&i.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(r[a]);for(a=e.p1;a<e.i1;++a)n.add(r[a]);n.set(t)}for(a=0;a<s;++a)i[a].update(e,t)};function Fbe(e,t,n){e=e.map(l=>QW(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,s=i.agg=Array(r),a=0;a<r;++a)s[a]=new e[a](i);if(i.store)var o=i.data=new D3;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let u=0;u<r;++u)s[u].add(s[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let u=0;u<r;++u)s[u].rem(s[u].get(l),l)}},i.set=function(l){let u,c;for(o&&o.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)s[l].init()},i}function nM(e){ue.call(this,{},e),this._mlen=0,this._mods=[]}nM.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Nbe.concat(Y1)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Te(nM,ue,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=yh(e.sort),r=eI(e.groupby),s=o=>this.group(r(o));let a=this.state;(!a||n)&&(a=this.state=new _q(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,o=>s(o).add(o))):(t.visit(t.REM,o=>s(o).remove(o)),t.visit(t.ADD,o=>s(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)Pbe(this._mods[o],a,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=ZW(lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Pbe(e,t,n,i){const r=i.sort,s=r&&!i.ignorePeers,a=i.frame||[null,0],o=e.data(n),l=o.length,u=s?H1(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||kr(-1)};t.init();for(let f=0;f<l;++f)Bbe(c,a,f,l),s&&jbe(c,u),t.update(c,o[f])}function Bbe(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function jbe(e,t){const n=e.i0,i=e.i1-1,r=e.compare,s=e.data,a=s.length-1;n>0&&!r(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),i<a&&!r(s[i],s[i+1])&&(e.i1=t.right(s,s[i]))}var Ube=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Hc,bin:R3,collect:L3,compare:eq,countpattern:N3,cross:F3,density:P3,dotbin:j3,expression:sq,extent:U3,facet:Vw,field:aq,filter:V3,flatten:$3,fold:H3,formula:W3,generate:oq,impute:q3,joinaggregate:G3,kde:Y3,key:lq,load:uq,lookup:X3,multiextent:cq,multivalues:fq,params:dq,pivot:K3,prefacet:hq,project:J3,proxy:pq,quantile:Q3,relay:gq,sample:Z3,sequence:eM,sieve:mq,subflow:z3,timeunit:tM,tupleindex:bq,values:vq,window:nM},Symbol.toStringTag,{value:"Module"}));const tI=Math.PI,nI=2*tI,Kf=1e-6,zbe=nI-Kf;function iI(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function gf(){return new iI}iI.prototype=gf.prototype={constructor:iI,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var s=this._x1,a=this._y1,o=n-e,l=i-t,u=s-e,c=a-t,f=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Kf)if(!(Math.abs(c*o-l*u)>Kf)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-s,h=i-a,p=o*o+l*l,g=d*d+h*h,m=Math.sqrt(p),y=Math.sqrt(f),b=r*Math.tan((tI-Math.acos((p+f-g)/(2*m*y)))/2),v=b/y,_=b/m;Math.abs(v-1)>Kf&&(this._+="L"+(e+v*u)+","+(t+v*c)),this._+="A"+r+","+r+",0,0,"+ +(c*d>u*h)+","+(this._x1=e+_*o)+","+(this._y1=t+_*l)}},arc:function(e,t,n,i,r,s){e=+e,t=+t,n=+n,s=!!s;var a=n*Math.cos(i),o=n*Math.sin(i),l=e+a,u=t+o,c=1^s,f=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Kf||Math.abs(this._y1-u)>Kf)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%nI+nI),f>zbe?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>Kf&&(this._+="A"+n+","+n+",0,"+ +(f>=tI)+","+c+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function Tn(e){return function(){return e}}const N6=Math.abs,hr=Math.atan2,Pf=Math.cos,Vbe=Math.max,PA=Math.min,To=Math.sin,md=Math.sqrt,gr=1e-12,ng=Math.PI,S_=ng/2,Sq=2*ng;function $be(e){return e>1?0:e<-1?ng:Math.acos(e)}function F6(e){return e>=1?S_:e<=-1?-S_:Math.asin(e)}function Hbe(e){return e.innerRadius}function Wbe(e){return e.outerRadius}function qbe(e){return e.startAngle}function Gbe(e){return e.endAngle}function Ybe(e){return e&&e.padAngle}function Xbe(e,t,n,i,r,s,a,o){var l=n-e,u=i-t,c=a-r,f=o-s,d=f*l-c*u;if(!(d*d<gr))return d=(c*(t-s)-f*(e-r))/d,[e+d*l,t+d*u]}function ib(e,t,n,i,r,s,a){var o=e-n,l=t-i,u=(a?s:-s)/md(o*o+l*l),c=u*l,f=-u*o,d=e+c,h=t+f,p=n+c,g=i+f,m=(d+p)/2,y=(h+g)/2,b=p-d,v=g-h,_=b*b+v*v,S=r-s,E=d*g-p*h,w=(v<0?-1:1)*md(Vbe(0,S*S*_-E*E)),O=(E*v-b*w)/_,D=(-E*b-v*w)/_,x=(E*v+b*w)/_,A=(-E*b+v*w)/_,C=O-m,I=D-y,L=x-m,k=A-y;return C*C+I*I>L*L+k*k&&(O=x,D=A),{cx:O,cy:D,x01:-c,y01:-f,x11:O*(r/S-1),y11:D*(r/S-1)}}function Kbe(){var e=Hbe,t=Wbe,n=Tn(0),i=null,r=qbe,s=Gbe,a=Ybe,o=null;function l(){var u,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=r.apply(this,arguments)-S_,p=s.apply(this,arguments)-S_,g=N6(p-h),m=p>h;if(o||(o=u=gf()),d<f&&(c=d,d=f,f=c),!(d>gr))o.moveTo(0,0);else if(g>Sq-gr)o.moveTo(d*Pf(h),d*To(h)),o.arc(0,0,d,h,p,!m),f>gr&&(o.moveTo(f*Pf(p),f*To(p)),o.arc(0,0,f,p,h,m));else{var y=h,b=p,v=h,_=p,S=g,E=g,w=a.apply(this,arguments)/2,O=w>gr&&(i?+i.apply(this,arguments):md(f*f+d*d)),D=PA(N6(d-f)/2,+n.apply(this,arguments)),x=D,A=D,C,I;if(O>gr){var L=F6(O/f*To(w)),k=F6(O/d*To(w));(S-=L*2)>gr?(L*=m?1:-1,v+=L,_-=L):(S=0,v=_=(h+p)/2),(E-=k*2)>gr?(k*=m?1:-1,y+=k,b-=k):(E=0,y=b=(h+p)/2)}var M=d*Pf(y),N=d*To(y),R=f*Pf(_),T=f*To(_);if(D>gr){var z=d*Pf(b),Y=d*To(b),H=f*Pf(v),oe=f*To(v),_e;if(g<ng&&(_e=Xbe(M,N,H,oe,z,Y,R,T))){var re=M-_e[0],pe=N-_e[1],Oe=z-_e[0],Re=Y-_e[1],W=1/To($be((re*Oe+pe*Re)/(md(re*re+pe*pe)*md(Oe*Oe+Re*Re)))/2),q=md(_e[0]*_e[0]+_e[1]*_e[1]);x=PA(D,(f-q)/(W-1)),A=PA(D,(d-q)/(W+1))}}E>gr?A>gr?(C=ib(H,oe,M,N,d,A,m),I=ib(z,Y,R,T,d,A,m),o.moveTo(C.cx+C.x01,C.cy+C.y01),A<D?o.arc(C.cx,C.cy,A,hr(C.y01,C.x01),hr(I.y01,I.x01),!m):(o.arc(C.cx,C.cy,A,hr(C.y01,C.x01),hr(C.y11,C.x11),!m),o.arc(0,0,d,hr(C.cy+C.y11,C.cx+C.x11),hr(I.cy+I.y11,I.cx+I.x11),!m),o.arc(I.cx,I.cy,A,hr(I.y11,I.x11),hr(I.y01,I.x01),!m))):(o.moveTo(M,N),o.arc(0,0,d,y,b,!m)):o.moveTo(M,N),!(f>gr)||!(S>gr)?o.lineTo(R,T):x>gr?(C=ib(R,T,z,Y,f,-x,m),I=ib(M,N,H,oe,f,-x,m),o.lineTo(C.cx+C.x01,C.cy+C.y01),x<D?o.arc(C.cx,C.cy,x,hr(C.y01,C.x01),hr(I.y01,I.x01),!m):(o.arc(C.cx,C.cy,x,hr(C.y01,C.x01),hr(C.y11,C.x11),!m),o.arc(0,0,f,hr(C.cy+C.y11,C.cx+C.x11),hr(I.cy+I.y11,I.cx+I.x11),m),o.arc(I.cx,I.cy,x,hr(I.y11,I.x11),hr(I.y01,I.x01),!m))):o.arc(0,0,f,_,v,m)}if(o.closePath(),u)return o=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-ng/2;return[Pf(c)*u,To(c)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Tn(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Tn(+u),l):t},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Tn(+u),l):n},l.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:Tn(+u),l):i},l.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:Tn(+u),l):r},l.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Tn(+u),l):s},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Tn(+u),l):a},l.context=function(u){return arguments.length?(o=u??null,l):o},l}function Eq(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Aq(e){this._context=e}Aq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function iM(e){return new Aq(e)}function Oq(e){return e[0]}function Cq(e){return e[1]}function Iq(e,t){var n=Tn(!0),i=null,r=iM,s=null;e=typeof e=="function"?e:e===void 0?Oq:Tn(e),t=typeof t=="function"?t:t===void 0?Cq:Tn(t);function a(o){var l,u=(o=Eq(o)).length,c,f=!1,d;for(i==null&&(s=r(d=gf())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return a.x=function(o){return arguments.length?(e=typeof o=="function"?o:Tn(+o),a):e},a.y=function(o){return arguments.length?(t=typeof o=="function"?o:Tn(+o),a):t},a.defined=function(o){return arguments.length?(n=typeof o=="function"?o:Tn(!!o),a):n},a.curve=function(o){return arguments.length?(r=o,i!=null&&(s=r(i)),a):r},a.context=function(o){return arguments.length?(o==null?i=s=null:s=r(i=o),a):i},a}function xq(e,t,n){var i=null,r=Tn(!0),s=null,a=iM,o=null;e=typeof e=="function"?e:e===void 0?Oq:Tn(+e),t=typeof t=="function"?t:Tn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Cq:Tn(+n);function l(c){var f,d,h,p=(c=Eq(c)).length,g,m=!1,y,b=new Array(p),v=new Array(p);for(s==null&&(o=a(y=gf())),f=0;f<=p;++f){if(!(f<p&&r(g=c[f],f,c))===m)if(m=!m)d=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=f-1;h>=d;--h)o.point(b[h],v[h]);o.lineEnd(),o.areaEnd()}m&&(b[f]=+e(g,f,c),v[f]=+t(g,f,c),o.point(i?+i(g,f,c):b[f],n?+n(g,f,c):v[f]))}if(y)return o=null,y+""||null}function u(){return Iq().defined(r).curve(a).context(s)}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Tn(+c),i=null,l):e},l.x0=function(c){return arguments.length?(e=typeof c=="function"?c:Tn(+c),l):e},l.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Tn(+c),l):i},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Tn(+c),n=null,l):t},l.y0=function(c){return arguments.length?(t=typeof c=="function"?c:Tn(+c),l):t},l.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Tn(+c),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(i).y(t)},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Tn(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,s!=null&&(o=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=o=null:o=a(s=c),l):s},l}var Jbe={draw(e,t){const n=md(t/ng);e.moveTo(n,0),e.arc(0,0,n,0,Sq)}};function Qbe(e,t){let n=null;e=typeof e=="function"?e:Tn(e||Jbe),t=typeof t=="function"?t:Tn(t===void 0?64:+t);function i(){let r;if(n||(n=r=gf()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return i.type=function(r){return arguments.length?(e=typeof r=="function"?r:Tn(r),i):e},i.size=function(r){return arguments.length?(t=typeof r=="function"?r:Tn(+r),i):t},i.context=function(r){return arguments.length?(n=r??null,i):n},i}function Wc(){}function E_(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function $w(e){this._context=e}$w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zbe(e){return new $w(e)}function Tq(e){this._context=e}Tq.prototype={areaStart:Wc,areaEnd:Wc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:E_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eve(e){return new Tq(e)}function kq(e){this._context=e}kq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:E_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tve(e){return new kq(e)}function Mq(e,t){this._basis=new $w(e),this._beta=t}Mq.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,a=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*s),this._beta*t[o]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var nve=function e(t){function n(i){return t===1?new $w(i):new Mq(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function A_(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function rM(e,t){this._context=e,this._k=(1-t)/6}rM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:A_(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:A_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ive=function e(t){function n(i){return new rM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function sM(e,t){this._context=e,this._k=(1-t)/6}sM.prototype={areaStart:Wc,areaEnd:Wc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var rve=function e(t){function n(i){return new sM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function aM(e,t){this._context=e,this._k=(1-t)/6}aM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A_(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sve=function e(t){function n(i){return new aM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function oM(e,t,n){var i=e._x1,r=e._y1,s=e._x2,a=e._y2;if(e._l01_a>gr){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>gr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,s,a,e._x2,e._y2)}function Dq(e,t){this._context=e,this._alpha=t}Dq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:oM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ave=function e(t){function n(i){return t?new Dq(i,t):new rM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Rq(e,t){this._context=e,this._alpha=t}Rq.prototype={areaStart:Wc,areaEnd:Wc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ove=function e(t){function n(i){return t?new Rq(i,t):new sM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Lq(e,t){this._context=e,this._alpha=t}Lq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lve=function e(t){function n(i){return t?new Lq(i,t):new aM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Nq(e){this._context=e}Nq.prototype={areaStart:Wc,areaEnd:Wc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uve(e){return new Nq(e)}function P6(e){return e<0?-1:1}function B6(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(P6(s)+P6(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function j6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function BA(e,t,n){var i=e._x0,r=e._y0,s=e._x1,a=e._y1,o=(s-i)/3;e._context.bezierCurveTo(i+o,r+o*t,s-o,a-o*n,s,a)}function O_(e){this._context=e}O_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BA(this,this._t0,j6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,BA(this,j6(this,n=B6(this,e,t)),n);break;default:BA(this,this._t0,n=B6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Fq(e){this._context=new Pq(e)}(Fq.prototype=Object.create(O_.prototype)).point=function(e,t){O_.prototype.point.call(this,t,e)};function Pq(e){this._context=e}Pq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function cve(e){return new O_(e)}function fve(e){return new Fq(e)}function Bq(e){this._context=e}Bq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=U6(e),r=U6(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function U6(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,a[t]-=i*a[t-1];for(r[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(a[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function dve(e){return new Bq(e)}function Hw(e,t){this._context=e,this._t=t}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hve(e){return new Hw(e,.5)}function pve(e){return new Hw(e,0)}function gve(e){return new Hw(e,1)}function Ac(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const mve=()=>typeof Image<"u"?Image:null;function Cl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rI=Symbol("implicit");function lM(){var e=new oC,t=[],n=[],i=rI;function r(s){let a=e.get(s);if(a===void 0){if(i!==rI)return i;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new oC;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return lM(t,n).unknown(i)},Cl.apply(r,arguments),r}function Xg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function X1(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function yf(){}var Hd=.7,ig=1/Hd,Ep="\\s*([+-]?\\d+)\\s*",Q0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yve=/^#([0-9a-f]{3,8})$/,bve=new RegExp(`^rgb\\(${Ep},${Ep},${Ep}\\)$`),vve=new RegExp(`^rgb\\(${sl},${sl},${sl}\\)$`),_ve=new RegExp(`^rgba\\(${Ep},${Ep},${Ep},${Q0}\\)$`),wve=new RegExp(`^rgba\\(${sl},${sl},${sl},${Q0}\\)$`),Sve=new RegExp(`^hsl\\(${Q0},${sl},${sl}\\)$`),Eve=new RegExp(`^hsla\\(${Q0},${sl},${sl},${Q0}\\)$`),z6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xg(yf,Z0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:V6,formatHex:V6,formatHex8:Ave,formatHsl:Ove,formatRgb:$6,toString:$6});function V6(){return this.rgb().formatHex()}function Ave(){return this.rgb().formatHex8()}function Ove(){return jq(this).formatHsl()}function $6(){return this.rgb().formatRgb()}function Z0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yve.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?H6(t):n===3?new Wi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bve.exec(e))?new Wi(t[1],t[2],t[3],1):(t=vve.exec(e))?new Wi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_ve.exec(e))?rb(t[1],t[2],t[3],t[4]):(t=wve.exec(e))?rb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Sve.exec(e))?G6(t[1],t[2]/100,t[3]/100,1):(t=Eve.exec(e))?G6(t[1],t[2]/100,t[3]/100,t[4]):z6.hasOwnProperty(e)?H6(z6[e]):e==="transparent"?new Wi(NaN,NaN,NaN,0):null}function H6(e){return new Wi(e>>16&255,e>>8&255,e&255,1)}function rb(e,t,n,i){return i<=0&&(e=t=n=NaN),new Wi(e,t,n,i)}function uM(e){return e instanceof yf||(e=Z0(e)),e?(e=e.rgb(),new Wi(e.r,e.g,e.b,e.opacity)):new Wi}function qc(e,t,n,i){return arguments.length===1?uM(e):new Wi(e,t,n,i??1)}function Wi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Xg(Wi,qc,X1(yf,{brighter(e){return e=e==null?ig:Math.pow(ig,e),new Wi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hd:Math.pow(Hd,e),new Wi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wi(xd(this.r),xd(this.g),xd(this.b),C_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W6,formatHex:W6,formatHex8:Cve,formatRgb:q6,toString:q6}));function W6(){return`#${yd(this.r)}${yd(this.g)}${yd(this.b)}`}function Cve(){return`#${yd(this.r)}${yd(this.g)}${yd(this.b)}${yd((isNaN(this.opacity)?1:this.opacity)*255)}`}function q6(){const e=C_(this.opacity);return`${e===1?"rgb(":"rgba("}${xd(this.r)}, ${xd(this.g)}, ${xd(this.b)}${e===1?")":`, ${e})`}`}function C_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yd(e){return e=xd(e),(e<16?"0":"")+e.toString(16)}function G6(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wa(e,t,n,i)}function jq(e){if(e instanceof Wa)return new Wa(e.h,e.s,e.l,e.opacity);if(e instanceof yf||(e=Z0(e)),!e)return new Wa;if(e instanceof Wa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(t===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Wa(a,o,l,e.opacity)}function I_(e,t,n,i){return arguments.length===1?jq(e):new Wa(e,t,n,i??1)}function Wa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Xg(Wa,I_,X1(yf,{brighter(e){return e=e==null?ig:Math.pow(ig,e),new Wa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hd:Math.pow(Hd,e),new Wa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Wi(jA(e>=240?e-240:e+120,r,i),jA(e,r,i),jA(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Wa(Y6(this.h),sb(this.s),sb(this.l),C_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=C_(this.opacity);return`${e===1?"hsl(":"hsla("}${Y6(this.h)}, ${sb(this.s)*100}%, ${sb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Y6(e){return e=(e||0)%360,e<0?e+360:e}function sb(e){return Math.max(0,Math.min(1,e||0))}function jA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Uq=Math.PI/180,zq=180/Math.PI,x_=18,Vq=.96422,$q=1,Hq=.82521,Wq=4/29,Ap=6/29,qq=3*Ap*Ap,Ive=Ap*Ap*Ap;function Gq(e){if(e instanceof al)return new al(e.l,e.a,e.b,e.opacity);if(e instanceof su)return Yq(e);e instanceof Wi||(e=uM(e));var t=$A(e.r),n=$A(e.g),i=$A(e.b),r=UA((.2225045*t+.7168786*n+.0606169*i)/$q),s,a;return t===n&&n===i?s=a=r:(s=UA((.4360747*t+.3850649*n+.1430804*i)/Vq),a=UA((.0139322*t+.0971045*n+.7141733*i)/Hq)),new al(116*r-16,500*(s-r),200*(r-a),e.opacity)}function T_(e,t,n,i){return arguments.length===1?Gq(e):new al(e,t,n,i??1)}function al(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Xg(al,T_,X1(yf,{brighter(e){return new al(this.l+x_*(e??1),this.a,this.b,this.opacity)},darker(e){return new al(this.l-x_*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Vq*zA(t),e=$q*zA(e),n=Hq*zA(n),new Wi(VA(3.1338561*t-1.6168667*e-.4906146*n),VA(-.9787684*t+1.9161415*e+.033454*n),VA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function UA(e){return e>Ive?Math.pow(e,1/3):e/qq+Wq}function zA(e){return e>Ap?e*e*e:qq*(e-Wq)}function VA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function $A(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xve(e){if(e instanceof su)return new su(e.h,e.c,e.l,e.opacity);if(e instanceof al||(e=Gq(e)),e.a===0&&e.b===0)return new su(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*zq;return new su(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function k_(e,t,n,i){return arguments.length===1?xve(e):new su(e,t,n,i??1)}function su(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function Yq(e){if(isNaN(e.h))return new al(e.l,0,0,e.opacity);var t=e.h*Uq;return new al(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Xg(su,k_,X1(yf,{brighter(e){return new su(this.h,this.c,this.l+x_*(e??1),this.opacity)},darker(e){return new su(this.h,this.c,this.l-x_*(e??1),this.opacity)},rgb(){return Yq(this).rgb()}}));var Xq=-.14861,cM=1.78277,fM=-.29227,Ww=-.90649,e1=1.97294,X6=e1*Ww,K6=e1*cM,J6=cM*fM-Ww*Xq;function Tve(e){if(e instanceof Td)return new Td(e.h,e.s,e.l,e.opacity);e instanceof Wi||(e=uM(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(J6*i+X6*t-K6*n)/(J6+X6-K6),s=i-r,a=(e1*(n-r)-fM*s)/Ww,o=Math.sqrt(a*a+s*s)/(e1*r*(1-r)),l=o?Math.atan2(a,s)*zq-120:NaN;return new Td(l<0?l+360:l,o,r,e.opacity)}function sI(e,t,n,i){return arguments.length===1?Tve(e):new Td(e,t,n,i??1)}function Td(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Xg(Td,sI,X1(yf,{brighter(e){return e=e==null?ig:Math.pow(ig,e),new Td(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hd:Math.pow(Hd,e),new Td(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Uq,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Wi(255*(t+n*(Xq*i+cM*r)),255*(t+n*(fM*i+Ww*r)),255*(t+n*(e1*i)),this.opacity)}}));function Kq(e,t,n,i,r){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*i+a*r)/6}function Jq(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],a=i>0?e[i-1]:2*r-s,o=i<t-1?e[i+2]:2*s-r;return Kq((n-i/t)*t,a,r,s,o)}}function Qq(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],s=e[i%t],a=e[(i+1)%t],o=e[(i+2)%t];return Kq((n-i/t)*t,r,s,a,o)}}var qw=e=>()=>e;function Zq(e,t){return function(n){return e+n*t}}function kve(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Gw(e,t){var n=t-e;return n?Zq(e,n>180||n<-180?n-360*Math.round(n/360):n):qw(isNaN(e)?t:e)}function Mve(e){return(e=+e)==1?qi:function(t,n){return n-t?kve(t,n,e):qw(isNaN(t)?n:t)}}function qi(e,t){var n=t-e;return n?Zq(e,n):qw(isNaN(e)?t:e)}var aI=function e(t){var n=Mve(t);function i(r,s){var a=n((r=qc(r)).r,(s=qc(s)).r),o=n(r.g,s.g),l=n(r.b,s.b),u=qi(r.opacity,s.opacity);return function(c){return r.r=a(c),r.g=o(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function eG(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=qc(t[a]),i[a]=o.r||0,r[a]=o.g||0,s[a]=o.b||0;return i=e(i),r=e(r),s=e(s),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=s(l),o+""}}}var Dve=eG(Jq),Rve=eG(Qq);function dM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function tG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Lve(e,t){return(tG(t)?dM:nG)(e,t)}function nG(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=bf(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<i;++a)s[a]=r[a](o);return s}}function iG(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function za(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function rG(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=bf(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var oI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HA=new RegExp(oI.source,"g");function Nve(e){return function(){return e}}function Fve(e){return function(t){return e(t)+""}}function sG(e,t){var n=oI.lastIndex=HA.lastIndex=0,i,r,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(i=oI.exec(e))&&(r=HA.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:za(i,r)})),n=HA.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Fve(l[0].x):Nve(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function bf(e,t){var n=typeof t,i;return t==null||n==="boolean"?qw(t):(n==="number"?za:n==="string"?(i=Z0(t))?(t=i,aI):sG:t instanceof Z0?aI:t instanceof Date?iG:tG(t)?dM:Array.isArray(t)?nG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?rG:za)(e,t)}function Pve(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Bve(e,t){var n=Gw(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function K1(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Q6=180/Math.PI,lI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aG(e,t,n,i,r,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Q6,skewX:Math.atan(l)*Q6,scaleX:a,scaleY:o}}var ab;function jve(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lI:aG(t.a,t.b,t.c,t.d,t.e,t.f)}function Uve(e){return e==null||(ab||(ab=document.createElementNS("http://www.w3.org/2000/svg","g")),ab.setAttribute("transform",e),!(e=ab.transform.baseVal.consolidate()))?lI:(e=e.matrix,aG(e.a,e.b,e.c,e.d,e.e,e.f))}function oG(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:za(u,f)},{i:g-2,x:za(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:za(u,c)})):c&&f.push(r(f)+"rotate("+c+i)}function o(u,c,f,d){u!==c?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:za(u,c)}):c&&f.push(r(f)+"skewX("+c+i)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:za(u,f)},{i:g-2,x:za(c,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),o(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var zve=oG(jve,"px, ","px)","deg)"),Vve=oG(Uve,", ",")",")"),$ve=1e-12;function Z6(e){return((e=Math.exp(e))+1/e)/2}function Hve(e){return((e=Math.exp(e))-1/e)/2}function Wve(e){return((e=Math.exp(2*e))-1)/(e+1)}var qve=function e(t,n,i){function r(s,a){var o=s[0],l=s[1],u=s[2],c=a[0],f=a[1],d=a[2],h=c-o,p=f-l,g=h*h+p*p,m,y;if(g<$ve)y=Math.log(d/u)/t,m=function(w){return[o+w*h,l+w*p,u*Math.exp(t*w*y)]};else{var b=Math.sqrt(g),v=(d*d-u*u+i*g)/(2*u*n*b),_=(d*d-u*u-i*g)/(2*d*n*b),S=Math.log(Math.sqrt(v*v+1)-v),E=Math.log(Math.sqrt(_*_+1)-_);y=(E-S)/t,m=function(w){var O=w*y,D=Z6(S),x=u/(n*b)*(D*Wve(t*O+S)-Hve(S));return[o+x*h,l+x*p,u*D/Z6(t*O+S)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return r.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return e(a,o,l)},r}(Math.SQRT2,2,4);function lG(e){return function(t,n){var i=e((t=I_(t)).h,(n=I_(n)).h),r=qi(t.s,n.s),s=qi(t.l,n.l),a=qi(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=s(o),t.opacity=a(o),t+""}}}var Gve=lG(Gw),Yve=lG(qi);function Xve(e,t){var n=qi((e=T_(e)).l,(t=T_(t)).l),i=qi(e.a,t.a),r=qi(e.b,t.b),s=qi(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=r(a),e.opacity=s(a),e+""}}function uG(e){return function(t,n){var i=e((t=k_(t)).h,(n=k_(n)).h),r=qi(t.c,n.c),s=qi(t.l,n.l),a=qi(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=s(o),t.opacity=a(o),t+""}}}var Kve=uG(Gw),Jve=uG(qi);function cG(e){return function t(n){n=+n;function i(r,s){var a=e((r=sI(r)).h,(s=sI(s)).h),o=qi(r.s,s.s),l=qi(r.l,s.l),u=qi(r.opacity,s.opacity);return function(c){return r.h=a(c),r.s=o(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return i.gamma=t,i}(1)}var Qve=cG(Gw),Zve=cG(qi);function hM(e,t){t===void 0&&(t=e,e=bf);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(a){var o=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[o](a-o)}}function e_e(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}var t_e=Object.freeze(Object.defineProperty({__proto__:null,interpolate:bf,interpolateArray:Lve,interpolateBasis:Jq,interpolateBasisClosed:Qq,interpolateDate:iG,interpolateDiscrete:Pve,interpolateHue:Bve,interpolateNumber:za,interpolateNumberArray:dM,interpolateObject:rG,interpolateRound:K1,interpolateString:sG,interpolateTransformCss:zve,interpolateTransformSvg:Vve,interpolateZoom:qve,interpolateRgb:aI,interpolateRgbBasis:Dve,interpolateRgbBasisClosed:Rve,interpolateHsl:Gve,interpolateHslLong:Yve,interpolateLab:Xve,interpolateHcl:Kve,interpolateHclLong:Jve,interpolateCubehelix:Qve,interpolateCubehelixLong:Zve,piecewise:hM,quantize:e_e},Symbol.toStringTag,{value:"Module"}));function n_e(e){return function(){return e}}function uI(e){return+e}var eP=[0,1];function hs(e){return e}function cI(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:n_e(isNaN(t)?NaN:.5)}function i_e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function r_e(e,t,n){var i=e[0],r=e[1],s=t[0],a=t[1];return r<i?(i=cI(r,i),s=n(a,s)):(i=cI(i,r),s=n(s,a)),function(o){return s(i(o))}}function s_e(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=cI(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=W1(e,o,1,i)-1;return s[l](r[l](o))}}function J1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yw(){var e=eP,t=eP,n=bf,i,r,s,a=hs,o,l,u;function c(){var d=Math.min(e.length,t.length);return a!==hs&&(a=i_e(e[0],e[d-1])),o=d>2?s_e:r_e,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=o(e.map(i),t,n)))(i(a(d)))}return f.invert=function(d){return a(r((u||(u=o(t,e.map(i),za)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,uI),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=K1,c()},f.clamp=function(d){return arguments.length?(a=d?!0:hs,c()):a!==hs},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return i=d,r=h,c()}}function fG(){return Yw()(hs,hs)}function dG(e,t,n,i){var r=zc(e,t,n),s;switch(i=Vd(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=MH(r,a))&&(i.precision=s),Xk(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=DH(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=kH(r))&&(i.precision=s-(i.type==="%")*2);break}}return Tw(i)}function vh(e){var t=e.domain;return e.ticks=function(n){var i=t();return VC(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return dG(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,a=i[r],o=i[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=r,r=s,s=u);c-- >0;){if(u=SH(a,o,n),u===l)return i[r]=a,i[s]=o,t(i);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function hG(){var e=fG();return e.copy=function(){return J1(e,hG())},Cl.apply(e,arguments),vh(e)}function pG(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,uI),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return pG(e).unknown(t)},e=arguments.length?Array.from(e,uI):[0,1],vh(n)}function gG(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),e[n]=t.floor(r),e[i]=t.ceil(s),e}function tP(e){return Math.log(e)}function nP(e){return Math.exp(e)}function a_e(e){return-Math.log(-e)}function o_e(e){return-Math.exp(-e)}function l_e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function u_e(e){return e===10?l_e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function c_e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iP(e){return(t,n)=>-e(-t,n)}function pM(e){const t=e(tP,nP),n=t.domain;let i=10,r,s;function a(){return r=c_e(i),s=u_e(i),n()[0]<0?(r=iP(r),s=iP(s),e(a_e,o_e)):e(tP,nP),t}return t.base=function(o){return arguments.length?(i=+o,a()):i},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=r(u),h=r(c),p,g;const m=o==null?10:+o;let y=[];if(!(i%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<i;++p)if(g=d<0?p/s(-d):p*s(d),!(g<u)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=i-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=VC(u,c,m))}else y=VC(d,h,Math.min(h-d,m)).map(s);return f?y.reverse():y},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Vd(l)).precision==null&&(l.trim=!0),l=Tw(l)),o===1/0)return l;const u=Math.max(1,i*o/t.ticks().length);return c=>{let f=c/s(Math.round(r(c)));return f*i<i-.5&&(f*=i),f<=u?l(c):""}},t.nice=()=>n(gG(n(),{floor:o=>s(Math.floor(r(o))),ceil:o=>s(Math.ceil(r(o)))})),t}function mG(){const e=pM(Yw()).domain([1,10]);return e.copy=()=>J1(e,mG()).base(e.base()),Cl.apply(e,arguments),e}function rP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gM(e){var t=1,n=e(rP(t),sP(t));return n.constant=function(i){return arguments.length?e(rP(t=+i),sP(t)):t},vh(n)}function yG(){var e=gM(Yw());return e.copy=function(){return J1(e,yG()).constant(e.constant())},Cl.apply(e,arguments)}function aP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function f_e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function d_e(e){return e<0?-e*e:e*e}function mM(e){var t=e(hs,hs),n=1;function i(){return n===1?e(hs,hs):n===.5?e(f_e,d_e):e(aP(n),aP(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},vh(t)}function yM(){var e=mM(Yw());return e.copy=function(){return J1(e,yM()).exponent(e.exponent())},Cl.apply(e,arguments),e}function h_e(){return yM.apply(null,arguments).exponent(.5)}function bG(){var e=[],t=[],n=[],i;function r(){var a=0,o=Math.max(1,t.length);for(n=new Array(o-1);++a<o;)n[a-1]=AH(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?i:t[W1(n,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(cu),r()},s.range=function(a){return arguments.length?(t=Array.from(a),r()):t.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return bG().domain(e).range(t).unknown(i)},Cl.apply(s,arguments)}function vG(){var e=0,t=1,n=1,i=[.5],r=[0,1],s;function a(l){return l!=null&&l<=l?r[W1(i,l,0,n)]:s}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},a.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return i.slice()},a.copy=function(){return vG().domain([e,t]).range(r).unknown(s)},Cl.apply(vh(a),arguments)}function _G(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[W1(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return _G().domain(e).range(t).unknown(n)},Cl.apply(r,arguments)}function p_e(e){return new Date(e)}function g_e(e){return e instanceof Date?+e:+new Date(+e)}function bM(e,t,n,i,r,s,a,o,l,u){var c=fG(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),b=u("%b %d"),v=u("%B"),_=u("%Y");function S(E){return(l(E)<E?h:o(E)<E?p:a(E)<E?g:s(E)<E?m:i(E)<E?r(E)<E?y:b:n(E)<E?v:_)(E)}return c.invert=function(E){return new Date(f(E))},c.domain=function(E){return arguments.length?d(Array.from(E,g_e)):d().map(p_e)},c.ticks=function(E){var w=d();return e(w[0],w[w.length-1],E??10)},c.tickFormat=function(E,w){return w==null?S:u(w)},c.nice=function(E){var w=d();return(!E||typeof E.range!="function")&&(E=t(w[0],w[w.length-1],E??10)),E?d(gG(w,E)):c},c.copy=function(){return J1(c,bM(e,t,n,i,r,s,a,o,l,u))},c}function m_e(){return Cl.apply(bM(E0e,A0e,Vc,y_,Hg,wc,Zk,Qk,lc,o3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function y_e(){return Cl.apply(bM(w0e,S0e,$c,v_,Wg,Sc,n3,t3,lc,l3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xw(){var e=0,t=1,n,i,r,s,a=hs,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:a(r===0?.5:(f=(s(f)-n)*r,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),i=s(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,a=f(h,p),u):[a(0),a(1)]}}return u.range=c(bf),u.rangeRound=c(K1),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(e),i=f(t),r=n===i?0:1/(i-n),u}}function vf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vM(){var e=vh(Xw()(hs));return e.copy=function(){return vf(e,vM())},mf.apply(e,arguments)}function wG(){var e=pM(Xw()).domain([1,10]);return e.copy=function(){return vf(e,wG()).base(e.base())},mf.apply(e,arguments)}function SG(){var e=gM(Xw());return e.copy=function(){return vf(e,SG()).constant(e.constant())},mf.apply(e,arguments)}function _M(){var e=mM(Xw());return e.copy=function(){return vf(e,_M()).exponent(e.exponent())},mf.apply(e,arguments)}function b_e(){return _M.apply(null,arguments).exponent(.5)}function Kw(){var e=0,t=.5,n=1,i=1,r,s,a,o,l,u=hs,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-s)*(i*g<i*s?o:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,r=c(e=+e),s=c(t=+t),a=c(n=+n),o=r===s?0:.5/(s-r),l=s===a?0:.5/(a-s),i=s<r?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(m){var y,b,v;return arguments.length?([y,b,v]=m,u=hM(g,[y,b,v]),h):[u(0),u(.5),u(1)]}}return h.range=p(bf),h.rangeRound=p(K1),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,r=g(e),s=g(t),a=g(n),o=r===s?0:.5/(s-r),l=s===a?0:.5/(a-s),i=s<r?-1:1,h}}function EG(){var e=vh(Kw()(hs));return e.copy=function(){return vf(e,EG())},mf.apply(e,arguments)}function AG(){var e=pM(Kw()).domain([.1,1,10]);return e.copy=function(){return vf(e,AG()).base(e.base())},mf.apply(e,arguments)}function OG(){var e=gM(Kw());return e.copy=function(){return vf(e,OG()).constant(e.constant())},mf.apply(e,arguments)}function wM(){var e=mM(Kw());return e.copy=function(){return vf(e,wM()).exponent(e.exponent())},mf.apply(e,arguments)}function v_e(){return wM.apply(null,arguments).exponent(.5)}function SM(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const __e="identity",rg="linear",Eu="log",Q1="pow",Z1="sqrt",Jw="symlog",Wd="time",qd="utc",ol="sequential",Kg="diverging",sg="quantile",Qw="quantize",Zw="threshold",EM="ordinal",fI="point",CG="band",AM="bin-ordinal",zi="continuous",ey="discrete",ty="discretizing",ka="interpolating",OM="temporal";function w_e(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function S_e(e){return function(t){const n=e.range();let i=t[0],r=t[1],s=-1,a,o,l,u;for(r<i&&(o=i,i=r,r=o),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(s<0&&(s=l),a=l);if(!(s<0))return i=e.invertExtent(n[s]),r=e.invertExtent(n[a]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function CM(){const e=lM().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,s,a=!1,o=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=i[1]<i[0],h=i[1-d],p=SM(f,o,l);let g=i[d-0];r=(h-g)/(p||1),a&&(r=Math.floor(r)),g+=(h-g-r*(f-o))*u,s=r*(1-o),a&&(g=Math.round(g),s=Math.round(s));const m=Ws(f).map(y=>g+r*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(i=[+f[0],+f[1]],c()):i.slice()},e.rangeRound=function(f){return i=[+f[0],+f[1]],a=!0,c()},e.bandwidth=function(){return s},e.step=function(){return r},e.round=function(f){return arguments.length?(a=!!f,c()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,c()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),c()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=i[1]<i[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,b,v;if(!(g!==g||m!==m)&&(m<g&&(v=g,g=m,m=v),!(m<h[0]||g>i[1-d])))return y=Math.max(0,h_(h,g)-1),b=g===m?y:h_(h,m)-1,g-h[y]>s+1e-10&&++y,d&&(v=y,y=p-b,b=p-v),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return CM().domain(t()).range(i).round(a).paddingInner(o).paddingOuter(l).align(u)},c()}function IG(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return IG(t())},e}function E_e(){return IG(CM().paddingInner(1))}var A_e=Array.prototype.map;function O_e(e){return A_e.call(e,wr)}const C_e=Array.prototype.slice;function xG(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(W1(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=O_e(i),n):e.slice()},n.range=function(i){return arguments.length?(t=C_e.call(i),n):t.slice()},n.tickFormat=function(i,r){return dG(e[0],ln(e),i??10,r)},n.copy=function(){return xG().domain(n.domain()).range(n.range())},n}const M_={};function I_e(e,t,n){const i=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?w_e(s):s.invertExtent?S_e(s):void 0),s.type=e,s};return i.metadata=po(Pe(n)),i}function An(e,t,n){return arguments.length>1?(M_[e]=I_e(e,t,n),this):TG(e)?M_[e]:void 0}An(__e,pG);An(rg,hG,zi);An(Eu,mG,[zi,Eu]);An(Q1,yM,zi);An(Z1,h_e,zi);An(Jw,yG,zi);An(Wd,m_e,[zi,OM]);An(qd,y_e,[zi,OM]);An(ol,vM,[zi,ka]);An("".concat(ol,"-").concat(rg),vM,[zi,ka]);An("".concat(ol,"-").concat(Eu),wG,[zi,ka,Eu]);An("".concat(ol,"-").concat(Q1),_M,[zi,ka]);An("".concat(ol,"-").concat(Z1),b_e,[zi,ka]);An("".concat(ol,"-").concat(Jw),SG,[zi,ka]);An("".concat(Kg,"-").concat(rg),EG,[zi,ka]);An("".concat(Kg,"-").concat(Eu),AG,[zi,ka,Eu]);An("".concat(Kg,"-").concat(Q1),wM,[zi,ka]);An("".concat(Kg,"-").concat(Z1),v_e,[zi,ka]);An("".concat(Kg,"-").concat(Jw),OG,[zi,ka]);An(sg,bG,[ty,sg]);An(Qw,vG,ty);An(Zw,_G,ty);An(AM,xG,[ey,ty]);An(EM,lM,ey);An(CG,CM,ey);An(fI,E_e,ey);function TG(e){return at(M_,e)}function _h(e,t){const n=M_[e];return n&&n.metadata[t]}function IM(e){return _h(e,zi)}function ag(e){return _h(e,ey)}function dI(e){return _h(e,ty)}function kG(e){return _h(e,Eu)}function x_e(e){return _h(e,OM)}function MG(e){return _h(e,ka)}function DG(e){return _h(e,sg)}const T_e=["clamp","base","constant","exponent"];function RG(e,t){const n=t[0],i=ln(t)-n;return function(r){return e(n+r*i)}}function eS(e,t,n){return hM(xM(t||"rgb",n),e)}function LG(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function NG(e,t,n){const i=n-t;let r,s,a;return!i||!Number.isFinite(i)?kr(.5):(r=(s=e.type).indexOf("-"),s=r<0?s:s.slice(r+1),a=An(s)().domain([t,n]).range([0,1]),T_e.forEach(o=>e[o]?a[o](e[o]()):0),a)}function xM(e,t){const n=t_e[k_e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function k_e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const M_e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},D_e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function FG(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function PG(e,t){for(const n in e)TM(n,t(e[n]))}const oP={};PG(D_e,FG);PG(M_e,e=>eS(FG(e)));function TM(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(oP[e]=t,this):oP[e]}const ev="symbol",R_e="discrete",L_e="gradient",N_e=e=>ge(e)?e.map(t=>String(t)):String(e),F_e=(e,t)=>e[1]-t[1],P_e=(e,t)=>t[1]-e[1];function kM(e,t,n){let i;return Un(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor($1(e.domain())/n||1)))),Ye(t)&&(i=t.step,t=t.interval),Fe(t)&&(t=e.type===Wd?qg(t):e.type==qd?Gg(t):he("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function BG(e,t,n){let i=e.range(),r=i[0],s=ln(i),a=F_e;if(r>s&&(i=s,s=r,r=i,a=P_e),r=Math.floor(r),s=Math.ceil(s),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=s).sort(a).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],ln(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=o)}return t}function MM(e,t){return e.bins?BG(e,e.bins):e.ticks?e.ticks(t):e.domain()}function jG(e,t,n,i,r,s){const a=t.type;let o=N_e;if(a===Wd||r===Wd)o=e.timeFormat(i);else if(a===qd||r===qd)o=e.utcFormat(i);else if(kG(a)){const l=e.formatFloat(i);if(s||t.bins)o=l;else{const u=UG(t,n,!1);o=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function UG(e,t,n){const i=MM(e,t),r=e.base(),s=Math.log(r),a=Math.max(1,r*t/i.length),o=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/s));return u*r<r-.5&&(u*=r),u<=a};return n?i.filter(o):o}const hI={[sg]:"quantiles",[Qw]:"thresholds",[Zw]:"domain"},zG={[sg]:"quantiles",[Qw]:"domain"};function VG(e,t){return e.bins?U_e(e.bins):e.type===Eu?UG(e,t,!0):hI[e.type]?j_e(e[hI[e.type]]()):MM(e,t)}function B_e(e,t,n){const i=t[zG[t.type]](),r=i.length;let s=r>1?i[1]-i[0]:i[0],a;for(a=1;a<r;++a)s=Math.min(s,i[a]-i[a-1]);return e.formatSpan(0,s,3*10,n)}function j_e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function U_e(e){const t=e.slice(0,-1);return t.max=ln(e),t}const z_e=e=>hI[e.type]||e.bins;function $G(e,t,n,i,r,s,a){const o=zG[t.type]&&s!==Wd&&s!==qd?B_e(e,t,r):jG(e,t,n,r,s,a);return i===ev&&z_e(t)?V_e(o):i===R_e?$_e(o):H_e(o)}const V_e=e=>(t,n,i)=>{const r=lP(i[n+1],lP(i.max,1/0)),s=uP(t,e),a=uP(r,e);return s&&a?s+" \u2013 "+a:a?"< "+a:"\u2265 "+s},lP=(e,t)=>e??t,$_e=e=>(t,n)=>n?e(t):null,H_e=e=>t=>e(t),uP=(e,t)=>Number.isFinite(e)?t(e):null;function W_e(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+ln(t),s=r-i;if(e.type===Zw){const a=n?s/n:.1;i-=a,r+=a,s=r-i}return a=>(a-i)/s}function q_e(e,t,n,i){const r=i||t.type;return Fe(n)&&x_e(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Wd?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===qd?e.utcFormat("%A, %d %B %Y, %X UTC"):$G(e,t,5,null,n,i,!0)}function HG(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=q_e(e,t,n.format,n.formatType);if(dI(t.type)){const s=VG(t).slice(1).map(r),a=s.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(s.join(", "))}else if(ag(t.type)){const s=t.domain(),a=s.length,o=a>i?s.slice(0,i-2).map(r).join(", ")+", ending with "+s.slice(-1).map(r):s.map(r).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(o)}else{const s=t.domain();return"values from ".concat(r(s[0])," to ").concat(r(ln(s)))}}let WG=0;function G_e(){WG=0}const D_="p_";function DM(e){return e&&e.gradient}function qG(e,t,n){const i=e.gradient;let r=e.id,s=i==="radial"?D_:"";return r||(r=e.id="gradient_"+WG++,i==="radial"?(e.x1=ko(e.x1,.5),e.y1=ko(e.y1,.5),e.r1=ko(e.r1,0),e.x2=ko(e.x2,.5),e.y2=ko(e.y2,.5),e.r2=ko(e.r2,.5),s=D_):(e.x1=ko(e.x1,0),e.y1=ko(e.y1,0),e.x2=ko(e.x2,1),e.y2=ko(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+s+r+")"}function ko(e,t){return e??t}function GG(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,s){return n.push({offset:r,color:s}),i}}}const cP={basis:{curve:Zbe},"basis-closed":{curve:eve},"basis-open":{curve:tve},bundle:{curve:nve,tension:"beta",value:.85},cardinal:{curve:ive,tension:"tension",value:0},"cardinal-open":{curve:sve,tension:"tension",value:0},"cardinal-closed":{curve:rve,tension:"tension",value:0},"catmull-rom":{curve:ave,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ove,tension:"alpha",value:.5},"catmull-rom-open":{curve:lve,tension:"alpha",value:.5},linear:{curve:iM},"linear-closed":{curve:uve},monotone:{horizontal:fve,vertical:cve},natural:{curve:dve},step:{curve:hve},"step-after":{curve:gve},"step-before":{curve:pve}};function RM(e,t,n){var i=at(cP,e)&&cP[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Y_e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},X_e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,K_e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,J_e=/^((\s+,?\s*)|(,\s*))/,Q_e=/^[01]/;function og(e){const t=[];return(e.match(X_e)||[]).forEach(i=>{let r=i[0];const s=r.toLowerCase(),a=Y_e[s],o=Z_e(s,a,i.slice(1).trim()),l=o.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,a)]),l!==a){s==="m"&&(r=r==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([r,...o.slice(u,u+a)])}}),t}function Z_e(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?Q_e:K_e,o=n.slice(r).match(a);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(J_e);l!==null&&(r+=l[0].length)}return i}const Gc=Math.PI/180,e2e=1e-14,td=Math.PI/2,Yo=Math.PI*2,jh=Math.sqrt(3)/2;var WA={},qA={},YG=[].join;function t2e(e,t,n,i,r,s,a,o,l){const u=YG.call(arguments);if(WA[u])return WA[u];const c=a*Gc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const h=d*(o-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(o-e)*.5;let g=h*h/(n*n)+p*p/(i*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const m=d/n,y=f/n,b=-f/i,v=d/i,_=m*o+y*l,S=b*o+v*l,E=m*e+y*t,w=b*e+v*t,O=(E-_)*(E-_)+(w-S)*(w-S);let D=1/O-.25;D<0&&(D=0);let x=Math.sqrt(D);s==r&&(x=-x);const A=.5*(_+E)-x*(w-S),C=.5*(S+w)+x*(E-_),I=Math.atan2(S-C,_-A);let k=Math.atan2(w-C,E-A)-I;k<0&&s===1?k+=Yo:k>0&&s===0&&(k-=Yo);const M=Math.ceil(Math.abs(k/(td+.001))),N=[];for(let R=0;R<M;++R){const T=I+R*k/M,z=I+(R+1)*k/M;N[R]=[A,C,T,z,n,i,f,d]}return WA[u]=N}function n2e(e){const t=YG.call(e);if(qA[t])return qA[t];var n=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7];const c=u*a,f=-l*o,d=l*a,h=u*o,p=Math.cos(r),g=Math.sin(r),m=Math.cos(s),y=Math.sin(s),b=.5*(s-r),v=Math.sin(b*.5),_=8/3*v*v/Math.sin(b),S=n+p-_*g,E=i+g+_*p,w=n+m,O=i+y,D=w+_*y,x=O-_*m;return qA[t]=[c*S+f*E,d*S+h*E,c*D+f*x,d*D+h*x,c*w+f*O,d*w+h*O]}const sa=["l",0,0,0,0,0,0,0];function i2e(e,t,n){const i=sa[0]=e[0];if(i==="a"||i==="A")sa[1]=t*e[1],sa[2]=n*e[2],sa[3]=e[3],sa[4]=e[4],sa[5]=e[5],sa[6]=t*e[6],sa[7]=n*e[7];else if(i==="h"||i==="H")sa[1]=t*e[1];else if(i==="v"||i==="V")sa[1]=n*e[1];else for(var r=1,s=e.length;r<s;++r)sa[r]=(r%2==1?t:n)*e[r];return sa}function t1(e,t,n,i,r,s){var a,o=null,l=0,u=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),s==null&&(s=r),e.beginPath&&e.beginPath();for(var b=0,v=t.length;b<v;++b){switch(a=t[b],(r!==1||s!==1)&&(a=i2e(a,r,s)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+i);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+i);break;case"h":l+=a[1],e.lineTo(l+n,u+i);break;case"H":l=a[1],e.lineTo(l+n,u+i);break;case"v":u+=a[1],e.lineTo(l+n,u+i);break;case"V":u=a[1],e.lineTo(l+n,u+i);break;case"m":l+=a[1],u+=a[2],m=l,y=u,e.moveTo(l+n,u+i);break;case"M":l=a[1],u=a[2],m=l,y=u,e.moveTo(l+n,u+i);break;case"c":d=l+a[5],h=u+a[6],c=l+a[3],f=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+i,c+n,f+i,d+n,h+i),l=d,u=h;break;case"C":l=a[5],u=a[6],c=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,c+n,f+i,l+n,u+i);break;case"s":d=l+a[3],h=u+a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+i,l+a[1]+n,u+a[2]+i,d+n,h+i),c=l+a[1],f=u+a[2],l=d,u=h;break;case"S":d=a[3],h=a[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+i,a[1]+n,a[2]+i,d+n,h+i),l=d,u=h,c=a[1],f=a[2];break;case"q":d=l+a[3],h=u+a[4],c=l+a[1],f=u+a[2],e.quadraticCurveTo(c+n,f+i,d+n,h+i),l=d,u=h;break;case"Q":d=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,d+n,h+i),l=d,u=h,c=a[1],f=a[2];break;case"t":d=l+a[1],h=u+a[2],o[0].match(/[QqTt]/)===null?(c=l,f=u):o[0]==="t"?(c=2*l-p,f=2*u-g):o[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+i,d+n,h+i),l=d,u=h,c=l+a[1],f=u+a[2];break;case"T":d=a[1],h=a[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+i,d+n,h+i),l=d,u=h;break;case"a":fP(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+i]),l+=a[6],u+=a[7];break;case"A":fP(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),l=a[6],u=a[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}o=a}}function fP(e,t,n,i){const r=t2e(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let s=0;s<r.length;++s){const a=n2e(r[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const dP=.5773502691896257,hP={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Yo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,s=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-s),e.lineTo(r,-s),e.lineTo(0,-n),e.lineTo(-r,-s),e.lineTo(-i,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=jh*n,r=i-n*dP,s=n/4;e.moveTo(0,-i-r),e.lineTo(-s,i-r),e.lineTo(s,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=jh*n,r=i-n*dP;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=jh*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=jh*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=jh*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=jh*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function XG(e){return at(hP,e)?hP[e]:r2e(e)}var GA={};function r2e(e){if(!at(GA,e)){const t=og(e);GA[e]={draw:function(n,i){t1(n,t,0,0,Math.sqrt(i)/2)}}}return GA[e]}const $u=.448084975506;function s2e(e){return e.x}function a2e(e){return e.y}function o2e(e){return e.width}function l2e(e){return e.height}function Vl(e){return typeof e=="function"?e:()=>+e}function ob(e,t,n){return Math.max(t,Math.min(e,n))}function KG(){var e=s2e,t=a2e,n=o2e,i=l2e,r=Vl(0),s=r,a=r,o=r,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+i.call(this,c),b=Math.min(m,y)/2,v=ob(+r.call(this,c),0,b),_=ob(+s.call(this,c),0,b),S=ob(+a.call(this,c),0,b),E=ob(+o.call(this,c),0,b);if(l||(l=h=gf()),v<=0&&_<=0&&S<=0&&E<=0)l.rect(p,g,m,y);else{var w=p+m,O=g+y;l.moveTo(p+v,g),l.lineTo(w-_,g),l.bezierCurveTo(w-$u*_,g,w,g+$u*_,w,g+_),l.lineTo(w,O-E),l.bezierCurveTo(w,O-$u*E,w-$u*E,O,w-E,O),l.lineTo(p+S,O),l.bezierCurveTo(p+$u*S,O,p,O-$u*S,p,O-S),l.lineTo(p,g+v),l.bezierCurveTo(p,g+$u*v,p+$u*v,g,p+v,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Vl(c),u):e},u.y=function(c){return arguments.length?(t=Vl(c),u):t},u.width=function(c){return arguments.length?(n=Vl(c),u):n},u.height=function(c){return arguments.length?(i=Vl(c),u):i},u.cornerRadius=function(c,f,d,h){return arguments.length?(r=Vl(c),s=f!=null?Vl(f):r,o=d!=null?Vl(d):r,a=h!=null?Vl(h):s,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function JG(){var e,t,n,i,r=null,s,a,o,l;function u(f,d,h){const p=h/2;if(s){var g=o-d,m=f-a;if(g||m){var y=Math.sqrt(g*g+m*m),b=(g/=y)*l,v=(m/=y)*l,_=Math.atan2(m,g);r.moveTo(a-b,o-v),r.lineTo(f-g*p,d-m*p),r.arc(f,d,p,_-Math.PI,_),r.lineTo(a+b,o+v),r.arc(a,o,l,_,_+Math.PI)}else r.arc(f,d,p,0,Yo);r.closePath()}else s=1;a=f,o=d,l=p}function c(f){var d,h=f.length,p,g=!1,m;for(r==null&&(r=m=gf()),d=0;d<=h;++d)!(d<h&&i(p=f[d],d,f))===g&&(g=!g)&&(s=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return r=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(i=f,c):i},c.context=function(f){return arguments.length?(f==null?r=null:r=f,c):r},c}function ny(e,t){return e??t}const iy=e=>e.x||0,ry=e=>e.y||0,u2e=e=>e.width||0,c2e=e=>e.height||0,f2e=e=>(e.x||0)+(e.width||0),d2e=e=>(e.y||0)+(e.height||0),h2e=e=>e.startAngle||0,p2e=e=>e.endAngle||0,g2e=e=>e.padAngle||0,m2e=e=>e.innerRadius||0,y2e=e=>e.outerRadius||0,b2e=e=>e.cornerRadius||0,v2e=e=>ny(e.cornerRadiusTopLeft,e.cornerRadius)||0,_2e=e=>ny(e.cornerRadiusTopRight,e.cornerRadius)||0,w2e=e=>ny(e.cornerRadiusBottomRight,e.cornerRadius)||0,S2e=e=>ny(e.cornerRadiusBottomLeft,e.cornerRadius)||0,E2e=e=>ny(e.size,64),A2e=e=>e.size||1,tS=e=>e.defined!==!1,O2e=e=>XG(e.shape||"circle"),C2e=Kbe().startAngle(h2e).endAngle(p2e).padAngle(g2e).innerRadius(m2e).outerRadius(y2e).cornerRadius(b2e),I2e=xq().x(iy).y1(ry).y0(d2e).defined(tS),x2e=xq().y(ry).x1(iy).x0(f2e).defined(tS),T2e=Iq().x(iy).y(ry).defined(tS),k2e=KG().x(iy).y(ry).width(u2e).height(c2e).cornerRadius(v2e,_2e,w2e,S2e),M2e=Qbe().type(O2e).size(E2e),D2e=JG().x(iy).y(ry).defined(tS).size(A2e);function LM(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function R2e(e,t){return C2e.context(e)(t)}function L2e(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?x2e:I2e).curve(RM(i,n.orient,n.tension)).context(e)(t)}function N2e(e,t){const n=t[0],i=n.interpolate||"linear";return T2e.curve(RM(i,n.orient,n.tension)).context(e)(t)}function Jg(e,t,n,i){return k2e.context(e)(t,n,i)}function F2e(e,t){return(t.mark.shape||t.shape).context(e)(t)}function P2e(e,t){return M2e.context(e)(t)}function B2e(e,t){return D2e.context(e)(t)}var QG=1;function ZG(){QG=1}function NM(e,t,n){var i=t.clip,r=e._defs,s=t.clip_id||(t.clip_id="clip"+QG++),a=r.clipping[s]||(r.clipping[s]={id:s});return Ht(i)?a.path=i(null):LM(n)?a.path=Jg(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Ai(e){this.clear(),e&&this.union(e)}Ai.prototype={clone(){return new Ai(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),u=t-t*o+n*l,c=n-t*l-n*o;return[o*i-l*r+u,l*i+o*r+c,o*i-l*a+u,l*i+o*a+c,o*s-l*r+u,l*s+o*r+c,o*s-l*a+u,l*s+o*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function nS(e){this.mark=e,this.bounds=this.bounds||new Ai}function iS(e){nS.call(this,e),this.items=this.items||[]}Te(iS,nS);function FM(e){this._pending=0,this._loader=e||Mw()}function pP(e){e._pending+=1}function Mm(e){e._pending-=1}FM.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return pP(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Mm(t),n)).catch(()=>(Mm(t),null))},loadImage(e){const t=this,n=mve();return pP(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const s=new n,a=at(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Mm(t),s.onerror=()=>Mm(t),s.src=r,s}).catch(i=>(Mm(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}n(!1)})}};function ku(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?j2e(t,i):0))}return e}function j2e(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const U2e=Yo-1e-8;let rS,tv,nv,bd,pI,iv,gI,mI;const uc=(e,t)=>rS.add(e,t),rv=(e,t)=>uc(tv=e,nv=t),gP=e=>uc(e,rS.y1),mP=e=>uc(rS.x1,e),nd=(e,t)=>pI*e+gI*t,id=(e,t)=>iv*e+mI*t,YA=(e,t)=>uc(nd(e,t),id(e,t)),XA=(e,t)=>rv(nd(e,t),id(e,t));function sy(e,t){return rS=e,t?(bd=t*Gc,pI=mI=Math.cos(bd),iv=Math.sin(bd),gI=-iv):(pI=mI=1,bd=iv=gI=0),z2e}const z2e={beginPath(){},closePath(){},moveTo:XA,lineTo:XA,rect(e,t,n,i){bd?(YA(e+n,t),YA(e+n,t+i),YA(e,t+i),XA(e,t)):(uc(e+n,t+i),rv(e,t))},quadraticCurveTo(e,t,n,i){const r=nd(e,t),s=id(e,t),a=nd(n,i),o=id(n,i);yP(tv,r,a,gP),yP(nv,s,o,mP),rv(a,o)},bezierCurveTo(e,t,n,i,r,s){const a=nd(e,t),o=id(e,t),l=nd(n,i),u=id(n,i),c=nd(r,s),f=id(r,s);bP(tv,a,l,c,gP),bP(nv,o,u,f,mP),rv(c,f)},arc(e,t,n,i,r,s){if(i+=bd,r+=bd,tv=n*Math.cos(r)+e,nv=n*Math.sin(r)+t,Math.abs(r-i)>U2e)uc(e-n,t-n),uc(e+n,t+n);else{const a=u=>uc(n*Math.cos(u)+e,n*Math.sin(u)+t);let o,l;if(a(i),a(r),r!==i)if(i=i%Yo,i<0&&(i+=Yo),r=r%Yo,r<0&&(r+=Yo),r<i&&(s=!s,o=i,i=r,r=o),s)for(r-=Yo,o=i-i%td,l=0;l<4&&o>r;++l,o-=td)a(o);else for(o=i-i%td+td,l=0;l<4&&o<r;++l,o=o+td)a(o)}}};function yP(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function bP(e,t,n,i,r){const s=i-e+3*t-3*n,a=e+n-2*t,o=e-t;let l=0,u=0,c;Math.abs(s)>e2e?(c=a*a+o*s,c>=0&&(c=Math.sqrt(c),l=(-a+c)/s,u=(-a-c)/s)):l=.5*o/a,0<l&&l<1&&r(vP(l,e,t,n,i)),0<u&&u<1&&r(vP(u,e,t,n,i))}function vP(e,t,n,i,r){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*i+o*e*r}var Oc=(Oc=Ac(1,1))?Oc.getContext("2d"):null;const yI=new Ai;function PM(e){return function(t,n){if(!Oc)return!0;e(Oc,t),yI.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:s,y2:a}=yI;for(let o=r;o<=a;++o)for(let l=i;l<=s;++l)if(Oc.isPointInPath(l,o))return!0;return!1}}function BM(e,t){return t.contains(e.x||0,e.y||0)}function eY(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,s=e.height||0;return t.intersects(yI.set(n,i,n+r,i+s))}function tY(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:i;return lp(t,n,i,r,s)}function lp(e,t,n,i,r){const{x1:s,y1:a,x2:o,y2:l}=e,u=i-t,c=r-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-u,p=-(s-t)),m===1&&(h=u,p=o-t),m===2&&(h=-c,p=-(a-n)),m===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function lg(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Na(e,t){return e??t}function _P(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function V2e(e,t,n){const i=n.width(),r=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Na(t.x1,.5)*i,n.y1+Na(t.y1,.5)*r,Math.max(i,r)*Na(t.r1,0),n.x1+Na(t.x2,.5)*i,n.y1+Na(t.y2,.5)*r,Math.max(i,r)*Na(t.r2,.5));else{const a=Na(t.x1,0),o=Na(t.y1,0),l=Na(t.x2,1),u=Na(t.y2,0);if(a===l||o===u||i===r)s=e.createLinearGradient(n.x1+a*i,n.y1+o*r,n.x1+l*i,n.y1+u*r);else{const c=Ac(Math.ceil(i),Math.ceil(r)),f=c.getContext("2d");return f.scale(i,r),f.fillStyle=_P(f.createLinearGradient(a,o,l,u),t.stops),f.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}}return _P(s,t.stops)}function nY(e,t,n){return DM(n)?V2e(e,n,t.bounds):n}function R_(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=nY(e,t,t.fill),!0):!1}var $2e=[];function ug(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=nY(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||$2e),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function H2e(e,t){return e.zindex-t.zindex||e.index-t.index}function jM(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,s;for(r=0,s=t.length;r<s;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(H2e)}function mo(e,t){var n=e.items,i,r;if(!n||!n.length)return;const s=jM(e);if(s&&s.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=s}for(i=0,r=n.length;i<r;++i)t(n[i])}function L_(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const s=jM(e);for(s&&s.length&&(n=s),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===s){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function UM(e){return function(t,n,i){mo(n,r=>{(!i||i.intersects(r.bounds))&&iY(e,t,r,r)})}}function W2e(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&iY(e,t,n.items[0],n.items)}}function iY(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(lg(t,n),n.fill&&R_(t,n,r)&&t.fill(),n.stroke&&ug(t,n,r)&&t.stroke()))}function sS(e){return e=e||Sa,function(t,n,i,r,s,a){return i*=t.pixelRatio,r*=t.pixelRatio,L_(n,o=>{const l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&e(t,o,i,r,s,a))return o})}}function ay(e,t){return function(n,i,r,s){var a=Array.isArray(i)?i[0]:i,o=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,s)||l&&n.isPointInStroke(r,s)}}function zM(e){return sS(ay(e))}function kd(e,t){return"translate("+e+","+t+")"}function VM(e){return"rotate("+e+")"}function q2e(e,t){return"scale("+e+","+t+")"}function rY(e){return kd(e.x||0,e.y||0)}function G2e(e){return kd(e.x||0,e.y||0)+(e.angle?" "+VM(e.angle):"")}function Y2e(e){return kd(e.x||0,e.y||0)+(e.angle?" "+VM(e.angle):"")+(e.scaleX||e.scaleY?" "+q2e(e.scaleX||1,e.scaleY||1):"")}function $M(e,t,n){function i(a,o){a("transform",G2e(o)),a("d",t(null,o))}function r(a,o){return t(sy(a,o.angle),o),ku(a,o).translate(o.x||0,o.y||0)}function s(a,o){var l=o.x||0,u=o.y||0,c=o.angle||0;a.translate(l,u),c&&a.rotate(c*=Gc),a.beginPath(),t(a,o),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:UM(s),pick:zM(s),isect:n||PM(s)}}var X2e=$M("arc",R2e);function K2e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,s=1/0,a,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<s&&(s=o,a=e[r]));return a}function J2e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,s,a;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],s=e[i].y-t[1],a=r*r+s*s,a<n))return e[i];return null}function Q2e(e,t){for(var n=e.length,i,r,s;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],s=i*i+r*r,i=e[n].size||1,s<i*i))return e[n];return null}function HM(e,t,n){function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function r(l,u){var c=u.items;return c.length===0?l:(t(sy(l),c),ku(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const a=ay(s);function o(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,a(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:W2e(s),pick:o,isect:BM,tip:n}}var Z2e=HM("area",L2e,K2e);function ewe(e,t){var n=t.clip;e.save(),Ht(n)?(e.beginPath(),n(e),e.clip()):sY(e,t.group)}function sY(e,t){e.beginPath(),LM(t)?Jg(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function aY(e){const t=Na(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function twe(e,t){e("transform",rY(t))}function oY(e,t){const n=aY(t);e("d",Jg(null,t,n,n))}function nwe(e,t){e("class","background"),e("aria-hidden",!0),oY(e,t)}function iwe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?oY(e,t):e("d","")}function rwe(e,t,n){const i=t.clip?NM(n,t,t):null;e("clip-path",i)}function swe(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ku(e,t),e.translate(t.x||0,t.y||0)}function n1(e,t,n,i){const r=aY(t);e.beginPath(),Jg(e,t,(n||0)+r,(i||0)+r)}const awe=ay(n1),owe=ay(n1,!1),lwe=ay(n1,!0);function uwe(e,t,n){mo(t,i=>{const r=i.x||0,s=i.y||0,a=i.strokeForeground,o=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&o&&(n1(e,i,r,s),lg(e,i),i.fill&&R_(e,i,o)&&e.fill(),i.stroke&&!a&&ug(e,i,o)&&e.stroke()),e.save(),e.translate(r,s),i.clip&&sY(e,i),n&&n.translate(-r,-s),mo(i,l=>{this.draw(e,l,n)}),n&&n.translate(r,s),e.restore(),a&&i.stroke&&o&&(n1(e,i,r,s),lg(e,i),ug(e,i,o)&&e.stroke())})}function cwe(e,t,n,i,r,s){if(t.bounds&&!t.bounds.contains(r,s)||!t.items)return null;const a=n*e.pixelRatio,o=i*e.pixelRatio;return L_(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(r,s))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(r<c||r>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=r-c,f=s-f,g&&LM(l)&&!lwe(e,l,a,o))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&owe(e,l,a,o)?(e.restore(),l):(u=L_(l,b=>fwe(b,c,f)?this.pick(b,n,i,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&awe(e,l,a,o)&&(u=l),e.restore(),u||null)})}function fwe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var dwe={type:"group",tag:"g",nested:!1,attr:twe,bound:swe,draw:uwe,pick:cwe,isect:eY,content:rwe,background:nwe,foreground:iwe},i1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function WM(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function qM(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function GM(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function aS(e,t){return e==="center"?t/2:e==="right"?t:0}function oS(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function hwe(e,t,n){const i=WM(t,n),r=qM(t,i),s=GM(t,i),a=(t.x||0)-aS(t.align,r),o=(t.y||0)-oS(t.baseline,s),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,i1["xmlns:xlink"],"xlink:href"),e("transform",kd(a,o)),e("width",r),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function pwe(e,t){const n=t.image,i=qM(t,n),r=GM(t,n),s=(t.x||0)-aS(t.align,i),a=(t.y||0)-oS(t.baseline,r);return e.set(s,a,s+i,a+r)}function gwe(e,t,n){mo(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=WM(i,this);let s=qM(i,r),a=GM(i,r);if(s===0||a===0)return;let o=(i.x||0)-aS(i.align,s),l=(i.y||0)-oS(i.baseline,a),u,c,f,d;i.aspect!==!1&&(c=r.width/r.height,f=i.width/i.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,l+=(a-d)/2,a=d):(d=a*c,o+=(s-d)/2,s=d))),(r.complete||r.toDataURL)&&(lg(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,s,a))})}var mwe={type:"image",tag:"image",nested:!1,attr:hwe,bound:pwe,draw:gwe,pick:sS(),isect:Sa,get:WM,xOffset:aS,yOffset:oS},ywe=HM("line",N2e,J2e);function bwe(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Y2e(t)),e("d",t.path)}function sv(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*Gc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=og(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),t1(e,l,0,0,s,a),e.rotate(-o),e.translate(-i,-r)):t1(e,l,i,r,s,a)}function vwe(e,t){return sv(sy(e,t.angle),t)?e.set(0,0,0,0):ku(e,t,!0)}var _we={type:"path",tag:"path",nested:!1,attr:bwe,bound:vwe,draw:UM(sv),pick:zM(sv),isect:PM(sv)};function wwe(e,t){e("d",Jg(null,t))}function Swe(e,t){var n,i;return ku(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function wP(e,t){e.beginPath(),Jg(e,t)}var Ewe={type:"rect",tag:"path",nested:!1,attr:wwe,bound:Swe,draw:UM(wP),pick:zM(wP),isect:eY};function Awe(e,t){e("transform",rY(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Owe(e,t){var n,i;return ku(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function lY(e,t,n){var i,r,s,a;return t.stroke&&ug(e,t,n)?(i=t.x||0,r=t.y||0,s=t.x2!=null?t.x2:i,a=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(s,a),!0):!1}function Cwe(e,t,n){mo(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&lY(e,i,r)&&(lg(e,i),e.stroke())}})}function Iwe(e,t,n,i){return e.isPointInStroke?lY(e,t,1)&&e.isPointInStroke(n,i):!1}var xwe={type:"rule",tag:"line",nested:!1,attr:Awe,bound:Owe,draw:Cwe,pick:sS(Iwe),isect:tY},Twe=$M("shape",F2e),kwe=$M("symbol",P2e,BM);const SP=hH();var ro={height:Il,measureWidth:YM,estimateWidth:bI,width:bI,canvas:uY};uY(!0);function uY(e){ro.width=e&&Oc?YM:bI}function bI(e,t){return cY(Xc(e,t),Il(e))}function cY(e,t){return~~(.8*e.length*t)}function YM(e,t){return Il(e)<=0||!(t=Xc(e,t))?0:fY(t,lS(e))}function fY(e,t){const n="(".concat(t,") ").concat(e);let i=SP.get(n);return i===void 0&&(Oc.font=t,i=Oc.measureText(e).width,SP.set(n,i)),i}function Il(e){return e.fontSize!=null?+e.fontSize||0:11}function Yc(e){return e.lineHeight!=null?e.lineHeight:Il(e)+2}function Mwe(e){return ge(e)?e.length>1?e:e[0]:e}function oy(e){return Mwe(e.lineBreak&&e.text&&!ge(e.text)?e.text.split(e.lineBreak):e.text)}function XM(e){const t=oy(e);return(ge(t)?t.length-1:0)*Yc(e)}function Xc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Rwe(e,n):n}function Dwe(e){if(ro.width===YM){const t=lS(e);return n=>fY(n,t)}else{const t=Il(e);return n=>cY(n,t)}}function Rwe(e,t){var n=+e.limit,i=Dwe(e);if(i(t)<n)return t;var r=e.ellipsis||"\u2026",s=e.dir==="rtl",a=0,o=t.length,l;if(n-=i(r),s){for(;a<o;)l=a+o>>>1,i(t.slice(l))>n?a=l+1:o=l;return r+t.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),i(t.slice(0,l))<n?a=l:o=l-1;return t.slice(0,a)+r}}function ly(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function lS(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Il(e)+"px "+ly(e,t)}function KM(e){var t=e.baseline,n=Il(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Yc(e):t==="line-bottom"?.29*n-.5*Yc(e):0)}const Lwe={left:"start",center:"middle",right:"end"},_0=new Ai;function uS(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-td,t+=i*Math.cos(r),n+=i*Math.sin(r)),_0.x1=t,_0.y1=n,_0}function Nwe(e,t){var n=t.dx||0,i=(t.dy||0)+KM(t),r=uS(t),s=r.x1,a=r.y1,o=t.angle||0,l;e("text-anchor",Lwe[t.align]||"start"),o?(l=kd(s,a)+" "+VM(o),(n||i)&&(l+=" "+kd(n,i))):l=kd(s+n,a+i),e("transform",l)}function JM(e,t,n){var i=ro.height(t),r=t.align,s=uS(t),a=s.x1,o=s.y1,l=t.dx||0,u=(t.dy||0)+KM(t)-Math.round(.8*i),c=oy(t),f;if(ge(c)?(i+=Yc(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ro.width(t,h)),0)):f=ro.width(t,c),r==="center"?l-=f/2:r==="right"&&(l-=f),e.set(l+=a,u+=o,l+f,u+i),t.angle&&!n)e.rotate(t.angle*Gc,a,o);else if(n===2)return e.rotatedPoints(t.angle*Gc,a,o);return e}function Fwe(e,t,n){mo(t,i=>{var r=i.opacity==null?1:i.opacity,s,a,o,l,u,c,f;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=lS(i),e.textAlign=i.align||"left",s=uS(i),a=s.x1,o=s.y1,i.angle&&(e.save(),e.translate(a,o),e.rotate(i.angle*Gc),a=o=0),a+=i.dx||0,o+=(i.dy||0)+KM(i),c=oy(i),lg(e,i),ge(c))for(u=Yc(i),l=0;l<c.length;++l)f=Xc(i,c[l]),i.fill&&R_(e,i,r)&&e.fillText(f,a,o),i.stroke&&ug(e,i,r)&&e.strokeText(f,a,o),o+=u;else f=Xc(i,c),i.fill&&R_(e,i,r)&&e.fillText(f,a,o),i.stroke&&ug(e,i,r)&&e.strokeText(f,a,o);i.angle&&e.restore()}})}function Pwe(e,t,n,i,r,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=uS(t),o=a.x1,l=a.y1,u=JM(_0,t,1),c=-t.angle*Gc,f=Math.cos(c),d=Math.sin(c),h=f*r-d*s+(o-f*o+d*l),p=d*r+f*s+(l-d*o-f*l);return u.contains(h,p)}function Bwe(e,t){const n=JM(_0,e,2);return lp(t,n[0],n[1],n[2],n[3])||lp(t,n[0],n[1],n[4],n[5])||lp(t,n[4],n[5],n[6],n[7])||lp(t,n[2],n[3],n[6],n[7])}var jwe={type:"text",tag:"text",nested:!1,attr:Nwe,bound:JM,draw:Fwe,pick:sS(Pwe),isect:Bwe},Uwe=HM("trail",B2e,Q2e),Zs={arc:X2e,area:Z2e,group:dwe,image:mwe,line:ywe,path:_we,rect:Ewe,rule:xwe,shape:Twe,symbol:kwe,text:jwe,trail:Uwe};function vI(e,t,n){var i=Zs[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new Ai),e,n)}var EP={mark:null};function dY(e,t,n){var i=Zs[e.marktype],r=i.bound,s=e.items,a=s&&s.length,o,l,u,c;if(i.nested)return a?u=s[0]:(EP.mark=e,u=EP),c=vI(u,r,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ai,a)for(o=0,l=s.length;o<l;++o)t.union(vI(s[o],r,n));return e.bounds=t}const zwe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function hY(e,t){return JSON.stringify(e,zwe,t)}function pY(e){const t=typeof e=="string"?JSON.parse(e):e;return gY(t)}function gY(e){var t=e.marktype,n=e.items,i,r,s;if(n)for(r=0,s=n.length;r<s;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&gY(n[r]);return t&&dY(e),e}function QM(e){arguments.length?this.root=pY(e):(this.root=mY({marktype:"group",name:"root",role:"frame"}),this.root.items=[new iS(this.root)])}QM.prototype={toJSON(e){return hY(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const i=mY(e,t);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function mY(e,t){const n={bounds:new Ai,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function cc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ZM(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function fs(e,t,n,i){var r=e.childNodes[t],s;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(s=r||null,r=cc(e.ownerDocument,n,i),e.insertBefore(r,s)),r}function qa(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function yY(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function cS(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Vwe(e,t,n,i){var r=e&&e.mark,s,a;if(r&&(s=Zs[r.marktype]).tip){for(a=cS(t,n),a[0]-=i[0],a[1]-=i[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=s.tip(r.items,a)}return e}function Kc(e,t){this._active=null,this._handlers={},this._loader=e||Mw(),this._tooltip=t||$we}function $we(e,t,n,i){e.element().setAttribute("title",i||"")}Kc.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),s=cc(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Vwe(t,e,this.canvas(),this._origin);const i=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,i)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,s=r.width(),a=r.height();let o=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)o+=e.x||0,l+=e.y||0;return{x:o,y:l,width:s,height:a,left:o,top:l,right:o+s,bottom:l+a}}};function xl(e){this._el=null,this._bgcolor=null,this._loader=new FM(e)}xl.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(s=>{s&&r(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Hwe="keydown",Wwe="keypress",qwe="keyup",bY="dragenter",av="dragleave",vY="dragover",_I="mousedown",Gwe="mouseup",N_="mousemove",w0="mouseout",_Y="mouseover",F_="click",Ywe="dblclick",Xwe="wheel",wY="mousewheel",P_="touchstart",B_="touchmove",j_="touchend",Kwe=[Hwe,Wwe,qwe,bY,av,vY,_I,Gwe,N_,w0,_Y,F_,Ywe,Xwe,wY,P_,B_,j_],wI=N_,r1=w0,SI=F_;function uy(e,t){Kc.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const Jwe=e=>e===P_||e===B_||e===j_?[P_,B_,j_]:[e];function AP(e,t){Jwe(t).forEach(n=>Qwe(e,n))}function Qwe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function OP(e,t,n){return function(i){const r=this._active,s=this.pickEvent(i);s===r?this.fire(e,i):((!r||!r.exit)&&this.fire(n,i),this._active=s,this.fire(t,i),this.fire(e,i))}}function CP(e){return function(t){this.fire(e,t),this._active=null}}Te(uy,Kc,{initialize(e,t,n){return this._canvas=e&&ZM(e,"canvas"),[F_,_I,N_,w0,av].forEach(i=>AP(this,i)),Kc.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Kwe,DOMMouseScroll(e){this.fire(wY,e)},mousemove:OP(N_,_Y,w0),dragover:OP(vY,bY,av),mouseout:CP(w0),dragleave:CP(av),mousedown(e){this._down=this._active,this.fire(_I,e)},click(e){this._down===this._active&&(this.fire(F_,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(P_,e,!0)},touchmove(e){this.fire(B_,e,!0)},touchend(e){this.fire(j_,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===SI&&i&&i.href?this.handleHref(t,i,i.href):(e===wI||e===r1)&&this.handleTooltip(t,i,e!==r1),r)for(let s=0,a=r.length;s<a;++s)r[s].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(AP(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=cS(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const s=this.context();return Zs[e.marktype].pick.call(this,s,e,t,n,i,r)}});function Zwe(){return typeof window<"u"&&window.devicePixelRatio||1}var eSe=Zwe();function tSe(e,t,n,i,r,s){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=a?eSe:r;e.width=t*l,e.height=n*l;for(const u in s)o[u]=s[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}function U_(e){xl.call(this,e),this._options={},this._redraw=!1,this._dirty=new Ai,this._tempb=new Ai}const IP=xl.prototype,nSe=(e,t,n)=>new Ai().set(0,0,t,n).translate(-e[0],-e[1]);function iSe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}Te(U_,xl,{initialize(e,t,n,i,r,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Ac(1,1,this._options.type),e&&this._canvas&&(qa(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),IP.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(IP.resize.call(this,e,t,n,i),this._canvas)tSe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||he("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,i=this._width,r=this._height,s=this._dirty,a=nSe(n,i,r);t.save();const o=this._redraw||s.empty()?(this._redraw=!1,a.expand(1)):iSe(t,a.intersect(s),n);return this.clear(-n[0],-n[1],i,r),this.draw(t,e,o),t.restore(),s.clear(),this},draw(e,t,n){const i=Zs[t.marktype];t.clip&&ewe(e,t),i.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,s=this.context();r.type!=="pdf"&&!r.externalContext&&s.clearRect(e,t,n,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,i))}});function eD(e,t){Kc.call(this,e,t);const n=this;n._hrefHandler=EI(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=EI(n,(i,r)=>{n.handleTooltip(i,r,i.type!==r1)})}const EI=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};Te(eD,Kc,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(SI,this._hrefHandler),i.removeEventListener(wI,this._tooltipHandler),i.removeEventListener(r1,this._tooltipHandler)),this._svg=i=e&&ZM(e,"svg"),i&&(i.addEventListener(SI,this._hrefHandler),i.addEventListener(wI,this._tooltipHandler),i.addEventListener(r1,this._tooltipHandler)),Kc.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const s={type:e,handler:t,listener:EI(this,t)};(i[n]||(i[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const SY="aria-hidden",tD="aria-label",nD="role",iD="aria-roledescription",EY="graphics-object",rD="graphics-symbol",AY=(e,t,n)=>({[nD]:e,[iD]:t,[tD]:n||void 0}),rSe=po(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),xP={axis:{desc:"axis",caption:oSe},legend:{desc:"legend",caption:lSe},"title-text":{desc:"title",caption:e=>"Title text '".concat(kP(e),"'")},"title-subtitle":{desc:"subtitle",caption:e=>"Subtitle text '".concat(kP(e),"'")}},TP={ariaRole:nD,ariaRoleDescription:iD,description:tD};function OY(e,t){const n=t.aria===!1;if(e(SY,n||void 0),n||t.description==null)for(const i in TP)e(TP[i],void 0);else{const i=t.mark.marktype;e(tD,t.description),e(nD,t.ariaRole||(i==="group"?EY:rD)),e(iD,t.ariaRoleDescription||"".concat(i," mark"))}}function CY(e){return e.aria===!1?{[SY]:!0}:rSe[e.role]?null:xP[e.role]?aSe(e,xP[e.role]):sSe(e)}function sSe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return AY(n?EY:rD,"".concat(t," mark container"),e.description)}function aSe(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return AY(t.role||rD,t.desc,n.description||i(n))}catch{return null}}function kP(e){return Pe(e.text).join(" ")}function oSe(e){const t=e.datum,n=e.orient,i=t.title?IY(e):null,r=e.context,s=r.scales[t.scale].value,a=r.dataflow.locale(),o=s.type,l=n==="left"||n==="right"?"Y":"X";return"".concat(l,"-axis")+(i?" titled '".concat(i,"'"):"")+" for a ".concat(ag(o)?"discrete":o," scale")+" with ".concat(HG(a,s,e))}function lSe(e){const t=e.datum,n=t.title?IY(e):null,i="".concat(t.type||""," legend").trim(),r=t.scales,s=Object.keys(r),a=e.context,o=a.scales[r[s[0]]].value,l=a.dataflow.locale();return cSe(i)+(n?" titled '".concat(n,"'"):"")+" for ".concat(uSe(s))+" with ".concat(HG(l,o,e))}function IY(e){try{return Pe(ln(e.items).items[0].text).join(" ")}catch{return null}}function uSe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+ln(e)}function cSe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const xY=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fSe=e=>xY(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function sD(){let e="",t="",n="";const i=[],r=()=>t=n="",s=l=>{t&&(e+="".concat(t,">").concat(n),r()),i.push(l)},a=(l,u)=>(u!=null&&(t+=" ".concat(l,'="').concat(fSe(u),'"')),o),o={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)a(h,d[h]);return o},close(){const l=i.pop();return t?e+=t+(n?">".concat(n,"</").concat(l,">"):"/>"):e+="</".concat(l,">"),r(),o},attr:a,text:l=>(n+=xY(l),o),toString:()=>e};return o}const TY=e=>kY(sD(),e)+"";function kY(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):kY(e,i)}return e.close()}const z_={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},V_={blend:"mix-blend-mode"},MY={fill:"none","stroke-miterlimit":10},Dm=0,MP="http://www.w3.org/2000/xmlns/",Li=i1.xmlns;function aD(e){xl.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const KA=xl.prototype;Te(aD,xl,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=fs(e,0,"svg",Li),this._svg.setAttributeNS(MP,"xmlns",Li),this._svg.setAttributeNS(MP,"xmlns:xlink",i1["xmlns:xlink"]),this._svg.setAttribute("version",i1.version),this._svg.setAttribute("class","marks"),qa(e,1),this._root=fs(this._svg,Dm,"g",Li),fc(this._root,MY),qa(this._svg,Dm+1)),this.background(this._bgcolor),KA.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),KA.background.apply(this,arguments)},resize(e,t,n,i){return KA.resize.call(this,e,t,n,i),this._svg&&(fc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=fs(e,Dm,"rect",Li),fc(n,{width:this._width,height:this._height,fill:t}));const i=TY(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),qa(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,s,a,o,l;for(a=0,o=e.length;a<o;++a)if(n=e[a],i=n.mark,i.marktype!==r&&(r=i.marktype,s=Zs[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,DP(n,t),i.items.forEach(u=>{u.dirty=t})),!i.zdirty){if(n.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=s.nested?i.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,DP(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const i=this._svg,r=Zs[t.marktype],s=t.interactive===!1?"none":null,a=r.tag==="g",o=RP(t,e,n,"g",i);o.setAttribute("class",yY(t));const l=CY(t);for(const d in l)Lr(o,d,l[d]);a||Lr(o,"pointer-events",s),Lr(o,"clip-path",t.clip?NM(this,t,t.group):null);let u=null,c=0;const f=d=>{const h=this.isDirty(d),p=RP(d,o,u,r.tag,i);h&&(this._update(r,p,d),a&&pSe(this,p,d)),u=p,++c};return r.nested?t.items.length&&f(t.items[0]):mo(t,f),qa(o,c),o},_update(e,t,n){au=t,br=t.__values__,OY(S0,n),e.attr(S0,n,this);const i=mSe[e.type];i&&i.call(this,e,t,n),au&&this.style(au,n)},style(e,t){if(t!=null){for(const n in z_){let i=n==="font"?ly(t):t[n];if(i===br[n])continue;const r=z_[n];i==null?e.removeAttribute(r):(DM(i)&&(i=qG(i,this._defs.gradient,DY())),e.setAttribute(r,i+"")),br[n]=i}for(const n in V_)ov(e,V_[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=fs(e,Dm+1,"defs",Li)),i=dSe(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=fs(e,Dm+1,"defs",Li)),i=hSe(n,t.clipping[r],i);n&&(i===0?(e.removeChild(n),t.el=null):qa(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function DP(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function dSe(e,t,n){let i,r,s;if(t.gradient==="radial"){let a=fs(e,n++,"pattern",Li);fc(a,{id:D_+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=fs(a,0,"rect",Li),fc(a,{width:1,height:1,fill:"url(".concat(DY(),"#").concat(t.id,")")}),e=fs(e,n++,"radialGradient",Li),fc(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=fs(e,n++,"linearGradient",Li),fc(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)s=fs(e,i,"stop",Li),s.setAttribute("offset",t.stops[i].offset),s.setAttribute("stop-color",t.stops[i].color);return qa(e,i),n}function hSe(e,t,n){let i;return e=fs(e,n,"clipPath",Li),e.setAttribute("id",t.id),t.path?(i=fs(e,0,"path",Li),i.setAttribute("d",t.path)):(i=fs(e,0,"rect",Li),fc(i,{x:0,y:0,width:t.width,height:t.height})),qa(e,1),n+1}function pSe(e,t,n){t=t.lastChild.previousSibling;let i,r=0;mo(n,s=>{i=e.mark(t,s,i),++r}),qa(t,1+r)}function RP(e,t,n,i,r){let s=e._svg,a;if(!s&&(a=t.ownerDocument,s=cc(a,i,Li),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},i==="g"))){const o=cc(a,"path",Li);s.appendChild(o),o.__data__=e;const l=cc(a,"g",Li);s.appendChild(l),l.__data__=e;const u=cc(a,"path",Li);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==r||gSe(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function gSe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let au=null,br=null;const mSe={group(e,t,n){const i=au=t.childNodes[2];br=i.__values__,e.foreground(S0,n,this),br=t.__values__,au=t.childNodes[1],e.content(S0,n,this);const r=au=t.childNodes[0];e.background(S0,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==br.events&&(Lr(i,"pointer-events",s),Lr(r,"pointer-events",s),br.events=s),n.strokeForeground&&n.stroke){const a=n.fill;Lr(i,"display",null),this.style(r,n),Lr(r,"stroke",null),a&&(n.fill=null),br=i.__values__,this.style(i,n),a&&(n.fill=a),au=null}else Lr(i,"display","none")},image(e,t,n){n.smooth===!1?(ov(t,"image-rendering","optimizeSpeed"),ov(t,"image-rendering","pixelated")):ov(t,"image-rendering",null)},text(e,t,n){const i=oy(n);let r,s,a,o;ge(i)?(s=i.map(l=>Xc(n,l)),r=s.join(`
`),r!==br.text&&(qa(t,0),a=t.ownerDocument,o=Yc(n),s.forEach((l,u)=>{const c=cc(a,"tspan",Li);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",o)),t.appendChild(c)}),br.text=r)):(s=Xc(n,i),s!==br.text&&(t.textContent=s,br.text=s)),Lr(t,"font-family",ly(n)),Lr(t,"font-size",Il(n)+"px"),Lr(t,"font-style",n.fontStyle),Lr(t,"font-variant",n.fontVariant),Lr(t,"font-weight",n.fontWeight)}};function S0(e,t,n){t!==br[e]&&(n?ySe(au,e,t,n):Lr(au,e,t),br[e]=t)}function ov(e,t,n){n!==br[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),br[t]=n)}function fc(e,t){for(const n in t)Lr(e,n,t[n])}function Lr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ySe(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function DY(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function oD(e){xl.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Te(oD,xl,{svg(){return this._text},_render(e){const t=sD();t.open("svg",$t({},i1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",MY,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Zs[t.marktype],i=n.tag,r=[OY,n.attr];e.open("g",{class:yY(t),"clip-path":t.clip?NM(this,t,t.group):null},CY(t),{"pointer-events":i!=="g"&&t.interactive===!1?"none":null});const s=a=>{const o=this.href(a);if(o&&e.open("a",o),e.open(i,this.attr(t,a,r,i!=="g"?i:null)),i==="text"){const l=oy(a);if(ge(l)){const u={x:0,dy:Yc(a)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(Xc(a,l[c])).close()}else e.text(Xc(a,l))}else if(i==="g"){const l=a.strokeForeground,u=a.fill,c=a.stroke;l&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),mo(a,f=>this.mark(e,f)),e.close(),l&&c?(u&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),u&&(a.fill=u)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),o&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):mo(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const r={},s=(a,o,l,u)=>{r[u||a]=o};return Array.isArray(n)?n.forEach(a=>a(s,t,this)):n(s,t,this),i&&bSe(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const s=t[r],a=s.stops;s.gradient==="radial"?(e.open("pattern",{id:D_+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:r,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let o=0;o<a.length;++o)e.open("stop",{offset:a[o].offset,"stop-color":a[o].color}).close();e.close()}for(const r in n){const s=n[r];e.open("clipPath",{id:r}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function bSe(e,t,n,i,r){let s;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=ly(t),e["font-size"]=Il(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in z_){let o=t[a];const l=z_[a];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(DM(o)&&(o=qG(o,r.gradient,"")),e[l]=o)}for(const a in V_){const o=t[a];o!=null&&(s=s||[],s.push("".concat(V_[a],": ").concat(o,";")))}return s&&(e.style=s.join(" ")),e}const RY="canvas",LY="png",NY="svg",FY="none",dc={Canvas:RY,PNG:LY,SVG:NY,None:FY},cg={};cg[RY]=cg[LY]={renderer:U_,headless:U_,handler:uy};cg[NY]={renderer:aD,headless:oD,handler:eD};cg[FY]={};function fS(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(cg[e]=t,this):cg[e]}function PY(e,t,n){const i=[],r=new Ai().union(t),s=e.marktype;return s?BY(e,r,n,i):s==="group"?jY(e,r,n,i):he("Intersect scene must be mark node or group item.")}function BY(e,t,n,i){if(vSe(e,t,n)){const r=e.items,s=e.marktype,a=r.length;let o=0;if(s==="group")for(;o<a;++o)jY(r[o],t,n,i);else for(const l=Zs[s].isect;o<a;++o){const u=r[o];UY(u,t,l)&&i.push(u)}}return i}function vSe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function jY(e,t,n,i){n&&n(e.mark)&&UY(e,t,Zs.group.isect)&&i.push(e);const r=e.items,s=r&&r.length;if(s){const a=e.x||0,o=e.y||0;t.translate(-a,-o);for(let l=0;l<s;++l)BY(r[l],t,n,i);t.translate(a,o)}return i}function UY(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const JA=new Ai;function zY(e){const t=e.clip;if(Ht(t))t(sy(JA.clear()));else if(t)JA.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(JA)}const _Se=1e-9;function lD(e,t,n){return e===t?!0:n==="path"?VY(e,t):e instanceof Date&&t instanceof Date?+e==+t:Un(e)&&Un(t)?Math.abs(e-t)<=_Se:!e||!t||!Ye(e)&&!Ye(t)?e==t:wSe(e,t)}function VY(e,t){return lD(og(e),og(t))}function wSe(e,t){var n=Object.keys(e),i=Object.keys(t),r,s;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),s=n.length-1;s>=0;s--)if(n[s]!=i[s])return!1;for(s=n.length-1;s>=0;s--)if(r=n[s],!lD(e[r],t[r],r))return!1;return typeof e==typeof t}function SSe(){ZG(),G_e()}const fg="top",Ga="left",eo="right",Jc="bottom",ESe="top-left",ASe="top-right",OSe="bottom-left",CSe="bottom-right",uD="start",AI="middle",Nr="end",ISe="x",xSe="y",dS="group",cD="axis",fD="title",TSe="frame",kSe="scope",dD="legend",$Y="row-header",HY="row-footer",WY="row-title",qY="column-header",GY="column-footer",YY="column-title",MSe="padding",DSe="symbol",XY="fit",RSe="fit-x",LSe="fit-y",NSe="pad",hD="none",lb="all",OI="each",pD="flush",hc="column",pc="row";function KY(e){ue.call(this,null,e)}Te(KY,ue,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,s=Zs[r],a=s.bound;let o=i.bounds,l;if(s.nested)i.items.length&&n.dirty(i.items[0]),o=ub(i,a),i.items.forEach(u=>{u.bounds.clear().union(o)});else if(r===dS||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),o.clear(),i.items.forEach(u=>o.union(ub(u,a))),i.role){case cD:case dD:case fD:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{o.union(ub(u,a))}),t.visit(t.MOD,u=>{l=l||o.alignsWith(u.bounds),n.dirty(u),o.union(ub(u,a))}),l&&(o.clear(),i.items.forEach(u=>o.union(u.bounds)));return zY(i),t.modifies("bounds")}});function ub(e,t,n){return t(e.bounds.clear(),e,n)}const LP=":vega_identifier:";function gD(e){ue.call(this,0,e)}gD.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Te(gD,ue,{transform(e,t){const n=FSe(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,s=>s[i]=s[i]||++r),n.set(this.value=r),t}});function FSe(e){return e._signals[LP]||(e._signals[LP]=e.add(0))}function JY(e){ue.call(this,null,e)}Te(JY,ue,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,PSe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===dS?iS:nS;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function PSe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function QY(e){ue.call(this,null,e)}const NP={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!ZY(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},ZY=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),FP=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,s;n<i;r=s,++n)if(ZY(r,s=e[n].bounds,t))return!0},BSe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},jSe=(e,t,n)=>{var i=e.range(),r=new Ai;return t===fg||t===Jc?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),s=>r.encloses(s.bounds)},PP=e=>(e.forEach(t=>t.opacity=1),e),BP=(e,t)=>e.reflow(t.modified()).modifies("opacity");Te(QY,ue,{transform(e,t){const n=NP[e.method]||NP.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,s,a;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(PP(r),t=BP(t,e)),t;if(r=r.filter(BSe),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),s=PP(r),t=BP(t,e),s.length>=3&&FP(s,i)){do s=n(s,i);while(s.length>=3&&FP(s,i));s.length<3&&!ln(r).opacity&&(s.length>1&&(ln(s).opacity=0),ln(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=jSe(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{a(l)||(l.opacity=0)}));const o=s[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function eX(e){ue.call(this,null,e)}Te(eX,ue,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const mr=new Ai;function up(e,t,n){return e[t]===n?0:(e[t]=n,1)}function USe(e){var t=e.items[0].orient;return t===Ga||t===eo}function zSe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function VSe(e,t,n,i){var r=t.items[0],s=r.datum,a=r.translate!=null?r.translate:.5,o=r.orient,l=zSe(s),u=r.range,c=r.offset,f=r.position,d=r.minExtent,h=r.maxExtent,p=s.title&&r.items[l[2]].items[0],g=r.titlePadding,m=r.bounds,y=p&&XM(p),b=0,v=0,_,S;switch(mr.clear().union(m),m.clear(),(_=l[0])>-1&&m.union(r.items[_].bounds),(_=l[1])>-1&&m.union(r.items[_].bounds),o){case fg:b=f||0,v=-c,S=Math.max(d,Math.min(h,-m.y1)),m.add(0,-S).add(u,0),p&&cb(e,p,S,g,y,0,-1,m);break;case Ga:b=-c,v=f||0,S=Math.max(d,Math.min(h,-m.x1)),m.add(-S,0).add(0,u),p&&cb(e,p,S,g,y,1,-1,m);break;case eo:b=n+c,v=f||0,S=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(S,u),p&&cb(e,p,S,g,y,1,1,m);break;case Jc:b=f||0,v=i+c,S=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,S),p&&cb(e,p,S,g,0,0,1,m);break;default:b=r.x,v=r.y}return ku(m.translate(b,v),r),up(r,"x",b+a)|up(r,"y",v+a)&&(r.bounds=mr,e.dirty(r),r.bounds=m,e.dirty(r)),r.mark.bounds.clear().union(m)}function cb(e,t,n,i,r,s,a,o){const l=t.bounds;if(t.auto){const u=a*(n+r+i);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}o.union(l)}const jP=(e,t)=>Math.floor(Math.min(e,t)),UP=(e,t)=>Math.ceil(Math.max(e,t));function $Se(e){var t=e.items,n=t.length,i=0,r,s;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],s=r.items,r.marktype===dS)switch(r.role){case cD:case dD:case fD:break;case $Y:a.rowheaders.push(...s);break;case HY:a.rowfooters.push(...s);break;case qY:a.colheaders.push(...s);break;case GY:a.colfooters.push(...s);break;case WY:a.rowtitle=s[0];break;case YY:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function HSe(e){return new Ai().set(0,0,e.width||0,e.height||0)}function WSe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ei(e,t,n){const i=Ye(e)?e[t]:e;return i??(n!==void 0?n:0)}function zP(e){return e<0?Math.ceil(-e):0}function tX(e,t,n){var i=!n.nodirty,r=n.bounds===pD?HSe:WSe,s=mr.set(0,0,0,0),a=ei(n.align,hc),o=ei(n.align,pc),l=ei(n.padding,hc),u=ei(n.padding,pc),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),b=0,v=Array(d),_=Array(d),S=Array(d),E,w,O,D,x,A,C,I,L,k,M;for(w=0;w<c;++w)p[w]=0;for(w=0;w<f;++w)y[w]=0;for(w=0;w<d;++w)A=t[w],x=S[w]=r(A),A.x=A.x||0,v[w]=0,A.y=A.y||0,_[w]=0,O=w%c,D=~~(w/c),g=Math.max(g,C=Math.ceil(x.x2)),b=Math.max(b,I=Math.ceil(x.y2)),p[O]=Math.max(p[O],C),y[D]=Math.max(y[D],I),h[w]=l+zP(x.x1),m[w]=u+zP(x.y1),i&&e.dirty(t[w]);for(w=0;w<d;++w)w%c===0&&(h[w]=0),w<c&&(m[w]=0);if(a===OI)for(O=1;O<c;++O){for(M=0,w=O;w<d;w+=c)M<h[w]&&(M=h[w]);for(w=O;w<d;w+=c)h[w]=M+p[O-1]}else if(a===lb){for(M=0,w=0;w<d;++w)w%c&&M<h[w]&&(M=h[w]);for(w=0;w<d;++w)w%c&&(h[w]=M+g)}else for(a=!1,O=1;O<c;++O)for(w=O;w<d;w+=c)h[w]+=p[O-1];if(o===OI)for(D=1;D<f;++D){for(M=0,w=D*c,E=w+c;w<E;++w)M<m[w]&&(M=m[w]);for(w=D*c;w<E;++w)m[w]=M+y[D-1]}else if(o===lb){for(M=0,w=c;w<d;++w)M<m[w]&&(M=m[w]);for(w=c;w<d;++w)m[w]=M+b}else for(o=!1,D=1;D<f;++D)for(w=D*c,E=w+c;w<E;++w)m[w]+=y[D-1];for(L=0,w=0;w<d;++w)L=h[w]+(w%c?L:0),v[w]+=L-t[w].x;for(O=0;O<c;++O)for(k=0,w=O;w<d;w+=c)k+=m[w],_[w]+=k-t[w].y;if(a&&ei(n.center,hc)&&f>1)for(w=0;w<d;++w)x=a===lb?g:p[w%c],L=x-S[w].x2-t[w].x-v[w],L>0&&(v[w]+=L/2);if(o&&ei(n.center,pc)&&c!==1)for(w=0;w<d;++w)x=o===lb?b:y[~~(w/c)],k=x-S[w].y2-t[w].y-_[w],k>0&&(_[w]+=k/2);for(w=0;w<d;++w)s.union(S[w].translate(v[w],_[w]));switch(L=ei(n.anchor,ISe),k=ei(n.anchor,xSe),ei(n.anchor,hc)){case Nr:L-=s.width();break;case AI:L-=s.width()/2}switch(ei(n.anchor,pc)){case Nr:k-=s.height();break;case AI:k-=s.height()/2}for(L=Math.round(L),k=Math.round(k),s.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)A=t[w],A.x+=v[w]+=L,A.y+=_[w]+=k,s.union(A.mark.bounds.union(A.bounds.translate(v[w],_[w]))),i&&e.dirty(A);return s}function qSe(e,t,n){var i=$Se(t),r=i.marks,s=n.bounds===pD?GSe:YSe,a=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),u=l*o,c,f,d,h,p,g,m;const y=tX(e,r,n);y.empty()&&y.set(0,0,0,0),i.rowheaders&&(g=ei(n.headerBand,pc,null),c=fb(e,i.rowheaders,r,o,l,-ei(a,"rowHeader"),jP,0,s,"x1",0,o,1,g)),i.colheaders&&(g=ei(n.headerBand,hc,null),f=fb(e,i.colheaders,r,o,o,-ei(a,"columnHeader"),jP,1,s,"y1",0,1,o,g)),i.rowfooters&&(g=ei(n.footerBand,pc,null),d=fb(e,i.rowfooters,r,o,l,ei(a,"rowFooter"),UP,0,s,"x2",o-1,o,1,g)),i.colfooters&&(g=ei(n.footerBand,hc,null),h=fb(e,i.colfooters,r,o,o,ei(a,"columnFooter"),UP,1,s,"y2",u-o,1,o,g)),i.rowtitle&&(p=ei(n.titleAnchor,pc),m=ei(a,"rowTitle"),m=p===Nr?d+m:c-m,g=ei(n.titleBand,pc,.5),VP(e,i.rowtitle,m,0,y,g)),i.coltitle&&(p=ei(n.titleAnchor,hc),m=ei(a,"columnTitle"),m=p===Nr?h+m:f-m,g=ei(n.titleBand,hc,.5),VP(e,i.coltitle,m,1,y,g))}function GSe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function YSe(e,t){return e.bounds[t]}function fb(e,t,n,i,r,s,a,o,l,u,c,f,d,h){var p=n.length,g=0,m=0,y,b,v,_,S,E,w,O,D;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=a(g,l(n[y],u)));if(!t.length)return g;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),g+=s,b=0,_=t.length;b<_;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,_=t.length;b<_;++b,y+=f){for(E=t[b],S=E.mark.bounds,v=y;v>=0&&(w=n[v])==null;v-=d);o?(O=h==null?w.x:Math.round(w.bounds.x1+h*w.bounds.width()),D=g):(O=g,D=h==null?w.y:Math.round(w.bounds.y1+h*w.bounds.height())),S.union(E.bounds.translate(O-(E.x||0),D-(E.y||0))),E.x=O,E.y=D,e.dirty(E),m=a(m,S[u])}return m}function VP(e,t,n,i,r,s){if(!!t){e.dirty(t);var a=n,o=n;i?a=Math.round(r.x1+s*r.width()):o=Math.round(r.y1+s*r.height()),t.bounds.translate(a-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=o,e.dirty(t)}}function XSe(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function KSe(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function JSe(e,t,n,i,r,s,a){const o=XSe(n,t),l=KSe(e,o("offset",0)),u=o("anchor",uD),c=u===Nr?1:u===AI?.5:0,f={align:OI,bounds:o("bounds",pD),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Ga:f.anchor={x:Math.floor(i.x1)-l,column:Nr,y:c*(a||i.height()+2*i.y1),row:u};break;case eo:f.anchor={x:Math.ceil(i.x2)+l,y:c*(a||i.height()+2*i.y1),row:u};break;case fg:f.anchor={y:Math.floor(r.y1)-l,row:Nr,x:c*(s||r.width()+2*r.x1),column:u};break;case Jc:f.anchor={y:Math.ceil(r.y2)+l,x:c*(s||r.width()+2*r.x1),column:u};break;case ESe:f.anchor={x:l,y:l};break;case ASe:f.anchor={x:s-l,y:l,column:Nr};break;case OSe:f.anchor={x:l,y:a-l,row:Nr};break;case CSe:f.anchor={x:s-l,y:a-l,column:Nr,row:Nr};break}return f}function QSe(e,t){var n=t.items[0],i=n.datum,r=n.orient,s=n.bounds,a=n.x,o=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),eEe(e,n,n.items[0].items[0]),s=ZSe(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),i.type===DSe&&tEe(n.items[0].items[0].items[0].items),r!==hD&&(n.x=a=0,n.y=o=0),n.width=l,n.height=u,ku(s.set(a,o,a+l,o+u),n),n.mark.bounds.clear().union(s),n}function ZSe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function eEe(e,t,n){var i=t.padding,r=i-n.x,s=i-n.y;if(!t.datum.title)(r||s)&&Rm(e,n,r,s);else{var a=t.items[1].items[0],o=a.anchor,l=t.titlePadding||0,u=i-a.x,c=i-a.y;switch(a.orient){case Ga:r+=Math.ceil(a.bounds.width())+l;break;case eo:case Jc:break;default:s+=a.bounds.height()+l}switch((r||s)&&Rm(e,n,r,s),a.orient){case Ga:c+=Uh(t,n,a,o,1,1);break;case eo:u+=Uh(t,n,a,Nr,0,0)+l,c+=Uh(t,n,a,o,1,1);break;case Jc:u+=Uh(t,n,a,o,0,0),c+=Uh(t,n,a,Nr,-1,0,1)+l;break;default:u+=Uh(t,n,a,o,0,0)}(u||c)&&Rm(e,a,u,c),(u=Math.round(a.bounds.x1-i))<0&&(Rm(e,n,-u,0),Rm(e,a,-u,0))}}function Uh(e,t,n,i,r,s,a){const o=e.datum.type!=="symbol",l=n.datum.vgrad,u=o&&(s||!l)&&!a?t.items[0]:t,c=u.bounds[r?"y2":"x2"]-e.padding,f=l&&s?c:0,d=l&&s?0:c,h=r<=0?0:XM(n);return Math.round(i===uD?f:i===Nr?d-h:.5*(c-h))}function Rm(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function tEe(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function nEe(e,t,n,i,r){var s=t.items[0],a=s.frame,o=s.orient,l=s.anchor,u=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=o===Ga||o===eo?i:n,p=0,g=0,m=0,y=0,b=0,v;if(a!==dS?o===Ga?(p=r.y2,h=r.y1):o===eo?(p=r.y1,h=r.y2):(p=r.x1,h=r.x2):o===Ga&&(p=i,h=0),v=l===uD?p:l===Nr?h:(p+h)/2,d&&d.text){switch(o){case fg:case Jc:b=f.bounds.height()+c;break;case Ga:y=f.bounds.width()+c;break;case eo:y=-f.bounds.width()-c;break}mr.clear().union(d.bounds),mr.translate(y-(d.x||0),b-(d.y||0)),up(d,"x",y)|up(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(mr),d.mark.bounds.clear().union(mr),e.dirty(d)),mr.clear().union(d.bounds)}else mr.clear();switch(mr.union(f.bounds),o){case fg:g=v,m=r.y1-mr.height()-u;break;case Ga:g=r.x1-mr.width()-u,m=v;break;case eo:g=r.x2+mr.width()+u,m=v;break;case Jc:g=v,m=r.y2+u;break;default:g=s.x,m=s.y}return up(s,"x",g)|up(s,"y",m)&&(mr.translate(g,m),e.dirty(s),s.bounds.clear().union(mr),t.bounds.clear().union(mr),e.dirty(s)),s.bounds}function nX(e){ue.call(this,null,e)}Te(nX,ue,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&qSe(n,i,e.layout),rEe(n,i,e)}),iEe(e.mark.group)?t.reflow():t}});function iEe(e){return e&&e.mark.role!=="legend-entry"}function rEe(e,t,n){var i=t.items,r=Math.max(0,t.width||0),s=Math.max(0,t.height||0),a=new Ai().set(0,0,r,s),o=a.clone(),l=a.clone(),u=[],c,f,d,h,p,g;for(p=0,g=i.length;p<g;++p)switch(f=i[p],f.role){case cD:h=USe(f)?o:l,h.union(VSe(e,f,r,s));break;case fD:c=f;break;case dD:u.push(QSe(e,f));break;case TSe:case kSe:case $Y:case HY:case WY:case qY:case GY:case YY:o.union(f.bounds),l.union(f.bounds);break;default:a.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||eo,d!==hD&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const b=m[y];tX(e,b,JSe(b,y,n.legends,o,l,r,s))}u.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&n.autosize.type===XY)switch(y.orient){case Ga:case eo:a.add(b.x1,0).add(b.x2,0);break;case fg:case Jc:a.add(0,b.y1).add(0,b.y2)}else a.union(b)})}a.union(o).union(l),c&&a.union(nEe(e,c,r,s,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),sEe(e,t,a,n)}function sEe(e,t,n,i){const r=i.autosize||{},s=r.type;if(e._autosize<1||!s)return;let a=e._width,o=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(r.contains===MSe){const p=e.padding();a-=p.left+p.right,o-=p.top+p.bottom}s===hD?(u=0,f=0,l=a,c=o):s===XY?(l=Math.max(0,a-u-d),c=Math.max(0,o-f-h)):s===RSe?(l=Math.max(0,a-u-d),o=c+f+h):s===LSe?(a=l+u+d,c=Math.max(0,o-f-h)):s===NSe&&(a=l+u+d,o=c+f+h),e._resizeView(a,o,l,c,[u,f],r.resize)}var aEe=Object.freeze(Object.defineProperty({__proto__:null,bound:KY,identifier:gD,mark:JY,overlap:QY,render:eX,viewlayout:nX},Symbol.toStringTag,{value:"Module"}));function iX(e){ue.call(this,null,e)}Te(iX,ue,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,s=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,o=kM(s,a,e.minstep),l=e.format||jG(n,s,o,e.formatSpecifier,e.formatType,!!e.values),u=e.values?BG(s,e.values,o):MM(s,o);return r&&(i.rem=r),r=u.map((c,f)=>xn({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(xn({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function rX(e){ue.call(this,null,e)}function oEe(){return xn({})}function lEe(e){const t=$g().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Te(rX,ue,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||oEe,s=e.key||lt,a=this.value;return ge(i.encode)&&(i.encode=null),a&&(e.modified("key")||t.modified(s))&&he("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=lEe(s)),t.visit(t.ADD,o=>{const l=s(o);let u=a.get(l);u?u.exit?(a.empty--,i.add.push(u)):i.mod.push(u):(u=r(o),a.set(l,u),i.add.push(u)),u.datum=o,u.exit=!1}),t.visit(t.MOD,o=>{const l=s(o),u=a.get(l);u&&(u.datum=o,i.mod.push(u))}),t.visit(t.REM,o=>{const l=s(o),u=a.get(l);o===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),i}});function sX(e){ue.call(this,null,e)}Te(sX,ue,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,s=t.encode;if(ge(s))if(n.changed()||s.every(f=>r[f]))s=s[0],n.encode=null;else return t.StopPropagation;var a=s==="enter",o=r.update||qu,l=r.enter||qu,u=r.exit||qu,c=(s&&!a?r[s]:o)||qu;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),o(f,e)}),n.modifies(l.output),n.modifies(o.output),c!==qu&&c!==o&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==qu&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),a||c!==qu){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,d=>{const h=l(d,e)||i;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||i)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function aX(e){ue.call(this,[],e)}Te(aX,ue,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,s=e.type||ev,a=e.scale,o=+e.limit,l=kM(a,e.count==null?5:e.count,e.minstep),u=!!e.values||s===ev,c=e.format||$G(n,a,l,s,e.formatSpecifier,e.formatType,u),f=e.values||VG(a,l),d,h,p,g,m;return r&&(i.rem=r),s===ev?(o&&f.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=f.slice(0,o-1),m=!0):r=f,Ht(p=e.size)?(!e.values&&a(r[0])===0&&(r=r.slice(1)),g=r.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=kr(g=p||8),r=r.map((y,b)=>xn({index:b,label:c(y,b,r),value:y,offset:g,size:p(y,e)})),m&&(m=f[r.length],r.push(xn({index:r.length,label:"\u2026".concat(f.length-r.length," entries"),value:m,offset:g,size:p(m,e)})))):s===L_e?(d=a.domain(),h=NG(a,d[0],ln(d)),f.length<3&&!e.values&&d[0]!==ln(d)&&(f=[d[0],ln(d)]),r=f.map((y,b)=>xn({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(p=f.length-1,h=W_e(a),r=f.map((y,b)=>xn({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===p?1:h(f[b+1])}))),i.source=r,i.add=r,this.value=r,i}});const uEe=e=>e.source.x,cEe=e=>e.source.y,fEe=e=>e.target.x,dEe=e=>e.target.y;function mD(e){ue.call(this,{},e)}mD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Te(mD,ue,{transform(e,t){var n=e.sourceX||uEe,i=e.sourceY||cEe,r=e.targetX||fEe,s=e.targetY||dEe,a=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",u=$P.get(l+"-"+o)||$P.get(l);return u||he("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=u(n(c),i(c),r(c),s(c))}),t.reflow(e.modified()).modifies(a)}});const oX=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,hEe=(e,t,n,i)=>oX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),lX=(e,t,n,i)=>{var r=n-e,s=i-t,a=Math.sqrt(r*r+s*s)/2,o=180*Math.atan2(s,r)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+o+" 0 1 "+n+","+i},pEe=(e,t,n,i)=>lX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),uX=(e,t,n,i)=>{const r=n-e,s=i-t,a=.2*(r+s),o=.2*(s-r);return"M"+e+","+t+"C"+(e+a)+","+(t+o)+" "+(n+o)+","+(i-a)+" "+n+","+i},gEe=(e,t,n,i)=>uX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),mEe=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,yEe=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,bEe=(e,t,n,i)=>{const r=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*o+"L"+i*a+","+i*o},vEe=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},_Ee=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},wEe=(e,t,n,i)=>{const r=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*s+"C"+l*r+","+l*s+" "+l*a+","+l*o+" "+i*a+","+i*o},$P=$g({line:oX,"line-radial":hEe,arc:lX,"arc-radial":pEe,curve:uX,"curve-radial":gEe,"orthogonal-horizontal":mEe,"orthogonal-vertical":yEe,"orthogonal-radial":bEe,"diagonal-horizontal":vEe,"diagonal-vertical":_Ee,"diagonal-radial":wEe});function yD(e){ue.call(this,null,e)}yD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Te(yD,ue,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],s=e.field||Ug,a=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,f=a,d=(o-a)/IH(u),h=Ws(c),p,g,m;for(e.sort&&h.sort((y,b)=>u[y]-u[b]),p=0;p<c;++p)m=u[h[p]],g=l[h[p]],g[i]=f,g[r]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const SEe=5;function EEe(e){const t=e.type;return!e.bins&&(t===rg||t===Q1||t===Z1)}function cX(e){return IM(e)&&e!==ol}const AEe=po(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function fX(e){ue.call(this,null,e),this.modified(!0)}Te(fX,ue,{transform(e,t){var n=t.dataflow,i=this.value,r=OEe(e);(!i||r!==i.type)&&(this.value=i=An(r)());for(r in e)if(!AEe[r]){if(r==="padding"&&cX(i.type))continue;Ht(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return MEe(i,e,kEe(i,e,IEe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function OEe(e){var t=e.type,n="",i;return t===ol?ol+"-"+rg:(CEe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?ol+"-":i===3?Kg+"-":""),(n+t||rg).toLowerCase())}function CEe(e){const t=e.type;return IM(t)&&t!==Wd&&t!==qd&&(e.scheme||e.range&&e.range.length&&e.range.every(Fe))}function IEe(e,t,n){const i=xEe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,s=e.type,a=t.zero||t.zero===void 0&&EEe(e),o,l;if(!r)return 0;if(cX(s)&&t.padding&&r[0]!==ln(r)&&(r=TEe(s,r,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,a&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>r[o]?o+1:l<r[0]?0:o;u!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return e.domain(dX(s,r,n)),s===EM&&e.unknown(t.domainImplicit?rI:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&kM(e,t.nice)||null),r.length}function xEe(e,t,n){return t?(e.domain(dX(e.type,t,n)),t.length):-1}function TEe(e,t,n,i,r,s){var a=Math.abs(ln(n)-n[0]),o=a/(a-2*i),l=e===Eu?Uk(t,null,o):e===Z1?d_(t,null,o,.5):e===Q1?d_(t,null,o,r||1):e===Jw?zk(t,null,o,s||1):jk(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function dX(e,t,n){if(kG(e)){var i=Math.abs(t.reduce((r,s)=>r+(s<0?-1:s>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ke(t))}return t}function kEe(e,t,n){let i=t.bins;if(i&&!ge(i)){const r=e.domain(),s=r[0],a=ln(r),o=i.step;let l=i.start==null?s:i.start,u=i.stop==null?a:i.stop;o||he("Scale bins parameter missing step property."),l<s&&(l=o*Math.ceil(s/o)),u>a&&(u=o*Math.floor(a/o)),i=Ws(l,u+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===AM&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function MEe(e,t,n){var i=e.type,r=t.round||!1,s=t.range;if(t.rangeStep!=null)s=DEe(i,t,n);else if(t.scheme&&(s=REe(i,t,n),Ht(s))){if(e.interpolator)return e.interpolator(s);he("Scale type ".concat(i," does not support interpolating color schemes."))}if(s&&MG(i))return e.interpolator(eS(CI(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(xM(t.interpolate,t.interpolateGamma)):Ht(e.round)?e.round(r):Ht(e.rangeRound)&&e.interpolate(r?K1:bf),s&&e.range(CI(s,t.reverse))}function DEe(e,t,n){e!==CG&&e!==fI&&he("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===fI?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*SM(n,r,i)]}function REe(e,t,n){var i=t.schemeExtent,r,s;return ge(t.scheme)?s=eS(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),s=TM(r),s||he("Unrecognized scheme name: ".concat(t.scheme))),n=e===Zw?n+1:e===AM?n-1:e===sg||e===Qw?+t.schemeCount||SEe:n,MG(e)?HP(s,i,t.reverse):Ht(s)?LG(HP(s,i),n):e===EM?s:s.slice(0,n)}function HP(e,t,n){return Ht(e)&&(t||n)?RG(e,CI(t||[0,1],n)):e}function CI(e,t){return t?e.slice().reverse():e}function hX(e){ue.call(this,null,e)}Te(hX,ue,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(yh(e.sort)),this.modified(n),t}});const WP="zero",pX="center",gX="normalize",mX=["y0","y1"];function bD(e){ue.call(this,null,e)}bD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:WP,values:[WP,pX,gX]},{name:"as",type:"string",array:!0,length:2,default:mX}]};Te(bD,ue,{transform(e,t){var n=e.as||mX,i=n[0],r=n[1],s=yh(e.sort),a=e.field||Ug,o=e.offset===pX?LEe:e.offset===gX?NEe:FEe,l,u,c,f;for(l=PEe(t.source,e.groupby,s,a),u=0,c=l.length,f=l.max;u<c;++u)o(l[u],f,a,i,r);return t.reflow(e.modified()).modifies(n)}});function LEe(e,t,n,i,r){for(var s=(t-e.sum)/2,a=e.length,o=0,l;o<a;++o)l=e[o],l[i]=s,l[r]=s+=Math.abs(n(l))}function NEe(e,t,n,i,r){for(var s=1/e.sum,a=0,o=e.length,l=0,u=0,c;l<o;++l)c=e[l],c[i]=a,c[r]=a=s*(u+=Math.abs(n(c)))}function FEe(e,t,n,i,r){for(var s=0,a=0,o=e.length,l=0,u,c;l<o;++l)c=e[l],u=+n(c),u<0?(c[i]=a,c[r]=a+=u):(c[i]=s,c[r]=s+=u)}function PEe(e,t,n,i){var r=[],s=g=>g(c),a,o,l,u,c,f,d,h,p;if(t==null)r.push(e.slice());else for(a={},o=0,l=e.length;o<l;++o)c=e[o],f=t.map(s),d=a[f],d||(a[f]=d=[],r.push(d)),d.push(c);for(f=0,p=0,u=r.length;f<u;++f){for(d=r[f],o=0,h=0,l=d.length;o<l;++o)h+=Math.abs(i(d[o]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return r.max=p,r}var BEe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:iX,datajoin:rX,encode:sX,legendentries:aX,linkpath:mD,pie:yD,scale:fX,sortitems:hX,stack:bD},Symbol.toStringTag,{value:"Module"})),dt=1e-6,$_=1e-12,Jt=Math.PI,pi=Jt/2,H_=Jt/4,Yr=Jt*2,bi=180/Jt,Qt=Jt/180,hn=Math.abs,Qg=Math.atan,Oa=Math.atan2,ht=Math.cos,db=Math.ceil,yX=Math.exp,II=Math.hypot,W_=Math.log,QA=Math.pow,ut=Math.sin,pa=Math.sign||function(e){return e>0?1:e<0?-1:0},Xr=Math.sqrt,vD=Math.tan;function bX(e){return e>1?0:e<-1?Jt:Math.acos(e)}function Os(e){return e>1?pi:e<-1?-pi:Math.asin(e)}function nr(){}function q_(e,t){e&&GP.hasOwnProperty(e.type)&&GP[e.type](e,t)}var qP={Feature:function(e,t){q_(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)q_(n[i].geometry,t)}},GP={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){xI(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)xI(n[i],t,0)},Polygon:function(e,t){YP(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)YP(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)q_(n[i],t)}};function xI(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function YP(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)xI(e[n],t,1);t.polygonEnd()}function nu(e,t){e&&qP.hasOwnProperty(e.type)?qP[e.type](e,t):q_(e,t)}var G_=new Hr,Y_=new Hr,vX,_X,TI,kI,MI,vl={point:nr,lineStart:nr,lineEnd:nr,polygonStart:function(){G_=new Hr,vl.lineStart=jEe,vl.lineEnd=UEe},polygonEnd:function(){var e=+G_;Y_.add(e<0?Yr+e:e),this.lineStart=this.lineEnd=this.point=nr},sphere:function(){Y_.add(Yr)}};function jEe(){vl.point=zEe}function UEe(){wX(vX,_X)}function zEe(e,t){vl.point=wX,vX=e,_X=t,e*=Qt,t*=Qt,TI=e,kI=ht(t=t/2+H_),MI=ut(t)}function wX(e,t){e*=Qt,t*=Qt,t=t/2+H_;var n=e-TI,i=n>=0?1:-1,r=i*n,s=ht(t),a=ut(t),o=MI*a,l=kI*s+o*ht(r),u=o*i*ut(r);G_.add(Oa(u,l)),TI=e,kI=s,MI=a}function VEe(e){return Y_=new Hr,nu(e,vl),Y_*2}function X_(e){return[Oa(e[1],e[0]),Os(e[2])]}function Gd(e){var t=e[0],n=e[1],i=ht(n);return[i*ht(t),i*ut(t),ut(n)]}function hb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ZA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function pb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function K_(e){var t=Xr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var si,ls,ci,zs,Jf,SX,EX,Op,E0,Zu,Au,Kl={point:DI,lineStart:XP,lineEnd:KP,polygonStart:function(){Kl.point=OX,Kl.lineStart=$Ee,Kl.lineEnd=HEe,E0=new Hr,vl.polygonStart()},polygonEnd:function(){vl.polygonEnd(),Kl.point=DI,Kl.lineStart=XP,Kl.lineEnd=KP,G_<0?(si=-(ci=180),ls=-(zs=90)):E0>dt?zs=90:E0<-dt&&(ls=-90),Au[0]=si,Au[1]=ci},sphere:function(){si=-(ci=180),ls=-(zs=90)}};function DI(e,t){Zu.push(Au=[si=e,ci=e]),t<ls&&(ls=t),t>zs&&(zs=t)}function AX(e,t){var n=Gd([e*Qt,t*Qt]);if(Op){var i=dg(Op,n),r=[i[1],-i[0],0],s=dg(r,i);K_(s),s=X_(s);var a=e-Jf,o=a>0?1:-1,l=s[0]*bi*o,u,c=hn(a)>180;c^(o*Jf<l&&l<o*e)?(u=s[1]*bi,u>zs&&(zs=u)):(l=(l+360)%360-180,c^(o*Jf<l&&l<o*e)?(u=-s[1]*bi,u<ls&&(ls=u)):(t<ls&&(ls=t),t>zs&&(zs=t))),c?e<Jf?js(si,e)>js(si,ci)&&(ci=e):js(e,ci)>js(si,ci)&&(si=e):ci>=si?(e<si&&(si=e),e>ci&&(ci=e)):e>Jf?js(si,e)>js(si,ci)&&(ci=e):js(e,ci)>js(si,ci)&&(si=e)}else Zu.push(Au=[si=e,ci=e]);t<ls&&(ls=t),t>zs&&(zs=t),Op=n,Jf=e}function XP(){Kl.point=AX}function KP(){Au[0]=si,Au[1]=ci,Kl.point=DI,Op=null}function OX(e,t){if(Op){var n=e-Jf;E0.add(hn(n)>180?n+(n>0?360:-360):n)}else SX=e,EX=t;vl.point(e,t),AX(e,t)}function $Ee(){vl.lineStart()}function HEe(){OX(SX,EX),vl.lineEnd(),hn(E0)>dt&&(si=-(ci=180)),Au[0]=si,Au[1]=ci,Op=null}function js(e,t){return(t-=e)<0?t+360:t}function WEe(e,t){return e[0]-t[0]}function JP(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function qEe(e){var t,n,i,r,s,a,o;if(zs=ci=-(si=ls=1/0),Zu=[],nu(e,Kl),n=Zu.length){for(Zu.sort(WEe),t=1,i=Zu[0],s=[i];t<n;++t)r=Zu[t],JP(i,r[0])||JP(i,r[1])?(js(i[0],r[1])>js(i[0],i[1])&&(i[1]=r[1]),js(r[0],i[1])>js(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(a=-1/0,n=s.length-1,t=0,i=s[n];t<=n;i=r,++t)r=s[t],(o=js(i[1],r[0]))>a&&(a=o,si=r[0],ci=i[1])}return Zu=Au=null,si===1/0||ls===1/0?[[NaN,NaN],[NaN,NaN]]:[[si,ls],[ci,zs]]}var n0,J_,Q_,Z_,e2,t2,n2,i2,RI,LI,NI,CX,IX,Fr,Pr,Br,to={sphere:nr,point:_D,lineStart:QP,lineEnd:ZP,polygonStart:function(){to.lineStart=XEe,to.lineEnd=KEe},polygonEnd:function(){to.lineStart=QP,to.lineEnd=ZP}};function _D(e,t){e*=Qt,t*=Qt;var n=ht(t);cy(n*ht(e),n*ut(e),ut(t))}function cy(e,t,n){++n0,Q_+=(e-Q_)/n0,Z_+=(t-Z_)/n0,e2+=(n-e2)/n0}function QP(){to.point=GEe}function GEe(e,t){e*=Qt,t*=Qt;var n=ht(t);Fr=n*ht(e),Pr=n*ut(e),Br=ut(t),to.point=YEe,cy(Fr,Pr,Br)}function YEe(e,t){e*=Qt,t*=Qt;var n=ht(t),i=n*ht(e),r=n*ut(e),s=ut(t),a=Oa(Xr((a=Pr*s-Br*r)*a+(a=Br*i-Fr*s)*a+(a=Fr*r-Pr*i)*a),Fr*i+Pr*r+Br*s);J_+=a,t2+=a*(Fr+(Fr=i)),n2+=a*(Pr+(Pr=r)),i2+=a*(Br+(Br=s)),cy(Fr,Pr,Br)}function ZP(){to.point=_D}function XEe(){to.point=JEe}function KEe(){xX(CX,IX),to.point=_D}function JEe(e,t){CX=e,IX=t,e*=Qt,t*=Qt,to.point=xX;var n=ht(t);Fr=n*ht(e),Pr=n*ut(e),Br=ut(t),cy(Fr,Pr,Br)}function xX(e,t){e*=Qt,t*=Qt;var n=ht(t),i=n*ht(e),r=n*ut(e),s=ut(t),a=Pr*s-Br*r,o=Br*i-Fr*s,l=Fr*r-Pr*i,u=II(a,o,l),c=Os(u),f=u&&-c/u;RI.add(f*a),LI.add(f*o),NI.add(f*l),J_+=c,t2+=c*(Fr+(Fr=i)),n2+=c*(Pr+(Pr=r)),i2+=c*(Br+(Br=s)),cy(Fr,Pr,Br)}function QEe(e){n0=J_=Q_=Z_=e2=t2=n2=i2=0,RI=new Hr,LI=new Hr,NI=new Hr,nu(e,to);var t=+RI,n=+LI,i=+NI,r=II(t,n,i);return r<$_&&(t=t2,n=n2,i=i2,J_<dt&&(t=Q_,n=Z_,i=e2),r=II(t,n,i),r<$_)?[NaN,NaN]:[Oa(n,t)*bi,Os(i/r)*bi]}function FI(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function PI(e,t){return[hn(e)>Jt?e+Math.round(-e/Yr)*Yr:e,t]}PI.invert=PI;function TX(e,t,n){return(e%=Yr)?t||n?FI(t5(e),n5(t,n)):t5(e):t||n?n5(t,n):PI}function e5(e){return function(t,n){return t+=e,[t>Jt?t-Yr:t<-Jt?t+Yr:t,n]}}function t5(e){var t=e5(e);return t.invert=e5(-e),t}function n5(e,t){var n=ht(e),i=ut(e),r=ht(t),s=ut(t);function a(o,l){var u=ht(l),c=ht(o)*u,f=ut(o)*u,d=ut(l),h=d*n+c*i;return[Oa(f*r-h*s,c*n-d*i),Os(h*r+f*s)]}return a.invert=function(o,l){var u=ht(l),c=ht(o)*u,f=ut(o)*u,d=ut(l),h=d*r-f*s;return[Oa(f*r+d*s,c*n+h*i),Os(h*n-c*i)]},a}function ZEe(e){e=TX(e[0]*Qt,e[1]*Qt,e.length>2?e[2]*Qt:0);function t(n){return n=e(n[0]*Qt,n[1]*Qt),n[0]*=bi,n[1]*=bi,n}return t.invert=function(n){return n=e.invert(n[0]*Qt,n[1]*Qt),n[0]*=bi,n[1]*=bi,n},t}function eAe(e,t,n,i,r,s){if(!!n){var a=ht(t),o=ut(t),l=i*n;r==null?(r=t+i*Yr,s=t-l/2):(r=i5(a,r),s=i5(a,s),(i>0?r<s:r>s)&&(r+=i*Yr));for(var u,c=r;i>0?c>s:c<s;c-=l)u=X_([a,-o*ht(c),-o*ut(c)]),e.point(u[0],u[1])}}function i5(e,t){t=Gd(t),t[0]-=e,K_(t);var n=bX(-t[1]);return((-t[2]<0?-n:n)+Yr-dt)%Yr}function kX(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:nr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function lv(e,t){return hn(e[0]-t[0])<dt&&hn(e[1]-t[1])<dt}function gb(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function MX(e,t,n,i,r){var s=[],a=[],o,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],b;if(lv(m,y)){if(!m[2]&&!y[2]){for(r.lineStart(),o=0;o<g;++o)r.point((m=p[o])[0],m[1]);r.lineEnd();return}y[0]+=2*dt}s.push(b=new gb(m,p,null,!0)),a.push(b.o=new gb(m,null,b,!1)),s.push(b=new gb(y,p,null,!1)),a.push(b.o=new gb(y,null,b,!0))}}),!!s.length){for(a.sort(t),r5(s),r5(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var u=s[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,l=c.length;o<l;++o)r.point((f=c[o])[0],f[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(h)for(c=d.p.z,o=c.length-1;o>=0;--o)r.point((f=c[o])[0],f[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);r.lineEnd()}}}function r5(e){if(!!(t=e.length)){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function eO(e){return hn(e[0])<=Jt?e[0]:pa(e[0])*((hn(e[0])+Jt)%Yr-Jt)}function tAe(e,t){var n=eO(t),i=t[1],r=ut(i),s=[ut(n),-ht(n),0],a=0,o=0,l=new Hr;r===1?i=pi+dt:r===-1&&(i=-pi-dt);for(var u=0,c=e.length;u<c;++u)if(!!(d=(f=e[u]).length))for(var f,d,h=f[d-1],p=eO(h),g=h[1]/2+H_,m=ut(g),y=ht(g),b=0;b<d;++b,p=_,m=E,y=w,h=v){var v=f[b],_=eO(v),S=v[1]/2+H_,E=ut(S),w=ht(S),O=_-p,D=O>=0?1:-1,x=D*O,A=x>Jt,C=m*E;if(l.add(Oa(C*D*ut(x),y*w+C*ht(x))),a+=A?O+D*Yr:O,A^p>=n^_>=n){var I=dg(Gd(h),Gd(v));K_(I);var L=dg(s,I);K_(L);var k=(A^O>=0?-1:1)*Os(L[2]);(i>k||i===k&&(I[0]||I[1]))&&(o+=A^O>=0?1:-1)}}return(a<-dt||a<dt&&l<-$_)^o&1}function DX(e,t,n,i){return function(r){var s=t(r),a=kX(),o=t(a),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=v,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=CH(c);var _=tAe(u,i);c.length?(l||(r.polygonStart(),l=!0),MX(c,iAe,_,n,r)):_&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(_,S){e(_,S)&&r.point(_,S)}function p(_,S){s.point(_,S)}function g(){d.point=p,s.lineStart()}function m(){d.point=h,s.lineEnd()}function y(_,S){f.push([_,S]),o.point(_,S)}function b(){o.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),o.lineEnd();var _=o.clean(),S=a.result(),E,w=S.length,O,D,x;if(f.pop(),u.push(f),f=null,!!w){if(_&1){if(D=S[0],(O=D.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),E=0;E<O;++E)r.point((x=D[E])[0],x[1]);r.lineEnd()}return}w>1&&_&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(nAe))}}return d}}function nAe(e){return e.length>1}function iAe(e,t){return((e=e.x)[0]<0?e[1]-pi-dt:pi-e[1])-((t=t.x)[0]<0?t[1]-pi-dt:pi-t[1])}var s5=DX(function(){return!0},rAe,aAe,[-Jt,-pi]);function rAe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,a){var o=s>0?Jt:-Jt,l=hn(s-t);hn(l-Jt)<dt?(e.point(t,n=(n+a)/2>0?pi:-pi),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(s,n),r=0):i!==o&&l>=Jt&&(hn(t-i)<dt&&(t-=i*dt),hn(s-o)<dt&&(s-=o*dt),n=sAe(t,n,s,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=s,n=a),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function sAe(e,t,n,i){var r,s,a=ut(e-n);return hn(a)>dt?Qg((ut(t)*(s=ht(i))*ut(n)-ut(i)*(r=ht(t))*ut(e))/(r*s*a)):(t+i)/2}function aAe(e,t,n,i){var r;if(e==null)r=n*pi,i.point(-Jt,r),i.point(0,r),i.point(Jt,r),i.point(Jt,0),i.point(Jt,-r),i.point(0,-r),i.point(-Jt,-r),i.point(-Jt,0),i.point(-Jt,r);else if(hn(e[0]-t[0])>dt){var s=e[0]<t[0]?Jt:-Jt;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function oAe(e){var t=ht(e),n=6*Qt,i=t>0,r=hn(t)>dt;function s(c,f,d,h){eAe(h,e,n,d,c,f)}function a(c,f){return ht(c)*ht(f)>t}function o(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var b=[m,y],v,_=a(m,y),S=i?_?0:u(m,y):_?u(m+(m<0?Jt:-Jt),y):0;if(!f&&(p=h=_)&&c.lineStart(),_!==h&&(v=l(f,b),(!v||lv(f,v)||lv(b,v))&&(b[2]=1)),_!==h)g=0,_?(c.lineStart(),v=l(b,f),c.point(v[0],v[1])):(v=l(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(r&&f&&i^_){var E;!(S&d)&&(E=l(b,f,!0))&&(g=0,i?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}_&&(!f||!lv(f,b))&&c.point(b[0],b[1]),f=b,h=_,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=Gd(c),p=Gd(f),g=[1,0,0],m=dg(h,p),y=hb(m,m),b=m[0],v=y-b*b;if(!v)return!d&&c;var _=t*y/v,S=-t*b/v,E=dg(g,m),w=pb(g,_),O=pb(m,S);ZA(w,O);var D=E,x=hb(w,D),A=hb(D,D),C=x*x-A*(hb(w,w)-1);if(!(C<0)){var I=Xr(C),L=pb(D,(-x-I)/A);if(ZA(L,w),L=X_(L),!d)return L;var k=c[0],M=f[0],N=c[1],R=f[1],T;M<k&&(T=k,k=M,M=T);var z=M-k,Y=hn(z-Jt)<dt,H=Y||z<dt;if(!Y&&R<N&&(T=N,N=R,R=T),H?Y?N+R>0^L[1]<(hn(L[0]-k)<dt?N:R):N<=L[1]&&L[1]<=R:z>Jt^(k<=L[0]&&L[0]<=M)){var oe=pb(D,(-x+I)/A);return ZA(oe,w),[L,X_(oe)]}}}function u(c,f){var d=i?e:Jt-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return DX(a,o,s,i?[0,-e]:[-Jt,e-Jt])}function lAe(e,t,n,i,r,s){var a=e[0],o=e[1],l=t[0],u=t[1],c=0,f=1,d=l-a,h=u-o,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=r-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=i-o,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=a+c*d,e[1]=o+c*h),f<1&&(t[0]=a+f*d,t[1]=o+f*h),!0}}}}}var i0=1e9,mb=-i0;function RX(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function s(u,c,f,d){var h=0,p=0;if(u==null||(h=a(u,f))!==(p=a(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?i:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function a(u,c){return hn(u[0]-e)<dt?c>0?0:3:hn(u[0]-n)<dt?c>0?2:1:hn(u[1]-t)<dt?c>0?1:0:c>0?3:2}function o(u,c){return l(u.x,c.x)}function l(u,c){var f=a(u,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=kX(),d,h,p,g,m,y,b,v,_,S,E,w={point:O,lineStart:C,lineEnd:I,polygonStart:x,polygonEnd:A};function O(k,M){r(k,M)&&c.point(k,M)}function D(){for(var k=0,M=0,N=h.length;M<N;++M)for(var R=h[M],T=1,z=R.length,Y=R[0],H,oe,_e=Y[0],re=Y[1];T<z;++T)H=_e,oe=re,Y=R[T],_e=Y[0],re=Y[1],oe<=i?re>i&&(_e-H)*(i-oe)>(re-oe)*(e-H)&&++k:re<=i&&(_e-H)*(i-oe)<(re-oe)*(e-H)&&--k;return k}function x(){c=f,d=[],h=[],E=!0}function A(){var k=D(),M=E&&k,N=(d=CH(d)).length;(M||N)&&(u.polygonStart(),M&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),N&&MX(d,o,k,s,u),u.polygonEnd()),c=u,d=h=p=null}function C(){w.point=L,h&&h.push(p=[]),S=!0,_=!1,b=v=NaN}function I(){d&&(L(g,m),y&&_&&f.rejoin(),d.push(f.result())),w.point=O,_&&c.lineEnd()}function L(k,M){var N=r(k,M);if(h&&p.push([k,M]),S)g=k,m=M,y=N,S=!1,N&&(c.lineStart(),c.point(k,M));else if(N&&_)c.point(k,M);else{var R=[b=Math.max(mb,Math.min(i0,b)),v=Math.max(mb,Math.min(i0,v))],T=[k=Math.max(mb,Math.min(i0,k)),M=Math.max(mb,Math.min(i0,M))];lAe(R,T,e,t,n,i)?(_||(c.lineStart(),c.point(R[0],R[1])),c.point(T[0],T[1]),N||c.lineEnd(),E=!1):N&&(c.lineStart(),c.point(k,M),E=!1)}b=k,v=M,_=N}return w}}function a5(e,t,n){var i=Ws(e,t-dt,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function o5(e,t,n){var i=Ws(e,t-dt,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function uAe(){var e,t,n,i,r,s,a,o,l=10,u=l,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Ws(db(i/c)*c,n,c).map(p).concat(Ws(db(o/f)*f,a,f).map(g)).concat(Ws(db(t/l)*l,e,l).filter(function(v){return hn(v%c)>dt}).map(d)).concat(Ws(db(s/u)*u,r,u).filter(function(v){return hn(v%f)>dt}).map(h))}return y.lines=function(){return b().map(function(v){return{type:"LineString",coordinates:v}})},y.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(a).slice(1),p(n).reverse().slice(1),g(o).reverse().slice(1))]}},y.extent=function(v){return arguments.length?y.extentMajor(v).extentMinor(v):y.extentMinor()},y.extentMajor=function(v){return arguments.length?(i=+v[0][0],n=+v[1][0],o=+v[0][1],a=+v[1][1],i>n&&(v=i,i=n,n=v),o>a&&(v=o,o=a,a=v),y.precision(m)):[[i,o],[n,a]]},y.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],r=+v[1][1],t>e&&(v=t,t=e,e=v),s>r&&(v=s,s=r,r=v),y.precision(m)):[[t,s],[e,r]]},y.step=function(v){return arguments.length?y.stepMajor(v).stepMinor(v):y.stepMinor()},y.stepMajor=function(v){return arguments.length?(c=+v[0],f=+v[1],y):[c,f]},y.stepMinor=function(v){return arguments.length?(l=+v[0],u=+v[1],y):[l,u]},y.precision=function(v){return arguments.length?(m=+v,d=a5(s,r,90),h=o5(t,e,m),p=a5(o,a,90),g=o5(i,n,m),y):m},y.extentMajor([[-180,-90+dt],[180,90-dt]]).extentMinor([[-180,-80-dt],[180,80+dt]])}var s1=e=>e,tO=new Hr,BI=new Hr,LX,NX,jI,UI,sc={point:nr,lineStart:nr,lineEnd:nr,polygonStart:function(){sc.lineStart=cAe,sc.lineEnd=dAe},polygonEnd:function(){sc.lineStart=sc.lineEnd=sc.point=nr,tO.add(hn(BI)),BI=new Hr},result:function(){var e=tO/2;return tO=new Hr,e}};function cAe(){sc.point=fAe}function fAe(e,t){sc.point=FX,LX=jI=e,NX=UI=t}function FX(e,t){BI.add(UI*e-jI*t),jI=e,UI=t}function dAe(){FX(LX,NX)}var l5=sc,hg=1/0,r2=hg,a1=-hg,s2=a1,hAe={point:pAe,lineStart:nr,lineEnd:nr,polygonStart:nr,polygonEnd:nr,result:function(){var e=[[hg,r2],[a1,s2]];return a1=s2=-(r2=hg=1/0),e}};function pAe(e,t){e<hg&&(hg=e),e>a1&&(a1=e),t<r2&&(r2=t),t>s2&&(s2=t)}var a2=hAe,zI=0,VI=0,r0=0,o2=0,l2=0,cp=0,$I=0,HI=0,s0=0,PX,BX,Xo,Ko,Ya={point:Yd,lineStart:u5,lineEnd:c5,polygonStart:function(){Ya.lineStart=yAe,Ya.lineEnd=bAe},polygonEnd:function(){Ya.point=Yd,Ya.lineStart=u5,Ya.lineEnd=c5},result:function(){var e=s0?[$I/s0,HI/s0]:cp?[o2/cp,l2/cp]:r0?[zI/r0,VI/r0]:[NaN,NaN];return zI=VI=r0=o2=l2=cp=$I=HI=s0=0,e}};function Yd(e,t){zI+=e,VI+=t,++r0}function u5(){Ya.point=gAe}function gAe(e,t){Ya.point=mAe,Yd(Xo=e,Ko=t)}function mAe(e,t){var n=e-Xo,i=t-Ko,r=Xr(n*n+i*i);o2+=r*(Xo+e)/2,l2+=r*(Ko+t)/2,cp+=r,Yd(Xo=e,Ko=t)}function c5(){Ya.point=Yd}function yAe(){Ya.point=vAe}function bAe(){jX(PX,BX)}function vAe(e,t){Ya.point=jX,Yd(PX=Xo=e,BX=Ko=t)}function jX(e,t){var n=e-Xo,i=t-Ko,r=Xr(n*n+i*i);o2+=r*(Xo+e)/2,l2+=r*(Ko+t)/2,cp+=r,r=Ko*e-Xo*t,$I+=r*(Xo+e),HI+=r*(Ko+t),s0+=r*3,Yd(Xo=e,Ko=t)}var f5=Ya;function UX(e){this._context=e}UX.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yr);break}}},result:nr};var WI=new Hr,nO,zX,VX,a0,o0,u2={point:nr,lineStart:function(){u2.point=_Ae},lineEnd:function(){nO&&$X(zX,VX),u2.point=nr},polygonStart:function(){nO=!0},polygonEnd:function(){nO=null},result:function(){var e=+WI;return WI=new Hr,e}};function _Ae(e,t){u2.point=$X,zX=a0=e,VX=o0=t}function $X(e,t){a0-=e,o0-=t,WI.add(Xr(a0*a0+o0*o0)),a0=e,o0=t}var d5=u2;function HX(){this._string=[]}HX.prototype={_radius:4.5,_circle:h5(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=h5(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function h5(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function WX(e,t){var n=4.5,i,r;function s(a){return a&&(typeof n=="function"&&r.pointRadius(+n.apply(this,arguments)),nu(a,i(r))),r.result()}return s.area=function(a){return nu(a,i(l5)),l5.result()},s.measure=function(a){return nu(a,i(d5)),d5.result()},s.bounds=function(a){return nu(a,i(a2)),a2.result()},s.centroid=function(a){return nu(a,i(f5)),f5.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,s1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(r=a==null?(t=null,new HX):new UX(t=a),typeof n!="function"&&r.pointRadius(n),s):t},s.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(r.pointRadius(+a),+a),s):n},s.projection(e).context(t)}function hS(e){return function(t){var n=new qI;for(var i in e)n[i]=e[i];return n.stream=t,n}}function qI(){}qI.prototype={constructor:qI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function wD(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),nu(n,e.stream(a2)),t(a2.result()),i!=null&&e.clipExtent(i),e}function pS(e,t,n){return wD(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),o=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(s-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([o,l])},n)}function SD(e,t,n){return pS(e,[[0,0],t],n)}function ED(e,t,n){return wD(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),a=(r-s*(i[1][0]+i[0][0]))/2,o=-s*i[0][1];e.scale(150*s).translate([a,o])},n)}function AD(e,t,n){return wD(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),a=-s*i[0][0],o=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,o])},n)}var p5=16,wAe=ht(30*Qt);function g5(e,t){return+t?EAe(e,t):SAe(e)}function SAe(e){return hS({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function EAe(e,t){function n(i,r,s,a,o,l,u,c,f,d,h,p,g,m){var y=u-i,b=c-r,v=y*y+b*b;if(v>4*t&&g--){var _=a+d,S=o+h,E=l+p,w=Xr(_*_+S*S+E*E),O=Os(E/=w),D=hn(hn(E)-1)<dt||hn(s-f)<dt?(s+f)/2:Oa(S,_),x=e(D,O),A=x[0],C=x[1],I=A-i,L=C-r,k=b*I-y*L;(k*k/v>t||hn((y*I+b*L)/v-.5)>.3||a*d+o*h+l*p<wAe)&&(n(i,r,s,a,o,l,A,C,D,_/=w,S/=w,E,g,m),m.point(A,C),n(A,C,D,_,S,E,u,c,f,d,h,p,g,m))}}return function(i){var r,s,a,o,l,u,c,f,d,h,p,g,m={point:y,lineStart:b,lineEnd:_,polygonStart:function(){i.polygonStart(),m.lineStart=S},polygonEnd:function(){i.polygonEnd(),m.lineStart=b}};function y(O,D){O=e(O,D),i.point(O[0],O[1])}function b(){f=NaN,m.point=v,i.lineStart()}function v(O,D){var x=Gd([O,D]),A=e(O,D);n(f,d,c,h,p,g,f=A[0],d=A[1],c=O,h=x[0],p=x[1],g=x[2],p5,i),i.point(f,d)}function _(){m.point=y,i.lineEnd()}function S(){b(),m.point=E,m.lineEnd=w}function E(O,D){v(r=O,D),s=f,a=d,o=h,l=p,u=g,m.point=v}function w(){n(f,d,c,h,p,g,s,a,r,o,l,u,p5,i),m.lineEnd=_,_()}return m}}var AAe=hS({point:function(e,t){this.stream.point(e*Qt,t*Qt)}});function OAe(e){return hS({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function CAe(e,t,n,i,r){function s(a,o){return a*=i,o*=r,[t+e*a,n-e*o]}return s.invert=function(a,o){return[(a-t)/e*i,(n-o)/e*r]},s}function m5(e,t,n,i,r,s){if(!s)return CAe(e,t,n,i,r);var a=ht(s),o=ut(s),l=a*e,u=o*e,c=a/e,f=o/e,d=(o*n-a*t)/e,h=(o*t+a*n)/e;function p(g,m){return g*=i,m*=r,[l*g-u*m+t,n-u*g-l*m]}return p.invert=function(g,m){return[i*(c*g-f*m+d),r*(h-f*g-c*m)]},p}function Tl(e){return qX(function(){return e})()}function qX(e){var t,n=150,i=480,r=250,s=0,a=0,o=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=s5,m=null,y,b,v,_=s1,S=.5,E,w,O,D,x;function A(k){return O(k[0]*Qt,k[1]*Qt)}function C(k){return k=O.invert(k[0],k[1]),k&&[k[0]*bi,k[1]*bi]}A.stream=function(k){return D&&x===k?D:D=AAe(OAe(c)(g(E(_(x=k)))))},A.preclip=function(k){return arguments.length?(g=k,p=void 0,L()):g},A.postclip=function(k){return arguments.length?(_=k,m=y=b=v=null,L()):_},A.clipAngle=function(k){return arguments.length?(g=+k?oAe(p=k*Qt):(p=null,s5),L()):p*bi},A.clipExtent=function(k){return arguments.length?(_=k==null?(m=y=b=v=null,s1):RX(m=+k[0][0],y=+k[0][1],b=+k[1][0],v=+k[1][1]),L()):m==null?null:[[m,y],[b,v]]},A.scale=function(k){return arguments.length?(n=+k,I()):n},A.translate=function(k){return arguments.length?(i=+k[0],r=+k[1],I()):[i,r]},A.center=function(k){return arguments.length?(s=k[0]%360*Qt,a=k[1]%360*Qt,I()):[s*bi,a*bi]},A.rotate=function(k){return arguments.length?(o=k[0]%360*Qt,l=k[1]%360*Qt,u=k.length>2?k[2]%360*Qt:0,I()):[o*bi,l*bi,u*bi]},A.angle=function(k){return arguments.length?(f=k%360*Qt,I()):f*bi},A.reflectX=function(k){return arguments.length?(d=k?-1:1,I()):d<0},A.reflectY=function(k){return arguments.length?(h=k?-1:1,I()):h<0},A.precision=function(k){return arguments.length?(E=g5(w,S=k*k),L()):Xr(S)},A.fitExtent=function(k,M){return pS(A,k,M)},A.fitSize=function(k,M){return SD(A,k,M)},A.fitWidth=function(k,M){return ED(A,k,M)},A.fitHeight=function(k,M){return AD(A,k,M)};function I(){var k=m5(n,0,0,d,h,f).apply(null,t(s,a)),M=m5(n,i-k[0],r-k[1],d,h,f);return c=TX(o,l,u),w=FI(t,M),O=FI(c,w),E=g5(w,S),L()}function L(){return D=x=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&C,I()}}function OD(e){var t=0,n=Jt/3,i=qX(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*Qt,n=s[1]*Qt):[t*bi,n*bi]},r}function IAe(e){var t=ht(e);function n(i,r){return[i*t,ut(r)/t]}return n.invert=function(i,r){return[i/t,Os(r*t)]},n}function xAe(e,t){var n=ut(e),i=(n+ut(t))/2;if(hn(i)<dt)return IAe(e);var r=1+n*(2*i-n),s=Xr(r)/i;function a(o,l){var u=Xr(r-2*i*ut(l))/i;return[u*ut(o*=i),s-u*ht(o)]}return a.invert=function(o,l){var u=s-l,c=Oa(o,hn(u))*pa(u);return u*i<0&&(c-=Jt*pa(o)*pa(u)),[c/i,Os((r-(o*o+u*u)*i*i)/(2*i))]},a}function c2(){return OD(xAe).scale(155.424).center([0,33.6442])}function GX(){return c2().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function TAe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function kAe(){var e,t,n=GX(),i,r=c2().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=c2().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,i.point(h,p),l||(s.point(h,p),l)||(o.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=TAe([n.stream(t=d),r.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),r.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),r.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return i=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),s=r.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+dt,g+.12*h+dt],[p-.214*h-dt,g+.234*h-dt]]).stream(u),o=a.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+dt,g+.166*h+dt],[p-.115*h-dt,g+.234*h-dt]]).stream(u),f()},c.fitExtent=function(d,h){return pS(c,d,h)},c.fitSize=function(d,h){return SD(c,d,h)},c.fitWidth=function(d,h){return ED(c,d,h)},c.fitHeight=function(d,h){return AD(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function YX(e){return function(t,n){var i=ht(t),r=ht(n),s=e(i*r);return s===1/0?[2,0]:[s*r*ut(t),s*ut(n)]}}function fy(e){return function(t,n){var i=Xr(t*t+n*n),r=e(i),s=ut(r),a=ht(r);return[Oa(t*s,i*a),Os(i&&n*s/i)]}}var XX=YX(function(e){return Xr(2/(1+e))});XX.invert=fy(function(e){return 2*Os(e/2)});function MAe(){return Tl(XX).scale(124.75).clipAngle(180-.001)}var KX=YX(function(e){return(e=bX(e))&&e/ut(e)});KX.invert=fy(function(e){return e});function DAe(){return Tl(KX).scale(79.4188).clipAngle(180-.001)}function gS(e,t){return[e,W_(vD((pi+t)/2))]}gS.invert=function(e,t){return[e,2*Qg(yX(t))-pi]};function RAe(){return JX(gS).scale(961/Yr)}function JX(e){var t=Tl(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,a=null,o,l,u;t.scale=function(f){return arguments.length?(i(f),c()):i()},t.translate=function(f){return arguments.length?(r(f),c()):r()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=o=l=u=null:(a=+f[0][0],o=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):a==null?null:[[a,o],[l,u]]};function c(){var f=Jt*i(),d=t(ZEe(t.rotate()).invert([0,0]));return s(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===gS?[[Math.max(d[0]-f,a),o],[Math.min(d[0]+f,l),u]]:[[a,Math.max(d[1]-f,o)],[l,Math.min(d[1]+f,u)]])}return c()}function yb(e){return vD((pi+e)/2)}function LAe(e,t){var n=ht(e),i=e===t?ut(e):W_(n/ht(t))/W_(yb(t)/yb(e)),r=n*QA(yb(e),i)/i;if(!i)return gS;function s(a,o){r>0?o<-pi+dt&&(o=-pi+dt):o>pi-dt&&(o=pi-dt);var l=r/QA(yb(o),i);return[l*ut(i*a),r-l*ht(i*a)]}return s.invert=function(a,o){var l=r-o,u=pa(i)*Xr(a*a+l*l),c=Oa(a,hn(l))*pa(l);return l*i<0&&(c-=Jt*pa(a)*pa(l)),[c/i,2*Qg(QA(r/u,1/i))-pi]},s}function NAe(){return OD(LAe).scale(109.5).parallels([30,30])}function f2(e,t){return[e,t]}f2.invert=f2;function FAe(){return Tl(f2).scale(152.63)}function PAe(e,t){var n=ht(e),i=e===t?ut(e):(n-ht(t))/(t-e),r=n/i+e;if(hn(i)<dt)return f2;function s(a,o){var l=r-o,u=i*a;return[l*ut(u),r-l*ht(u)]}return s.invert=function(a,o){var l=r-o,u=Oa(a,hn(l))*pa(l);return l*i<0&&(u-=Jt*pa(a)*pa(l)),[u/i,r-pa(i)*Xr(a*a+l*l)]},s}function BAe(){return OD(PAe).scale(131.154).center([0,13.9389])}var A0=1.340264,O0=-.081106,C0=893e-6,I0=.003796,d2=Xr(3)/2,jAe=12;function QX(e,t){var n=Os(d2*ut(t)),i=n*n,r=i*i*i;return[e*ht(n)/(d2*(A0+3*O0*i+r*(7*C0+9*I0*i))),n*(A0+O0*i+r*(C0+I0*i))]}QX.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,a,o,l;s<jAe&&(o=n*(A0+O0*i+r*(C0+I0*i))-t,l=A0+3*O0*i+r*(7*C0+9*I0*i),n-=a=o/l,i=n*n,r=i*i*i,!(hn(a)<$_));++s);return[d2*e*(A0+3*O0*i+r*(7*C0+9*I0*i))/ht(n),Os(ut(n)/d2)]};function UAe(){return Tl(QX).scale(177.158)}function ZX(e,t){var n=ht(t),i=ht(e)*n;return[n*ut(e)/i,ut(t)/i]}ZX.invert=fy(Qg);function zAe(){return Tl(ZX).scale(144.049).clipAngle(60)}function VAe(){var e=1,t=0,n=0,i=1,r=1,s=0,a,o,l=null,u,c,f,d=1,h=1,p=hS({point:function(_,S){var E=v([_,S]);this.stream.point(E[0],E[1])}}),g=s1,m,y;function b(){return d=e*i,h=e*r,m=y=null,v}function v(_){var S=_[0]*d,E=_[1]*h;if(s){var w=E*a-S*o;S=S*a+E*o,E=w}return[S+t,E+n]}return v.invert=function(_){var S=_[0]-t,E=_[1]-n;if(s){var w=E*a+S*o;S=S*a-E*o,E=w}return[S/d,E/h]},v.stream=function(_){return m&&y===_?m:m=p(g(y=_))},v.postclip=function(_){return arguments.length?(g=_,l=u=c=f=null,b()):g},v.clipExtent=function(_){return arguments.length?(g=_==null?(l=u=c=f=null,s1):RX(l=+_[0][0],u=+_[0][1],c=+_[1][0],f=+_[1][1]),b()):l==null?null:[[l,u],[c,f]]},v.scale=function(_){return arguments.length?(e=+_,b()):e},v.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],b()):[t,n]},v.angle=function(_){return arguments.length?(s=_%360*Qt,o=ut(s),a=ht(s),b()):s*bi},v.reflectX=function(_){return arguments.length?(i=_?-1:1,b()):i<0},v.reflectY=function(_){return arguments.length?(r=_?-1:1,b()):r<0},v.fitExtent=function(_,S){return pS(v,_,S)},v.fitSize=function(_,S){return SD(v,_,S)},v.fitWidth=function(_,S){return ED(v,_,S)},v.fitHeight=function(_,S){return AD(v,_,S)},v}function eK(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}eK.invert=function(e,t){var n=t,i=25,r;do{var s=n*n,a=s*s;n-=r=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(hn(r)>dt&&--i>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function $Ae(){return Tl(eK).scale(175.295)}function tK(e,t){return[ht(t)*ut(e),ut(t)]}tK.invert=fy(Os);function HAe(){return Tl(tK).scale(249.5).clipAngle(90+dt)}function nK(e,t){var n=ht(t),i=1+ht(e)*n;return[n*ut(e)/i,ut(t)/i]}nK.invert=fy(function(e){return 2*Qg(e)});function WAe(){return Tl(nK).scale(250).clipAngle(142)}function iK(e,t){return[W_(vD((pi+t)/2)),-e]}iK.invert=function(e,t){return[-t,2*Qg(yX(e))-pi]};function qAe(){var e=JX(iK),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var GAe=Math.abs,GI=Math.cos,h2=Math.sin,YAe=1e-6,rK=Math.PI,YI=rK/2,y5=XAe(2);function b5(e){return e>1?YI:e<-1?-YI:Math.asin(e)}function XAe(e){return e>0?Math.sqrt(e):0}function KAe(e,t){var n=e*h2(t),i=30,r;do t-=r=(t+h2(t)-n)/(1+GI(t));while(GAe(r)>YAe&&--i>0);return t/2}function JAe(e,t,n){function i(r,s){return[e*r*GI(s=KAe(n,s)),t*h2(s)]}return i.invert=function(r,s){return s=b5(s/t),[r/(e*GI(s)),b5((2*s+h2(2*s))/n)]},i}var QAe=JAe(y5/YI,y5,rK);function ZAe(){return Tl(QAe).scale(169.529)}const eOe=WX(),XI=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function tOe(e,t){return function n(){const i=t();return i.type=e,i.path=WX().projection(i),i.copy=i.copy||function(){const r=n();return XI.forEach(s=>{i[s]&&r[s](i[s]())}),r.path.pointRadius(i.path.pointRadius()),r},i}}function CD(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(p2[e]=tOe(e,t),this):p2[e]||null}function sK(e){return e&&e.path||eOe}const p2={albers:GX,albersusa:kAe,azimuthalequalarea:MAe,azimuthalequidistant:DAe,conicconformal:NAe,conicequalarea:c2,conicequidistant:BAe,equalEarth:UAe,equirectangular:FAe,gnomonic:zAe,identity:VAe,mercator:RAe,mollweide:ZAe,naturalEarth1:$Ae,orthographic:HAe,stereographic:WAe,transversemercator:qAe};for(const e in p2)CD(e,p2[e]);function nOe(){}const $l=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function aK(){var e=1,t=1,n=o;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],f=[];return s(l,u,d=>{n(d,l,u),iOe(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(rOe((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var f=new Array,d=new Array,h,p,g,m,y,b;for(h=p=-1,m=l[0]>=u,$l[m<<1].forEach(v);++h<e-1;)g=m,m=l[h+1]>=u,$l[g|m<<1].forEach(v);for($l[m<<0].forEach(v);++p<t-1;){for(h=-1,m=l[p*e+e]>=u,y=l[p*e]>=u,$l[m<<1|y<<2].forEach(v);++h<e-1;)g=m,m=l[p*e+e+h+1]>=u,b=y,y=l[p*e+h+1]>=u,$l[g|m<<1|y<<2|b<<3].forEach(v);$l[m|y<<3].forEach(v)}for(h=-1,y=l[p*e]>=u,$l[y<<2].forEach(v);++h<e-1;)b=y,y=l[p*e+h+1]>=u,$l[y<<2|b<<3].forEach(v);$l[y<<3].forEach(v);function v(_){var S=[_[0][0]+h,_[0][1]+p],E=[_[1][0]+h,_[1][1]+p],w=a(S),O=a(E),D,x;(D=d[w])?(x=f[O])?(delete d[D.end],delete f[x.start],D===x?(D.ring.push(E),c(D.ring)):f[D.start]=d[x.end]={start:D.start,end:x.end,ring:D.ring.concat(x.ring)}):(delete d[D.end],D.ring.push(E),d[D.end=O]=D):(D=f[O])?(x=d[w])?(delete f[D.start],delete d[x.end],D===x?(D.ring.push(E),c(D.ring)):f[x.start]=d[D.end]={start:x.start,end:D.end,ring:x.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(S),f[D.start=w]=D):f[w]=d[O]={start:w,end:O,ring:[S,E]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function o(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=u[g*e+p];d>0&&d<e&&p===d&&(m=u[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=u[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||he("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?o:nOe,i):n===o},i}function iOe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function rOe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=sOe(e,t[n]))return r;return 0}function sOe(e,t){for(var n=t[0],i=t[1],r=-1,s=0,a=e.length,o=a-1;s<a;o=s++){var l=e[s],u=l[0],c=l[1],f=e[o],d=f[0],h=f[1];if(aOe(l,f,t))return 0;c>i!=h>i&&n<(d-u)*(i-c)/(h-c)+u&&(r=-r)}return r}function aOe(e,t,n){var i;return oOe(e,t,n)&&lOe(e[i=+(e[0]===t[0])],n[i],t[i])}function oOe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function lOe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function oK(e,t,n){return function(i){var r=yl(i),s=n?Math.min(r[0],0):r[0],a=r[1],o=a-s,l=t?zc(s,a,e):o/(e+1);return Ws(s+l,a,l)}}function ID(e){ue.call(this,null,e)}ID.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Te(ID,ue,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Tr,s=aK().smooth(e.smooth!==!1),a=e.thresholds||uOe(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),f=s.size([c.width,c.height])(c.values,ge(a)?a:a(c.values));cOe(f,c,u,e),f.forEach(d=>{l.push(Lw(u,xn(o!=null?{[o]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function uOe(e,t,n){const i=oK(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Id(t(r).values)))}function cOe(e,t,n,i){let r=i.scale||t.scale,s=i.translate||t.translate;if(Ht(r)&&(r=r(n,i)),Ht(s)&&(s=s(n,i)),(r===1||r==null)&&!s)return;const a=(Un(r)?r:r[0])||1,o=(Un(r)?r:r[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(lK(t,a,o,l,u))}function lK(e,t,n,i,r){const s=e.x1||0,a=e.y1||0,o=t*n<0;function l(f){f.forEach(u)}function u(f){o&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+i,f[1]=(f[1]-a)*n+r}return function(f){return f.coordinates.forEach(l),f}}function v5(e,t,n){const i=e>=0?e:b3(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function iO(e){return Ht(e)?e:kr(+e)}function uK(){var e=l=>l[0],t=l=>l[1],n=Ug,i=[-1,-1],r=960,s=500,a=2;function o(l,u){const c=v5(i[0],l,e)>>a,f=v5(i[1],l,t)>>a,d=c?c+2:0,h=f?f+2:0,p=2*d+(r>>a),g=2*h+(s>>a),m=new Float32Array(p*g),y=new Float32Array(p*g);let b=m;l.forEach(_=>{const S=d+(+e(_)>>a),E=h+(+t(_)>>a);S>=0&&S<p&&E>=0&&E<g&&(m[S+E*p]+=+n(_))}),c>0&&f>0?(zh(p,g,m,y,c),Vh(p,g,y,m,f),zh(p,g,m,y,c),Vh(p,g,y,m,f),zh(p,g,m,y,c),Vh(p,g,y,m,f)):c>0?(zh(p,g,m,y,c),zh(p,g,y,m,c),zh(p,g,m,y,c),b=y):f>0&&(Vh(p,g,m,y,f),Vh(p,g,y,m,f),Vh(p,g,m,y,f),b=y);const v=u?Math.pow(2,-2*a):1/IH(b);for(let _=0,S=p*g;_<S;++_)b[_]*=v;return{values:b,scale:1<<a,width:p,height:g,x1:d,y1:h,x2:d+(r>>a),y2:h+(s>>a)}}return o.x=function(l){return arguments.length?(e=iO(l),o):e},o.y=function(l){return arguments.length?(t=iO(l),o):t},o.weight=function(l){return arguments.length?(n=iO(l),o):n},o.size=function(l){if(!arguments.length)return[r,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||he("invalid size"),r=u,s=c,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||he("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),o):1<<a},o.bandwidth=function(l){return arguments.length?(l=Pe(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&he("invalid bandwidth"),i=l,o):i},o}function zh(e,t,n,i,r){const s=(r<<1)+1;for(let a=0;a<t;++a)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+a*e]),o>=r&&(o>=s&&(l-=n[o-s+a*e]),i[o-r+a*e]=l/Math.min(o+1,e-1+s-o,s))}function Vh(e,t,n,i,r){const s=(r<<1)+1;for(let a=0;a<e;++a)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[a+o*e]),o>=r&&(o>=s&&(l-=n[a+(o-s)*e]),i[a+(o-r)*e]=l/Math.min(o+1,t-1+s-o,s))}function xD(e){ue.call(this,null,e)}xD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const fOe=["x","y","weight","size","cellSize","bandwidth"];function cK(e,t){return fOe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Te(xD,ue,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=dOe(i,e.groupby),s=(e.groupby||[]).map(gi),a=cK(uK(),e),o=e.as||"grid",l=[];function u(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return l=r.map(c=>xn(u({[o]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function dOe(e,t){var n=[],i=c=>c(o),r,s,a,o,l,u;if(t==null)n.push(e);else for(r={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(o);return n}function TD(e){ue.call(this,null,e)}TD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Te(TD,ue,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=aK().smooth(e.smooth!==!1),r=e.values,s=e.thresholds||oK(e.count||10,e.nice,!!r),a=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=cK(uK(),e)(r,!0),l=lK(o,o.scale||1,o.scale||1,0,0),a=[o.width,o.height],r=o.values),s=ge(s)?s:s(r),r=i.size(a)(r,s),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(xn),n}});const KI="Feature",kD="FeatureCollection",hOe="MultiPoint";function MD(e){ue.call(this,null,e)}MD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Te(MD,ue,{transform(e,t){var n=this._features,i=this._points,r=e.fields,s=r&&r[0],a=r&&r[1],o=e.geojson||!r&&Tr,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Ar(o))||s&&t.modified(Ar(s))||a&&t.modified(Ar(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,c=>n.push(o(c))),s&&a&&(t.visit(l,c=>{var f=s(c),d=a(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&i.push([f,d])}),n=n.concat({type:KI,geometry:{type:hOe,coordinates:i}})),this.value={type:kD,features:n}}});function DD(e){ue.call(this,null,e)}DD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Te(DD,ue,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Tr,s=e.as||"path",a=n.SOURCE;!i||e.modified()?(this.value=i=sK(e.projection),n.materialize().reflow()):a=r===Tr||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=pOe(i,e.pointRadius);return n.visit(a,l=>l[s]=i(r(l))),i.pointRadius(o),n.modifies(s)}});function pOe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function RD(e){ue.call(this,null,e)}RD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Te(RD,ue,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],s=e.as||["x","y"],a=s[0],o=s[1],l;function u(c){const f=n([i(c),r(c)]);f?(c[a]=f[0],c[o]=f[1]):(c[a]=void 0,c[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function LD(e){ue.call(this,null,e)}LD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Te(LD,ue,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",s=n.ADD;return(!i||e.modified())&&(this.value=i=gOe(sK(e.projection),e.field||Ss("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[r]=i),n.modifies(r)}});function gOe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var s=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(s),a};return i.context=r=>(e.context(r),i),i}function ND(e){ue.call(this,[],e),this.generator=uAe()}ND.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Te(ND,ue,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const s in e)Ht(i[s])&&i[s](e[s]);return r=i(),n.length?t.mod.push(kW(n[0],r)):t.add.push(xn(r)),n[0]=r,t}});function FD(e){ue.call(this,null,e)}FD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Te(FD,ue,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Tr,s=yOe(e.opacity,e),a=mOe(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Id(n.map(u=>Id(r(u).values))):0};return n.forEach(u=>{const c=r(u),f=$t({},u,l);i||(f.$max=Id(c.values||[])),u[o]=bOe(c,f,a.dep?a:kr(a(f)),s.dep?s:kr(s(f)))}),t.reflow(!0).modifies(o)}});function mOe(e,t){let n;return Ht(e)?(n=i=>qc(e(i,t)),n.dep=fK(e)):n=kr(qc(e||"#888")),n}function yOe(e,t){let n;return Ht(e)?(n=i=>e(i,t),n.dep=fK(e)):e?n=kr(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function fK(e){if(!Ht(e))return!1;const t=po(Ar(e));return t.$x||t.$y||t.$value||t.$max}function bOe(e,t,n,i){const r=e.width,s=e.height,a=e.x1||0,o=e.y1||0,l=e.x2||r,u=e.y2||s,c=e.values,f=c?m=>c[m]:rc,d=Ac(l-a,u-o),h=d.getContext("2d"),p=h.getImageData(0,0,l-a,u-o),g=p.data;for(let m=o,y=0;m<u;++m){t.$y=m-o;for(let b=a,v=m*r;b<l;++b,y+=4){t.$x=b-a,t.$value=f(b+v);const _=n(t);g[y+0]=_.r,g[y+1]=_.g,g[y+2]=_.b,g[y+3]=~~(255*i(t))}}return h.putImageData(p,0,0),d}function dK(e){ue.call(this,null,e),this.modified(!0)}Te(dK,ue,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=_Oe(e.type),XI.forEach(i=>{e[i]!=null&&_5(n,i,e[i])})):XI.forEach(i=>{e.modified(i)&&_5(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&vOe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vOe(e,t){const n=wOe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function _Oe(e){const t=CD((e||"mercator").toLowerCase());return t||he("Unrecognized projection type: "+e),t()}function _5(e,t,n){Ht(e[t])&&e[t](n)}function wOe(e){return e=Pe(e),e.length===1?e[0]:{type:kD,features:e.reduce((t,n)=>t.concat(SOe(n)),[])}}function SOe(e){return e.type===kD?e.features:Pe(e).filter(t=>t!=null).map(t=>t.type===KI?t:{type:KI,geometry:t})}var EOe=Object.freeze(Object.defineProperty({__proto__:null,contour:TD,geojson:MD,geopath:DD,geopoint:RD,geoshape:LD,graticule:ND,heatmap:FD,isocontour:ID,kde2d:xD,projection:dK},Symbol.toStringTag,{value:"Module"}));function AOe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var s,a=n.length,o,l=0,u=0;for(s=0;s<a;++s)o=n[s],l+=o.x,u+=o.y;for(l=(l/a-e)*i,u=(u/a-t)*i,s=0;s<a;++s)o=n[s],o.x-=l,o.y-=u}return r.initialize=function(s){n=s},r.x=function(s){return arguments.length?(e=+s,r):e},r.y=function(s){return arguments.length?(t=+s,r):t},r.strength=function(s){return arguments.length?(i=+s,r):i},r}function OOe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return hK(this.cover(t,n),t,n,e)}function hK(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,s=e._root,a={data:i},o=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,m,y,b;if(!s)return e._root=a,e;for(;s.length;)if((g=t>=(f=(o+u)/2))?o=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,r=s,!(s=s[y=m<<1|g]))return r[y]=a,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return a.next=s,r?r[y]=a:e._root=a,e;do r=r?r[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(o+u)/2))?o=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|g)===(b=(p>=d)<<1|h>=f));return r[b]=s,r[y]=a,e}function COe(e){var t,n,i=e.length,r,s,a=new Array(i),o=new Array(i),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=r,o[n]=s,r<l&&(l=r),r>c&&(c=r),s<u&&(u=s),s>f&&(f=s));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<i;++n)hK(this,a[n],o[n],e[n]);return this}function IOe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,s=(i=Math.floor(t))+1;else{for(var a=r-n||1,o=this._root,l,u;n>e||e>=r||i>t||t>=s;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:r=n+a,s=i+a;break;case 1:n=r-a,s=i+a;break;case 2:r=n+a,i=s-a;break;case 3:n=r-a,i=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function xOe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function TOe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zr(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function kOe(e,t,n){var i,r=this._x0,s=this._y0,a,o,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new zr(h,r,s,c,f)),n==null?n=1/0:(r=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(a=p.x0)>c||(o=p.y0)>f||(l=p.x1)<r||(u=p.y1)<s))if(h.length){var m=(a+l)/2,y=(o+u)/2;d.push(new zr(h[3],m,y,l,u),new zr(h[2],a,y,m,u),new zr(h[1],m,o,l,y),new zr(h[0],a,o,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var b=e-+this._x.call(null,h.data),v=t-+this._y.call(null,h.data),_=b*b+v*v;if(_<n){var S=Math.sqrt(n=_);r=e-S,s=t-S,c=e+S,f=t+S,i=h.data}}return i}function MOe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,i,r,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(a+l)/2))?a=d:l=d,(g=f>=(h=(o+u)/2))?o=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(i=t,y=m)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[y]=n:this._root=n),this):(this._root=s,this)}function DOe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ROe(){return this._root}function LOe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function NOe(e){var t=[],n,i=this._root,r,s,a,o,l;for(i&&t.push(new zr(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&i.length){var u=(s+o)/2,c=(a+l)/2;(r=i[3])&&t.push(new zr(r,u,c,o,l)),(r=i[2])&&t.push(new zr(r,s,c,u,l)),(r=i[1])&&t.push(new zr(r,u,a,o,c)),(r=i[0])&&t.push(new zr(r,s,a,u,c))}return this}function FOe(e){var t=[],n=[],i;for(this._root&&t.push(new zr(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var s,a=i.x0,o=i.y0,l=i.x1,u=i.y1,c=(a+l)/2,f=(o+u)/2;(s=r[0])&&t.push(new zr(s,a,o,c,f)),(s=r[1])&&t.push(new zr(s,c,o,l,f)),(s=r[2])&&t.push(new zr(s,a,f,c,u)),(s=r[3])&&t.push(new zr(s,c,f,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function POe(e){return e[0]}function BOe(e){return arguments.length?(this._x=e,this):this._x}function jOe(e){return e[1]}function UOe(e){return arguments.length?(this._y=e,this):this._y}function PD(e,t,n){var i=new BD(t??POe,n??jOe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function BD(e,t,n,i,r,s){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function w5(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var es=PD.prototype=BD.prototype;es.copy=function(){var e=new BD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=w5(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=w5(i));return e};es.add=OOe;es.addAll=COe;es.cover=IOe;es.data=xOe;es.extent=TOe;es.find=kOe;es.remove=MOe;es.removeAll=DOe;es.root=ROe;es.size=LOe;es.visit=NOe;es.visitAfter=FOe;es.x=BOe;es.y=UOe;function Vr(e){return function(){return e}}function gc(e){return(e()-.5)*1e-6}function zOe(e){return e.x+e.vx}function VOe(e){return e.y+e.vy}function $Oe(e){var t,n,i,r=1,s=1;typeof e!="function"&&(e=Vr(e==null?1:+e));function a(){for(var u,c=t.length,f,d,h,p,g,m,y=0;y<s;++y)for(f=PD(t,zOe,VOe).visitAfter(o),u=0;u<c;++u)d=t[u],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(v,_,S,E,w){var O=v.data,D=v.r,x=g+D;if(O){if(O.index>d.index){var A=h-O.x-O.vx,C=p-O.y-O.vy,I=A*A+C*C;I<x*x&&(A===0&&(A=gc(i),I+=A*A),C===0&&(C=gc(i),I+=C*C),I=(x-(I=Math.sqrt(I)))/I*r,d.vx+=(A*=I)*(x=(D*=D)/(m+D)),d.vy+=(C*=I)*x,O.vx-=A*(x=1-x),O.vy-=C*x)}return}return _>h+x||E<h-x||S>p+x||w<p-x}}function o(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(!!t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return a.initialize=function(u,c){t=u,i=c,l()},a.iterations=function(u){return arguments.length?(s=+u,a):s},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Vr(+u),l(),a):e},a}function HOe(e){return e.index}function S5(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function WOe(e){var t=HOe,n=f,i,r=Vr(30),s,a,o,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(o[m.source.index],o[m.target.index])}function d(m){for(var y=0,b=e.length;y<c;++y)for(var v=0,_,S,E,w,O,D,x;v<b;++v)_=e[v],S=_.source,E=_.target,w=E.x+E.vx-S.x-S.vx||gc(u),O=E.y+E.vy-S.y-S.vy||gc(u),D=Math.sqrt(w*w+O*O),D=(D-s[v])/D*m*i[v],w*=D,O*=D,E.vx-=w*(x=l[v]),E.vy-=O*x,S.vx+=w*(x=1-x),S.vy+=O*x}function h(){if(!!a){var m,y=a.length,b=e.length,v=new Map(a.map((S,E)=>[t(S,E,a),S])),_;for(m=0,o=new Array(y);m<b;++m)_=e[m],_.index=m,typeof _.source!="object"&&(_.source=S5(v,_.source)),typeof _.target!="object"&&(_.target=S5(v,_.target)),o[_.source.index]=(o[_.source.index]||0)+1,o[_.target.index]=(o[_.target.index]||0)+1;for(m=0,l=new Array(b);m<b;++m)_=e[m],l[m]=o[_.source.index]/(o[_.source.index]+o[_.target.index]);i=new Array(b),p(),s=new Array(b),g()}}function p(){if(!!a)for(var m=0,y=e.length;m<y;++m)i[m]=+n(e[m],m,e)}function g(){if(!!a)for(var m=0,y=e.length;m<y;++m)s[m]=+r(e[m],m,e)}return d.initialize=function(m,y){a=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Vr(+m),p(),d):n},d.distance=function(m){return arguments.length?(r=typeof m=="function"?m:Vr(+m),g(),d):r},d}var qOe={value:()=>{}};function pK(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new uv(n)}function uv(e){this._=e}function GOe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}uv.prototype=pK.prototype={constructor:uv,on:function(e,t){var n=this._,i=GOe(e+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(e=i[s]).type)&&(r=YOe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(e=i[s]).type)n[r]=E5(n[r],e.name,t);else if(t==null)for(r in n)n[r]=E5(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uv(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function YOe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function E5(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=qOe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var pg=0,l0=0,Lm=0,gK=1e3,g2,u0,m2=0,Xd=0,mS=0,o1=typeof performance=="object"&&performance.now?performance:Date,mK=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jD(){return Xd||(mK(XOe),Xd=o1.now()+mS)}function XOe(){Xd=0}function y2(){this._call=this._time=this._next=null}y2.prototype=yK.prototype={constructor:y2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jD():+n)+(t==null?0:+t),!this._next&&u0!==this&&(u0?u0._next=this:g2=this,u0=this),this._call=e,this._time=n,JI()},stop:function(){this._call&&(this._call=null,this._time=1/0,JI())}};function yK(e,t,n){var i=new y2;return i.restart(e,t,n),i}function KOe(){jD(),++pg;for(var e=g2,t;e;)(t=Xd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pg}function A5(){Xd=(m2=o1.now())+mS,pg=l0=0;try{KOe()}finally{pg=0,QOe(),Xd=0}}function JOe(){var e=o1.now(),t=e-m2;t>gK&&(mS-=t,m2=e)}function QOe(){for(var e,t=g2,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:g2=n);u0=e,JI(i)}function JI(e){if(!pg){l0&&(l0=clearTimeout(l0));var t=e-Xd;t>24?(e<1/0&&(l0=setTimeout(A5,e-o1.now()-mS)),Lm&&(Lm=clearInterval(Lm))):(Lm||(m2=o1.now(),Lm=setInterval(JOe,gK)),pg=1,mK(A5))}}function ZOe(e,t,n){var i=new y2,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(s,a,o){a=+a,o=o==null?jD():+o,i._restart(function l(u){u+=r,i._restart(l,r+=a,o),s(u)},a,o)},i.restart(e,t,n),i)}const eCe=1664525,tCe=1013904223,O5=4294967296;function nCe(){let e=1;return()=>(e=(eCe*e+tCe)%O5)/O5}function iCe(e){return e.x}function rCe(e){return e.y}var sCe=10,aCe=Math.PI*(3-Math.sqrt(5));function oCe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,a=.6,o=new Map,l=yK(f),u=pK("tick","end"),c=nCe();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,b;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*r,o.forEach(function(_){_(n)}),m=0;m<y;++m)b=e[m],b.fx==null?b.x+=b.vx*=a:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=a:(b.y=b.fy,b.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=sCe*Math.sqrt(.5+g),v=g*aCe;y.x=b*Math.cos(v),y.y=b*Math.sin(v)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),o.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(i=+g,t):i},alphaDecay:function(g){return arguments.length?(r=+g,t):+r},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(c=g,o.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?o.delete(g):o.set(g,p(m)),t):o.get(g)},find:function(g,m,y){var b=0,v=e.length,_,S,E,w,O;for(y==null?y=1/0:y*=y,b=0;b<v;++b)w=e[b],_=g-w.x,S=m-w.y,E=_*_+S*S,E<y&&(O=w,y=E);return O},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function lCe(){var e,t,n,i,r=Vr(-30),s,a=1,o=1/0,l=.81;function u(h){var p,g=e.length,m=PD(e,iCe,rCe).visitAfter(f);for(i=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(!!e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+r(g,h,e)}}function f(h){var p=0,g,m,y=0,b,v,_;if(h.length){for(b=v=_=0;_<4;++_)(g=h[_])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,b+=m*g.x,v+=m*g.y);h.x=b/y,h.y=v/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,v=m-p,_=y*y+b*b;if(v*v/l<_)return _<o&&(y===0&&(y=gc(n),_+=y*y),b===0&&(b=gc(n),_+=b*b),_<a&&(_=Math.sqrt(a*_)),t.vx+=y*h.value*i/_,t.vy+=b*h.value*i/_),!0;if(h.length||_>=o)return;(h.data!==t||h.next)&&(y===0&&(y=gc(n),_+=y*y),b===0&&(b=gc(n),_+=b*b),_<a&&(_=Math.sqrt(a*_)));do h.data!==t&&(v=s[h.data.index]*i/_,t.vx+=y*v,t.vy+=b*v);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(r=typeof h=="function"?h:Vr(+h),c(),u):r},u.distanceMin=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.distanceMax=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function uCe(e){var t=Vr(.1),n,i,r;typeof e!="function"&&(e=Vr(e==null?0:+e));function s(o){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(r[l]-c.x)*i[l]*o}function a(){if(!!n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:Vr(+o),a(),s):t},s.x=function(o){return arguments.length?(e=typeof o=="function"?o:Vr(+o),a(),s):e},s}function cCe(e){var t=Vr(.1),n,i,r;typeof e!="function"&&(e=Vr(e==null?0:+e));function s(o){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(r[l]-c.y)*i[l]*o}function a(){if(!!n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:Vr(+o),a(),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:Vr(+o),a(),s):e},s}const C5={center:AOe,collide:$Oe,nbody:lCe,link:WOe,x:uCe,y:cCe},c0="forces",QI=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],fCe=["static","iterations"],bK=["x","y","vx","vy"];function UD(e){ue.call(this,null,e)}UD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:bK}]};Te(UD,ue,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(QI),s=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&vK(n,e,0,t)):(this.value=n=hCe(t.source,e),n.on("tick",dCe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(fCe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,u=o.length,c;l<u;++l)if(c=o[l],!(c.name!==c0||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,s=i.length,a;r<s;++r)if(i[r].name==="links"&&(a=i[r].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(bK)}});function dCe(e,t){return()=>e.touch(t).run()}function hCe(e,t){const n=oCe(e),i=n.stop,r=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,r()),n.stop=()=>(s=!0,i()),vK(n,t,!0).on("end",()=>s=!0)}function vK(e,t,n,i){var r=Pe(t.forces),s,a,o,l;for(s=0,a=QI.length;s<a;++s)o=QI[s],o!==c0&&t.modified(o)&&e[o](t[o]);for(s=0,a=r.length;s<a;++s)l=c0+s,o=n||t.modified(c0,s)?gCe(r[s]):i&&pCe(r[s],i)?e.force(l):null,o&&e.force(l,o);for(a=e.numForces||0;s<a;++s)e.force(c0+s,null);return e.numForces=r.length,e}function pCe(e,t){var n,i;for(n in e)if(Ht(i=e[n])&&t.modified(Ar(i)))return 1;return 0}function gCe(e){var t,n;at(C5,e.force)||he("Unrecognized force: "+e.force),t=C5[e.force]();for(n in e)Ht(t[n])&&mCe(t[n],e[n],e);return t}function mCe(e,t,n){e(Ht(t)?i=>t(i,n):t)}var yCe=Object.freeze(Object.defineProperty({__proto__:null,force:UD},Symbol.toStringTag,{value:"Module"}));function bCe(e,t){return e.parent===t.parent?1:2}function vCe(e){return e.reduce(_Ce,0)/e.length}function _Ce(e,t){return e+t.x}function wCe(e){return 1+e.reduce(SCe,0)}function SCe(e,t){return Math.max(e,t.y)}function ECe(e){for(var t;t=e.children;)e=t[0];return e}function ACe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function OCe(){var e=bCe,t=1,n=1,i=!1;function r(s){var a,o=0;s.eachAfter(function(d){var h=d.children;h?(d.x=vCe(h),d.y=wCe(h)):(d.x=a?o+=e(d,a):0,d.y=0,a=d)});var l=ECe(s),u=ACe(s),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return s.eachAfter(i?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function CCe(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function ICe(){return this.eachAfter(CCe)}function xCe(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function TCe(e,t){for(var n=this,i=[n],r,s,a=-1;n=i.pop();)if(e.call(t,n,++a,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function kCe(e,t){for(var n=this,i=[n],r=[],s,a,o,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)i.push(s[a]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function MCe(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function DCe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function RCe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function LCe(e){for(var t=this,n=NCe(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function NCe(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function FCe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function PCe(){return Array.from(this)}function BCe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function jCe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*UCe(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function zD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=$Ce)):t===void 0&&(t=VCe);for(var n=new gg(e),i,r=[n],s,a,o,l;i=r.pop();)if((a=t(i.data))&&(l=(a=Array.from(a)).length))for(i.children=a,o=l-1;o>=0;--o)r.push(s=a[o]=new gg(a[o])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(_K)}function zCe(){return zD(this).eachBefore(HCe)}function VCe(e){return e.children}function $Ce(e){return Array.isArray(e)?e[1]:null}function HCe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function _K(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function gg(e){this.data=e,this.depth=this.height=0,this.parent=null}gg.prototype=zD.prototype={constructor:gg,count:ICe,each:xCe,eachAfter:kCe,eachBefore:TCe,find:MCe,sum:DCe,sort:RCe,path:LCe,ancestors:FCe,descendants:PCe,leaves:BCe,links:jCe,copy:zCe,[Symbol.iterator]:UCe};function cv(e){return e==null?null:wK(e)}function wK(e){if(typeof e!="function")throw new Error;return e}function rd(){return 0}function Qh(e){return function(){return e}}const WCe=1664525,qCe=1013904223,I5=4294967296;function GCe(){let e=1;return()=>(e=(WCe*e+qCe)%I5)/I5}function YCe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XCe(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function KCe(e,t){for(var n=0,i=(e=XCe(Array.from(e),t)).length,r=[],s,a;n<i;)s=e[n],a&&SK(a,s)?++n:(a=QCe(r=JCe(r,s)),n=0);return a}function JCe(e,t){var n,i;if(rO(t,e))return[t];for(n=0;n<e.length;++n)if(bb(t,e[n])&&rO(f0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(bb(f0(e[n],e[i]),t)&&bb(f0(e[n],t),e[i])&&bb(f0(e[i],t),e[n])&&rO(EK(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function bb(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function SK(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function rO(e,t){for(var n=0;n<t.length;++n)if(!SK(e,t[n]))return!1;return!0}function QCe(e){switch(e.length){case 1:return ZCe(e[0]);case 2:return f0(e[0],e[1]);case 3:return EK(e[0],e[1],e[2])}}function ZCe(e){return{x:e.x,y:e.y,r:e.r}}function f0(e,t){var n=e.x,i=e.y,r=e.r,s=t.x,a=t.y,o=t.r,l=s-n,u=a-i,c=o-r,f=Math.sqrt(l*l+u*u);return{x:(n+s+l/f*c)/2,y:(i+a+u/f*c)/2,r:(f+r+o)/2}}function EK(e,t,n){var i=e.x,r=e.y,s=e.r,a=t.x,o=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=i-a,h=i-u,p=r-o,g=r-c,m=l-s,y=f-s,b=i*i+r*r-s*s,v=b-a*a-o*o+l*l,_=b-u*u-c*c+f*f,S=h*p-d*g,E=(p*_-g*v)/(S*2)-i,w=(g*m-p*y)/S,O=(h*v-d*_)/(S*2)-r,D=(d*y-h*m)/S,x=w*w+D*D-1,A=2*(s+E*w+O*D),C=E*E+O*O-s*s,I=-(Math.abs(x)>1e-6?(A+Math.sqrt(A*A-4*x*C))/(2*x):C/A);return{x:i+E+w*I,y:r+O+D*I,r:I}}function x5(e,t,n){var i=e.x-t.x,r,s,a=e.y-t.y,o,l,u=i*i+a*a;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(r=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-o*a,n.y=e.y-r*a+o*i):(r=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-r*r)),n.x=t.x+r*i-o*a,n.y=t.y+r*a+o*i)):(n.x=t.x+n.r,n.y=t.y)}function T5(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function k5(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,s=(t.y*n.r+n.y*t.r)/i;return r*r+s*s}function vb(e){this._=e,this.next=null,this.previous=null}function eIe(e,t){if(!(s=(e=YCe(e)).length))return 0;var n,i,r,s,a,o,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(s>2))return n.r+i.r;x5(i,n,r=e[2]),n=new vb(n),i=new vb(i),r=new vb(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<s;++l){x5(n._,i._,r=e[l]),r=new vb(r),u=i.next,c=n.previous,f=i._.r,d=n._.r;do if(f<=d){if(T5(u._,r._)){i=u,n.next=i,i.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(T5(c._,r._)){n=c,n.next=i,i.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,a=k5(n);(r=r.next)!==i;)(o=k5(r))<a&&(n=r,a=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=KCe(n,t),l=0;l<s;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function tIe(e){return Math.sqrt(e.value)}function nIe(){var e=null,t=1,n=1,i=rd;function r(s){const a=GCe();return s.x=t/2,s.y=n/2,e?s.eachBefore(M5(e)).eachAfter(sO(i,.5,a)).eachBefore(D5(1)):s.eachBefore(M5(tIe)).eachAfter(sO(rd,1,a)).eachAfter(sO(i,s.r/Math.min(t,n),a)).eachBefore(D5(Math.min(t,n)/(2*s.r))),s}return r.radius=function(s){return arguments.length?(e=cv(s),r):e},r.size=function(s){return arguments.length?(t=+s[0],n=+s[1],r):[t,n]},r.padding=function(s){return arguments.length?(i=typeof s=="function"?s:Qh(+s),r):i},r}function M5(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function sO(e,t,n){return function(i){if(r=i.children){var r,s,a=r.length,o=e(i)*t||0,l;if(o)for(s=0;s<a;++s)r[s].r+=o;if(l=eIe(r,n),o)for(s=0;s<a;++s)r[s].r-=o;i.r=l+o}}}function D5(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function AK(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function dy(e,t,n,i,r){for(var s=e.children,a,o=-1,l=s.length,u=e.value&&(i-t)/e.value;++o<l;)a=s[o],a.y0=n,a.y1=r,a.x0=t,a.x1=t+=a.value*u}function iIe(){var e=1,t=1,n=0,i=!1;function r(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(s(t,o)),i&&a.eachBefore(AK),a}function s(a,o){return function(l){l.children&&dy(l,l.x0,a*(l.depth+1)/o,l.x1,a*(l.depth+2)/o);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return r.round=function(a){return arguments.length?(i=!!a,r):i},r.size=function(a){return arguments.length?(e=+a[0],t=+a[1],r):[e,t]},r.padding=function(a){return arguments.length?(n=+a,r):n},r}var rIe={depth:-1},R5={},aO={};function sIe(e){return e.id}function aIe(e){return e.parentId}function L5(){var e=sIe,t=aIe,n;function i(r){var s=Array.from(r),a=e,o=t,l,u,c,f,d,h,p,g,m=new Map;if(n!=null){const y=s.map((_,S)=>oIe(n(_,S,r))),b=y.map(N5),v=new Set(y).add("");for(const _ of b)v.has(_)||(v.add(_),y.push(_),b.push(N5(_)),s.push(aO));a=(_,S)=>y[S],o=(_,S)=>b[S]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new gg(u),(p=a(u,c,r))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?R5:h)),(p=o(u,c,r))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===R5)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===aO&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===aO);--y)h.data=null}if(f.parent=rIe,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(_K),f.parent=null,l>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=cv(r),i):e},i.parentId=function(r){return arguments.length?(t=cv(r),i):t},i.path=function(r){return arguments.length?(n=cv(r),i):n},i}function oIe(e){e=`${e}`;let t=e.length;return ZI(e,t-1)&&!ZI(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function N5(e){let t=e.length;if(t<2)return"";for(;--t>1&&!ZI(e,t););return e.slice(0,t)}function ZI(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function lIe(e,t){return e.parent===t.parent?1:2}function oO(e){var t=e.children;return t?t[0]:e.t}function lO(e){var t=e.children;return t?t[t.length-1]:e.t}function uIe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function cIe(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function fIe(e,t,n){return e.a.parent===t.parent?e.a:n}function fv(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}fv.prototype=Object.create(gg.prototype);function dIe(e){for(var t=new fv(e,0),n,i=[t],r,s,a,o;n=i.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)i.push(r=n.children[a]=new fv(s[a],a)),r.parent=n;return(t.parent=new fv(null,0)).children=[t],t}function hIe(){var e=lIe,t=1,n=1,i=null;function r(u){var c=dIe(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),i)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(b){b.x=(b.x+g)*m,b.y=b.depth*y})}return u}function s(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){cIe(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=o(u,d,u.parent.A||f[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function o(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],m=d.m,y=h.m,b=p.m,v=g.m,_;p=lO(p),d=oO(d),p&&d;)g=oO(g),h=lO(h),h.a=u,_=p.z+b-d.z-m+e(p._,d._),_>0&&(uIe(fIe(p,u,f),u,_),m+=_,y+=_),b+=p.m,m+=d.m,v+=g.m,y+=h.m;p&&!lO(h)&&(h.t=p,h.m+=b-y),d&&!oO(g)&&(g.t=d,g.m+=m-v,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r}function yS(e,t,n,i,r){for(var s=e.children,a,o=-1,l=s.length,u=e.value&&(r-n)/e.value;++o<l;)a=s[o],a.x0=t,a.x1=i,a.y0=n,a.y1=n+=a.value*u}var OK=(1+Math.sqrt(5))/2;function CK(e,t,n,i,r,s){for(var a=[],o=t.children,l,u,c=0,f=0,d=o.length,h,p,g=t.value,m,y,b,v,_,S,E;c<d;){h=r-n,p=s-i;do m=o[f++].value;while(!m&&f<d);for(y=b=m,S=Math.max(p/h,h/p)/(g*e),E=m*m*S,_=Math.max(b/E,E/y);f<d;++f){if(m+=u=o[f].value,u<y&&(y=u),u>b&&(b=u),E=m*m*S,v=Math.max(b/E,E/y),v>_){m-=u;break}_=v}a.push(l={value:m,dice:h<p,children:o.slice(c,f)}),l.dice?dy(l,n,i,r,g?i+=p*m/g:s):yS(l,n,i,g?n+=h*m/g:r,s),g-=m,c=f}return a}var IK=function e(t){function n(i,r,s,a,o){CK(t,i,r,s,a,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(OK);function pIe(){var e=IK,t=!1,n=1,i=1,r=[0],s=rd,a=rd,o=rd,l=rd,u=rd;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=i,d.eachBefore(f),r=[0],t&&d.eachBefore(AK),d}function f(d){var h=r[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=r[d.depth+1]=s(d)/2,p+=u(d)-h,g+=a(d)-h,m-=o(d)-h,y-=l(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],i=+d[1],c):[n,i]},c.tile=function(d){return arguments.length?(e=wK(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Qh(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:Qh(+d),c):a},c.paddingRight=function(d){return arguments.length?(o=typeof d=="function"?d:Qh(+d),c):o},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Qh(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Qh(+d),c):u},c}function gIe(e,t,n,i,r){var s=e.children,a,o=s.length,l,u=new Array(o+1);for(u[0]=l=a=0;a<o;++a)u[a+1]=l+=s[a].value;c(0,o,e.value,t,n,i,r);function c(f,d,h,p,g,m,y){if(f>=d-1){var b=s[f];b.x0=p,b.y0=g,b.x1=m,b.y1=y;return}for(var v=u[f],_=h/2+v,S=f+1,E=d-1;S<E;){var w=S+E>>>1;u[w]<_?S=w+1:E=w}_-u[S-1]<u[S]-_&&f+1<S&&--S;var O=u[S]-v,D=h-O;if(m-p>y-g){var x=h?(p*D+m*O)/h:m;c(f,S,O,p,g,x,y),c(S,d,D,x,g,m,y)}else{var A=h?(g*D+y*O)/h:y;c(f,S,O,p,g,m,A),c(S,d,D,p,A,m,y)}}}function mIe(e,t,n,i,r){(e.depth&1?yS:dy)(e,t,n,i,r)}var yIe=function e(t){function n(i,r,s,a,o){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=i.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?dy(u,r,s,a,g?s+=(o-s)*u.value/g:o):yS(u,r,s,g?r+=(a-r)*u.value/g:a,o),g-=u.value}else i._squarify=l=CK(t,i,r,s,a,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(OK);function ex(e,t,n){const i={};return e.each(r=>{const s=r.data;n(s)&&(i[t(s)]=r)}),e.lookup=i,e}function VD(e){ue.call(this,null,e)}VD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const bIe=e=>e.values;Te(VD,ue,{transform(e,t){t.source||he("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),s=this.value;return(!s||i||t.changed())&&(s&&s.each(a=>{a.children&&Rw(a.data)&&r.rem.push(a.data)}),this.value=s=zD({values:Pe(e.keys).reduce((a,o)=>(a.key(o),a),vIe()).entries(r.source)},bIe),n&&s.each(a=>{a.children&&(a=xn(a.data),r.add.push(a),r.source.push(a))}),ex(s,lt,lt)),r.source.root=s,r}});function vIe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,s){if(s>=e.length)return r;const a=r.length,o=e[s++],l={},u={};let c=-1,f,d,h;for(;++c<a;)f=o(d=r[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],s);return u}function i(r,s){if(++s>e.length)return r;const a=[];for(const o in r)a.push({key:o,values:i(r[o],s)});return a}return t}function Mu(e){ue.call(this,null,e)}const _Ie=(e,t)=>e.parent===t.parent?1:2;Te(Mu,ue,{transform(e,t){(!t.source||!t.source.root)&&he(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,s=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(yh(e.sort,a=>a.data)),wIe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?_Ie:Ug);try{this.value=n(r)}catch(a){he(a)}return r.each(a=>SIe(a,i,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function wIe(e,t,n){for(let i,r=0,s=t.length;r<s;++r)i=t[r],i in n&&e[i](n[i])}function SIe(e,t,n){const i=e.data,r=t.length-1;for(let s=0;s<r;++s)i[n[s]]=e[t[s]];i[n[r]]=e.children?e.children.length:0}const tx=["x","y","r","depth","children"];function $D(e){Mu.call(this,e)}$D.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tx.length,default:tx}]};Te($D,Mu,{layout:nIe,params:["radius","size","padding"],fields:tx});const nx=["x0","y0","x1","y1","depth","children"];function HD(e){Mu.call(this,e)}HD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nx.length,default:nx}]};Te(HD,Mu,{layout:iIe,params:["size","round","padding"],fields:nx});function WD(e){ue.call(this,null,e)}WD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Te(WD,ue,{transform(e,t){t.source||he("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),s=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),s&&(n=r.source.length?ex(L5().id(e.key).parentId(e.parentKey)(r.source),e.key,Sa):ex(L5()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const F5={tidy:hIe,cluster:OCe},ix=["x","y","depth","children"];function qD(e){Mu.call(this,e)}qD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:ix.length,default:ix}]};Te(qD,Mu,{layout(e){const t=e||"tidy";if(at(F5,t))return F5[t]();he("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:ix});function GD(e){ue.call(this,[],e)}GD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Te(GD,ue,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),s={};return i||he("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,a=>s[lt(a)]=1),i.each(a=>{const o=a.data,l=a.parent&&a.parent.data;l&&s[lt(o)]&&s[lt(l)]&&r.add.push(xn({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>s[lt(a)]=1),n.forEach(a=>{(s[lt(a.source)]||s[lt(a.target)])&&r.mod.push(a)})),r}});const P5={binary:gIe,dice:dy,slice:yS,slicedice:mIe,squarify:IK,resquarify:yIe},rx=["x0","y0","x1","y1","depth","children"];function YD(e){Mu.call(this,e)}YD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rx.length,default:rx}]};Te(YD,Mu,{layout(){const e=pIe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{at(P5,t)?e.tile(P5[t]):he("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:rx});var EIe=Object.freeze(Object.defineProperty({__proto__:null,nest:VD,pack:$D,partition:HD,stratify:WD,tree:qD,treelinks:GD,treemap:YD},Symbol.toStringTag,{value:"Module"}));const uO=4278190080;function AIe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function OIe(e,t,n,i,r){const s=e.width,a=e.height,o=i||r,l=Ac(s,a).getContext("2d"),u=Ac(s,a).getContext("2d"),c=o&&Ac(s,a).getContext("2d");n.forEach(O=>dv(l,O,!1)),dv(u,t,!1),o&&dv(c,t,!0);const f=cO(l,s,a),d=cO(u,s,a),h=o&&cO(c,s,a),p=e.bitmap(),g=o&&e.bitmap();let m,y,b,v,_,S,E,w;for(y=0;y<a;++y)for(m=0;m<s;++m)_=y*s+m,S=f[_]&uO,w=d[_]&uO,E=o&&h[_]&uO,(S||E||w)&&(b=e(m),v=e(y),!r&&(S||w)&&p.set(b,v),o&&(S||E)&&g.set(b,v));return[p,g]}function cO(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function dv(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(s=>dv(e,s.items,n))}):Zs[i].draw(e,{items:n?t.map(CIe):t})}function CIe(e){const t=Lw(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Hl=5,Dr=31,l1=32,ec=new Uint32Array(l1+1),Va=new Uint32Array(l1+1);Va[0]=0;ec[0]=~Va[0];for(let e=1;e<=l1;++e)Va[e]=Va[e-1]<<1|1,ec[e]=~Va[e];function IIe(e,t){const n=new Uint32Array(~~((e*t+l1)/l1));function i(s,a){n[s]|=a}function r(s,a){n[s]&=a}return{array:n,get:(s,a)=>{const o=a*e+s;return n[o>>>Hl]&1<<(o&Dr)},set:(s,a)=>{const o=a*e+s;i(o>>>Hl,1<<(o&Dr))},clear:(s,a)=>{const o=a*e+s;r(o>>>Hl,~(1<<(o&Dr)))},getRange:(s,a,o,l)=>{let u=l,c,f,d,h;for(;u>=a;--u)if(c=u*e+s,f=u*e+o,d=c>>>Hl,h=f>>>Hl,d===h){if(n[d]&ec[c&Dr]&Va[(f&Dr)+1])return!0}else{if(n[d]&ec[c&Dr]||n[h]&Va[(f&Dr)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,a,o,l)=>{let u,c,f,d,h;for(;a<=l;++a)if(u=a*e+s,c=a*e+o,f=u>>>Hl,d=c>>>Hl,f===d)i(f,ec[u&Dr]&Va[(c&Dr)+1]);else for(i(f,ec[u&Dr]),i(d,Va[(c&Dr)+1]),h=f+1;h<d;++h)i(h,4294967295)},clearRange:(s,a,o,l)=>{let u,c,f,d,h;for(;a<=l;++a)if(u=a*e+s,c=a*e+o,f=u>>>Hl,d=c>>>Hl,f===d)r(f,Va[u&Dr]|ec[(c&Dr)+1]);else for(r(f,Va[u&Dr]),r(d,ec[(c&Dr)+1]),h=f+1;h<d;++h)r(h,0)},outOfBounds:(s,a,o,l)=>s<0||a<0||l>=t||o>=e}}function xIe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),s=~~((t+2*n+i)/i),a=o=>~~((o+n)/i);return a.invert=o=>o*i-n,a.bitmap=()=>IIe(r,s),a.ratio=i,a.padding=n,a.width=e,a.height=t,a}function TIe(e,t,n,i){const r=e.width,s=e.height;return function(a){const o=a.datum.datum.items[i].items,l=o.length,u=a.datum.fontSize,c=ro.width(a.datum,a.datum.text);let f=0,d,h,p,g,m,y,b;for(let v=0;v<l;++v)d=o[v].x,p=o[v].y,h=o[v].x2===void 0?d:o[v].x2,g=o[v].y2===void 0?p:o[v].y2,m=(d+h)/2,y=(p+g)/2,b=Math.abs(h-d+g-p),b>=f&&(f=b,a.x=m,a.y=y);return m=c/2,y=u/2,d=a.x-m,h=a.x+m,p=a.y-y,g=a.y+y,a.align="center",d<0&&h<=r?a.align="left":0<=d&&r<h&&(a.align="right"),a.baseline="middle",p<0&&g<=s?a.baseline="top":0<=p&&s<g&&(a.baseline="bottom"),!0}}function b2(e,t,n,i,r,s){let a=n/2;return e-a<0||e+a>r||t-(a=i/2)<0||t+a>s}function mc(e,t,n,i,r,s,a,o){const l=r*s/(i*2),u=e(t-l),c=e(t+l),f=e(n-(s=s/2)),d=e(n+s);return a.outOfBounds(u,f,c,d)||a.getRange(u,f,c,d)||o&&o.getRange(u,f,c,d)}function kIe(e,t,n,i){const r=e.width,s=e.height,a=t[0],o=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let m=f,y=s,b;if(!b2(p,g,d,h,r,s)&&!mc(e,p,g,h,d,m,a,o)&&!mc(e,p,g,h,d,h,a,null)){for(;y-m>=1;)b=(m+y)/2,mc(e,p,g,h,d,b,a,o)?y=b:m=b;if(m>f)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[i].items,f=c.length,d=u.datum.fontSize,h=ro.width(u.datum,u.datum.text);let p=n?d:0,g=!1,m=!1,y=0,b,v,_,S,E,w,O,D,x,A,C,I,L,k,M,N,R;for(let T=0;T<f;++T){for(b=c[T].x,_=c[T].y,v=c[T].x2===void 0?b:c[T].x2,S=c[T].y2===void 0?_:c[T].y2,b>v&&(R=b,b=v,v=R),_>S&&(R=_,_=S,S=R),x=e(b),C=e(v),A=~~((x+C)/2),I=e(_),k=e(S),L=~~((I+k)/2),O=A;O>=x;--O)for(D=L;D>=I;--D)N=l(O,D,p,h,d),N&&([u.x,u.y,p,g]=N);for(O=A;O<=C;++O)for(D=L;D<=k;++D)N=l(O,D,p,h,d),N&&([u.x,u.y,p,g]=N);!g&&!n&&(M=Math.abs(v-b+S-_),E=(b+v)/2,w=(_+S)/2,M>=y&&!b2(E,w,h,d,r,s)&&!mc(e,E,w,d,h,d,a,null)&&(y=M,u.x=E,u.y=w,m=!0))}return g||m?(E=h/2,w=d/2,a.setRange(e(u.x-E),e(u.y-w),e(u.x+E),e(u.y+w)),u.align="center",u.baseline="middle",!0):!1}}const MIe=[-1,-1,1,1],DIe=[-1,1,-1,1];function RIe(e,t,n,i){const r=e.width,s=e.height,a=t[0],o=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[i].items,f=c.length,d=u.datum.fontSize,h=ro.width(u.datum,u.datum.text),p=[];let g=n?d:0,m=!1,y=!1,b=0,v,_,S,E,w,O,D,x,A,C,I,L;for(let k=0;k<f;++k){for(v=c[k].x,S=c[k].y,_=c[k].x2===void 0?v:c[k].x2,E=c[k].y2===void 0?S:c[k].y2,p.push([e((v+_)/2),e((S+E)/2)]);p.length;)if([D,x]=p.pop(),!(a.get(D,x)||o.get(D,x)||l.get(D,x))){l.set(D,x);for(let M=0;M<4;++M)w=D+MIe[M],O=x+DIe[M],l.outOfBounds(w,O,w,O)||p.push([w,O]);if(w=e.invert(D),O=e.invert(x),A=g,C=s,!b2(w,O,h,d,r,s)&&!mc(e,w,O,d,h,A,a,o)&&!mc(e,w,O,d,h,d,a,null)){for(;C-A>=1;)I=(A+C)/2,mc(e,w,O,d,h,I,a,o)?C=I:A=I;A>g&&(u.x=w,u.y=O,g=A,m=!0)}}!m&&!n&&(L=Math.abs(_-v+E-S),w=(v+_)/2,O=(S+E)/2,L>=b&&!b2(w,O,h,d,r,s)&&!mc(e,w,O,d,h,d,a,null)&&(b=L,u.x=w,u.y=O,y=!0))}return m||y?(w=h/2,O=d/2,a.setRange(e(u.x-w),e(u.y-O),e(u.x+w),e(u.y+O)),u.align="center",u.baseline="middle",!0):!1}}const LIe=["right","center","left"],NIe=["bottom","middle","top"];function FIe(e,t,n,i){const r=e.width,s=e.height,a=t[0],o=t[1],l=i.length;return function(u){var c;const f=u.boundary,d=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>r||f[3]>s)return!1;let h=(c=u.textWidth)!==null&&c!==void 0?c:0,p,g,m,y,b,v,_,S,E,w,O,D,x,A,C;for(let I=0;I<l;++I){if(p=(n[I]&3)-1,g=(n[I]>>>2&3)-1,m=p===0&&g===0||i[I]<0,y=p&&g?Math.SQRT1_2:1,b=i[I]<0?-1:1,v=f[1+p]+i[I]*p*y,O=f[4+g]+b*d*g/2+i[I]*g*y,S=O-d/2,E=O+d/2,D=e(v),A=e(S),C=e(E),!h)if(B5(D,D,A,C,a,o,v,v,S,E,f,m))h=ro.width(u.datum,u.datum.text);else continue;if(w=v+b*h*p/2,v=w-h/2,_=w+h/2,D=e(v),x=e(_),B5(D,x,A,C,a,o,v,_,S,E,f,m))return u.x=p?p*b<0?_:v:w,u.y=g?g*b<0?E:S:O,u.align=LIe[p*b+1],u.baseline=NIe[g*b+1],a.setRange(D,A,x,C),!0}return!1}}function B5(e,t,n,i,r,s,a,o,l,u,c,f){return!(r.outOfBounds(e,n,t,i)||(f&&s||r).getRange(e,n,t,i))}const fO=0,dO=4,hO=8,pO=0,gO=1,mO=2,PIe={"top-left":fO+pO,top:fO+gO,"top-right":fO+mO,left:dO+pO,middle:dO+gO,right:dO+mO,"bottom-left":hO+pO,bottom:hO+gO,"bottom-right":hO+mO},BIe={naive:TIe,"reduced-search":kIe,floodfill:RIe};function jIe(e,t,n,i,r,s,a,o,l,u,c){if(!e.length)return e;const f=Math.max(i.length,r.length),d=UIe(i,f),h=zIe(r,f),p=VIe(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=$Ie(p,g,o,l),b=u===null||u===1/0,v=m&&c==="naive";let _=-1,S=-1;const E=e.map(x=>{const A=b?ro.width(x,x.text):void 0;return _=Math.max(_,A),S=Math.max(S,x.fontSize),{datum:x,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(x),textWidth:A}});u=u===null||u===1/0?Math.max(_,S)+Math.max(...i):u;const w=xIe(t[0],t[1],u);let O;if(!v){n&&E.sort((C,I)=>n(C.datum,I.datum));let x=!1;for(let C=0;C<h.length&&!x;++C)x=h[C]===5||d[C]<0;const A=(p&&a||m)&&e.map(C=>C.datum);O=s.length||A?OIe(w,A||[],s,x,m):AIe(w,a&&E)}const D=m?BIe[c](w,O,a,l):FIe(w,O,h,d);return E.forEach(x=>x.opacity=+D(x)),E}function UIe(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function zIe(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=PIe[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function VIe(e){return e&&e.mark&&e.mark.marktype}function $Ie(e,t,n,i){const r=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>r(s.datum):t==="line"?s=>{const a=s.datum.items[i].items;return r(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{const a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:r}const sx=["x","y","opacity","align","baseline"],xK=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function XD(e){ue.call(this,null,e)}XD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:xK},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:sx.length,default:sx}]};Te(XD,ue,{transform(e,t){function n(s){const a=e[s];return Ht(a)&&t.modified(a.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&he("Size parameter should be specified as a [width, height] array.");const r=e.as||sx;return jIe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Pe(e.offset==null?1:e.offset),Pe(e.anchor||xK),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const a=s.datum;a[r[0]]=s.x,a[r[1]]=s.y,a[r[2]]=s.opacity,a[r[3]]=s.align,a[r[4]]=s.baseline}),t.reflow(i).modifies(r)}});var HIe=Object.freeze(Object.defineProperty({__proto__:null,label:XD},Symbol.toStringTag,{value:"Module"}));function TK(e,t){var n=[],i=function(c){return c(o)},r,s,a,o,l,u;if(t==null)n.push(e);else for(r={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(o);return n}function KD(e){ue.call(this,null,e)}KD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Te(KD,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=TK(i,e.groupby),s=(e.groupby||[]).map(gi),a=s.length,o=e.as||[gi(e.x),gi(e.y)],l=[];r.forEach(u=>{YW(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<a;++d)f[s[d]]=u.dims[d];f[o[0]]=c[0],f[o[1]]=c[1],l.push(xn(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const ax={linear:k3,log:HW,exp:WW,pow:qW,quad:M3,poly:GW},WIe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function JD(e){ue.call(this,null,e)}JD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(ax)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Te(JD,ue,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=TK(i,e.groupby),s=(e.groupby||[]).map(gi),a=e.method||"linear",o=e.order||3,l=WIe(a,o),u=e.as||[gi(e.x),gi(e.y)],c=ax[a],f=[];let d=e.extent;at(ax,a)||he("Invalid regression method: "+a),d!=null&&a==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),r.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,o);if(e.params){f.push(xn({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||yl(h,e.x),y=b=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=b[0],v[u[1]]=b[1],f.push(xn(v))};a==="linear"?m.forEach(b=>y([b,g.predict(b)])):zw(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var qIe=Object.freeze(Object.defineProperty({__proto__:null,loess:KD,regression:JD},Symbol.toStringTag,{value:"Module"}));const fu=11102230246251565e-32,pr=134217729,GIe=(3+8*fu)*fu;function yO(e,t,n,i,r){let s,a,o,l,u=t[0],c=i[0],f=0,d=0;c>u==c>-u?(s=u,u=t[++f]):(s=c,c=i[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(a=u+s,o=s-(a-u),u=t[++f]):(a=c+s,o=s-(a-c),c=i[++d]),s=a,o!==0&&(r[h++]=o);f<e&&d<n;)c>u==c>-u?(a=s+u,l=a-s,o=s-(a-l)+(u-l),u=t[++f]):(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=i[++d]),s=a,o!==0&&(r[h++]=o);for(;f<e;)a=s+u,l=a-s,o=s-(a-l)+(u-l),u=t[++f],s=a,o!==0&&(r[h++]=o);for(;d<n;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=i[++d],s=a,o!==0&&(r[h++]=o);return(s!==0||h===0)&&(r[h++]=s),h}function YIe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function hy(e){return new Float64Array(e)}const XIe=(3+16*fu)*fu,KIe=(2+12*fu)*fu,JIe=(9+64*fu)*fu*fu,$h=hy(4),j5=hy(8),U5=hy(12),z5=hy(16),Rr=hy(4);function QIe(e,t,n,i,r,s,a){let o,l,u,c,f,d,h,p,g,m,y,b,v,_,S,E,w,O;const D=e-r,x=n-r,A=t-s,C=i-s;_=D*C,d=pr*D,h=d-(d-D),p=D-h,d=pr*C,g=d-(d-C),m=C-g,S=p*m-(_-h*g-p*g-h*m),E=A*x,d=pr*A,h=d-(d-A),p=A-h,d=pr*x,g=d-(d-x),m=x-g,w=p*m-(E-h*g-p*g-h*m),y=S-w,f=S-y,$h[0]=S-(y+f)+(f-w),b=_+y,f=b-_,v=_-(b-f)+(y-f),y=v-E,f=v-y,$h[1]=v-(y+f)+(f-E),O=b+y,f=O-b,$h[2]=b-(O-f)+(y-f),$h[3]=O;let I=YIe(4,$h),L=KIe*a;if(I>=L||-I>=L||(f=e-D,o=e-(D+f)+(f-r),f=n-x,u=n-(x+f)+(f-r),f=t-A,l=t-(A+f)+(f-s),f=i-C,c=i-(C+f)+(f-s),o===0&&l===0&&u===0&&c===0)||(L=JIe*a+GIe*Math.abs(I),I+=D*c+C*o-(A*u+x*l),I>=L||-I>=L))return I;_=o*C,d=pr*o,h=d-(d-o),p=o-h,d=pr*C,g=d-(d-C),m=C-g,S=p*m-(_-h*g-p*g-h*m),E=l*x,d=pr*l,h=d-(d-l),p=l-h,d=pr*x,g=d-(d-x),m=x-g,w=p*m-(E-h*g-p*g-h*m),y=S-w,f=S-y,Rr[0]=S-(y+f)+(f-w),b=_+y,f=b-_,v=_-(b-f)+(y-f),y=v-E,f=v-y,Rr[1]=v-(y+f)+(f-E),O=b+y,f=O-b,Rr[2]=b-(O-f)+(y-f),Rr[3]=O;const k=yO(4,$h,4,Rr,j5);_=D*c,d=pr*D,h=d-(d-D),p=D-h,d=pr*c,g=d-(d-c),m=c-g,S=p*m-(_-h*g-p*g-h*m),E=A*u,d=pr*A,h=d-(d-A),p=A-h,d=pr*u,g=d-(d-u),m=u-g,w=p*m-(E-h*g-p*g-h*m),y=S-w,f=S-y,Rr[0]=S-(y+f)+(f-w),b=_+y,f=b-_,v=_-(b-f)+(y-f),y=v-E,f=v-y,Rr[1]=v-(y+f)+(f-E),O=b+y,f=O-b,Rr[2]=b-(O-f)+(y-f),Rr[3]=O;const M=yO(k,j5,4,Rr,U5);_=o*c,d=pr*o,h=d-(d-o),p=o-h,d=pr*c,g=d-(d-c),m=c-g,S=p*m-(_-h*g-p*g-h*m),E=l*u,d=pr*l,h=d-(d-l),p=l-h,d=pr*u,g=d-(d-u),m=u-g,w=p*m-(E-h*g-p*g-h*m),y=S-w,f=S-y,Rr[0]=S-(y+f)+(f-w),b=_+y,f=b-_,v=_-(b-f)+(y-f),y=v-E,f=v-y,Rr[1]=v-(y+f)+(f-E),O=b+y,f=O-b,Rr[2]=b-(O-f)+(y-f),Rr[3]=O;const N=yO(M,U5,4,Rr,z5);return z5[N-1]}function _b(e,t,n,i,r,s){const a=(t-s)*(n-r),o=(e-r)*(i-s),l=a-o;if(a===0||o===0||a>0!=o>0)return l;const u=Math.abs(a+o);return Math.abs(l)>=XIe*u?l:-QIe(e,t,n,i,r,s,u)}const V5=Math.pow(2,-52),wb=new Uint32Array(512);class v2{static from(t,n=ixe,i=rxe){const r=t.length,s=new Float64Array(r*2);for(let a=0;a<r;a++){const o=t[a];s[2*a]=n(o),s[2*a+1]=i(o)}return new v2(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,a=t.length>>1;let o=1/0,l=1/0,u=-1/0,c=-1/0;for(let x=0;x<a;x++){const A=t[2*x],C=t[2*x+1];A<o&&(o=A),C<l&&(l=C),A>u&&(u=A),C>c&&(c=C),this._ids[x]=x}const f=(o+u)/2,d=(l+c)/2;let h=1/0,p,g,m;for(let x=0;x<a;x++){const A=bO(f,d,t[2*x],t[2*x+1]);A<h&&(p=x,h=A)}const y=t[2*p],b=t[2*p+1];h=1/0;for(let x=0;x<a;x++){if(x===p)continue;const A=bO(y,b,t[2*x],t[2*x+1]);A<h&&A>0&&(g=x,h=A)}let v=t[2*g],_=t[2*g+1],S=1/0;for(let x=0;x<a;x++){if(x===p||x===g)continue;const A=txe(y,b,v,_,t[2*x],t[2*x+1]);A<S&&(m=x,S=A)}let E=t[2*m],w=t[2*m+1];if(S===1/0){for(let C=0;C<a;C++)this._dists[C]=t[2*C]-t[0]||t[2*C+1]-t[1];fp(this._ids,this._dists,0,a-1);const x=new Uint32Array(a);let A=0;for(let C=0,I=-1/0;C<a;C++){const L=this._ids[C];this._dists[L]>I&&(x[A++]=L,I=this._dists[L])}this.hull=x.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(_b(y,b,v,_,E,w)<0){const x=g,A=v,C=_;g=m,v=E,_=w,m=x,E=A,w=C}const O=nxe(y,b,v,_,E,w);this._cx=O.x,this._cy=O.y;for(let x=0;x<a;x++)this._dists[x]=bO(t[2*x],t[2*x+1],O.x,O.y);fp(this._ids,this._dists,0,a-1),this._hullStart=p;let D=3;i[p]=n[m]=g,i[g]=n[p]=m,i[m]=n[g]=p,r[p]=0,r[g]=1,r[m]=2,s.fill(-1),s[this._hashKey(y,b)]=p,s[this._hashKey(v,_)]=g,s[this._hashKey(E,w)]=m,this.trianglesLen=0,this._addTriangle(p,g,m,-1,-1,-1);for(let x=0,A,C;x<this._ids.length;x++){const I=this._ids[x],L=t[2*I],k=t[2*I+1];if(x>0&&Math.abs(L-A)<=V5&&Math.abs(k-C)<=V5||(A=L,C=k,I===p||I===g||I===m))continue;let M=0;for(let Y=0,H=this._hashKey(L,k);Y<this._hashSize&&(M=s[(H+Y)%this._hashSize],!(M!==-1&&M!==i[M]));Y++);M=n[M];let N=M,R;for(;R=i[N],_b(L,k,t[2*N],t[2*N+1],t[2*R],t[2*R+1])>=0;)if(N=R,N===M){N=-1;break}if(N===-1)continue;let T=this._addTriangle(N,I,i[N],-1,-1,r[N]);r[I]=this._legalize(T+2),r[N]=T,D++;let z=i[N];for(;R=i[z],_b(L,k,t[2*z],t[2*z+1],t[2*R],t[2*R+1])<0;)T=this._addTriangle(z,I,R,r[I],-1,r[z]),r[I]=this._legalize(T+2),i[z]=z,D--,z=R;if(N===M)for(;R=n[N],_b(L,k,t[2*R],t[2*R+1],t[2*N],t[2*N+1])<0;)T=this._addTriangle(R,I,N,-1,r[N],r[R]),this._legalize(T+2),r[R]=T,i[N]=N,D--,N=R;this._hullStart=n[I]=N,i[N]=n[z]=I,i[I]=z,s[this._hashKey(L,k)]=I,s[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(D);for(let x=0,A=this._hullStart;x<D;x++)this.hull[x]=A,A=i[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ZIe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,a=0;for(;;){const o=i[t],l=t-t%3;if(a=l+(t+2)%3,o===-1){if(s===0)break;t=wb[--s];continue}const u=o-o%3,c=l+(t+1)%3,f=u+(o+2)%3,d=n[a],h=n[t],p=n[c],g=n[f];if(exe(r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[t]=g,n[o]=d;const y=i[f];if(y===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,y),this._link(o,i[a]),this._link(a,f);const b=u+(o+1)%3;s<wb.length&&(wb[s++]=b)}else{if(s===0)break;t=wb[--s]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function ZIe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function bO(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function exe(e,t,n,i,r,s,a,o){const l=e-a,u=t-o,c=n-a,f=i-o,d=r-a,h=s-o,p=l*l+u*u,g=c*c+f*f,m=d*d+h*h;return l*(f*m-g*h)-u*(c*m-g*d)+p*(c*h-f*d)<0}function txe(e,t,n,i,r,s){const a=n-e,o=i-t,l=r-e,u=s-t,c=a*a+o*o,f=l*l+u*u,d=.5/(a*u-o*l),h=(u*c-o*f)*d,p=(a*f-l*c)*d;return h*h+p*p}function nxe(e,t,n,i,r,s){const a=n-e,o=i-t,l=r-e,u=s-t,c=a*a+o*o,f=l*l+u*u,d=.5/(a*u-o*l),h=e+(u*c-o*f)*d,p=t+(a*f-l*c)*d;return{x:h,y:p}}function fp(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],a=t[s];let o=r-1;for(;o>=n&&t[e[o]]>a;)e[o+1]=e[o--];e[o+1]=s}else{const r=n+i>>1;let s=n+1,a=i;Nm(e,r,s),t[e[n]]>t[e[i]]&&Nm(e,n,i),t[e[s]]>t[e[i]]&&Nm(e,s,i),t[e[n]]>t[e[s]]&&Nm(e,n,s);const o=e[s],l=t[o];for(;;){do s++;while(t[e[s]]<l);do a--;while(t[e[a]]>l);if(a<s)break;Nm(e,s,a)}e[n+1]=e[a],e[a]=o,i-s+1>=a-n?(fp(e,t,s,i),fp(e,t,n,a-1)):(fp(e,t,n,a-1),fp(e,t,s,i))}}function Nm(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ixe(e){return e[0]}function rxe(e){return e[1]}const $5=1e-6;class vd{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>$5||Math.abs(this._y1-s)>$5)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class ox{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class sxe{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this,s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let h=0,p=0,g=i.length,m,y;h<g;h+=3,p+=2){const b=i[h]*2,v=i[h+1]*2,_=i[h+2]*2,S=t[b],E=t[b+1],w=t[v],O=t[v+1],D=t[_],x=t[_+1],A=w-S,C=O-E,I=D-S,L=x-E,k=(A*L-C*I)*2;if(Math.abs(k)<1e-9){let M=1e9;const N=i[0]*2;M*=Math.sign((t[N]-S)*L-(t[N+1]-E)*I),m=(S+D)/2-M*L,y=(E+x)/2+M*I}else{const M=1/k,N=A*A+C*C,R=I*I+L*L;m=S+(L*N-C*R)*M,y=E+(A*R-I*N)*M}s[p]=m,s[p+1]=y}let a=n[n.length-1],o,l=a*4,u,c=t[2*a],f,d=t[2*a+1];r.fill(0);for(let h=0;h<n.length;++h)a=n[h],o=l,u=c,f=d,l=a*4,c=t[2*a],d=t[2*a+1],r[o+2]=r[l]=f-d,r[o+3]=r[l+1]=c-u}render(t){const n=t==null?t=new vd:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let c=0,f=i.length;c<f;++c){const d=i[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=a[h],m=a[h+1],y=a[p],b=a[p+1];this._renderSegment(g,m,y,b,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const f=Math.floor(r[u]/3)*2,d=a[f],h=a[f+1],p=l*4,g=this._project(d,h,o[p+2],o[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new vd:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new vd:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&n.lineTo(r[a],r[a+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new ox;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let a;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(s.moveTo(t,n),s.lineTo(i,r)):(a=this._clipSegment(t,n,i,r,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let s=0,a=n.length;s<a;s+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[s]==r[o]&&n[s+1]==r[o+1]&&n[(s+2)%a]==r[(o+l-2)%l]&&n[(s+3)%a]==r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,a=i[t];if(a===-1)return null;const o=[];let l=a;do{const u=Math.floor(l/3);if(o.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=r[l]}while(l!==a&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const i=n.length;let r=null,s,a,o=n[i-2],l=n[i-1],u,c=this._regioncode(o,l),f,d=0;for(let h=0;h<i;h+=2)if(s=o,a=l,o=n[h],l=n[h+1],u=c,c=this._regioncode(o,l),u===0&&c===0)f=d,d=0,r?r.push(o,l):r=[o,l];else{let p,g,m,y,b;if(u===0){if((p=this._clipSegment(s,a,o,l,u,c))===null)continue;[g,m,y,b]=p}else{if((p=this._clipSegment(o,l,s,a,c,u))===null)continue;[y,b,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,r,r.length),r?r.push(g,m):r=[g,m]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,r,r.length),r?r.push(y,b):r=[y,b]}if(r)f=d,d=this._edgecode(r[0],r[1]),f&&d&&this._edge(t,f,d,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,a){for(;;){if(s===0&&a===0)return[t,n,i,r];if(s&a)return null;let o,l,u=s||a;u&8?(o=t+(i-t)*(this.ymax-n)/(r-n),l=this.ymax):u&4?(o=t+(i-t)*(this.ymin-n)/(r-n),l=this.ymin):u&2?(l=n+(r-n)*(this.xmax-t)/(i-t),o=this.xmax):(l=n+(r-n)*(this.xmin-t)/(i-t),o=this.xmin),s?(t=o,n=l,s=this._regioncode(t,n)):(i=o,r=l,a=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,a){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let u=0,c=o.length,f,d=this._edgecode(o[c-2],o[c-1]);u<c;u+=2)f=d,d=this._edgecode(o[u],o[u+1]),f&&d&&(u=this._edge(t,f,d,o,u),c=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,s){for(;n!==i;){let a,o;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,o=this.ymin;break}(r[s]!==a||r[s+1]!==o)&&this.contains(t,a,o)&&(r.splice(s,0,a,o),s+=2)}if(r.length>4)for(let a=0;a<r.length;a+=2){const o=(a+2)%r.length,l=(a+4)%r.length;(r[a]===r[o]&&r[o]===r[l]||r[a+1]===r[o+1]&&r[o+1]===r[l+1])&&(r.splice(o,2),a-=2)}return s}_project(t,n,i,r){let s=1/0,a,o,l;if(r<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/r)<s&&(l=this.ymin,o=t+(s=a)*i)}else if(r>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/r)<s&&(l=this.ymax,o=t+(s=a)*i)}if(i>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/i)<s&&(o=this.xmax,l=n+(s=a)*r)}else if(i<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/i)<s&&(o=this.xmin,l=n+(s=a)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const axe=2*Math.PI,Hh=Math.pow;function oxe(e){return e[0]}function lxe(e){return e[1]}function uxe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],a=2*t[i+2];if((n[a]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}function cxe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class QD{static from(t,n=oxe,i=lxe,r){return new QD("length"in t?fxe(t,n,i,r):Float64Array.from(dxe(t,n,i,r)))}constructor(t){this._delaunator=new v2(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&uxe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=cxe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new v2(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(i[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=r.length;l<u;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new sxe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:a,collinear:o}=this;if(o){const f=o.indexOf(t);f>0&&(yield o[f-1]),f<o.length-1&&(yield o[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=s[u],u===-1){const f=i[(r[t]+1)%i.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:u}=this;if(r[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=Hh(n-u[t*2],2)+Hh(i-u[t*2+1],2);const d=r[t];let h=d;do{let p=l[h];const g=Hh(n-u[p*2],2)+Hh(i-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=o[h],h===-1){if(h=s[(a[t]+1)%s.length],h!==p&&Hh(n-u[h*2],2)+Hh(i-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new vd:void 0,{points:i,halfedges:r,triangles:s}=this;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l<a)continue;const u=s[a]*2,c=s[l]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new vd:void 0,{points:r}=this;for(let s=0,a=r.length;s<a;s+=2){const o=r[s],l=r[s+1];t.moveTo(o+n,l),t.arc(o,l,n,0,axe)}return i&&i.value()}renderHull(t){const n=t==null?t=new vd:void 0,{hull:i,points:r}=this,s=i[0]*2,a=i.length;t.moveTo(r[s],r[s+1]);for(let o=1;o<a;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new ox;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new vd:void 0,{points:r,triangles:s}=this,a=s[t*=3]*2,o=s[t+1]*2,l=s[t+2]*2;return n.moveTo(r[a],r[a+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new ox;return this.renderTriangle(t,n),n.value()}}function fxe(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let a=0;a<r;++a){const o=e[a];s[a*2]=t.call(i,o,a,e),s[a*2+1]=n.call(i,o,a,e)}return s}function*dxe(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function ZD(e){ue.call(this,null,e)}ZD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const hxe=[-1e5,-1e5,1e5,1e5];Te(ZD,ue,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:hxe;const s=this.value=QD.from(i,e.x,e.y).voronoi(r);for(let a=0,o=i.length;a<o;++a){const l=s.cellPolygon(a);i[a][n]=l?pxe(l):null}return t.reflow(e.modified()).modifies(n)}});function pxe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}var gxe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:ZD},Symbol.toStringTag,{value:"Module"})),vO=Math.PI/180,d0=1<<11>>5,hv=1<<11;function mxe(){var e=[256,256],t,n,i,r,s,a,o,l=kK,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(Ac()),g=Sxe((e[0]>>5)*e[1]),m=null,y=u.length,b=-1,v=[],_=u.map(E=>({text:t(E),font:n(E),style:r(E),weight:s(E),rotate:a(E),size:~~(i(E)+1e-14),padding:o(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,w)=>w.size-E.size);++b<y;){var S=_[b];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,yxe(p,S,_,b),S.hasText&&h(g,S,m)&&(v.push(S),m?vxe(m,S):m=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return v};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(d0<<5)/g,p.height=hv/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,b=g.y,v=Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=l(e),S=c()<.5?1:-1,E=-S,w,O,D;(w=_(E+=S))&&(O=~~w[0],D=~~w[1],!(Math.min(Math.abs(O),Math.abs(D))>=v));)if(g.x=y+O,g.y=b+D,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!bxe(g,p,e[0]))&&(!m||_xe(g,m))){for(var x=g.sprite,A=g.width>>5,C=e[0]>>5,I=g.x-(A<<4),L=I&127,k=32-L,M=g.y1-g.y0,N=(g.y+g.y0)*C+(I>>5),R,T=0;T<M;T++){R=0;for(var z=0;z<=A;z++)p[N+z]|=R<<k|(z<A?(R=x[T*A+z])>>>L:0);N+=C}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Bf(p),f):n},f.fontStyle=function(p){return arguments.length?(r=Bf(p),f):r},f.fontWeight=function(p){return arguments.length?(s=Bf(p),f):s},f.rotate=function(p){return arguments.length?(a=Bf(p),f):a},f.text=function(p){return arguments.length?(t=Bf(p),f):t},f.spiral=function(p){return arguments.length?(l=Exe[p]||p,f):l},f.fontSize=function(p){return arguments.length?(i=Bf(p),f):i},f.padding=function(p){return arguments.length?(o=Bf(p),f):o},f.random=function(p){return arguments.length?(c=p,f):c},f}function yxe(e,t,n,i){if(!t.sprite){var r=e.context,s=e.ratio;r.clearRect(0,0,(d0<<5)/s,hv/s);var a=0,o=0,l=0,u=n.length,c,f,d,h,p;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=r.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*vO),m=Math.cos(t.rotate*vO),y=c*m,b=c*g,v=d*m,_=d*g;c=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(b+v),Math.abs(b-v))}else c=c+31>>5<<5;if(d>l&&(l=d),a+c>=d0<<5&&(a=0,o+=l,l=0),o+d>=hv)break;r.translate((a+(c>>1))/s,(o+(d>>1))/s),t.rotate&&r.rotate(t.rotate*vO),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=d,t.xoff=a,t.yoff=o,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var S=r.getImageData(0,0,(d0<<5)/s,hv/s).data,E=[];--i>=0;)if(t=n[i],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)E[h]=0;if(a=t.xoff,a==null)return;o=t.yoff;var w=0,O=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var D=f*p+(h>>5),x=S[(o+p)*(d0<<5)+(a+h)<<2]?1<<31-h%32:0;E[D]|=x,w|=x}w?O=p:(t.y0++,d--,p--,o++)}t.y1=t.y0+O,t.sprite=E.slice(0,(t.y1-t.y0)*f)}}}function bxe(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,s=e.x-(r<<4),a=s&127,o=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=r;d++)if((c<<o|(d<r?(c=i[f*r+d])>>>a:0))&t[u+d])return!0;u+=n}return!1}function vxe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function _xe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function kK(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function wxe(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Sxe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Bf(e){return typeof e=="function"?e:function(){return e}}var Exe={archimedean:kK,rectangular:wxe};const MK=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Axe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function eR(e){ue.call(this,mxe(),e)}eR.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:MK}]};Te(eR,ue,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&he("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Ht(g)&&t.modified(g.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Axe.some(n)))return;const r=t.materialize(t.SOURCE).source,s=this.value,a=e.as||MK;let o=e.fontSize||14,l;if(Ht(o)?l=e.fontSizeRange:o=kr(o),l){const p=o,g=An("sqrt")().domain(yl(r,p)).range(l);o=m=>g(p(m))}r.forEach(p=>{p[a[0]]=NaN,p[a[1]]=NaN,p[a[3]]=0});const u=s.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Aa).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,m;p<h;++p)g=u[p],m=g.datum,m[a[0]]=g.x+f,m[a[1]]=g.y+d,m[a[2]]=g.font,m[a[3]]=g.size,m[a[4]]=g.style,m[a[5]]=g.weight,m[a[6]]=g.rotate;return t.reflow(i).modifies(a)}});var Oxe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:eR},Symbol.toStringTag,{value:"Module"}));const Cxe=e=>new Uint8Array(e),Ixe=e=>new Uint16Array(e),x0=e=>new Uint32Array(e);function xxe(){let e=8,t=[],n=x0(0),i=Sb(0,e),r=Sb(0,e);return{data:()=>t,seen:()=>n=Txe(n,t.length),add(s){for(let a=0,o=t.length,l=s.length,u;a<l;++a)u=s[a],u._index=o++,t.push(u)},remove(s,a){const o=t.length,l=Array(o-s),u=t;let c,f,d;for(f=0;!a[f]&&f<o;++f)l[f]=t[f],u[f]=f;for(d=f;f<o;++f)c=t[f],a[f]?u[f]=-1:(u[f]=d,i[d]=i[f],r[d]=r[f],l[d]=c,c._index=d++),i[f]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:s=>r[s]=i[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){i[s]|=a},clear(s,a){i[s]&=~a},resize(s,a){const o=i.length;(s>o||a>e)&&(e=Math.max(a,e),i=Sb(s,e,i),r=Sb(s,e))}}}function Txe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Sb(e,t,n){const i=(t<257?Cxe:t<65537?Ixe:x0)(e);return n&&i.set(n),i}function H5(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,s){const a=this,o=a.bisect(a.range,r.value),l=r.index,u=o[0],c=o[1],f=l.length;let d;for(d=0;d<u;++d)s[l[d]]|=i;for(d=c;d<f;++d)s[l[d]]|=i;return a}}}function W5(){let e=x0(0),t=[],n=0;function i(o,l,u){if(!l.length)return[];const c=n,f=l.length,d=x0(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=o(l[m]),d[m]=m;if(h=kxe(h,d),c)p=t,g=e,t=Array(c+f),e=x0(c+f),Mxe(u,p,g,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function r(o,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-o}function s(o){for(let l=0,u=n;l<u;++l)e[l]=o[e[l]]}function a(o,l){let u;return l?u=l.length:(l=t,u=n),[Zme(l,o[0],0,u),h_(l,o[1],0,u)]}return{insert:i,remove:r,bisect:a,reindex:s,index:()=>e,size:()=>n}}function kxe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],s=e[i];return r<s?-1:r>s?1:0}),n0e(e,t)}function Mxe(e,t,n,i,r,s,a,o,l){let u=0,c=0,f;for(f=0;u<i&&c<a;++f)t[u]<r[c]?(o[f]=t[u],l[f]=n[u++]):(o[f]=r[c],l[f]=s[c++]+e);for(;u<i;++u,++f)o[f]=t[u],l[f]=n[u];for(;c<a;++c,++f)o[f]=r[c],l[f]=s[c]+e}function tR(e){ue.call(this,xxe(),e),this._indices=null,this._dims=null}tR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Te(tR,ue,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},s=this._dims=[],a=i.length;let o=0,l,u;for(;o<a;++o)l=n[o].fname,u=r[l]||(r[l]=W5()),s.push(H5(u,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,s=this._indices,a=this._dims,o=this.value,l=o.curr(),u=o.prev(),c=o.all(),f=n.rem=n.add,d=n.mod,h=r.length,p={};let g,m,y,b,v,_,S,E,w;if(u.set(l),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(_={},b=t.mod,S=0,E=b.length;S<E;++S)_[b[S]._index]=1;for(S=0;S<h;++S)w=i[S],(!a[S]||e.modified("fields",S)||t.modified(w.fields))&&(y=w.fname,(g=p[y])||(s[y]=m=W5(),p[y]=g=m.insert(w,t.source,0)),a[S]=H5(m,S,r[S]).onAdd(g,l));for(S=0,E=o.data().length;S<E;++S)v[S]||(u[S]!==l[S]?f.push(S):_[S]&&l[S]!==c&&d.push(S));return o.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,s=this._dims,a=this._indices,o=e.fields,l={},u=n.add,c=r.size()+i.length,f=s.length;let d=r.size(),h,p,g;r.resize(c,f),r.add(i);const m=r.curr(),y=r.prev(),b=r.all();for(h=0;h<f;++h)p=o[h].fname,g=l[p]||(l[p]=a[p].insert(o[h],i,d)),s[h].onAdd(g,m);for(;d<c;++d)y[d]=b,m[d]!==b&&u.push(d)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),s=i.all(),a=e.mod;let o,l,u;for(o=0,l=a.length;o<l;++o)u=a[o]._index,r[u]!==s&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,s=r.curr(),a=r.prev(),o=r.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,a[h]=p=s[h],s[h]=o,p!==o&&u.push(h);for(h in i)i[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const s=r.remove(t,n);for(const a in i)i[a].reindex(s)})},update(e,t,n){const i=this._dims,r=e.query,s=t.stamp,a=i.length;let o=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,o=0;u<a;++u)!e.modified("query",u)||(o|=i[u].one,this.incrementAll(i[u],r[u],s,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,s=r.seen(),a=r.curr(),o=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let m,y,b;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)b=l[m],s[b]!==n&&(o[b]=a[b],s[b]=n,i.push(b)),a[b]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)b=l[m],s[b]!==n&&(o[b]=a[b],s[b]=n,i.push(b)),a[b]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)b=l[m],s[b]!==n&&(o[b]=a[b],s[b]=n,i.push(b)),a[b]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)b=l[m],s[b]!==n&&(o[b]=a[b],s[b]=n,i.push(b)),a[b]^=g;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,s=r.curr(),a=e.index(),o=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=o[0],d=o[1],h=e.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=a[p],s[m]^=h,n.push(m);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)m=a[p],s[m]^=h,i.push(m);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)m=a[p],s[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=a[p],s[m]^=h,i.push(m);e.range=t.slice()}});function nR(e){ue.call(this,null,e)}nR.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Te(nR,ue,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const s=t.fork(t.ALL),a=i.data(),o=i.curr(),l=i.prev(),u=c=>o[c]&n?null:a[c];return s.filter(s.MOD,u),r&r-1?(s.filter(s.ADD,c=>{const f=o[c]&n;return!f&&f^l[c]&n?a[c]:null}),s.filter(s.REM,c=>{const f=o[c]&n;return f&&!(f^(f^l[c]&n))?a[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(o[c]&n)===r?a[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});var Dxe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:tR,resolvefilter:nR},Symbol.toStringTag,{value:"Module"}));const Rxe="RawCode",Kd="Literal",Lxe="Property",Nxe="Identifier",Fxe="ArrayExpression",Pxe="BinaryExpression",DK="CallExpression",Bxe="ConditionalExpression",jxe="LogicalExpression",Uxe="MemberExpression",zxe="ObjectExpression",Vxe="UnaryExpression";function wo(e){this.type=e}wo.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=$xe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function $xe(e){switch(e.type){case Fxe:return e.elements;case Pxe:case jxe:return[e.left,e.right];case DK:return[e.callee].concat(e.arguments);case Bxe:return[e.test,e.consequent,e.alternate];case Uxe:return[e.object,e.property];case zxe:return e.properties;case Lxe:return[e.key,e.value];case Vxe:return[e.argument];case Nxe:case Kd:case Rxe:default:return[]}}var kl,it,de,Cr,Fn,bS=1,py=2,Jd=3,_f=4,vS=5,wh=6,as=7,gy=8,Hxe=9;kl={};kl[bS]="Boolean";kl[py]="<end>";kl[Jd]="Identifier";kl[_f]="Keyword";kl[vS]="Null";kl[wh]="Numeric";kl[as]="Punctuator";kl[gy]="String";kl[Hxe]="RegularExpression";var Wxe="ArrayExpression",qxe="BinaryExpression",Gxe="CallExpression",Yxe="ConditionalExpression",RK="Identifier",Xxe="Literal",Kxe="LogicalExpression",Jxe="MemberExpression",Qxe="ObjectExpression",Zxe="Property",eTe="UnaryExpression",Gi="Unexpected token %0",tTe="Unexpected number",nTe="Unexpected string",iTe="Unexpected identifier",rTe="Unexpected reserved word",sTe="Unexpected end of input",lx="Invalid regular expression",_O="Invalid regular expression: missing /",LK="Octal literals are not allowed in strict mode.",aTe="Duplicate data property in object literal not allowed in strict mode",ir="ILLEGAL",u1="Disabled.",oTe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),lTe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function _S(e,t){if(!e)throw new Error("ASSERT: "+t)}function Jl(e){return e>=48&&e<=57}function iR(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function T0(e){return"01234567".indexOf(e)>=0}function uTe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function c1(e){return e===10||e===13||e===8232||e===8233}function my(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&oTe.test(String.fromCharCode(e))}function _2(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&lTe.test(String.fromCharCode(e))}const cTe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function NK(){for(;de<Cr;){const e=it.charCodeAt(de);if(uTe(e)||c1(e))++de;else break}}function ux(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)de<Cr&&iR(it[de])?(i=it[de++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):wn({},Gi,ir);return String.fromCharCode(r)}function fTe(){var e,t,n,i;for(e=it[de],t=0,e==="}"&&wn({},Gi,ir);de<Cr&&(e=it[de++],!!iR(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&wn({},Gi,ir),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function FK(){var e,t;for(e=it.charCodeAt(de++),t=String.fromCharCode(e),e===92&&(it.charCodeAt(de)!==117&&wn({},Gi,ir),++de,e=ux("u"),(!e||e==="\\"||!my(e.charCodeAt(0)))&&wn({},Gi,ir),t=e);de<Cr&&(e=it.charCodeAt(de),!!_2(e));)++de,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),it.charCodeAt(de)!==117&&wn({},Gi,ir),++de,e=ux("u"),(!e||e==="\\"||!_2(e.charCodeAt(0)))&&wn({},Gi,ir),t+=e);return t}function dTe(){var e,t;for(e=de++;de<Cr;){if(t=it.charCodeAt(de),t===92)return de=e,FK();if(_2(t))++de;else break}return it.slice(e,de)}function hTe(){var e,t,n;return e=de,t=it.charCodeAt(de)===92?FK():dTe(),t.length===1?n=Jd:cTe.hasOwnProperty(t)?n=_f:t==="null"?n=vS:t==="true"||t==="false"?n=bS:n=Jd,{type:n,value:t,start:e,end:de}}function wO(){var e=de,t=it.charCodeAt(de),n,i=it[de],r,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++de,{type:as,value:String.fromCharCode(t),start:e,end:de};default:if(n=it.charCodeAt(de+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return de+=2,{type:as,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:de};case 33:case 61:return de+=2,it.charCodeAt(de)===61&&++de,{type:as,value:it.slice(e,de),start:e,end:de}}}if(a=it.substr(de,4),a===">>>=")return de+=4,{type:as,value:a,start:e,end:de};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return de+=3,{type:as,value:s,start:e,end:de};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return de+=2,{type:as,value:r,start:e,end:de};if(r==="//"&&wn({},Gi,ir),"<>=!+-*%&|^/".indexOf(i)>=0)return++de,{type:as,value:i,start:e,end:de};wn({},Gi,ir)}function pTe(e){let t="";for(;de<Cr&&iR(it[de]);)t+=it[de++];return t.length===0&&wn({},Gi,ir),my(it.charCodeAt(de))&&wn({},Gi,ir),{type:wh,value:parseInt("0x"+t,16),start:e,end:de}}function gTe(e){let t="0"+it[de++];for(;de<Cr&&T0(it[de]);)t+=it[de++];return(my(it.charCodeAt(de))||Jl(it.charCodeAt(de)))&&wn({},Gi,ir),{type:wh,value:parseInt(t,8),octal:!0,start:e,end:de}}function q5(){var e,t,n;if(n=it[de],_S(Jl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=de,e="",n!=="."){if(e=it[de++],n=it[de],e==="0"){if(n==="x"||n==="X")return++de,pTe(t);if(T0(n))return gTe(t);n&&Jl(n.charCodeAt(0))&&wn({},Gi,ir)}for(;Jl(it.charCodeAt(de));)e+=it[de++];n=it[de]}if(n==="."){for(e+=it[de++];Jl(it.charCodeAt(de));)e+=it[de++];n=it[de]}if(n==="e"||n==="E")if(e+=it[de++],n=it[de],(n==="+"||n==="-")&&(e+=it[de++]),Jl(it.charCodeAt(de)))for(;Jl(it.charCodeAt(de));)e+=it[de++];else wn({},Gi,ir);return my(it.charCodeAt(de))&&wn({},Gi,ir),{type:wh,value:parseFloat(e),start:t,end:de}}function mTe(){var e="",t,n,i,r,s=!1;for(t=it[de],_S(t==="'"||t==='"',"String literal must starts with a quote"),n=de,++de;de<Cr;)if(i=it[de++],i===t){t="";break}else if(i==="\\")if(i=it[de++],!i||!c1(i.charCodeAt(0)))switch(i){case"u":case"x":it[de]==="{"?(++de,e+=fTe()):e+=ux(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:T0(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),de<Cr&&T0(it[de])&&(s=!0,r=r*8+"01234567".indexOf(it[de++]),"0123".indexOf(i)>=0&&de<Cr&&T0(it[de])&&(r=r*8+"01234567".indexOf(it[de++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&it[de]===`
`&&++de;else{if(c1(i.charCodeAt(0)))break;e+=i}return t!==""&&wn({},Gi,ir),{type:gy,value:e,octal:s,start:n,end:de}}function yTe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";wn({},lx)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{wn({},lx)}try{return new RegExp(e,t)}catch{return null}}function bTe(){var e,t,n,i,r;for(e=it[de],_S(e==="/","Regular expression literal must start with a slash"),t=it[de++],n=!1,i=!1;de<Cr;)if(e=it[de++],t+=e,e==="\\")e=it[de++],c1(e.charCodeAt(0))&&wn({},_O),t+=e;else if(c1(e.charCodeAt(0)))wn({},_O);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||wn({},_O),r=t.substr(1,t.length-2),{value:r,literal:t}}function vTe(){var e,t,n;for(t="",n="";de<Cr&&(e=it[de],!!_2(e.charCodeAt(0)));)++de,e==="\\"&&de<Cr?wn({},Gi,ir):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&wn({},lx,n),{value:n,literal:t}}function _Te(){var e,t,n,i;return Fn=null,NK(),e=de,t=bTe(),n=vTe(),i=yTe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:de}}function wTe(e){return e.type===Jd||e.type===_f||e.type===bS||e.type===vS}function PK(){if(NK(),de>=Cr)return{type:py,start:de,end:de};const e=it.charCodeAt(de);return my(e)?hTe():e===40||e===41||e===59?wO():e===39||e===34?mTe():e===46?Jl(it.charCodeAt(de+1))?q5():wO():Jl(e)?q5():wO()}function ds(){const e=Fn;return de=e.end,Fn=PK(),de=e.end,e}function BK(){const e=de;Fn=PK(),de=e}function STe(e){const t=new wo(Wxe);return t.elements=e,t}function G5(e,t,n){const i=new wo(e==="||"||e==="&&"?Kxe:qxe);return i.operator=e,i.left=t,i.right=n,i}function ETe(e,t){const n=new wo(Gxe);return n.callee=e,n.arguments=t,n}function ATe(e,t,n){const i=new wo(Yxe);return i.test=e,i.consequent=t,i.alternate=n,i}function rR(e){const t=new wo(RK);return t.name=e,t}function h0(e){const t=new wo(Xxe);return t.value=e.value,t.raw=it.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Y5(e,t,n){const i=new wo(Jxe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function OTe(e){const t=new wo(Qxe);return t.properties=e,t}function X5(e,t,n){const i=new wo(Zxe);return i.key=t,i.value=n,i.kind=e,i}function CTe(e,t){const n=new wo(eTe);return n.operator=e,n.argument=t,n.prefix=!0,n}function wn(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(s,a)=>(_S(a<i.length,"Message reference must be in range"),i[a]));throw n=new Error(r),n.index=de,n.description=r,n}function wS(e){e.type===py&&wn(e,sTe),e.type===wh&&wn(e,tTe),e.type===gy&&wn(e,nTe),e.type===Jd&&wn(e,iTe),e.type===_f&&wn(e,rTe),wn(e,Gi,e.value)}function Ir(e){const t=ds();(t.type!==as||t.value!==e)&&wS(t)}function Kn(e){return Fn.type===as&&Fn.value===e}function SO(e){return Fn.type===_f&&Fn.value===e}function ITe(){const e=[];for(de=Fn.start,Ir("[");!Kn("]");)Kn(",")?(ds(),e.push(null)):(e.push(Qd()),Kn("]")||Ir(","));return ds(),STe(e)}function K5(){de=Fn.start;const e=ds();return e.type===gy||e.type===wh?(e.octal&&wn(e,LK),h0(e)):rR(e.value)}function xTe(){var e,t,n,i;if(de=Fn.start,e=Fn,e.type===Jd)return n=K5(),Ir(":"),i=Qd(),X5("init",n,i);if(e.type===py||e.type===as)wS(e);else return t=K5(),Ir(":"),i=Qd(),X5("init",t,i)}function TTe(){var e=[],t,n,i,r={},s=String;for(de=Fn.start,Ir("{");!Kn("}");)t=xTe(),t.key.type===RK?n=t.key.name:n=s(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?wn({},aTe):r[i]=!0,e.push(t),Kn("}")||Ir(",");return Ir("}"),OTe(e)}function kTe(){Ir("(");const e=sR();return Ir(")"),e}const MTe={if:1};function DTe(){var e,t,n;if(Kn("("))return kTe();if(Kn("["))return ITe();if(Kn("{"))return TTe();if(e=Fn.type,de=Fn.start,e===Jd||MTe[Fn.value])n=rR(ds().value);else if(e===gy||e===wh)Fn.octal&&wn(Fn,LK),n=h0(ds());else{if(e===_f)throw new Error(u1);e===bS?(t=ds(),t.value=t.value==="true",n=h0(t)):e===vS?(t=ds(),t.value=null,n=h0(t)):Kn("/")||Kn("/=")?(n=h0(_Te()),BK()):wS(ds())}return n}function RTe(){const e=[];if(Ir("("),!Kn(")"))for(;de<Cr&&(e.push(Qd()),!Kn(")"));)Ir(",");return Ir(")"),e}function LTe(){de=Fn.start;const e=ds();return wTe(e)||wS(e),rR(e.value)}function NTe(){return Ir("."),LTe()}function FTe(){Ir("[");const e=sR();return Ir("]"),e}function PTe(){var e,t,n;for(e=DTe();;)if(Kn("."))n=NTe(),e=Y5(".",e,n);else if(Kn("("))t=RTe(),e=ETe(e,t);else if(Kn("["))n=FTe(),e=Y5("[",e,n);else break;return e}function J5(){const e=PTe();if(Fn.type===as&&(Kn("++")||Kn("--")))throw new Error(u1);return e}function pv(){var e,t;if(Fn.type!==as&&Fn.type!==_f)t=J5();else{if(Kn("++")||Kn("--"))throw new Error(u1);if(Kn("+")||Kn("-")||Kn("~")||Kn("!"))e=ds(),t=pv(),t=CTe(e.value,t);else{if(SO("delete")||SO("void")||SO("typeof"))throw new Error(u1);t=J5()}}return t}function Q5(e){let t=0;if(e.type!==as&&e.type!==_f)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function BTe(){var e,t,n,i,r,s,a,o,l,u;if(e=Fn,l=pv(),i=Fn,r=Q5(i),r===0)return l;for(i.prec=r,ds(),t=[e,Fn],a=pv(),s=[l,i,a];(r=Q5(Fn))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=G5(o,l,a),s.push(n);i=ds(),i.prec=r,s.push(i),t.push(Fn),n=pv(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=G5(s[u-1].value,s[u-2],n),u-=2;return n}function Qd(){var e,t,n;return e=BTe(),Kn("?")&&(ds(),t=Qd(),Ir(":"),n=Qd(),e=ATe(e,t,n)),e}function sR(){const e=Qd();if(Kn(","))throw new Error(u1);return e}function aR(e){it=e,de=0,Cr=it.length,Fn=null,BK();const t=sR();if(Fn.type!==py)throw new Error("Unexpect token after expression.");return t}var jK={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function UK(e){function t(a,o,l,u){let c=e(o[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(a,o,l){return u=>t(a,u,o,l)}const i="new Date",r="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&he("Missing arguments to clamp function."),a.length>3&&he("Too many arguments to clamp function.");const o=a.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&he("Missing arguments to if function."),a.length>3&&he("Too many arguments to if function.");const o=a.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function jTe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function zK(e){e=e||{};const t=e.allowed?po(e.allowed):{},n=e.forbidden?po(e.forbidden):{},i=e.constants||jK,r=(e.functions||UK)(f),s=e.globalvar,a=e.fieldvar,o=Ht(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function f(p){if(Fe(p))return p;const g=d[p.type];return g==null&&he("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:at(n,g)?he("Illegal identifier: "+g):at(i,g)?i[g]:at(t,g)?g:(l[g]=1,o(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===a&&(u[jTe(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&he("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=at(r,g)&&r[g];return y||he("Unrecognized function: "+g),Ht(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=r,h.constants=i,h}function Z5(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function UTe(e){let t=e,n=e,i=e;e.length!==2&&(t=(o,l)=>e(o)-l,n=Z5,i=(o,l)=>Z5(e(o),l));function r(o,l,u=0,c=o.length){if(u<c){if(n(l,l)!==0)return c;do{const f=u+c>>>1;i(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(n(l,l)!==0)return c;do{const f=u+c>>>1;i(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){const f=r(o,l,u,c-1);return f>u&&t(o[f-1],l)>-t(o[f],l)?f-1:f}return{left:r,center:a,right:s}}function zTe(e,...t){e=new Cv(e),t=t.map(VTe);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function VTe(e){return e instanceof Cv?e:new Cv(e)}function $Te(...e){const t=new Cv;for(const n of e)for(const i of n)t.add(i);return t}const oR="intersect",e8="union",HTe="vlMulti",WTe="vlPoint",t8="or",qTe="and",Uo="_vgsid_",f1=Ss(Uo),GTe="E",YTe="R",XTe="R-E",KTe="R-LE",JTe="R-RE",w2="index:unit";function n8(e,t){for(var n=t.fields,i=t.values,r=n.length,s=0,a,o;s<r;++s)if(o=n[s],o.getter=Ss.getter||Ss(o.field),a=o.getter(e),_c(a)&&(a=wr(a)),_c(i[s])&&(i[s]=wr(i[s])),_c(i[s][0])&&(i[s]=i[s].map(wr)),o.type===GTe){if(ge(i[s])?i[s].indexOf(a)<0:a!==i[s])return!1}else if(o.type===YTe){if(!op(a,i[s]))return!1}else if(o.type===JTe){if(!op(a,i[s],!0,!1))return!1}else if(o.type===XTe){if(!op(a,i[s],!1,!1))return!1}else if(o.type===KTe&&!op(a,i[s],!1,!0))return!1;return!0}function QTe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],s=i?i[w2]&&i[w2].value:void 0,a=n===oR,o=r.length,l=0,u,c,f,d,h;l<o;++l)if(u=r[l],s&&a){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=n8(t,u),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=n8(t,u),a^h)return h;return o&&a}const VK=UTe(f1),ZTe=VK.left,eke=VK.right;function tke(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],s=i?i[w2]&&i[w2].value:void 0,a=n===oR,o=f1(t),l=ZTe(r,o);if(l===r.length||f1(r[l])!==o)return!1;if(s&&a){if(s.size===1)return!0;if(eke(r,o)-l<s.size)return!1}return!0}function nke(e,t){return e.map(n=>$t(t.fields?{values:t.fields.map(i=>(i.getter||(i.getter=Ss(i.field)))(n.datum))}:{[Uo]:f1(n.datum)},t))}function ike(e,t,n,i){for(var r=this.context.data[e],s=r?r.values.value:[],a={},o={},l={},u,c,f,d,h,p,g,m,y,b,v=s.length,_=0,S,E;_<v;++_)if(u=s[_],d=u.unit,c=u.fields,f=u.values,c&&f){for(S=0,E=c.length;S<E;++S)h=c[S],g=a[h.field]||(a[h.field]={}),m=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),b=EO["".concat(y,"_union")],g[d]=b(m,Pe(f[S]));n&&(m=o[d]||(o[d]=[]),m.push(Pe(f).reduce((w,O,D)=>(w[c[D].field]=O,w),{})))}else h=Uo,p=f1(u),g=a[h]||(a[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=o[d]||(o[d]=[]),m.push({[Uo]:p}));if(t=t||e8,a[Uo]?a[Uo]=EO["".concat(Uo,"_").concat(t)](...Object.values(a[Uo])):Object.keys(a).forEach(w=>{a[w]=Object.keys(a[w]).map(O=>a[w][O]).reduce((O,D)=>O===void 0?D:EO["".concat(l[w],"_").concat(t)](O,D))}),s=Object.keys(o),n&&s.length){const w=i?WTe:HTe;a[w]=t===e8?{[t8]:s.reduce((O,D)=>(O.push(...o[D]),O),[])}:{[qTe]:s.map(O=>({[t8]:o[O]}))}}return a}var EO={["".concat(Uo,"_union")]:$Te,["".concat(Uo,"_intersect")]:zTe,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=wr(t[0]),i=wr(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=wr(t[0]),i=wr(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const rke=":",ske="@";function lR(e,t,n,i){t[0].type!==Kd&&he("First argument to selection functions must be a string literal.");const r=t[0].value,s=t.length>=2&&ln(t).value,a="unit",o=ske+a,l=rke+r;s===oR&&!at(i,o)&&(i[o]=n.getData(r).indataRef(n,a)),at(i,l)||(i[l]=n.getData(r).tuplesRef())}function $K(e){const t=this.context.data[e];return t?t.values.value:[]}function ake(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function oke(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Sa).insert(t)),1}function lke(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const yy=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},uke=yy("format"),HK=yy("timeFormat"),cke=yy("utcFormat"),fke=yy("timeParse"),dke=yy("utcParse"),Eb=new Date(2e3,0,1);function SS(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Eb.setYear(2e3),Eb.setMonth(e),Eb.setDate(t),HK.call(this,Eb,n))}function hke(e){return SS.call(this,e,1,"%B")}function pke(e){return SS.call(this,e,1,"%b")}function gke(e){return SS.call(this,0,2+e,"%A")}function mke(e){return SS.call(this,0,2+e,"%a")}const yke=":",bke="@",cx="%",WK="$";function uR(e,t,n,i){t[0].type!==Kd&&he("First argument to data functions must be a string literal.");const r=t[0].value,s=yke+r;if(!at(s,i))try{i[s]=n.getData(r).tuplesRef()}catch{}}function vke(e,t,n,i){t[0].type!==Kd&&he("First argument to indata must be a string literal."),t[1].type!==Kd&&he("Second argument to indata must be a string literal.");const r=t[0].value,s=t[1].value,a=bke+s;at(a,i)||(i[a]=n.getData(r).indataRef(n,s))}function ps(e,t,n,i){if(t[0].type===Kd)i8(n,i,t[0].value);else for(e in n.scales)i8(n,i,e)}function i8(e,t,n){const i=cx+n;if(!at(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Du(e,t){let n;return Ht(e)?e:Fe(e)?(n=t.scales[e])&&n.value:void 0}function _ke(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=ps,n._range=ps,n._scale=ps;const i=r=>"_["+(r.type===Kd?ke(cx+r.value):ke(cx)+"+"+e(r))+"]";return{_bandwidth:r=>"this.__bandwidth(".concat(i(r[0]),")"),_range:r=>"".concat(i(r[0]),".range()"),_scale:r=>"".concat(i(r[0]),"(").concat(e(r[1]),")")}}function cR(e,t){return function(n,i,r){if(n){const s=Du(n,(r||this).context);return s&&s.path[e](i)}else return t(i)}}const wke=cR("area",VEe),Ske=cR("bounds",qEe),Eke=cR("centroid",QEe);function Ake(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function fR(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Oke(){return fR(this.context.dataflow,"warn",arguments)}function Cke(){return fR(this.context.dataflow,"info",arguments)}function Ike(){return fR(this.context.dataflow,"debug",arguments)}function AO(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fx(e){const t=qc(e),n=AO(t.r),i=AO(t.g),r=AO(t.b);return .2126*n+.7152*i+.0722*r}function xke(e,t){const n=fx(e),i=fx(t),r=Math.max(n,i),s=Math.min(n,i);return(r+.05)/(s+.05)}function Tke(){const e=[].slice.call(arguments);return e.unshift({}),$t(...e)}function qK(e,t){return e===t||e!==e&&t!==t?!0:ge(e)?ge(t)&&e.length===t.length?kke(e,t):!1:Ye(e)&&Ye(t)?GK(e,t):!1}function kke(e,t){for(let n=0,i=e.length;n<i;++n)if(!qK(e[n],t[n]))return!1;return!0}function GK(e,t){for(const n in e)if(!qK(e[n],t[n]))return!1;return!0}function r8(e){return t=>GK(e,t)}function Mke(e,t,n,i,r,s){const a=this.context.dataflow,o=this.context.data[e],l=o.input,u=a.stamp();let c=o.changes,f,d;if(a._trigger===!1||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(o.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{o.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(f=n===!0?Sa:ge(n)||Rw(n)?n:r8(n),c.remove(f)),t&&c.insert(t),i&&(f=r8(i),l.value.some(f)?c.remove(f):c.insert(i)),r)for(d in s)c.modify(r,d,s[d]);return 1}function Dke(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+i*i)}function Rke(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const s8={};function Lke(e,t){const n=s8[t]||(s8[t]=Ss(t));return ge(e)?e.map(n):n(e)}function dR(e){return ge(e)||ArrayBuffer.isView(e)?e:null}function hR(e){return dR(e)||(Fe(e)?e:null)}function Nke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return dR(e).join(...n)}function Fke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return hR(e).indexOf(...n)}function Pke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return hR(e).lastIndexOf(...n)}function Bke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return hR(e).slice(...n)}function jke(e,t,n){return Ht(n)&&he("Function argument passed to replace."),String(e).replace(t,n)}function Uke(e){return dR(e).slice().reverse()}function zke(e,t,n){return SM(e||0,t||0,n||0)}function Vke(e,t){const n=Du(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function $ke(e,t){const n=Du(e,(t||this).context);return n?n.copy():void 0}function Hke(e,t){const n=Du(e,(t||this).context);return n?n.domain():[]}function Wke(e,t,n){const i=Du(e,(n||this).context);return i?ge(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function qke(e,t){const n=Du(e,(t||this).context);return n&&n.range?n.range():[]}function Gke(e,t,n){const i=Du(e,(n||this).context);return i?i(t):void 0}function Yke(e,t,n,i,r){e=Du(e,(r||this).context);const s=GG(t,n);let a=e.domain(),o=a[0],l=ln(a),u=Tr;return l-o?u=NG(e,o,l):e=(e.interpolator?An("sequential")().interpolator(e.interpolator()):An("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(a=e.ticks(+i||15),o!==a[0]&&a.unshift(o),l!==ln(a)&&a.push(l)),a.forEach(c=>s.stop(u(c),e(c))),s}function Xke(e,t,n){const i=Du(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Kke(e){let t=null;return function(n){return n?t1(n,t=t||og(e)):e}}const YK=e=>e.data;function XK(e,t){const n=$K.call(t,e);return n.root&&n.root.lookup||{}}function Jke(e,t,n){const i=XK(e,this),r=i[t],s=i[n];return r&&s?r.path(s).map(YK):void 0}function Qke(e,t){const n=XK(e,this)[t];return n?n.ancestors().map(YK):void 0}const KK=()=>typeof window<"u"&&window||null;function Zke(){const e=KK();return e?e.screen:{}}function e3e(){const e=KK();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function t3e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function JK(e,t,n){if(!e)return[];const[i,r]=e,s=new Ai().set(i[0],i[1],r[0],r[1]),a=n||this.context.dataflow.scenegraph().root;return PY(a,s,n3e(t))}function n3e(e){let t=null;if(e){const n=Pe(e.marktype),i=Pe(e.markname);t=r=>(!n.length||n.some(s=>r.marktype===s))&&(!i.length||i.some(s=>r.name===s))}return t}function i3e(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;const r=e[e.length-1];return r===void 0||Math.sqrt((r[0]-t)**2+(r[1]-n)**2)>i?(e.push([t,n]),[...e]):e}function r3e(e){return(e??[]).reduce((t,n,i)=>{let[r,s]=n;return t+=i==0?"M ".concat(r,",").concat(s," "):i===e.length-1?" Z":"L ".concat(r,",").concat(s," ")},"")}function s3e(e,t,n){const{x:i,y:r,mark:s}=n,a=new Ai().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(i,r),JK([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter(l=>a3e(l.x,l.y,t))}function a3e(e,t,n){let i=0;for(let r=0,s=n.length-1;r<n.length;s=r++){const[a,o]=n[s],[l,u]=n[r];u>t!=o>t&&e<(a-l)*(t-u)/(o-u)+l&&i++}return i&1}const d1={random(){return Aa()},cumulativeNormal:Bw,cumulativeLogNormal:A3,cumulativeUniform:x3,densityNormal:v3,densityLogNormal:E3,densityUniform:I3,quantileNormal:jw,quantileLogNormal:O3,quantileUniform:T3,sampleNormal:Pw,sampleLogNormal:S3,sampleUniform:C3,isArray:ge,isBoolean:pf,isDate:_c,isDefined(e){return e!==void 0},isNumber:Un,isObject:Ye,isRegExp:fH,isString:Fe,isTuple:Rw,isValid(e){return e!=null&&e===e},toBoolean:Wk,toDate(e){return qk(e)},toNumber:wr,toString:Gk,indexof:Fke,join:Nke,lastindexof:Pke,replace:jke,reverse:Uke,slice:Bke,flush:uH,lerp:dH,merge:Tke,pad:gH,peek:ln,pluck:Lke,span:$1,inrange:op,truncate:mH,rgb:qc,lab:T_,hcl:k_,hsl:I_,luminance:fx,contrast:xke,sequence:Ws,format:uke,utcFormat:cke,utcParse:dke,utcOffset:tW,utcSequence:rW,timeFormat:HK,timeParse:fke,timeOffset:eW,timeSequence:iW,timeUnitSpecifier:$H,monthFormat:hke,monthAbbrevFormat:pke,dayFormat:gke,dayAbbrevFormat:mke,quarter:sH,utcquarter:aH,week:WH,utcweek:YH,dayofyear:HH,utcdayofyear:GH,warn:Oke,info:Cke,debug:Ike,extent(e){return yl(e)},inScope:Ake,intersect:JK,clampRange:oH,pinchDistance:Dke,pinchAngle:Rke,screen:Zke,containerSize:t3e,windowSize:e3e,bandspace:zke,setdata:oke,pathShape:Kke,panLinear:tH,panLog:nH,panPow:iH,panSymlog:rH,zoomLinear:jk,zoomLog:Uk,zoomPow:d_,zoomSymlog:zk,encode:lke,modify:Mke,lassoAppend:i3e,lassoPath:r3e,intersectLasso:s3e},o3e=["view","item","group","xy","x","y"],l3e="event.vega.",QK="this.",pR={},ZK={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(ke(WK+e),"]"),functions:u3e,constants:jK,visitors:pR},dx=zK(ZK);function u3e(e){const t=UK(e);o3e.forEach(n=>t[n]=l3e+n);for(const n in d1)t[n]=QK+n;return $t(t,_ke(e,d1,pR)),t}function Ci(e,t,n){return arguments.length===1?d1[e]:(d1[e]=t,n&&(pR[e]=n),dx&&(dx.functions[e]=QK+e),this)}Ci("bandwidth",Vke,ps);Ci("copy",$ke,ps);Ci("domain",Hke,ps);Ci("range",qke,ps);Ci("invert",Wke,ps);Ci("scale",Gke,ps);Ci("gradient",Yke,ps);Ci("geoArea",wke,ps);Ci("geoBounds",Ske,ps);Ci("geoCentroid",Eke,ps);Ci("geoShape",Xke,ps);Ci("indata",ake,vke);Ci("data",$K,uR);Ci("treePath",Jke,uR);Ci("treeAncestors",Qke,uR);Ci("vlSelectionTest",QTe,lR);Ci("vlSelectionIdTest",tke,lR);Ci("vlSelectionResolve",ike,lR);Ci("vlSelectionTuples",nke);function _l(e,t){const n={};let i;try{e=Fe(e)?e:ke(e)+"",i=aR(e)}catch{he("Expression parse error: "+e)}i.visit(s=>{if(s.type!==DK)return;const a=s.callee.name,o=ZK.visitors[a];o&&o(a,s.arguments,t,n)});const r=dx(i);return r.globals.forEach(s=>{const a=WK+s;!at(n,a)&&t.getSignal(s)&&(n[a]=t.signalRef(s))}),{$expr:$t({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function c3e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const f3e=po(["rule"]),a8=po(["group","image","rect"]);function d3e(e,t){let n="";return f3e[t]||(e.x2&&(e.x?(a8[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(a8[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function gR(e){return(e+"").toLowerCase()}function h3e(e){return gR(e)==="operator"}function p3e(e){return gR(e)==="collect"}function Fm(e,t,n){n[n.length-1]!==";"&&(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function g3e(e,t,n,i){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(i,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(i," : ")}var m3e={operator:(e,t)=>Fm(e,["_"],t.code),parameter:(e,t)=>Fm(e,["datum","_"],t.code),event:(e,t)=>Fm(e,["event"],t.code),handler:(e,t)=>{const n="var datum=event.item&&event.item.datum;return ".concat(t.code,";");return Fm(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const s in i){const a="o["+ke(s)+"]";r+="$=".concat(i[s].code,";if(").concat(a,"!==$)").concat(a,"=$,m=1;")}return r+=d3e(i,n),r+="return m;",Fm(e,["item","_"],r)},codegen:{get(e){const t="[".concat(e.map(ke).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator(e,t){let n;const i=(s,a)=>{const o=t[a];let l,u;return s.path?(l="a".concat(s.path),u="b".concat(s.path)):((n=n||{})["f"+a]=s,l="this.f".concat(a,"(a)"),u="this.f".concat(a,"(b)")),g3e(l,u,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function y3e(e){const t=this;h3e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function b3e(e){const t=this;if(e.params){const n=t.get(e.id);n||he("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function v3e(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=ge(r)?r.map(s=>o8(s,n,t)):o8(r,n,t)}return t}function o8(e,t,n){if(!e||!Ye(e))return e;for(let i=0,r=l8.length,s;i<r;++i)if(s=l8[i],at(e,s.key))return s.parse(e,t,n);return e}var l8=[{key:"$ref",parse:_3e},{key:"$key",parse:S3e},{key:"$expr",parse:w3e},{key:"$field",parse:E3e},{key:"$encode",parse:O3e},{key:"$compare",parse:A3e},{key:"$context",parse:C3e},{key:"$subflow",parse:I3e},{key:"$tupleid",parse:x3e}];function _3e(e,t){return t.get(e.$ref)||he("Operator not defined: "+e.$ref)}function w3e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code+"_"+e.$name;return t.fn[i]||(t.fn[i]=Rs(t.parameterExpression(e.$expr),e.$fields,e.$name))}function S3e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Hk(e.$key,e.$flat,t.expr.codegen))}function E3e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ss(e.$field,e.$name,t.expr.codegen))}function A3e(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Pe(e.$compare).map(r=>r&&r.$tupleid?lt:r);return t.fn[n]||(t.fn[n]=Vk(i,e.$order,t.expr.codegen))}function O3e(e,t){const n=e.$encode,i={};for(const r in n){const s=n[r];i[r]=Rs(t.encodeExpression(s.$expr),s.$fields),i[r].output=s.$output}return i}function C3e(e,t){return t}function I3e(e,t){const n=e.$subflow;return function(i,r,s){const a=t.fork().parse(n),o=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(s),o.detachSubflow=()=>t.detach(a),o}}function x3e(){return lt}function T3e(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(s=>t.get(s)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(s=>t.get(s)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&he("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function k3e(e){var t=this,n=Ye(n=e.source)?n.$ref:n,i=t.get(n),r=null,s=e.update,a=void 0;i||he("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(a=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,i,r,s,a)}const M3e={skip:!0};function D3e(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(s=>{const a=t.signals[s];e.signals(s,a)&&(i[s]=a.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(s=>{const a=t.data[s];e.data(s,a)&&(r[s]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function R3e(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(s=>{n.update(t.signals[s],r[s],M3e)}),Object.keys(i||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Sa).insert(i[s]))}),(e.subcontext||[]).forEach((s,a)=>{const o=t.subcontext[a];o&&o.setState(s)})}function eJ(e,t,n,i){return new tJ(e,t,n,i)}function tJ(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||m3e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function u8(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}tJ.prototype=u8.prototype={fork(){const e=new u8(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),p3e(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(i.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),i.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const a=n.data[s]||(n.data[s]={});e.data[s].forEach(o=>a[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[gR(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:c3e,parseOperator:y3e,parseOperatorParameters:b3e,parseParameters:v3e,parseStream:T3e,parseUpdate:k3e,getState:D3e,setState:R3e};function L3e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),nJ(t,e.description()))}function nJ(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function N3e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const OO="default";function F3e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:OO,item:null}));e.on(e.events("view","mousemove"),t,(n,i)=>{const r=t.value,s=r?Fe(r)?r:r.user:OO,a=i.item&&i.item.cursor||null;return r&&s===r.user&&a==r.item?r:{user:s,item:a}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Fe(i)||(r=i.item,i=i.user),hx(e,i&&i!==OO?i:r||i),r},{cursor:t})}function hx(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function S2(e,t){var n=e._runtime.data;return at(n,t)||he("Unrecognized data set: "+t),n[t]}function P3e(e,t){return arguments.length<2?S2(this,e).values.value:ES.call(this,e,bh().remove(Sa).insert(t))}function ES(e,t){MW(t)||he("Second argument to changes must be a changeset.");const n=S2(this,e);return n.modified=!0,this.pulse(n.input,t)}function B3e(e,t){return ES.call(this,e,bh().insert(t))}function j3e(e,t){return ES.call(this,e,bh().remove(t))}function iJ(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function rJ(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function AS(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function U3e(e){var t=AS(e),n=iJ(e),i=rJ(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(s){e.error(s)}})}function z3e(e,t,n){var i=e._renderer,r=i&&i.canvas(),s,a,o;return r&&(o=AS(e),a=t.changedTouches?t.changedTouches[0]:t,s=cS(a,r),s[0]-=o[0],s[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=V3e(e,n,s),t}function V3e(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(a){var o=i,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function s(a){if(!a)return n;Fe(a)&&(a=r(a));const o=n.slice();for(;a;)o[0]-=a.x||0,o[1]-=a.y||0,a=a.mark&&a.mark.group;return o}return{view:kr(e),item:kr(t||{}),group:r,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}const c8="view",$3e="timer",H3e="window",W3e={trap:!1};function q3e(e){const t=$t({defaults:{}},e),n=(i,r)=>{r.forEach(s=>{ge(i[s])&&(i[s]=po(i[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function sJ(e,t,n,i){e._eventListeners.push({type:n,sources:Pe(t),handler:i})}function G3e(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function Ab(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Ye(i)&&!i[n]?(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1):!0}function Y3e(e,t,n){var i=this,r=new Fw(n),s=function(u,c){i.runAsync(null,()=>{e===c8&&G3e(i,t)&&u.preventDefault(),r.receive(z3e(i,u,c))})},a;if(e===$3e)Ab(i,"timer",t)&&i.timer(s,t);else if(e===c8)Ab(i,"view",t)&&i.addEventListener(t,s,W3e);else if(e===H3e?Ab(i,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&Ab(i,"selector",t)&&(a=document.querySelectorAll(e)),!a)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=a.length;o<l;++o)a[o].addEventListener(t,s);sJ(i,a,t,s)}return r}function f8(e){return e.item}function d8(e){return e.item.mark.source}function h8(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function X3e(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",f8),d8,h8(e)),this.on(this.events("view","mouseout",f8),d8,h8(t)),this}function K3e(){var e=this._tooltip,t=this._timers,n=this._eventListeners,i,r,s;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(s=n[i],r=s.sources.length;--r>=0;)s.sources[r].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function Gs(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const J3e="vega-bind",Q3e="vega-bind-name",Z3e="vega-bind-radio";function eMe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,a)})}},i.debounce&&(r.update=$k(i.debounce,r.update))),(i.input==null&&i.element?tMe:iMe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function tMe(e,t,n,i){const r=n.event||"input",s=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,s),sJ(i,t,r,s),e.set=a=>{t.value=a,t.dispatchEvent(nMe(r))}}function nMe(e){return typeof Event<"u"?new Event(e):{type:e}}function iMe(e,t,n,i){const r=i.signal(n.signal),s=Gs("div",{class:J3e}),a=n.input==="radio"?s:s.appendChild(Gs("label"));a.appendChild(Gs("span",{class:Q3e},n.name||n.signal)),t.appendChild(s);let o=rMe;switch(n.input){case"checkbox":o=sMe;break;case"select":o=aMe;break;case"radio":o=oMe;break;case"range":o=lMe;break}o(e,a,n,r)}function rMe(e,t,n,i){const r=Gs("input");for(const s in n)s!=="signal"&&s!=="element"&&r.setAttribute(s==="input"?"type":s,n[s]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=s=>r.value=s}function sMe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const s=Gs("input",r);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=a=>s.checked=!!a||null}function aMe(e,t,n,i){const r=Gs("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,o)=>{const l={value:a};E2(a,i)&&(l.selected=!0),r.appendChild(Gs("option",l,(s[o]||a)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=a=>{for(let o=0,l=n.options.length;o<l;++o)if(E2(n.options[o],a)){r.selectedIndex=o;return}}}function oMe(e,t,n,i){const r=Gs("span",{class:Z3e}),s=n.labels||[];t.appendChild(r),e.elements=n.options.map((a,o)=>{const l={type:"radio",name:n.signal,value:a};E2(a,i)&&(l.checked=!0);const u=Gs("input",l);u.addEventListener("change",()=>e.update(a));const c=Gs("label",{},(s[o]||a)+"");return c.prepend(u),r.appendChild(c),u}),e.set=a=>{const o=e.elements,l=o.length;for(let u=0;u<l;++u)E2(o[u].value,a)&&(o[u].checked=!0)}}function lMe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,s=n.min||Math.min(0,r,+i)||0,a=n.step||zc(s,r,100),o=Gs("input",{type:"range",name:n.signal,min:s,max:r,step:a});o.value=i;const l=Gs("span",{},+i);t.appendChild(o),t.appendChild(l);const u=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",u),o.addEventListener("change",u),e.elements=[o],e.set=c=>{o.value=c,l.textContent=c}}function E2(e,t){return e===t||e+""==t+""}function aJ(e,t,n,i,r,s){return t=t||new i(e.loader()),t.initialize(n,iJ(e),rJ(e),AS(e),r,s).background(e.background())}function mR(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function uMe(e,t,n,i){const r=new i(e.loader(),mR(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,AS(e),e);return t&&t.handlers().forEach(s=>{r.on(s.type,s.handler)}),r}function cMe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,s=fS(i);e=n._el=e?CO(n,e,!0):null,L3e(n),s||n.error("Unrecognized renderer type: "+i);const a=s.handler||uy,o=e?s.renderer:s.headless;return n._renderer=o?aJ(n,n._renderer,e,o):null,n._handler=uMe(n,n._handler,e,a),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=CO(n,t,!0):e.appendChild(Gs("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=CO(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{eMe(n,l.element||t,l)})),n}function CO(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Pm=e=>+e||0,fMe=e=>({top:e,bottom:e,left:e,right:e});function p8(e){return Ye(e)?{top:Pm(e.top),bottom:Pm(e.bottom),left:Pm(e.left),right:Pm(e.right)}:fMe(Pm(e))}async function yR(e,t,n,i){const r=fS(t),s=r&&r.headless;return s||he("Unrecognized renderer type: "+t),await e.runAsync(),aJ(e,null,null,s,n,i).renderAsync(e._scenegraph.root)}async function dMe(e,t){e!==dc.Canvas&&e!==dc.SVG&&e!==dc.PNG&&he("Unrecognized image type: "+e);const n=await yR(this,e,t);return e===dc.SVG?hMe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function hMe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function pMe(e,t){return(await yR(this,dc.Canvas,e,t)).canvas()}async function gMe(e){return(await yR(this,dc.SVG,e)).svg()}function mMe(e,t,n){return eJ(e,tg,d1,n).parse(t)}function yMe(e){var t=this._runtime.scales;return at(t,e)||he("Unrecognized scale or projection: "+e),t[e].value}var oJ="width",lJ="height",bR="padding",g8={skip:!0};function uJ(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===bR?i.left+i.right:0)}function cJ(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===bR?i.top+i.bottom:0)}function bMe(e){var t=e._signals,n=t[oJ],i=t[lJ],r=t[bR];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=uJ(e,o.size),s()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=cJ(e,o.size),s()},{size:i});const a=e.add(null,s,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,a.rank=r.rank+1}function vMe(e,t,n,i,r,s){this.runAfter(a=>{let o=0;a._autosize=0,a.width()!==n&&(o=1,a.signal(oJ,n,g8),a._resizeWidth.skip(!0)),a.height()!==i&&(o=1,a.signal(lJ,i,g8),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==r[0]||a._origin[1]!==r[1])&&(a._resize=1,a._origin=r),o&&a.run("enter"),s&&a.runAfter(l=>l.resize())},!1,1)}function _Me(e){return this._runtime.getState(e||{data:wMe,signals:SMe,recurse:!0})}function wMe(e,t){return t.modified&&ge(t.input.value)&&e.indexOf("_:vega:_")}function SMe(e,t){return!(e==="parent"||t instanceof tg.proxy)}function EMe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function AMe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(ZOe(n,t))}function OMe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",CMe(i))}function CMe(e){return e==null?"":ge(e)?fJ(e):Ye(e)&&!_c(e)?IMe(e):e+""}function IMe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ge(n)?fJ(n):dJ(n))}).join(`
`)}function fJ(e){return"["+e.map(dJ).join(", ")+"]"}function dJ(e){return ge(e)?"[\u2026]":Ye(e)&&!_c(e)?"{\u2026}":e}function hJ(e,t){const n=this;if(t=t||{},Sp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=$t({},e.locale,t.locale);n.locale(wW(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||dc.Canvas,n._scenegraph=new QM;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||OMe,n._redraw=!0,n._handler=new uy().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=q3e(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=mMe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:$t({},s)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=uJ(n,n._width),n._viewHeight=cJ(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,bMe(n),N3e(n),F3e(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function Ob(e,t){return at(e._signals,t)?e._signals[t]:he("Unrecognized signal name: "+ke(t))}function pJ(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function m8(e,t,n,i){let r=pJ(n,i);return r||(r=mR(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function y8(e,t,n){const i=pJ(t,n);return i&&t._targets.remove(i),e}Te(hJ,Sp,{async evaluate(e,t,n){if(await Sp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,U3e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&Qb(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&nJ(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=Ob(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",p8(e)):p8(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(fS(e)||he("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Sp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Ob(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:vMe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=mR(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,s;--i>=0;)if(s=n[i].type,r=n[i].handler,e===s&&(t===r||t===r.raw)){this._handler.off(s,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return m8(this,e,Ob(this,e),t)},removeSignalListener(e,t){return y8(this,Ob(this,e),t)},addDataListener(e,t){return m8(this,e,S2(this,e).values,t)},removeDataListener(e,t){return y8(this,S2(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=hx(this,null);this._globalCursor=!!e,t&&hx(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:AMe,events:Y3e,finalize:K3e,hover:X3e,data:P3e,change:ES,insert:B3e,remove:j3e,scale:yMe,initialize:cMe,toImageURL:dMe,toCanvas:pMe,toSVG:gMe,getState:_Me,setState:EMe});const xMe="view",A2="[",O2="]",gJ="{",mJ="}",TMe=":",yJ=",",kMe="@",MMe=">",DMe=/[[\]{}]/,RMe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let bJ,vJ;function wf(e,t,n){return bJ=t||xMe,vJ=n||RMe,_J(e.trim()).map(px)}function LMe(e){return vJ[e]}function k0(e,t,n,i,r){const s=e.length;let a=0,o;for(;t<s;++t){if(o=e[t],!a&&o===n)return t;r&&r.indexOf(o)>=0?--a:i&&i.indexOf(o)>=0&&++a}return t}function _J(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=k0(e,r,yJ,A2+gJ,O2+mJ),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function px(e){return e[0]==="["?NMe(e):FMe(e)}function NMe(e){const t=e.length;let n=1,i;if(n=k0(e,n,O2,A2,O2),n===t)throw"Empty between selector: "+e;if(i=_J(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==MMe)throw"Expected '>' after between selector: "+e;i=i.map(px);const r=px(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function FMe(e){const t={source:bJ},n=[];let i=[0,0],r=0,s=0,a=e.length,o=0,l,u;if(e[a-1]===mJ){if(o=e.lastIndexOf(gJ),o>=0){try{i=PMe(e.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),a=e.length}else throw"Unmatched right brace: "+e;o=0}if(!a)throw e;if(e[0]===kMe&&(r=++o),l=k0(e,o,TMe),l<a&&(n.push(e.substring(s,l).trim()),s=o=++l),o=k0(e,o,A2),o===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,o).trim()),u=[],s=++o,s===a)throw"Unmatched left bracket: "+e;for(;o<a;){if(o=k0(e,o,O2),o===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,o).trim()),o<a-1&&e[++o]!==A2)throw"Expected left bracket: "+e;s=++o}if(!(a=n.length)||DMe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],r?t.markname=n[0].slice(1):LMe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function PMe(e){const t=e.split(yJ);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function BMe(e){return Ye(e)?e:{type:e||"pad"}}const Bm=e=>+e||0,jMe=e=>({top:e,bottom:e,left:e,right:e});function UMe(e){return Ye(e)?e.signal?e:{top:Bm(e.top),bottom:Bm(e.bottom),left:Bm(e.left),right:Bm(e.right)}:jMe(Bm(e))}const Yi=e=>Ye(e)&&!ge(e)?$t({},e):{value:e};function b8(e,t,n,i){return n!=null?(Ye(n)&&!ge(n)||ge(n)&&n.length&&Ye(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function or(e,t,n){for(const i in t)b8(e,i,t[i]);for(const i in n)b8(e,i,n[i],"update")}function Zg(e,t,n){for(const i in t)n&&at(n,i)||(e[i]=$t(e[i]||{},t[i]));return e}function Zh(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const vR="mark",_R="frame",wR="scope",zMe="axis",VMe="axis-domain",$Me="axis-grid",HMe="axis-label",WMe="axis-tick",qMe="axis-title",GMe="legend",YMe="legend-band",XMe="legend-entry",KMe="legend-gradient",wJ="legend-label",JMe="legend-symbol",QMe="legend-title",ZMe="title",eDe="title-text",tDe="title-subtitle";function nDe(e,t,n,i,r){const s={},a={};let o,l,u,c;l="lineBreak",t==="text"&&r[l]!=null&&!Zh(l,e)&&IO(s,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===_R?r.group:n===vR?$t({},r.mark,r[t]):null;for(l in c)u=Zh(l,e)||(l==="fill"||l==="stroke")&&(Zh("fill",e)||Zh("stroke",e)),u||IO(s,l,c[l]);Pe(i).forEach(f=>{const d=r.style&&r.style[f];for(const h in d)Zh(h,e)||IO(s,h,d[h])}),e=$t({},e);for(l in s)c=s[l],c.signal?(o=o||{})[l]=c:a[l]=c;return e.enter=$t(a,e.enter),o&&(e.update=$t(o,e.update)),e}function IO(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const SJ=e=>Fe(e)?ke(e):e.signal?`(${e.signal})`:EJ(e);function OS(e){if(e.gradient!=null)return rDe(e);let t=e.signal?`(${e.signal})`:e.color?iDe(e.color):e.field!=null?EJ(e.field):e.value!==void 0?ke(e.value):void 0;return e.scale!=null&&(t=sDe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${gv(e.exponent)})`),e.mult!=null&&(t+=`*${gv(e.mult)}`),e.offset!=null&&(t+=`+${gv(e.offset)}`),e.round&&(t=`round(${t})`),t}const Cb=(e,t,n,i)=>`(${e}(${[t,n,i].map(OS).join(",")})+'')`;function iDe(e){return e.c?Cb("hcl",e.h,e.c,e.l):e.h||e.s?Cb("hsl",e.h,e.s,e.l):e.l||e.a?Cb("lab",e.l,e.a,e.b):e.r||e.g||e.b?Cb("rgb",e.r,e.g,e.b):null}function rDe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ke(n));for(;t.length&&ln(t)==null;)t.pop();return t.unshift(SJ(e.gradient)),`gradient(${t.join(",")})`}function gv(e){return Ye(e)?"("+OS(e)+")":e}function EJ(e){return AJ(Ye(e)?e:{datum:e})}function AJ(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):he("Invalid field reference: "+ke(e));return e.signal||(i=Fe(i)?Ol(i).map(ke).join("]["):AJ(i)),t+"["+i+"]"}function sDe(e,t){const n=SJ(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+gv(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function aDe(e){let t="";return e.forEach(n=>{const i=OS(n);t+=n.test?`(${n.test})?${i}:`:i}),ln(t)===":"&&(t+="null"),t}function OJ(e,t,n,i,r,s){const a={};s=s||{},s.encoders={$encode:a},e=nDe(e,t,n,i,r.config);for(const o in e)a[o]=oDe(e[o],t,s,r);return s}function oDe(e,t,n,i){const r={},s={};for(const a in e)e[a]!=null&&(r[a]=uDe(lDe(e[a]),i,n,s));return{$expr:{marktype:t,channels:r},$fields:Object.keys(s),$output:Object.keys(e)}}function lDe(e){return ge(e)?aDe(e):OS(e)}function uDe(e,t,n,i){const r=_l(e,t);return r.$fields.forEach(s=>i[s]=1),$t(n,r.$params),r.$expr}const cDe="outer",fDe=["value","update","init","react","bind"];function v8(e,t){he(e+' for "outer" push: '+ke(t))}function CJ(e,t){const n=e.name;if(e.push===cDe)t.signals[n]||v8("No prior signal definition",n),fDe.forEach(i=>{e[i]!==void 0&&v8("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function gx(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function CS(e,t,n,i){return new gx(e,t,n,i)}function C2(e,t){return CS("operator",e,t)}function ot(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function h1(e,t){return t?{$field:e,$name:t}:{$field:e}}const mx=h1("key");function _8(e,t){return{$compare:e,$order:t}}function dDe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const hDe="ascending",pDe="descending";function gDe(e){return Ye(e)?(e.order===pDe?"-":"+")+IS(e.op,e.field):""}function IS(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const SR="scope",yx="view";function Bi(e){return e&&e.signal}function mDe(e){return e&&e.expr}function mv(e){if(Bi(e))return!0;if(Ye(e)){for(const t in e)if(mv(e[t]))return!0}return!1}function Ua(e,t){return e??t}function Md(e){return e&&e.signal||e}const w8="timer";function p1(e,t){return(e.merge?bDe:e.stream?vDe:e.type?_De:he("Invalid stream specification: "+ke(e)))(e,t)}function yDe(e){return e===SR?yx:e||yx}function bDe(e,t){const n=e.merge.map(r=>p1(r,t)),i=ER({merge:n},e,t);return t.addStream(i).id}function vDe(e,t){const n=p1(e.stream,t),i=ER({stream:n},e,t);return t.addStream(i).id}function _De(e,t){let n;e.type===w8?(n=t.event(w8,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(yDe(e.source),e.type);const i=ER({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function ER(e,t,n){let i=t.between;return i&&(i.length!==2&&he('Stream "between" parameter must have 2 entries: '+ke(t)),e.between=[p1(i[0],n),p1(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(wDe(t.marktype,t.markname,t.markrole)),t.source===SR&&i.push("inScope(event.item)"),i.length&&(e.filter=_l("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function wDe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const SDe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function EDe(e,t,n){const i=e.encode,r={target:n};let s=e.events,a=e.update,o=[];s||he("Signal update missing events specification."),Fe(s)&&(s=wf(s,t.isSubscope()?SR:yx)),s=Pe(s).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[ODe(o)]),s.length&&o.push(s.length>1?{merge:s}:s[0]),i!=null&&(a&&he("Signal encode and update are mutually exclusive."),a="encode(item(),"+ke(i)+")"),r.update=Fe(a)?_l(a,t):a.expr!=null?_l(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:SDe,$params:{$value:t.signalRef(a.signal)}}:he("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate($t(ADe(l,t),r)))}function ADe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):p1(e,t)}}function ODe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function CDe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?he("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=_l(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>EDe(r,t,n.id))}const zn=e=>(t,n,i)=>CS(e,n,t||void 0,i),IJ=zn("aggregate"),IDe=zn("axisticks"),xJ=zn("bound"),So=zn("collect"),S8=zn("compare"),xDe=zn("datajoin"),TJ=zn("encode"),TDe=zn("expression"),kDe=zn("facet"),MDe=zn("field"),DDe=zn("key"),RDe=zn("legendentries"),LDe=zn("load"),NDe=zn("mark"),FDe=zn("multiextent"),PDe=zn("multivalues"),BDe=zn("overlap"),jDe=zn("params"),kJ=zn("prefacet"),UDe=zn("projection"),zDe=zn("proxy"),VDe=zn("relay"),MJ=zn("render"),$De=zn("scale"),Sh=zn("sieve"),HDe=zn("sortitems"),DJ=zn("viewlayout"),WDe=zn("values");let qDe=0;const RJ={min:"min",max:"max",count:"sum"};function GDe(e,t){const n=e.type||"linear";TG(n)||he("Unrecognized scale type: "+ke(n)),t.addScale(e.name,{type:n,domain:void 0})}function YDe(e,t){const n=t.getScale(e.name).params;let i;n.domain=LJ(e.domain,e,t),e.range!=null&&(n.range=FJ(e,t,n)),e.interpolate!=null&&rRe(e.interpolate,n),e.nice!=null&&(n.nice=iRe(e.nice)),e.bins!=null&&(n.bins=nRe(e.bins,t));for(i in e)at(n,i)||i==="name"||(n[i]=ga(e[i],t))}function ga(e,t){return Ye(e)?e.signal?t.signalRef(e.signal):he("Unsupported object: "+ke(e)):e}function yv(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ga(n,t))}function xS(e){he("Can not find data set: "+ke(e))}function LJ(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&he("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ge(e)?XDe:e.fields?JDe:KDe)(e,t,n)}function XDe(e,t,n){return e.map(i=>ga(i,n))}function KDe(e,t,n){const i=n.getData(e.data);return i||xS(e.data),ag(t.type)?i.valuesRef(n,e.field,NJ(e.sort,!1)):DG(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function JDe(e,t,n){const i=e.data,r=e.fields.reduce((s,a)=>(a=Fe(a)?{data:i,field:a}:ge(a)||a.signal?QDe(a,n):a,s.push(a),s),[]);return(ag(t.type)?ZDe:DG(t.type)?eRe:tRe)(e,n,r)}function QDe(e,t){const n="_:vega:_"+qDe++,i=So({});if(ge(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ke(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Sh({})]),{data:n,field:"data"}}function ZDe(e,t,n){const i=NJ(e.sort,!0);let r,s;const a=n.map(u=>{const c=t.getData(u.data);return c||xS(u.data),c.countsRef(t,u.field,i)}),o={groupby:mx,pulse:a};i&&(r=i.op||"count",s=i.field?IS(r,i.field):"count",o.ops=[RJ[r]],o.fields=[t.fieldRef(s)],o.as=[s]),r=t.add(IJ(o));const l=t.add(So({pulse:ot(r)}));return s=t.add(WDe({field:mx,sort:t.sortRef(i),pulse:ot(l)})),ot(s)}function NJ(e,t){return e&&(!e.field&&!e.op?Ye(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?he("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!RJ[e.op]&&he("Multiple domain scales can not be sorted using "+e.op)),e}function eRe(e,t,n){const i=n.map(r=>{const s=t.getData(r.data);return s||xS(r.data),s.domainRef(t,r.field)});return ot(t.add(PDe({values:i})))}function tRe(e,t,n){const i=n.map(r=>{const s=t.getData(r.data);return s||xS(r.data),s.extentRef(t,r.field)});return ot(t.add(FDe({extents:i})))}function nRe(e,t){return e.signal||ge(e)?yv(e,t):t.objectProperty(e)}function iRe(e){return Ye(e)?{interval:ga(e.interval),step:ga(e.step)}:ga(e)}function rRe(e,t){t.interpolate=ga(e.type||e),e.gamma!=null&&(t.interpolateGamma=ga(e.gamma))}function FJ(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Fe(r)){if(i&&at(i,r))return e=$t({},e,{range:i[r]}),FJ(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=ag(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:he("Unrecognized scale range value: "+ke(r))}else if(r.scheme){n.scheme=ge(r.scheme)?yv(r.scheme,t):ga(r.scheme,t),r.extent&&(n.schemeExtent=yv(r.extent,t)),r.count&&(n.schemeCount=ga(r.count,t));return}else if(r.step){n.rangeStep=ga(r.step,t);return}else{if(ag(e.type)&&!ge(r))return LJ(r,e,t);ge(r)||he("Unsupported range type: "+ke(r))}return r.map(s=>(ge(s)?yv:ga)(s,t))}function sRe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=bx(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=bx(n[r],r,t));t.addProjection(e.name,i)}function bx(e,t,n){return ge(e)?e.map(i=>bx(i,t,n)):Ye(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:he("Unsupported parameter object: "+ke(e)):e}const Eo="top",em="left",tm="right",Qc="bottom",PJ="center",aRe="vertical",oRe="start",lRe="middle",uRe="end",vx="index",AR="label",cRe="offset",mg="perc",fRe="perc2",ba="value",by="guide-label",OR="guide-title",dRe="group-title",hRe="group-subtitle",E8="symbol",bv="gradient",_x="discrete",wx="size",pRe="shape",gRe="fill",mRe="stroke",yRe="strokeWidth",bRe="strokeDash",vRe="opacity",CR=[wx,pRe,gRe,mRe,yRe,bRe,vRe],vy={name:1,style:1,interactive:1},fn={value:0},va={value:1},TS="group",BJ="rect",IR="rule",_Re="symbol",Eh="text";function g1(e){return e.type=TS,e.interactive=e.interactive||!1,e}function Ls(e,t){const n=(i,r)=>Ua(e[i],Ua(t[i],r));return n.isVertical=i=>aRe===Ua(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ua(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ua(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ua(e.columns,Ua(t.columns,+n.isVertical(!0))),n}function jJ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function wRe(e,t,n){const i=t.config.style[n];return i&&i[e]}function kS(e,t,n){return`item.anchor === '${oRe}' ? ${e} : item.anchor === '${uRe}' ? ${t} : ${n}`}const xR=kS(ke(em),ke(tm),ke(PJ));function SRe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ye(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function UJ(e,t){return t?e?Ye(e)?Object.assign({},e,{offset:UJ(e.offset,t)}):{value:e,offset:t}:t:e}function ea(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Zg(e.encode,t,vy)):e.interactive=!1,e}function ERe(e,t,n,i){const r=Ls(e,n),s=r.isVertical(),a=r.gradientThickness(),o=r.gradientLength();let l,u,c,f,d;s?(u=[0,1],c=[0,0],f=a,d=o):(u=[0,0],c=[1,0],f=o,d=a);const h={enter:l={opacity:fn,x:fn,y:fn,width:Yi(f),height:Yi(d)},update:$t({},l,{opacity:va,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:fn}};return or(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),ea({type:BJ,role:KMe,encode:h},i)}function ARe(e,t,n,i,r){const s=Ls(e,n),a=s.isVertical(),o=s.gradientThickness(),l=s.gradientLength();let u,c,f,d,h="";a?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:fn,fill:{scale:t,field:ba}};p[u]={signal:h+"datum."+mg,mult:l},p[c]=fn,p[f]={signal:h+"datum."+fRe,mult:l},p[d]=Yi(o);const g={enter:p,update:$t({},p,{opacity:va}),exit:{opacity:fn}};return or(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ea({type:BJ,role:YMe,key:ba,from:r,encode:g},i)}const ORe=`datum.${mg}<=0?"${em}":datum.${mg}>=1?"${tm}":"${PJ}"`,CRe=`datum.${mg}<=0?"${Qc}":datum.${mg}>=1?"${Eo}":"${lRe}"`;function A8(e,t,n,i){const r=Ls(e,t),s=r.isVertical(),a=Yi(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:fn},update:c={opacity:va,text:{field:AR}},exit:{opacity:fn}};return or(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Ua(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:CRe},f="y",d="x",h="1-"):(u.align=c.align={signal:ORe},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+mg,mult:o},u[d]=c[d]=a,a.offset=Ua(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+vx}:void 0,ea({type:Eh,role:wJ,style:by,key:ba,from:i,encode:p,overlap:l},n)}function IRe(e,t,n,i,r){const s=Ls(e,t),a=n.entries,o=!!(a&&a.interactive),l=a?a.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${r}) ? datum.${cRe} : datum.${wx}`,h=u?Yi(u):{field:wx},p=`datum.${vx}`,g=`max(1, ${r})`;let m,y,b,v,_;h.mult=.5,m={enter:y={opacity:fn,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:va,x:y.x,y:y.y},exit:{opacity:fn}};let S=null,E=null;e.fill||(S=t.symbolBaseFillColor,E=t.symbolBaseStrokeColor),or(m,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",E),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),CR.forEach(x=>{e[x]&&(b[x]=y[x]={scale:e[x],field:ba})});const w=ea({type:_Re,role:JMe,key:ba,from:f,clip:u?!0:void 0,encode:m},n.symbols),O=Yi(c);O.offset=s("labelOffset"),m={enter:y={opacity:fn,x:{signal:d,offset:O},y:h},update:b={opacity:va,text:{field:AR},x:y.x,y:y.y},exit:{opacity:fn}},or(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const D=ea({type:Eh,role:wJ,style:by,key:ba,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:fn,height:u?Yi(u):fn,opacity:fn},exit:{opacity:fn},update:b={opacity:va,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,b.row.signal=`${p}%${v}`,b.column.signal=`floor(${p} / ${v})`,_={field:["row",p]}):(b.row.signal=`floor(${p} / ${g})`,b.column.signal=`${p} % ${g}`,_={field:p}),b.column.signal=`(${r})?${b.column.signal}:${p}`,i={facet:{data:i,name:"value",groupby:vx}},g1({role:wR,from:i,encode:Zg(m,a,vy),marks:[w,D],name:l,interactive:o,sort:_})}function xRe(e,t){const n=Ls(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const TR='item.orient === "left"',kR='item.orient === "right"',MS=`(${TR} || ${kR})`,TRe=`datum.vgrad && ${MS}`,kRe=kS('"top"','"bottom"','"middle"'),MRe=kS('"right"','"left"','"center"'),DRe=`datum.vgrad && ${kR} ? (${MRe}) : (${MS} && !(datum.vgrad && ${TR})) ? "left" : ${xR}`,RRe=`item._anchor || (${MS} ? "middle" : "start")`,LRe=`${TRe} ? (${TR} ? -90 : 90) : 0`,NRe=`${MS} ? (datum.vgrad ? (${kR} ? "bottom" : "top") : ${kRe}) : "top"`;function FRe(e,t,n,i){const r=Ls(e,t),s={enter:{opacity:fn},update:{opacity:va,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:fn}};return or(s,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:RRe},angle:{signal:LRe},align:{signal:DRe},baseline:{signal:NRe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),ea({type:Eh,role:QMe,style:OR,from:i,encode:s},n)}function PRe(e,t){let n;return Ye(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+O8(e.path)+")":e.sphere&&(n="geoShape("+O8(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function O8(e){return Ye(e)&&e.signal?e.signal:ke(e)}function zJ(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===TS?wR:t||vR}function BRe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||zJ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function jRe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function MR(e,t){const n=LW(e.type);n||he("Unrecognized transform type: "+ke(e.type));const i=CS(n.type.toLowerCase(),null,VJ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function VJ(e,t,n){const i={},r=e.params.length;for(let s=0;s<r;++s){const a=e.params[s];i[a.name]=URe(a,t,n)}return i}function URe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return zRe(e,t,n);if(r===void 0){e.required&&he("Missing required "+ke(t.type)+" parameter: "+ke(e.name));return}else{if(i==="param")return VRe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!Bi(r)?r.map(s=>C8(e,s,n)):C8(e,r,n)}function C8(e,t,n){const i=e.type;if(Bi(t))return x8(i)?he("Expression references can not be signals."):xO(i)?n.fieldRef(t):T8(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||xO(i);return r&&$Re(t)?n.exprRef(t.expr,t.as):r&&HRe(t)?h1(t.field,t.as):x8(i)?_l(t,n):WRe(i)?ot(n.getData(t).values):xO(i)?h1(t):T8(i)?n.compareRef(t):t}}function zRe(e,t,n){return Fe(t.from)||he('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function VRe(e,t,n){const i=t[e.name];return e.array?(ge(i)||he("Expected an array of sub-parameters. Instead: "+ke(i)),i.map(r=>I8(e,r,n))):I8(e,i,n)}function I8(e,t,n){const i=e.params.length;let r;for(let a=0;a<i;++a){r=e.params[a];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||he("Unsupported parameter: "+ke(t));const s=$t(VJ(r,t,n),r.key);return ot(n.add(jDe(s)))}const $Re=e=>e&&e.expr,HRe=e=>e&&e.field,WRe=e=>e==="data",x8=e=>e==="expr",xO=e=>e==="field",T8=e=>e==="compare";function qRe(e,t,n){let i,r,s,a,o;return e?(i=e.facet)&&(t||he("Only group marks can be faceted."),i.field!=null?a=o=vv(i,n):(e.data?o=ot(n.getData(e.data).aggregate):(s=MR($t({type:"aggregate",groupby:Pe(i.groupby)},i.aggregate),n),s.params.key=n.keyRef(i.groupby),s.params.pulse=vv(i,n),a=o=ot(n.add(s))),r=n.keyRef(i.groupby,!0))):a=ot(n.add(So(null,[{}]))),a||(a=vv(e,n)),{key:r,pulse:a,parent:o}}function vv(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ot(t.getData(e.data).output)}function Zd(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Zd.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let s=t[0],a=null,o=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=ot(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(a=t[o]);return new Zd(e,s,r,i,a)};function $J(e){return Fe(e)?e:null}function k8(e,t,n){const i=IS(n.op,n.field);let r;if(t.ops){for(let s=0,a=t.as.length;s<a;++s)if(t.as[s]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function jm(e,t,n,i,r,s,a){const o=t[n]||(t[n]={}),l=gDe(s);let u=$J(r),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=o[u]),!c){const d=s?{field:mx,pulse:t.countsRef(e,r,s)}:{field:e.fieldRef(r),pulse:ot(t.output)};l&&(d.sort=e.sortRef(s)),f=e.add(CS(i,void 0,d)),a&&(t.index[r]=f),c=ot(f),u!=null&&(o[u]=c)}return c}Zd.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),s=$J(t);let a,o,l;return s!=null&&(e=i.scope,a=r[s]),a?n&&n.field&&k8(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ot(i.output)},n&&n.field&&k8(e,l,n),o=e.add(IJ(l)),a=e.add(So({pulse:ot(o)})),a={agg:o,ref:ot(a)},s!=null&&(r[s]=a)),a.ref},tuplesRef(){return ot(this.values)},extentRef(e,t){return jm(e,this,"extent","extent",t,!1)},domainRef(e,t){return jm(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return jm(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return jm(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return jm(e,this,"indata","tupleindex",t,!0,!0)}};function GRe(e,t,n){const i=e.from.facet,r=i.name,s=vv(i,t);let a;i.name||he("Facet must have a name: "+ke(i)),i.data||he("Facet must reference a data set: "+ke(i)),i.field?a=t.add(kJ({field:t.fieldRef(i.field),pulse:s})):i.groupby?a=t.add(kDe({key:t.keyRef(i.groupby),group:ot(t.proxy(n.parent)),pulse:s})):he("Facet must specify groupby or field: "+ke(i));const o=t.fork(),l=o.add(So()),u=o.add(Sh({pulse:ot(l)}));o.addData(r,new Zd(o,l,l,u)),o.addSignal("parent",null),a.params.subflow={$subflow:o.parse(e).toRuntime()}}function YRe(e,t,n){const i=t.add(kJ({pulse:n.pulse})),r=t.fork();r.add(Sh()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function HJ(e,t,n){const i=e.remove,r=e.insert,s=e.toggle,a=e.modify,o=e.values,l=t.add(C2()),u="if("+e.trigger+',modify("'+n+'",'+[r,i,s,a,o].map(f=>f??"null").join(",")+"),0)",c=_l(u,t);l.update=c.$expr,l.params=c.$params}function DS(e,t){const n=zJ(e),i=e.type===TS,r=e.from&&e.from.facet,s=e.overlap;let a=e.layout||n===wR||n===_R,o,l,u,c,f,d,h;const p=n===vR||a||r,g=qRe(e.from,i,t);l=t.add(xDe({key:g.key||(e.key?h1(e.key):void 0),pulse:g.pulse,clean:!i}));const m=ot(l);l=u=t.add(So({pulse:m})),l=t.add(NDe({markdef:BRe(e),interactive:jRe(e.interactive,t),clip:PRe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ot(l)}));const y=ot(l);l=c=t.add(TJ(OJ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(E=>{const w=MR(E,t),O=w.metadata;(O.generates||O.changes)&&he("Mark transforms should not generate new data."),O.nomod||(c.params.mod=!0),w.params.pulse=ot(l),t.add(l=w)}),e.sort&&(l=t.add(HDe({sort:t.compareRef(e.sort),pulse:ot(l)})));const b=ot(l);(r||a)&&(a=t.add(DJ({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=ot(a));const v=t.add(xJ({mark:y,pulse:d||b}));h=ot(v),i&&(p&&(o=t.operators,o.pop(),a&&o.pop()),t.pushState(b,d||h,m),r?GRe(e,t,g):p?YRe(e,t,g):t.parse(e),t.popState(),p&&(a&&o.push(a),o.push(v))),s&&(h=XRe(s,h,t));const _=t.add(MJ({pulse:h})),S=t.add(Sh({pulse:ot(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Zd(t,u,_,S)),e.on&&e.on.forEach(E=>{(E.insert||E.remove||E.toggle)&&he("Marks only support modify triggers."),HJ(E,t,f)}))}function XRe(e,t,n){const i=e.method,r=e.bound,s=e.separation,a={separation:Bi(s)?n.signalRef(s.signal):s,method:Bi(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;a.boundTolerance=Bi(o)?n.signalRef(o.signal):+o,a.boundScale=n.scaleRef(r.scale),a.boundOrient=r.orient}return ot(n.add(BDe(a)))}function KRe(e,t){const n=t.config.legend,i=e.encode||{},r=Ls(e,n),s=i.legend||{},a=s.name||void 0,o=s.interactive,l=s.style,u={};let c=0,f,d,h;CR.forEach(v=>e[v]?(u[v]=e[v],c=c||e[v]):0),c||he("Missing valid scale for legend.");const p=JRe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&r.isVertical()},m=ot(t.add(So(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},b=ot(t.add(RDe(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===bv?(h=[ERe(e,c,n,i.gradient),A8(e,n,i.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${Md(r.gradientLength())})/100))`)):p===_x?h=[ARe(e,c,n,i.gradient,b),A8(e,n,i.labels,b)]:(f=xRe(e,n),h=[IRe(e,n,i,b,Md(f.columns))],d.size=eLe(e,t,h[0].marks)),h=[g1({role:XMe,from:m,encode:y,marks:h,layout:f,interactive:o})],g.title&&h.push(FRe(e,n,i.title,m)),DS(g1({role:GMe,from:m,encode:Zg(ZRe(r,e,n),s,vy),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:a,interactive:o,style:l}),t)}function JRe(e,t){let n=e.type||E8;return!e.type&&QRe(e)===1&&(e.fill||e.stroke)&&(n=IM(t)?bv:dI(t)?_x:E8),n!==bv?n:dI(t)?_x:bv}function QRe(e){return CR.reduce((t,n)=>t+(e[n]?1:0),0)}function ZRe(e,t,n){const i={enter:{},update:{}};return or(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function eLe(e,t,n){const i=Md(M8("size",e,n)),r=Md(M8("strokeWidth",e,n)),s=Md(tLe(n[1].encode,t,by));return _l(`max(ceil(sqrt(${i})+${r}),${s})`,t)}function M8(e,t,n){return t[e]?`scale("${t[e]}",datum)`:jJ(e,n[0].encode)}function tLe(e,t,n){return jJ("fontSize",e)||wRe("fontSize",t,n)}const nLe=`item.orient==="${em}"?-90:item.orient==="${tm}"?90:0`;function iLe(e,t){e=Fe(e)?{text:e}:e;const n=Ls(e,t.config.title),i=e.encode||{},r=i.group||{},s=r.name||void 0,a=r.interactive,o=r.style,l=[],u={},c=ot(t.add(So(null,[u])));return l.push(aLe(e,n,rLe(e),c)),e.subtitle&&l.push(oLe(e,n,i.subtitle,c)),DS(g1({role:ZMe,from:c,encode:sLe(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:o}),t)}function rLe(e){const t=e.encode;return t&&t.title||$t({name:e.name,interactive:e.interactive,style:e.style},t)}function sLe(e,t){const n={enter:{},update:{}};return or(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:xR},angle:{signal:nLe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Zg(n,t,vy)}function aLe(e,t,n,i){const r={value:0},s=e.text,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return or(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ea({type:Eh,role:eDe,style:dRe,from:i,encode:a},n)}function oLe(e,t,n,i){const r={value:0},s=e.subtitle,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return or(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ea({type:Eh,role:tDe,style:hRe,from:i,encode:a},n)}function lLe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(MR(i,t))}),e.on&&e.on.forEach(i=>{HJ(i,t,e.name)}),t.addDataPipeline(e.name,uLe(e,t,n))}function uLe(e,t,n){const i=[];let r=null,s=!1,a=!1,o,l,u,c,f;for(e.values?Bi(e.values)||mv(e.format)?(i.push(D8(t,e)),i.push(r=jf())):i.push(r=jf({$ingest:e.values,$format:e.format})):e.url?mv(e.url)||mv(e.format)?(i.push(D8(t,e)),i.push(r=jf())):i.push(r=jf({$request:e.url,$format:e.format})):e.source&&(r=o=Pe(e.source).map(d=>ot(t.getData(d).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!r&&!f.source&&i.push(r=jf()),i.push(c),f.generates&&(a=!0),f.modifies&&!a&&(s=!0),f.source?r=c:f.changes&&(r=null);return o&&(u=o.length-1,i[0]=VDe({derive:s,pulse:u?o:o[0]}),(s||u)&&i.splice(1,0,jf())),r||i.push(jf()),i.push(Sh({})),i}function jf(e){const t=So({},e);return t.metadata={source:!0},t}function D8(e,t){return LDe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const WJ=e=>e===Qc||e===Eo,RS=(e,t,n)=>Bi(e)?hLe(e.signal,t,n):e===em||e===Eo?t:n,Xi=(e,t,n)=>Bi(e)?fLe(e.signal,t,n):WJ(e)?t:n,so=(e,t,n)=>Bi(e)?dLe(e.signal,t,n):WJ(e)?n:t,qJ=(e,t,n)=>Bi(e)?pLe(e.signal,t,n):e===Eo?{value:t}:{value:n},cLe=(e,t,n)=>Bi(e)?gLe(e.signal,t,n):e===tm?{value:t}:{value:n},fLe=(e,t,n)=>GJ(`${e} === '${Eo}' || ${e} === '${Qc}'`,t,n),dLe=(e,t,n)=>GJ(`${e} !== '${Eo}' && ${e} !== '${Qc}'`,t,n),hLe=(e,t,n)=>DR(`${e} === '${em}' || ${e} === '${Eo}'`,t,n),pLe=(e,t,n)=>DR(`${e} === '${Eo}'`,t,n),gLe=(e,t,n)=>DR(`${e} === '${tm}'`,t,n),GJ=(e,t,n)=>(t=t!=null?Yi(t):t,n=n!=null?Yi(n):n,R8(t)&&R8(n)?(t=t?t.signal||ke(t.value):null,n=n?n.signal||ke(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[$t({test:e},t)].concat(n||[])),R8=e=>e==null||Object.keys(e).length===1,DR=(e,t,n)=>({signal:`${e} ? (${dp(t)}) : (${dp(n)})`}),mLe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${em}' ? (${dp(i)}) : `:"")+(n!=null?`${e} === '${Qc}' ? (${dp(n)}) : `:"")+(r!=null?`${e} === '${tm}' ? (${dp(r)}) : `:"")+(t!=null?`${e} === '${Eo}' ? (${dp(t)}) : `:"")+"(null)"}),dp=e=>Bi(e)?e.signal:e==null?null:ke(e),yLe=(e,t)=>t===0?0:Bi(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Cp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Wh(e,t,n,i){let r;if(t&&at(t,e))return t[e];if(at(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[OR][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[by][r]}return null}function L8(e){const t={};for(const n of e)if(!!n)for(const i in n)t[i]=1;return Object.keys(t)}function bLe(e,t){var n=t.config,i=n.style,r=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,o,l,u;if(Bi(a)){const f=L8([n.axisX,n.axisY]),d=L8([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(u of f)o[u]=Xi(a,Wh(u,n.axisX,r,i),Wh(u,n.axisY,r,i));l={};for(u of d)l[u]=mLe(a.signal,Wh(u,n.axisTop,r,i),Wh(u,n.axisBottom,r,i),Wh(u,n.axisLeft,r,i),Wh(u,n.axisRight,r,i))}else o=a===Eo||a===Qc?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return o||l||s?$t({},r,o,l,s):r}function vLe(e,t,n,i){const r=Ls(e,t),s=e.orient;let a,o;const l={enter:a={opacity:fn},update:o={opacity:va},exit:{opacity:fn}};or(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=N8(e,0),c=N8(e,1);return a.x=o.x=Xi(s,u,fn),a.x2=o.x2=Xi(s,c),a.y=o.y=so(s,u,fn),a.y2=o.y2=so(s,c),ea({type:IR,role:VMe,from:i,encode:l},n)}function N8(e,t){return{scale:e.scale,range:t}}function _Le(e,t,n,i,r){const s=Ls(e,t),a=e.orient,o=e.gridScale,l=RS(a,1,-1),u=wLe(e.offset,l);let c,f,d;const h={enter:c={opacity:fn},update:d={opacity:va},exit:f={opacity:fn}};or(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:ba,band:r.band,extra:r.extra,offset:r.offset,round:s("tickRound")},g=Xi(a,{signal:"height"},{signal:"width"}),m=o?{scale:o,range:0,mult:l,offset:u}:{value:0,offset:u},y=o?{scale:o,range:1,mult:l,offset:u}:$t(g,{mult:l,offset:u});return c.x=d.x=Xi(a,p,m),c.y=d.y=so(a,p,m),c.x2=d.x2=so(a,y),c.y2=d.y2=Xi(a,y),f.x=Xi(a,p),f.y=so(a,p),ea({type:IR,role:$Me,key:ba,from:i,encode:h},n)}function wLe(e,t){if(t!==1)if(!Ye(e))e=Bi(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=$t({},e);for(;n.mult!=null;)if(Ye(n.mult))n=n.mult=$t({},n.mult);else return n.mult=Bi(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function SLe(e,t,n,i,r,s){const a=Ls(e,t),o=e.orient,l=RS(o,-1,1);let u,c,f;const d={enter:u={opacity:fn},update:f={opacity:va},exit:c={opacity:fn}};or(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=Yi(r);h.mult=l;const p={scale:e.scale,field:ba,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return f.y=u.y=Xi(o,fn,p),f.y2=u.y2=Xi(o,h),c.x=Xi(o,p),f.x=u.x=so(o,fn,p),f.x2=u.x2=so(o,h),c.y=so(o,p),ea({type:IR,role:WMe,key:ba,from:i,encode:d},n)}function TO(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function ELe(e,t,n,i,r,s){const a=Ls(e,t),o=e.orient,l=e.scale,u=RS(o,-1,1),c=Md(a("labelFlush")),f=Md(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p=c===0||!!c,g;const m=Yi(r);m.mult=u,m.offset=Yi(a("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:ba,band:.5,offset:UJ(s.offset,a("labelOffset"))},b=Xi(o,p?TO(l,c,'"left"','"right"','"center"'):{value:"center"},cLe(o,"left","right")),v=Xi(o,qJ(o,"bottom","top"),p?TO(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=TO(l,c,`-(${f})`,f,0);p=p&&f;const S={opacity:fn,x:Xi(o,y,m),y:so(o,y,m)},E={enter:S,update:g={opacity:va,text:{field:AR},x:S.x,y:S.y,align:b,baseline:v},exit:{opacity:fn,x:S.x,y:S.y}};or(E,{dx:!d&&p?Xi(o,_):null,dy:!h&&p?so(o,_):null}),or(E,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const w=a("labelBound");let O=a("labelOverlap");return O=O||w?{separation:a("labelSeparation"),method:O,order:"datum.index",bound:w?{scale:l,orient:o,tolerance:w}:null}:void 0,g.align!==b&&(g.align=Cp(g.align,b)),g.baseline!==v&&(g.baseline=Cp(g.baseline,v)),ea({type:Eh,role:HMe,style:by,key:ba,from:i,encode:E,overlap:O},n)}function ALe(e,t,n,i){const r=Ls(e,t),s=e.orient,a=RS(s,-1,1);let o,l;const u={enter:o={opacity:fn,anchor:Yi(r("titleAnchor",null)),align:{signal:xR}},update:l=$t({},o,{opacity:va,text:Yi(e.title)}),exit:{opacity:fn}},c={signal:`lerp(range("${e.scale}"), ${kS(0,1,.5)})`};return l.x=Xi(s,c),l.y=so(s,c),o.angle=Xi(s,fn,yLe(a,90)),o.baseline=Xi(s,qJ(s,Qc,Eo),{value:Qc}),l.angle=o.angle,l.baseline=o.baseline,or(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),OLe(r,s,u,n),u.update.align=Cp(u.update.align,o.align),u.update.angle=Cp(u.update.angle,o.angle),u.update.baseline=Cp(u.update.baseline,o.baseline),ea({type:Eh,role:qMe,style:OR,from:i,encode:u},n)}function OLe(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=Cp(Yi(o),n.update[l]),!1):!Zh(l,i),s=r(e("titleX"),"x"),a=r(e("titleY"),"y");n.enter.auto=a===s?Yi(a):Xi(t,Yi(a),Yi(s))}function CLe(e,t){const n=bLe(e,t),i=e.encode||{},r=i.axis||{},s=r.name||void 0,a=r.interactive,o=r.style,l=Ls(e,n),u=SRe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ot(t.add(So({},[c]))),d=ot(t.add(IDe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(_Le(e,n,i.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(SLe(e,n,i.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(ELe(e,n,i.labels,d,p,u))),c.domain&&h.push(vLe(e,n,i.domain,f)),c.title&&h.push(ALe(e,n,i.title,f)),DS(g1({role:zMe,from:f,encode:Zg(ILe(l,e),r,vy),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:a,style:o}),t)}function ILe(e,t){const n={enter:{},update:{}};return or(n,{orient:e("orient"),offset:e("offset")||0,position:Ua(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function YJ(e,t,n){const i=Pe(e.signals),r=Pe(e.scales);return n||i.forEach(s=>CJ(s,t)),Pe(e.projections).forEach(s=>sRe(s,t)),r.forEach(s=>GDe(s,t)),Pe(e.data).forEach(s=>lLe(s,t)),r.forEach(s=>YDe(s,t)),(n||i).forEach(s=>CDe(s,t)),Pe(e.axes).forEach(s=>CLe(s,t)),Pe(e.marks).forEach(s=>DS(s,t)),Pe(e.legends).forEach(s=>KRe(s,t)),e.title&&iLe(e.title,t),t.parseLambdas(),t}const xLe=e=>Zg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function TLe(e,t){const n=t.config,i=ot(t.root=t.add(C2())),r=kLe(e,n);r.forEach(u=>CJ(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(So()),a=t.add(TJ(OJ(xLe(e.encode),TS,_R,e.style,t,{pulse:ot(s)}))),o=t.add(DJ({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:ot(a)}));t.operators.pop(),t.pushState(ot(a),ot(o),null),YJ(e,t,r),t.operators.push(o);let l=t.add(xJ({mark:i,pulse:ot(o)}));return l=t.add(MJ({pulse:ot(l)})),l=t.add(Sh({pulse:ot(l)})),t.addData("root",new Zd(t,s,s,l)),t}function Um(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function kLe(e,t){const n=a=>Ua(e[a],t[a]),i=[Um("background",n("background")),Um("autosize",BMe(n("autosize"))),Um("padding",UMe(n("padding"))),Um("width",n("width")||0),Um("height",n("height")||0)],r=i.reduce((a,o)=>(a[o.name]=o,a),{}),s={};return Pe(e.signals).forEach(a=>{at(r,a.name)?a=$t(r[a.name],a):i.push(a),s[a.name]=a}),Pe(t.signals).forEach(a=>{!at(s,a.name)&&!at(r,a.name)&&i.push(a)}),i}function XJ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function F8(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}XJ.prototype=F8.prototype={parse(e){return YJ(e,this)},fork(){return new F8(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof gx?ot(e):e;return this.add(zDe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,s){let a,o;i&&(a=i.data||(i.data={}),o=a[r]||(a[r]=[]),o.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(ot(this.add(Sh({pulse:e})))),this._parent.push(t),this._lookup.push(n?ot(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return ln(this._parent)},encode(){return ln(this._encode)},lookup(){return ln(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Fe(e))return h1(e,t);e.signal||he("Unsupported field reference: "+ke(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=ot(this.add(MDe(r)))}return i},compareRef(e){let t=!1;const n=s=>Bi(s)?(t=!0,this.signalRef(s.signal)):mDe(s)?(t=!0,this.exprRef(s.expr)):s,i=Pe(e.field).map(n),r=Pe(e.order).map(n);return t?ot(this.add(S8({fields:i,orders:r}))):_8(i,r)},keyRef(e,t){let n=!1;const i=s=>Bi(s)?(n=!0,ot(r[s.signal])):s,r=this.signals;return e=Pe(e).map(i),n?ot(this.add(DDe({fields:e,flat:t}))):dDe(e,t)},sortRef(e){if(!e)return e;const t=IS(e.op,e.field),n=e.order||hDe;return n.signal?ot(this.add(S8({fields:t,orders:this.signalRef(n.signal)}))):_8(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return at(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&he("Duplicate signal name: "+ke(e));const n=t instanceof gx?t:this.add(C2(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||he("Unrecognized signal name: "+ke(e)),this.signals[e]},signalRef(e){return this.signals[e]?ot(this.signals[e]):(at(this.lambdas,e)||(this.lambdas[e]=this.add(C2(null))),ot(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=_l(i,this),s=this.lambdas[i];s.params=r.$params,s.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ye(e)?e:this.signalRef(e.signal||RR(e))},exprRef(e,t){const n={expr:_l(e,this)};return t&&(n.expr.$name=t),ot(this.add(TDe(n)))},addBinding(e,t){this.bindings||he("Nested signals do not support binding: "+ke(e)),this.bindings.push($t({signal:e},t))},addScaleProj(e,t){at(this.scales,e)&&he("Duplicate scale or projection name: "+ke(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,$De(t))},addProjection(e,t){this.addScaleProj(e,UDe(t))},getScale(e){return this.scales[e]||he("Unrecognized scale name: "+ke(e)),this.scales[e]},scaleRef(e){return ot(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return at(this.data,e)&&he("Duplicate data set name: "+ke(e)),this.data[e]=t},getData(e){return this.data[e]||he("Undefined data set name: "+ke(e)),this.data[e]},addDataPipeline(e,t){return at(this.data,e)&&he("Duplicate data set name: "+ke(e)),this.addData(e,Zd.fromEntries(this,t))}};function RR(e){return(ge(e)?MLe:DLe)(e)}function MLe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ye(r)?r.signal||RR(r):ke(r))}return n+"]"}function DLe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ke(i)+":"+(Ye(r)?r.signal||RR(r):ke(r));return t+"}"}function RLe(){const e="sans-serif",i="#4c78a8",r="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function LLe(e,t,n){return Ye(e)||he("Input Vega specification must be an object."),t=zg(RLe(),t,e.config),TLe(e,new XJ(t,n)).toRuntime()}var NLe="5.22.1";$t(tg,Ube,aEe,BEe,EOe,yCe,HIe,EIe,qIe,gxe,Oxe,Dxe);var FLe=Object.freeze(Object.defineProperty({__proto__:null,version:NLe,Dataflow:Sp,EventStream:Fw,MultiPulse:p3,Operator:Hn,Parameters:Nw,Pulse:Ec,Transform:ue,changeset:bh,definition:LW,ingest:xn,isTuple:Rw,transform:NW,transforms:tg,tupleid:lt,interpolate:xM,interpolateColors:eS,interpolateRange:RG,quantizeInterpolator:LG,scale:An,scheme:TM,projection:CD,View:hJ,defaultLocale:u3,formatLocale:__,locale:wW,resetDefaultLocale:U1e,timeFormatLocale:X0,expressionFunction:Ci,parse:LLe,runtimeContext:eJ,codegenExpression:zK,parseExpression:aR,parseSelector:wf,Debug:K$,Error:Fk,Info:X$,None:Y$,Warn:Pk,accessor:Rs,accessorFields:Ar,accessorName:gi,array:Pe,ascending:xw,clampRange:oH,compare:Vk,constant:kr,debounce:$k,error:he,extend:$t,extent:yl,extentIndex:lH,falsy:qu,fastmap:$g,field:Ss,flush:uH,hasOwnProperty:at,id:V1,identity:Tr,inherits:Te,inrange:op,isArray:ge,isBoolean:pf,isDate:_c,isFunction:Ht,isIterable:cH,isNumber:Un,isObject:Ye,isRegExp:fH,isString:Fe,key:Hk,lerp:dH,logger:Bk,lruCache:hH,merge:pH,mergeConfig:zg,one:Ug,pad:gH,panLinear:tH,panLog:nH,panPow:iH,panSymlog:rH,peek:ln,quarter:sH,repeat:Ym,span:$1,splitAccessPath:Ol,stringValue:ke,toBoolean:Wk,toDate:qk,toNumber:wr,toSet:po,toString:Gk,truncate:mH,truthy:Sa,utcquarter:aH,visitArray:Ju,writeConfig:Vg,zero:rc,zoomLinear:jk,zoomLog:Uk,zoomPow:d_,zoomSymlog:zk,bandwidthNRD:b3,bin:PW,bootstrapCI:BW,cumulativeLogNormal:A3,cumulativeNormal:Bw,cumulativeUniform:x3,densityLogNormal:E3,densityNormal:v3,densityUniform:I3,dotbin:jW,quantileLogNormal:O3,quantileNormal:jw,quantileUniform:T3,quantiles:m3,quartiles:y3,get random(){return Aa},randomInteger:Hye,randomKDE:w3,randomLCG:$ye,randomLogNormal:zW,randomMixture:VW,randomNormal:_3,randomUniform:$W,regressionExp:WW,regressionLinear:k3,regressionLoess:YW,regressionLog:HW,regressionPoly:GW,regressionPow:qW,regressionQuad:M3,sampleCurve:zw,sampleLogNormal:S3,sampleNormal:Pw,sampleUniform:C3,setRandom:zye,DATE:As,DAY:_r,DAYOFYEAR:bl,HOURS:Js,MILLISECONDS:go,MINUTES:Qs,MONTH:Or,QUARTER:Es,SECONDS:Ea,TIME_UNITS:r3,WEEK:Fi,YEAR:sr,dayofyear:HH,timeBin:oW,timeFloor:JH,timeInterval:qg,timeOffset:eW,timeSequence:iW,timeUnitSpecifier:$H,timeUnits:s3,utcFloor:QH,utcInterval:Gg,utcOffset:tW,utcSequence:rW,utcdayofyear:GH,utcweek:YH,week:WH,format:Jb,formats:d3,inferType:EW,inferTypes:AW,loader:Mw,read:IW,responseType:CW,typeParsers:ZC,path:gf,Bounds:Ai,CanvasHandler:uy,CanvasRenderer:U_,Gradient:GG,GroupItem:iS,Handler:Kc,Item:nS,Marks:Zs,RenderType:dc,Renderer:xl,ResourceLoader:FM,SVGHandler:eD,SVGRenderer:aD,SVGStringRenderer:oD,Scenegraph:QM,boundClip:zY,boundContext:sy,boundItem:vI,boundMark:dY,boundStroke:ku,domChild:fs,domClear:qa,domCreate:cc,domFind:ZM,font:lS,fontFamily:ly,fontSize:Il,intersect:PY,intersectBoxLine:lp,intersectPath:PM,intersectPoint:BM,intersectRule:tY,lineHeight:Yc,markup:sD,multiLineOffset:XM,pathCurves:RM,pathEqual:VY,pathParse:og,pathRectangle:KG,pathRender:t1,pathSymbols:XG,pathTrail:JG,point:cS,renderModule:fS,resetSVGClipId:ZG,resetSVGDefIds:SSe,sceneEqual:lD,sceneFromJSON:pY,scenePickVisit:L_,sceneToJSON:hY,sceneVisit:mo,sceneZOrder:jM,serializeXML:TY,textMetrics:ro},Symbol.toStringTag,{value:"Module"}));function PLe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var BLe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},jLe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},ULe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const zLe=Array.prototype.slice,Uf=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,zLe.call(t,1))},VLe=(e,t,n,i,r,s,a)=>new Date(e,t||0,n??1,i||0,r||0,s||0,a||0);var $Le={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:VLe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Uf("join",arguments)},indexof:function(){return Uf("indexOf",arguments)},lastindexof:function(){return Uf("lastIndexOf",arguments)},slice:function(){return Uf("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Uf("substring",arguments,String)},split:function(){return Uf("split",arguments,String)},replace:function(){return Uf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const HLe=["view","item","group","xy","x","y"],WLe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:BLe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);return n&&(e.memberDepth-=1),i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||$Le[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>jLe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>ULe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,n[r]=e(i.value),n},{})};function zm(e,t,n,i,r,s){const a=o=>WLe[o.type](a,o);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=i,a.event=r,a.item=s,HLe.forEach(o=>a.fn[o]=(...l)=>r.vega[o](...l)),a(e)}var qLe={operator(e,t){const n=t.ast,i=e.functions;return r=>zm(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,s)=>zm(n,i,s,r)},event(e,t){const n=t.ast,i=e.functions;return r=>zm(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,s)=>{const a=s.item&&s.item.datum;return zm(n,i,r,a,s)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,s=n==="group"||n==="image"||n==="rect";return(a,o)=>{const l=a.datum;let u=0,c;for(const f in i)c=zm(i[f].ast,r,o,l,void 0,a),a[f]!==c&&(a[f]=c,u=1);return n!=="rule"&&PLe(a,i,s),u}}};const GLe="vega-lite",YLe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',XLe="5.2.0",KLe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],JLe="https://vega.github.io/vega-lite/",QLe="Vega-Lite is a concise high-level language for interactive visualization.",ZLe="build/vega-lite.js",eNe="build/vega-lite.min.js",tNe="build/vega-lite.min.js",nNe="build/src/index",iNe="build/src/index.d.ts",rNe={vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2pdf:"./bin/vl2pdf",vl2vg:"./bin/vl2vg"},sNe={test:"test"},aNe=["bin","build","src","vega-lite*","tsconfig.json"],oNe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",eslintbase:"eslint .",format:"yarn eslintbase --fix && yarn prettierbase --write",lint:"yarn eslintbase && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/"},lNe={type:"git",url:"https://github.com/vega/vega-lite.git"},uNe="BSD-3-Clause",cNe={url:"https://github.com/vega/vega-lite/issues"},fNe={"@babel/core":"^7.16.0","@babel/preset-env":"^7.16.0","@babel/preset-typescript":"^7.16.0","@rollup/plugin-alias":"^3.1.8","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^21.0.1","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","@types/chai":"^4.2.22","@types/d3":"^7.1.0","@types/jest":"^27.0.2","@types/mkdirp":"^1.0.2","@types/pako":"^1.0.2","@typescript-eslint/eslint-plugin":"^5.4.0","@typescript-eslint/parser":"^5.4.0",ajv:"^8.8.0","ajv-formats":"^2.1.1",chai:"^4.3.4",cheerio:"^1.0.0-rc.10","conventional-changelog-cli":"^2.1.1",d3:"^7.1.1","del-cli":"^4.0.1",eslint:"^8.2.0","eslint-config-prettier":"^8.3.0","eslint-plugin-jest":"^25.2.4","eslint-plugin-prettier":"^4.0.0","gh-pages":"^3.2.3","highlight.js":"^11.3.1",jest:"^27.3.1","jest-dev-server":"^6.0.0",mkdirp:"^1.0.4",pako:"^2.0.4",prettier:"^2.4.1",puppeteer:"^11.0.0",rollup:"^2.60.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2",serve:"^13.0.2",terser:"^5.10.0","ts-jest":"^27.0.7","ts-json-schema-generator":"^0.97.0",typescript:"~4.5.2","vega-cli":"^5.21.0","vega-datasets":"~2.2.0","vega-embed":"^6.20.2","vega-tooltip":"^0.27.0","yaml-front-matter":"^4.1.1"},dNe={"@types/clone":"~2.1.1","array-flat-polyfill":"^1.0.1",clone:"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0",tslib:"~2.3.1","vega-event-selector":"~3.0.0","vega-expression":"~5.0.0","vega-util":"~1.17.0",yargs:"~17.2.1"},hNe={vega:"^5.21.0"},pNe={node:">=12"};var gNe={name:GLe,author:YLe,version:XLe,collaborators:KLe,homepage:JLe,description:QLe,main:ZLe,unpkg:eNe,jsdelivr:tNe,module:nNe,types:iNe,bin:rNe,directories:sNe,files:aNe,scripts:oNe,repository:lNe,license:uNe,bugs:cNe,devDependencies:fNe,dependencies:dNe,peerDependencies:hNe,engines:pNe};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,i){return Array.isArray(i)?n.push.apply(n,e.call(i,t-1)):n.push(i),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var KJ={exports:{}};(function(e){var t=function(){function n(d,h){return h!=null&&d instanceof h}var i;try{i=Map}catch{i=function(){}}var r;try{r=Set}catch{r=function(){}}var s;try{s=Promise}catch{s=function(){}}function a(d,h,p,g,m){typeof h=="object"&&(p=h.depth,g=h.prototype,m=h.includeNonEnumerable,h=h.circular);var y=[],b=[],v=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof p>"u"&&(p=1/0);function _(S,E){if(S===null)return null;if(E===0)return S;var w,O;if(typeof S!="object")return S;if(n(S,i))w=new i;else if(n(S,r))w=new r;else if(n(S,s))w=new s(function(N,R){S.then(function(T){N(_(T,E-1))},function(T){R(_(T,E-1))})});else if(a.__isArray(S))w=[];else if(a.__isRegExp(S))w=new RegExp(S.source,f(S)),S.lastIndex&&(w.lastIndex=S.lastIndex);else if(a.__isDate(S))w=new Date(S.getTime());else{if(v&&Buffer.isBuffer(S))return Buffer.allocUnsafe?w=Buffer.allocUnsafe(S.length):w=new Buffer(S.length),S.copy(w),w;n(S,Error)?w=Object.create(S):typeof g>"u"?(O=Object.getPrototypeOf(S),w=Object.create(O)):(w=Object.create(g),O=g)}if(h){var D=y.indexOf(S);if(D!=-1)return b[D];y.push(S),b.push(w)}n(S,i)&&S.forEach(function(N,R){var T=_(R,E-1),z=_(N,E-1);w.set(T,z)}),n(S,r)&&S.forEach(function(N){var R=_(N,E-1);w.add(R)});for(var x in S){var A;O&&(A=Object.getOwnPropertyDescriptor(O,x)),!(A&&A.set==null)&&(w[x]=_(S[x],E-1))}if(Object.getOwnPropertySymbols)for(var C=Object.getOwnPropertySymbols(S),x=0;x<C.length;x++){var I=C[x],L=Object.getOwnPropertyDescriptor(S,I);L&&!L.enumerable&&!m||(w[I]=_(S[I],E-1),L.enumerable||Object.defineProperty(w,I,{enumerable:!1}))}if(m)for(var k=Object.getOwnPropertyNames(S),x=0;x<k.length;x++){var M=k[x],L=Object.getOwnPropertyDescriptor(S,M);L&&L.enumerable||(w[M]=_(S[M],E-1),Object.defineProperty(w,M,{enumerable:!1}))}return w}return _(d,p)}a.clonePrototype=function(h){if(h===null)return null;var p=function(){};return p.prototype=h,new p};function o(d){return Object.prototype.toString.call(d)}a.__objToStr=o;function l(d){return typeof d=="object"&&o(d)==="[object Date]"}a.__isDate=l;function u(d){return typeof d=="object"&&o(d)==="[object Array]"}a.__isArray=u;function c(d){return typeof d=="object"&&o(d)==="[object RegExp]"}a.__isRegExp=c;function f(d){var h="";return d.global&&(h+="g"),d.ignoreCase&&(h+="i"),d.multiline&&(h+="m"),h}return a.__getRegExpFlags=f,a}();e.exports&&(e.exports=t)})(KJ);var mNe=KJ.exports,JJ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var a=s[r];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},LR=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(s){return function(a){return function(o,l){var u={key:o,value:a[o]},c={key:l,value:a[l]};return s(u,c)}}}(t.cmp),r=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var o,l;if(Array.isArray(a)){for(l="[",o=0;o<a.length;o++)o&&(l+=","),l+=s(a[o])||"null";return l+"]"}if(a===null)return"null";if(r.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=r.push(a)-1,c=Object.keys(a).sort(i&&i(a));for(l="",o=0;o<c.length;o++){var f=c[o],d=s(a[f]);!d||(l&&(l+=","),l+=JSON.stringify(f)+":"+d)}return r.splice(u,1),"{"+l+"}"}}(e)};function NR(e){return!!e.or}function FR(e){return!!e.and}function PR(e){return!!e.not}function _v(e,t){if(PR(e))_v(e.not,t);else if(FR(e))for(const n of e.and)_v(n,t);else if(NR(e))for(const n of e.or)_v(n,t);else t(e)}function Ip(e,t){return PR(e)?{not:Ip(e.not,t)}:FR(e)?{and:e.and.map(n=>Ip(n,t))}:NR(e)?{or:e.or.map(n=>Ip(n,t))}:t(e)}const el=JJ,Ft=mNe;function QJ(e){throw new Error(e)}function yg(e,t){const n={};for(const i of t)at(e,i)&&(n[i]=e[i]);return n}function Ys(e,t){const n=Object.assign({},e);for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>LR(e)).join(",")})`};const Yn=LR;function un(e){if(Un(e))return e;const t=Fe(e)?e:LR(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function Sx(e){return e===!1||e===null}function cn(e,t){return e.includes(t)}function eh(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function BR(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function ZJ(e,...t){for(const n of t)yNe(e,n??{});return e}function yNe(e,t){for(const n of Ae(t))Vg(e,n,t[n],!0)}function tl(e,t){const n=[],i={};let r;for(const s of e)r=t(s),!(r in i)&&(i[r]=1,n.push(s));return n}function bNe(e,t){const n=Ae(e),i=Ae(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function eQ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jR(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Ex(e){const t=new Set;for(const n of e){const r=Ol(n).map((a,o)=>o===0?a:`[${a}]`),s=r.map((a,o)=>r.slice(0,o+1).join(""));for(const a of s)t.add(a)}return t}function UR(e,t){return e===void 0||t===void 0?!0:jR(Ex(e),Ex(t))}function jn(e){return Ae(e).length===0}const Ae=Object.keys,xr=Object.values,Zc=Object.entries;function m1(e){return e===!0||e===!1}function ni(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function M0(e,t){return PR(e)?`!(${M0(e.not,t)})`:FR(e)?`(${e.and.map(n=>M0(n,t)).join(") && (")})`:NR(e)?`(${e.or.map(n=>M0(n,t)).join(") || (")})`:t(e)}function I2(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&I2(e[n],t)&&delete e[n],jn(e)}function _y(e){return e.charAt(0).toUpperCase()+e.substr(1)}function zR(e,t="datum"){const n=Ol(e),i=[];for(let r=1;r<=n.length;r++){const s=`[${n.slice(0,r).map(ke).join("][")}]`;i.push(`${t}${s}`)}return i.join(" && ")}function tQ(e,t="datum"){return`${t}[${ke(Ol(e).join("."))}]`}function vNe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ca(e){return`${Ol(e).map(vNe).join("\\.")}`}function th(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function VR(e){return`${Ol(e).join(".")}`}function bg(e){return e?Ol(e).length:0}function Oi(...e){for(const t of e)if(t!==void 0)return t}let nQ=42;function iQ(e){const t=++nQ;return e?String(e)+t:t}function _Ne(){nQ=42}function rQ(e){return sQ(e)?e:`__${e}`}function sQ(e){return e.startsWith("__")}function y1(e){if(e!==void 0)return(e%360+360)%360}function LS(e){return Un(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var wy=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const du="row",hu="column",NS="facet",li="x",Ki="y",Ao="x2",Ml="y2",Sf="xOffset",nm="yOffset",Dl="radius",Ru="radius2",Oo="theta",Lu="theta2",Rl="latitude",Ll="longitude",Co="latitude2",Ia="longitude2",Cs="color",Nl="fill",Fl="stroke",Is="shape",Nu="size",Ah="angle",Fu="opacity",Ef="fillOpacity",Af="strokeOpacity",Of="strokeWidth",Cf="strokeDash",Sy="text",Ey="order",Ay="detail",FS="key",nh="tooltip",PS="href",BS="url",jS="description",wNe={x:1,y:1,x2:1,y2:1},aQ={theta:1,theta2:1,radius:1,radius2:1};function oQ(e){return e in aQ}const $R={longitude:1,longitude2:1,latitude:1,latitude2:1};function SNe(e){switch(e){case Rl:return"y";case Co:return"y2";case Ll:return"x";case Ia:return"x2"}}function ENe(e){return e in $R}const ANe=Ae($R),HR=Object.assign(Object.assign(Object.assign(Object.assign({},wNe),aQ),$R),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function xp(e){return e===Cs||e===Nl||e===Fl}const lQ={row:1,column:1,facet:1},ma=Ae(lQ),WR=Object.assign(Object.assign({},HR),lQ),ONe=Ae(WR),CNe=wy(WR,["order","detail","tooltip"]),INe=wy(CNe,["row","column","facet"]);function xNe(e){return!!INe[e]}function uQ(e){return!!WR[e]}const TNe=[Ao,Ml,Co,Ia,Lu,Ru];function cQ(e){return Oh(e)!==e}function Oh(e){switch(e){case Ao:return li;case Ml:return Ki;case Co:return Rl;case Ia:return Ll;case Lu:return Oo;case Ru:return Dl}return e}function ef(e){if(oQ(e))switch(e){case Oo:return"startAngle";case Lu:return"endAngle";case Dl:return"outerRadius";case Ru:return"innerRadius"}return e}function Pu(e){switch(e){case li:return Ao;case Ki:return Ml;case Rl:return Co;case Ll:return Ia;case Oo:return Lu;case Dl:return Ru}}function xs(e){switch(e){case li:case Ao:return"width";case Ki:case Ml:return"height"}}function kNe(e){switch(e){case li:return"xOffset";case Ki:return"yOffset";case Ao:return"x2Offset";case Ml:return"y2Offset";case Oo:return"thetaOffset";case Dl:return"radiusOffset";case Lu:return"theta2Offset";case Ru:return"radius2Offset"}}function fQ(e){switch(e){case li:return"xOffset";case Ki:return"yOffset"}}function dQ(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const MNe=Ae(HR),qR=wy(HR,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),DNe=Ae(qR),GR={x:1,y:1},Pl=Ae(GR);function lr(e){return e in GR}const YR={theta:1,radius:1},RNe=Ae(YR);function US(e){return e==="width"?li:Ki}const hQ={xOffset:1,yOffset:1};function im(e){return e in hQ}const pQ=wy(qR,["text","tooltip","href","url","description","detail","key","order"]),LNe=Ae(pQ);function NNe(e){return!!qR[e]}function FNe(e){switch(e){case Cs:case Nl:case Fl:case Nu:case Is:case Fu:case Of:case Cf:return!0;case Ef:case Af:case Ah:return!1}}const gQ=Object.assign(Object.assign(Object.assign(Object.assign({},GR),YR),hQ),pQ),zS=Ae(gQ);function If(e){return!!gQ[e]}function PNe(e,t){return jNe(e)[t]}const mQ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},BNe=wy(mQ,["geoshape"]);function jNe(e){switch(e){case Cs:case Nl:case Fl:case jS:case Ay:case FS:case nh:case PS:case Ey:case Fu:case Ef:case Af:case Of:case NS:case du:case hu:return mQ;case li:case Ki:case Sf:case nm:case Rl:case Ll:return BNe;case Ao:case Ml:case Co:case Ia:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Nu:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Cf:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Is:return{point:"always",geoshape:"always"};case Sy:return{text:"always"};case Ah:return{point:"always",square:"always",text:"always"};case BS:return{image:"always"};case Oo:return{text:"always",arc:"always"};case Dl:return{text:"always",arc:"always"};case Lu:case Ru:return{arc:"always"}}}function kO(e){switch(e){case li:case Ki:case Oo:case Dl:case Sf:case nm:case Nu:case Ah:case Of:case Fu:case Ef:case Af:case Ao:case Ml:case Lu:case Ru:return;case NS:case du:case hu:case Is:case Cf:case Sy:case nh:case PS:case BS:case jS:return"discrete";case Cs:case Nl:case Fl:return"flexible";case Rl:case Ll:case Co:case Ia:case Ay:case FS:case Ey:return}}const UNe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},zNe={count:1,min:1,max:1};function Ou(e){return!!e&&!!e.argmin}function xf(e){return!!e&&!!e.argmax}function XR(e){return Fe(e)&&!!UNe[e]}const VNe=new Set(["count","valid","missing","distinct"]);function yQ(e){return Fe(e)&&VNe.has(e)}function $Ne(e){return Fe(e)&&cn(["min","max"],e)}const HNe=new Set(["count","sum","distinct","valid","missing"]),WNe=new Set(["mean","average","median","q1","q3","min","max"]);function bQ(e){return pf(e)&&(e=ZS(e,void 0)),"bin"+Ae(e).map(t=>VS(e[t])?ni(`_${t}_${Zc(e[t])}`):ni(`_${t}_${e[t]}`)).join("")}function Xn(e){return e===!0||Ch(e)&&!e.binned}function jr(e){return e==="binned"||Ch(e)&&e.binned===!0}function Ch(e){return Ye(e)}function VS(e){return e?.param}function P8(e){switch(e){case du:case hu:case Nu:case Cs:case Nl:case Fl:case Of:case Fu:case Ef:case Af:case Is:return 6;case Cf:return 4;default:return 10}}function Oy(e){return e&&!!e.expr}function us(e){const t=Ae(e||{}),n={};for(const i of t)n[i]=$s(e[i]);return n}var qNe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function vQ(e){const{anchor:t,frame:n,offset:i,orient:r,angle:s,limit:a,color:o,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p}=e,g=qNe(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=Object.assign(Object.assign({},g),o?{fill:o}:{}),y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),i?{offset:i}:{}),r?{orient:r}:{}),s!==void 0?{angle:s}:{}),a!==void 0?{limit:a}:{}),b=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{subtitleColor:l}:{}),u?{subtitleFont:u}:{}),c?{subtitleFontSize:c}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),h?{subtitleLineHeight:h}:{}),p?{subtitlePadding:p}:{}),v=yg(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:v,nonMarkTitleProperties:y,subtitle:b}}function tc(e){return Fe(e)||ge(e)&&Fe(e[0])}function st(e){return e&&!!e.signal}function Tf(e){return!!e.step}function GNe(e){return ge(e)?!1:"fields"in e&&!("data"in e)}function YNe(e){return ge(e)?!1:"fields"in e&&"data"in e}function ou(e){return ge(e)?!1:"field"in e&&"data"in e}const XNe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},KNe=Ae(XNe),JNe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Ax=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var KR=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function _Q(e){const t=ge(e.condition)?e.condition.map(B8):B8(e.condition);return Object.assign(Object.assign({},$s(e)),{condition:t})}function $s(e){if(Oy(e)){const{expr:t}=e,n=KR(e,["expr"]);return Object.assign({signal:t},n)}return e}function B8(e){if(Oy(e)){const{expr:t}=e,n=KR(e,["expr"]);return Object.assign({signal:t},n)}return e}function Jn(e){if(Oy(e)){const{expr:t}=e,n=KR(e,["expr"]);return Object.assign({signal:t},n)}return st(e)?e:e!==void 0?{value:e}:void 0}function QNe(e){return st(e)?e.signal:ke(e)}function j8(e){return st(e)?e.signal:ke(e.value)}function pu(e){return st(e)?e.signal:e==null?null:ke(e)}function ZNe(e,t,n){for(const i of n){const r=ih(i,t.markDef,t.config);r!==void 0&&(e[i]=Jn(r))}return e}function wQ(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function Dn(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:s}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:s&&(!r||r===e)?void 0:ih(e,t,n,i)}function ih(e,t,n,{vgChannel:i}={}){return Oi(i?x2(e,t,n.style):void 0,x2(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function x2(e,t,n){return SQ(e,wQ(t),n)}function SQ(e,t,n){t=Pe(t);let i;for(const r of t){const s=n[r];s&&s[e]!==void 0&&(i=s[e])}return i}function EQ(e,t){return Pe(e).reduce((n,i)=>{var r;return n.field.push(De(i,t)),n.order.push((r=i.sort)!==null&&r!==void 0?r:"ascending"),n},{field:[],order:[]})}function AQ(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(el(r,i))return;n.push(i)}),n}function OQ(e,t){return el(e,t)||!t?e:e?[...Pe(e),...Pe(t)].join(", "):t}function CQ(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((tc(n)||st(n))&&(tc(i)||st(i)))return{explicit:e.explicit,value:OQ(n,i)};if(tc(n)||st(n))return{explicit:e.explicit,value:n};if(tc(i)||st(i))return{explicit:e.explicit,value:i};if(!tc(n)&&!st(n)&&!tc(i)&&!st(i))return{explicit:e.explicit,value:AQ(n,i)};throw new Error("It should never reach here")}function JR(e){return`Invalid specification ${Yn(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const e4e='Autosize "fit" only works for single views and layered views.';function U8(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function z8(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function V8(e){return e?`Dropping "fit-${e}" because spec has discrete ${xs(e)}.`:'Dropping "fit" because spec has discrete size.'}function QR(e){return`Unknown field for ${e}. Cannot calculate view size.`}function $8(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function t4e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function n4e(e){return`The "nearest" transform is not supported for ${e} marks.`}function IQ(e){return`Selection not supported for ${e} yet.`}function i4e(e){return`Cannot find a selection named "${e}".`}const r4e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",s4e="Legend bindings are only supported for selections over an individual field or encoding channel.";function a4e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function o4e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const l4e="The same selection must be used to override scale domains in a layered view.",u4e='Interval selections should be initialized using "x" and/or "y" keys.';function c4e(e){return`Unknown repeated value "${e}".`}function H8(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const f4e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function d4e(e){return`Unrecognized parse "${e}".`}function W8(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const h4e="Attempt to add the same child twice.";function p4e(e){return`Ignoring an invalid transform: ${Yn(e)}.`}const g4e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function q8(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function m4e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Yn(t)} is overridden by a child projection ${Yn(n)}.`}const y4e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function b4e(e){return`${e}Offset dropped because ${e} is continuous`}function v4e(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function _4e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Yn(n)}}.`}function xQ(e){return`Invalid field type "${e}".`}function w4e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function S4e(e){return`Invalid aggregation operator "${e}".`}function TQ(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function E4e(e){return`Position range does not support relative band size for ${e}.`}function Ox(e,t){return`Dropping ${Yn(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const A4e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function $S(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function O4e(e){return`${e} encoding has no scale, so specified scale is ignored.`}function C4e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function I4e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function x4e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function T4e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function MO(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function k4e(e){return`The ${e} for range marks cannot be an expression`}function M4e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function D4e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function R4e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function L4e(e){return`Cannot use the relative band size with ${e} scale.`}function N4e(e){return`Using unaggregated domain with raw field has no effect (${Yn(e)}).`}function F4e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function P4e(e){return`Unaggregated domain is currently unsupported for log scale (${Yn(e)}).`}function B4e(e){return`Cannot apply size to non-oriented mark "${e}".`}function j4e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function U4e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function kQ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function MQ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function z4e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yn(n)} and ${Yn(i)}). Using ${Yn(n)}.`}function V4e(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yn(n)} and ${Yn(i)}). Using the union of the two domains.`}function $4e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function H4e(e){return`Dropping sort property ${Yn(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const G8="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",W4e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",q4e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",G4e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Y4e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function X4e(e){return`Cannot stack non-linear scale (${e}).`}function K4e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function T2(e,t){return`Invalid ${e}: ${Yn(t)}.`}function J4e(e){return`Dropping day from datetime ${Yn(e)} as day cannot be combined with other units.`}function Q4e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Z4e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function eFe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Y8(e){return`1D error band does not support ${e}.`}function DQ(e){return`Channel ${e} is required for "binned" bin.`}function tFe(e){return`Channel ${e} should not be used with "binned" bin.`}function nFe(e){return`Domain for ${e} is required for threshold scale.`}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;const RQ=Bk(Pk);let vg=RQ;function iFe(e){return vg=e,vg}function rFe(){return vg=RQ,vg}function Ie(...e){vg.warn(...e)}function sFe(...e){vg.debug(...e)}function Ih(e){if(e&&Ye(e)){for(const t of eL)if(t in e)return!0}return!1}const LQ=["january","february","march","april","may","june","july","august","september","october","november","december"],aFe=LQ.map(e=>e.substr(0,3)),NQ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],oFe=NQ.map(e=>e.substr(0,3));function lFe(e){if(LS(e)&&(e=+e),Un(e))return e>4&&Ie(T2("quarter",e)),e-1;throw new Error(T2("quarter",e))}function uFe(e){if(LS(e)&&(e=+e),Un(e))return e-1;{const t=e.toLowerCase(),n=LQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=aFe.indexOf(i);if(r!==-1)return r;throw new Error(T2("month",e))}}function cFe(e){if(LS(e)&&(e=+e),Un(e))return e%7;{const t=e.toLowerCase(),n=NQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=oFe.indexOf(i);if(r!==-1)return r;throw new Error(T2("day",e))}}function ZR(e,t){const n=[];if(t&&e.day!==void 0&&Ae(e).length>1&&(Ie(J4e(e)),e=Ft(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?uFe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?lFe(e.quarter):e.quarter;n.push(Un(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?cFe(e.day):e.day;n.push(Un(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function b1(e){const n=ZR(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function fFe(e){const n=ZR(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function dFe(e){const t=ZR(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var hFe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const FQ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},eL=Ae(FQ);function pFe(e){return!!FQ[e]}function tL(e){return e.startsWith("utc")}function gFe(e){return e.substr(3)}const mFe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function nL(e){return eL.filter(t=>PQ(e,t))}function PQ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function yFe(e,t,{end:n}={end:!1}){const i=zR(t),r=tL(e)?"utc":"";function s(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let a;const o={};for(const l of eL)PQ(e,l)&&(o[l]=s(l),a=l);return n&&(o[a]+="+1"),fFe(o)}function BQ(e){if(!e)return;const t=nL(e);return`timeUnitSpecifier(${Yn(t)}, ${Yn(mFe)})`}function bFe(e,t,n){if(!e)return;const i=BQ(e);return`${n||tL(e)?"utc":"time"}Format(${t}, ${i})`}function Kr(e){if(!e)return;let t;return Fe(e)?t={unit:e}:Ye(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),tL(t.unit)&&(t.utc=!0,t.unit=gFe(t.unit)),t}function vFe(e){const t=Kr(e),{utc:n}=t,i=hFe(t,["utc"]);return i.unit?(n?"utc":"")+Ae(i).map(r=>ni(`${r==="unit"?"":`_${r}_`}${i[r]}`)).join(""):(n?"utc":"")+"timeunit"+Ae(i).map(r=>ni(`_${r}_${i[r]}`)).join("")}function _Fe(e){return e?.param}function iL(e){return e&&!!e.field&&e.equal!==void 0}function rL(e){return e&&!!e.field&&e.lt!==void 0}function sL(e){return e&&!!e.field&&e.lte!==void 0}function aL(e){return e&&!!e.field&&e.gt!==void 0}function oL(e){return e&&!!e.field&&e.gte!==void 0}function lL(e){if(e?.field){if(ge(e.range)&&e.range.length===2)return!0;if(st(e.range))return!0}return!1}function uL(e){return e&&!!e.field&&(ge(e.oneOf)||ge(e.in))}function wFe(e){return e&&!!e.field&&e.valid!==void 0}function jQ(e){return uL(e)||iL(e)||lL(e)||rL(e)||aL(e)||sL(e)||oL(e)}function Do(e,t){return eE(e,{timeUnit:t,wrapTime:!0})}function SFe(e,t){return e.map(n=>Do(n,t))}function UQ(e,t=!0){var n;const{field:i}=e,r=(n=Kr(e.timeUnit))===null||n===void 0?void 0:n.unit,s=r?`time(${yFe(r,i)})`:De(e,{expr:"datum"});if(iL(e))return`${s}===${Do(e.equal,r)}`;if(rL(e)){const a=e.lt;return`${s}<${Do(a,r)}`}else if(aL(e)){const a=e.gt;return`${s}>${Do(a,r)}`}else if(sL(e)){const a=e.lte;return`${s}<=${Do(a,r)}`}else if(oL(e)){const a=e.gte;return`${s}>=${Do(a,r)}`}else{if(uL(e))return`indexof([${SFe(e.oneOf,r).join(",")}], ${s}) !== -1`;if(wFe(e))return cL(s,e.valid);if(lL(e)){const{range:a}=e,o=st(a)?{signal:`${a.signal}[0]`}:a[0],l=st(a)?{signal:`${a.signal}[1]`}:a[1];if(o!==null&&l!==null&&t)return"inrange("+s+", ["+Do(o,r)+", "+Do(l,r)+"])";const u=[];return o!==null&&u.push(`${s} >= ${Do(o,r)}`),l!==null&&u.push(`${s} <= ${Do(l,r)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Yn(e)}`)}function cL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function EFe(e){var t;return jQ(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=Kr(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const Cy={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function AFe(e){return e==="quantitative"||e==="temporal"}function zQ(e){return e==="ordinal"||e==="nominal"}const rh=Cy.quantitative,fL=Cy.ordinal,_g=Cy.temporal,dL=Cy.nominal,rm=Cy.geojson;function OFe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case rh:return"quantitative";case"t":case _g:return"temporal";case"o":case fL:return"ordinal";case"n":case dL:return"nominal";case rm:return"geojson"}}var CFe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const gs={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Cx={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function IFe(e,t){const n=Cx[e],i=Cx[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const xFe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function X8(e){return xFe[e]}const VQ=new Set(["linear","log","pow","sqrt","symlog"]),$Q=new Set([...VQ,"time","utc"]);function HQ(e){return VQ.has(e)}const WQ=new Set(["quantile","quantize","threshold"]),TFe=new Set([...$Q,...WQ,"sequential","identity"]),kFe=new Set(["ordinal","bin-ordinal","point","band"]);function Ji(e){return kFe.has(e)}function ta(e){return TFe.has(e)}function no(e){return $Q.has(e)}function wg(e){return WQ.has(e)}const MFe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function DFe(e){return!Fe(e)&&!!e.name}function qQ(e){return e?.param}function RFe(e){return e&&e.unionWith}function LFe(e){return Ye(e)&&"field"in e}const NFe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},FFe=CFe(NFe,["type","domain","range","rangeMax","rangeMin","scheme"]),PFe=Ae(FFe);function Ix(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return no(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return no(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return no(e);case"nice":return no(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ta(e)&&!cn(["log","time","utc","threshold","quantile"],e)}}function GQ(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return xp(e)?void 0:R4e(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function BFe(e,t){return cn([fL,dL],t)?e===void 0||Ji(e):t===_g?cn([gs.TIME,gs.UTC,void 0],e):t===rh?HQ(e)||wg(e)||e===void 0:!0}function jFe(e,t,n=!1){if(!If(e))return!1;switch(e){case li:case Ki:case Sf:case nm:case Oo:case Dl:return no(t)||t==="band"?!0:t==="point"?!n:!1;case Nu:case Of:case Fu:case Ef:case Af:case Ah:return no(t)||wg(t)||cn(["band","point","ordinal"],t);case Cs:case Nl:case Fl:return t!=="band";case Cf:case Is:return t==="ordinal"||wg(t)}}const ts={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},YQ=ts.arc,HS=ts.area,WS=ts.bar,UFe=ts.image,qS=ts.line,GS=ts.point,zFe=ts.rect,k2=ts.rule,XQ=ts.text,hL=ts.tick,VFe=ts.trail,pL=ts.circle,gL=ts.square,KQ=ts.geoshape;function kf(e){return["line","area","trail"].includes(e)}function JQ(e){return["rect","bar","image","arc"].includes(e)}const $Fe=new Set(Ae(ts));function wl(e){return e.type}const HFe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],WFe=["fill","fillOpacity"],qFe=[...HFe,...WFe],GFe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},K8=Ae(GFe),YFe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},XFe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},KFe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},QQ=Ae(KFe);function sm(e){return e&&e.band!=null}const JFe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},ZQ=5,QFe={binSpacing:1,continuousBandSize:ZQ,timeUnitBandPosition:.5},ZFe={binSpacing:0,continuousBandSize:ZQ,timeUnitBandPosition:.5},e6e={thickness:1};function t6e(e){return wl(e)?e.type:e}function mL(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:s}=e,a=bL(e);return Me(n)&&!yQ(n.aggregate)&&r&&no(r.get("type"))?n6e({fieldDef:n,channel:t,markDef:i,ref:a,config:s}):a}function n6e({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return kf(n.type)?i:Dn("invalid",n,r)===null?[i6e(e,t),i]:i}function i6e(e,t){const n=yL(e,!0),r=Oh(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function yL(e,t=!0){return cL(Fe(e)?e:De(e,{expr:"datum"}),!t)}function r6e(e){const{datum:t}=e;return Ih(t)?b1(t):`${Yn(t)}`}function Dd(e,t,n,i){const r={};if(t&&(r.scale=t),Bl(e)){const{datum:s}=e;Ih(s)?r.signal=b1(s):st(s)?r.signal=s.signal:Oy(s)?r.signal=s.expr:r.value=s}else r.field=De(e,n);if(i){const{offset:s,band:a}=i;s&&(r.offset=s),a&&(r.band=a)}return r}function M2({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,bandPosition:s=.5}){const a=0<s&&s<1?"datum":void 0,o=De(t,{expr:a,suffix:r}),l=n!==void 0?De(n,{expr:a}):De(t,{suffix:"end",expr:a}),u={};if(s===0||s===1){u.scale=e;const c=s===0?o:l;u.field=c}else{const c=st(s)?`${s.signal} * ${o} + (1-${s.signal}) * ${l}`:`${s} * ${o} + ${1-s} * ${l}`;u.signal=`scale("${e}", ${c})`}return i&&(u.offset=i),u}function bL({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:a,stack:o,offset:l,defaultRef:u,bandPosition:c}){var f;if(t){if(Ct(t)){const d=a?.get("type");if(xa(t)){c??(c=lZ({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:h,timeUnit:p,type:g}=t;if(Xn(h)||c&&p&&g===_g)return o?.impute?Dd(t,s,{binSuffix:"mid"},{offset:l}):c&&!Ji(d)?M2({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):Dd(t,s,Ty(t,e)?{binSuffix:"range"}:{},{offset:l});if(jr(h)){if(Me(n))return M2({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Ie(DQ(e===li?Ao:Ml))}}return Dd(t,s,Ji(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?(f=c??t.bandPosition)!==null&&f!==void 0?f:.5:void 0})}else if(yo(t)){const d=t.value,h=l?{offset:l}:{};return Object.assign(Object.assign({},D0(e,d)),h)}}return Ht(u)&&(u=u()),u&&Object.assign(Object.assign({},u),l?{offset:l}:{})}function D0(e,t){return cn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:cn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Jn(t)}function sh(e){return e&&e!=="number"&&e!=="time"}function eZ(e,t,n){return`${e}(${t}${n?`, ${Yn(n)}`:""})`}const s6e=" \u2013 ";function vL({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s}){var a,o;if(sh(n))return _L({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:s});const l=tZ(e,i,r);if(Sg(e)){const u=o6e(l,Me(e)?(a=Kr(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0,t,s.timeFormat,xh(e)&&((o=e.scale)===null||o===void 0?void 0:o.type)===gs.UTC);return u?{signal:u}:void 0}if(t=rZ(Tx(e),t,s),Me(e)&&Xn(e.bin)){const u=De(e,{expr:i,binSuffix:"end"});return{signal:YS(l,u,t,n,s)}}else return t||Tx(e)==="quantitative"?{signal:`${sZ(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function tZ(e,t,n){return Me(e)?n?`${De(e,{expr:t,suffix:"end"})}-${De(e,{expr:t,suffix:"start"})}`:De(e,{expr:t}):r6e(e)}function _L({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s,field:a}){if(a??(a=tZ(e,i,r)),Me(e)&&Xn(e.bin)){const o=De(e,{expr:i,binSuffix:"end"});return{signal:YS(a,o,t,n,s)}}return{signal:eZ(n,a,t)}}function nZ(e,t,n,i,r,s){var a;if(!sh(i)){if(Sg(e)){const o=Me(e)?(a=Kr(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return a6e(n,o,r,s)}return rZ(t,n,r)}}function iZ(e,t,n){if(e&&(st(e)||e==="number"||e==="time"))return e;if(Sg(t)&&n!=="time"&&n!=="utc")return"time"}function rZ(e,t,n){if(Fe(t))return t;if(e===rh)return n.numberFormat}function a6e(e,t,n,i){return e||(t?{signal:BQ(t)}:i?void 0:n.timeFormat)}function sZ(e,t){return`format(${e}, "${t||""}")`}function J8(e,t,n,i){var r;return sh(n)?eZ(n,e,t):sZ(e,(r=Fe(t)?t:void 0)!==null&&r!==void 0?r:i.numberFormat)}function YS(e,t,n,i,r){const s=J8(e,n,i,r),a=J8(t,n,i,r);return`${cL(e,!1)} ? "null" : ${s} + "${s6e}" + ${a}`}function o6e(e,t,n,i,r){return!t||n?(n=Fe(n)?n:i,`${r?"utc":"time"}Format(${e}, '${n}')`):bFe(t,e,r)}const XS="min",l6e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Q8(e){return e in l6e}function aZ(e){return!!e&&!!e.encoding}function ll(e){return!!e&&(e.op==="count"||!!e.field)}function oZ(e){return!!e&&ge(e)}function Iy(e){return"row"in e||"column"in e}function wL(e){return!!e&&"header"in e}function KS(e){return"facet"in e}var xx=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function u6e(e){return e.param}function c6e(e){return e&&!Fe(e)&&"repeat"in e}function Z8(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),i?{bin:i}:{}),r?{aggregate:r}:{}),{field:t})}function SL(e){return"sort"in e}function lZ({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Ct(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Me(e)){const{timeUnit:r,bin:s}=e;if(r&&!t)return JQ(n.type)?0:ih("timeUnitBandPosition",n,i);if(Xn(s))return .5}}function uZ({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:s,useVlSizeChannel:a}){var o,l,u;const c=xs(e),f=Dn(a?"size":c,i,r,{vgChannel:c});if(f!==void 0)return f;if(Me(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ih("timeUnitBandSize",i,r)};if(Xn(h)&&!Ji(s))return{band:1}}if(JQ(i.type))return s?Ji(s)?((o=r[i.type])===null||o===void 0?void 0:o.discreteBandSize)||{band:1}:(l=r[i.type])===null||l===void 0?void 0:l.continuousBandSize:(u=r[i.type])===null||u===void 0?void 0:u.discreteBandSize}function cZ(e,t,n,i){return Xn(e.bin)||e.timeUnit&&xa(e)&&e.type==="temporal"?lZ({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function JS(e){return e&&"condition"in e}function QS(e){const t=e&&e.condition;return!!t&&!ge(t)&&Me(t)}function xy(e){const t=e&&e.condition;return!!t&&!ge(t)&&Ct(t)}function f6e(e){const t=e&&e.condition;return!!t&&(ge(t)||yo(t))}function Me(e){return e&&(!!e.field||e.aggregate==="count")}function Tx(e){return e&&e.type}function Bl(e){return e&&"datum"in e}function nl(e){return xa(e)&&!D2(e)||kx(e)}function kx(e){return Bl(e)&&Un(e.datum)}function Ct(e){return Me(e)||Bl(e)}function xa(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function yo(e){return e&&"value"in e&&"value"in e}function xh(e){return e&&("scale"in e||"sort"in e)}function EL(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function fZ(e){return e&&"legend"in e}function dZ(e){return e&&("format"in e||"formatType"in e)}function d6e(e){return Ys(e,["legend","axis","header","scale"])}function h6e(e){return"op"in e}function De(e,t={}){var n,i,r;let s=e.field;const a=t.prefix;let o=t.suffix,l="";if(g6e(e))s=rQ("count");else{let u;if(!t.nofn)if(h6e(e))u=e.op;else{const{bin:c,aggregate:f,timeUnit:d}=e;Xn(c)?(u=bQ(c),o=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((i=t.suffix)!==null&&i!==void 0?i:"")):f?xf(f)?(l=`["${s}"]`,s=`argmax_${f.argmax}`):Ou(f)?(l=`["${s}"]`,s=`argmin_${f.argmin}`):u=String(f):d&&(u=vFe(d),o=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+((r=t.suffix)!==null&&r!==void 0?r:""))}u&&(s=s?`${u}_${s}`:u)}return o&&(s=`${s}_${o}`),a&&(s=`${a}_${s}`),t.forAs?VR(s):t.expr?tQ(s,t.expr)+l:Ca(s)+l}function D2(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Me(e)&&!!e.bin;case"temporal":return!1}throw new Error(xQ(e.type))}function p6e(e){var t;return xh(e)&&wg((t=e.scale)===null||t===void 0?void 0:t.type)}function g6e(e){return e.aggregate==="count"}function m6e(e,t){var n;const{field:i,bin:r,timeUnit:s,aggregate:a}=e;if(a==="count")return t.countTitle;if(Xn(r))return`${i} (binned)`;if(s){const o=(n=Kr(s))===null||n===void 0?void 0:n.unit;if(o)return`${i} (${nL(o).join("-")})`}else if(a)return xf(a)?`${i} for max ${a.argmax}`:Ou(a)?`${i} for min ${a.argmin}`:`${_y(a)} of ${i}`;return i}function y6e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(xf(t))return`${r} for argmax(${t.argmax})`;if(Ou(t))return`${r} for argmin(${t.argmin})`;const s=Kr(i),a=t||s?.unit||s?.maxbins&&"timeunit"||Xn(n)&&"bin";return a?`${a.toUpperCase()}(${r})`:r}const hZ=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return y6e(e);default:return m6e(e,t)}};let pZ=hZ;function gZ(e){pZ=e}function b6e(){gZ(hZ)}function Tp(e,t,{allowDisabling:n,includeDefault:i=!0}){var r,s;const a=(r=AL(e))===null||r===void 0?void 0:r.title;if(!Me(e))return a??e.title;const o=e,l=i?OL(o,t):void 0;return n?Oi(a,o.title,l):(s=a??o.title)!==null&&s!==void 0?s:l}function AL(e){if(EL(e)&&e.axis)return e.axis;if(fZ(e)&&e.legend)return e.legend;if(wL(e)&&e.header)return e.header}function OL(e,t){return pZ(e,t)}function R2(e){var t;if(dZ(e)){const{format:n,formatType:i}=e;return{format:n,formatType:i}}else{const n=(t=AL(e))!==null&&t!==void 0?t:{},{format:i,formatType:r}=n;return{format:i,formatType:r}}}function v6e(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(SL(e)&&ge(e.sort))return"ordinal";const{aggregate:i,bin:r,timeUnit:s}=e;if(s)return"temporal";if(r||i&&!xf(i)&&!Ou(i))return"quantitative";if(xh(e)&&((n=e.scale)===null||n===void 0?void 0:n.type))switch(Cx[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Sl(e){if(Me(e))return e;if(QS(e))return e.condition}function Pi(e){if(Ct(e))return e;if(xy(e))return e.condition}function mZ(e,t,n,i={}){if(Fe(e)||Un(e)||pf(e)){const r=Fe(e)?"string":Un(e)?"number":"boolean";return Ie(_4e(t,r,e)),{value:e}}return Ct(e)?L2(e,t,n,i):xy(e)?Object.assign(Object.assign({},e),{condition:L2(e.condition,t,n,i)}):e}function L2(e,t,n,i){if(dZ(e)){const{format:r,formatType:s}=e,a=xx(e,["format","formatType"]);if(sh(s)&&!n.customFormatTypes)return Ie(q8(t)),L2(a,t,n,i)}else{const r=EL(e)?"axis":fZ(e)?"legend":wL(e)?"header":null;if(r&&e[r]){const s=e[r],{format:a,formatType:o}=s,l=xx(s,["format","formatType"]);if(sh(o)&&!n.customFormatTypes)return Ie(q8(t)),L2(Object.assign(Object.assign({},e),{[r]:l}),t,n,i)}}return Me(e)?CL(e,t,i):_6e(e)}function _6e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Un(n)?"quantitative":Fe(n)?"nominal":Ih(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function CL(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:s,field:a}=e,o=Object.assign({},e);if(!n&&i&&!XR(i)&&!xf(i)&&!Ou(i)&&(Ie(S4e(i)),delete o.aggregate),r&&(o.timeUnit=Kr(r)),a&&(o.field=`${a}`),Xn(s)&&(o.bin=ZS(s,t)),jr(s)&&!lr(t)&&Ie(tFe(t)),xa(o)){const{type:l}=o,u=OFe(l);l!==u&&(o.type=u),l!=="quantitative"&&yQ(i)&&(Ie(w4e(l,i)),o.type="quantitative")}else if(!cQ(t)){const l=v6e(o,t);o.type=l}if(xa(o)){const{compatible:l,warning:u}=w6e(o,t)||{};l===!1&&Ie(u)}if(SL(o)&&Fe(o.sort)){const{sort:l}=o;if(Q8(l))return Object.assign(Object.assign({},o),{sort:{encoding:l}});const u=l.substr(1);if(l.charAt(0)==="-"&&Q8(u))return Object.assign(Object.assign({},o),{sort:{encoding:u,order:"descending"}})}if(wL(o)){const{header:l}=o;if(l){const{orient:u}=l,c=xx(l,["orient"]);if(u)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return o}function ZS(e,t){return pf(e)?{maxbins:P8(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:P8(t)}):e}const qh={compatible:!0};function w6e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case du:case hu:case NS:return D2(e)?qh:{compatible:!1,warning:I4e(t)};case li:case Ki:case Sf:case nm:case Cs:case Nl:case Fl:case Sy:case Ay:case FS:case nh:case PS:case BS:case Ah:case Oo:case Dl:case jS:return qh;case Ll:case Ia:case Rl:case Co:return n!==rh?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:qh;case Fu:case Ef:case Af:case Of:case Nu:case Lu:case Ru:case Ao:case Ml:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:qh;case Is:case Cf:return!D2(e)&&!p6e(e)?{compatible:!1,warning:x4e(t)}:qh;case Ey:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:qh}}function Sg(e){const{formatType:t}=R2(e);return t==="time"||!t&&S6e(e)}function S6e(e){return e&&(e.type==="temporal"||Me(e)&&!!e.timeUnit)}function eE(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var s;const a=t&&((s=Kr(t))===null||s===void 0?void 0:s.unit);let o=a||n==="temporal",l;return Oy(e)?l=e.expr:st(e)?l=e.signal:Ih(e)?(o=!0,l=b1(e)):(Fe(e)||Un(e))&&o&&(l=`datetime(${Yn(e)})`,pFe(a)&&(Un(e)&&e<1e4||Fe(e)&&isNaN(Date.parse(e)))&&(l=b1({[a]:e}))),l?i&&o?`time(${l})`:l:r?void 0:Yn(e)}function yZ(e,t){const{type:n}=e;return t.map(i=>{const r=eE(i,{timeUnit:Me(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return r!==void 0?{signal:r}:i})}function Ty(e,t){return Xn(e.bin)?If(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const eB={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ky(e){return e&&e.condition}const bZ=["domain","grid","labels","ticks","title"],E6e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},vZ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},A6e=Object.assign(Object.assign({},vZ),{style:1,labelExpr:1,encoding:1});function tB(e){return!!A6e[e]}const O6e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},_Z=Ae(O6e);function Bu(e){return"mark"in e}class tE{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Bu(t)?t6e(t.mark)===this.name:!1}}var C6e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Rd(e,t){const n=e&&e[t];return n?ge(n)?eh(n,i=>!!i.field):Me(n)||QS(n):!1}function wZ(e,t){const n=e&&e[t];return n?ge(n)?eh(n,i=>!!i.field):Me(n)||Bl(n)||xy(n):!1}function Mx(e,t){if(lr(t)){const n=e[t];if((Me(n)||Bl(n))&&zQ(n.type)){const i=fQ(t);return wZ(e,i)}}return!1}function IL(e){return eh(ONe,t=>{if(Rd(e,t)){const n=e[t];if(ge(n))return eh(n,i=>!!i.aggregate);{const i=Sl(n);return i&&!!i.aggregate}}return!1})}function SZ(e,t){const n=[],i=[],r=[],s=[],a={};return xL(e,(o,l)=>{if(Me(o)){const{field:u,aggregate:c,bin:f,timeUnit:d}=o,h=C6e(o,["field","aggregate","bin","timeUnit"]);if(c||d||f){const p=AL(o),g=p?.title;let m=De(o,{forAs:!0});const y=Object.assign(Object.assign(Object.assign({},g?[]:{title:Tp(o,t,{allowDisabling:!0})}),h),{field:m});if(c){let b;if(xf(c)?(b="argmax",m=De({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):Ou(c)?(b="argmin",m=De({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const v={op:b,as:m};u&&(v.field=u),s.push(v)}}else if(n.push(m),xa(o)&&Xn(f)){if(i.push({bin:f,field:u,as:m}),n.push(De(o,{binSuffix:"end"})),Ty(o,l)&&n.push(De(o,{binSuffix:"range"})),lr(l)){const b={field:`${m}_end`};a[`${l}2`]=b}y.bin="binned",cQ(l)||(y.type=rh)}else if(d){r.push({timeUnit:d,field:u,as:m});const b=xa(o)&&o.type!==_g&&"time";b&&(l===Sy||l===nh?y.formatType=b:NNe(l)?y.legend=Object.assign({formatType:b},y.legend):lr(l)&&(y.axis=Object.assign({formatType:b},y.axis)))}a[l]=y}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:i,timeUnits:r,aggregate:s,groupby:n,encoding:a}}function I6e(e,t,n){const i=PNe(t,n);if(i){if(i==="binned"){const r=e[t===Ao?li:Ki];return!!(Me(r)&&Me(e[t])&&jr(r.bin))}}else return!1;return!0}function x6e(e,t,n,i){const r={};for(const s of Ae(e))uQ(s)||Ie(C4e(s));for(let s of MNe){if(!e[s])continue;const a=e[s];if(im(s)){const o=dQ(s),l=r[o];if(Me(l)){if(AFe(l.type)&&Me(a)){Ie(b4e(o));continue}}else s=o,Ie(v4e(o))}if(s==="angle"&&t==="arc"&&!e.theta&&(Ie(y4e),s=Oo),!I6e(e,s,t)){Ie($S(s,t));continue}if(s===Nu&&t==="line"){const o=Sl(e[s]);if(o?.aggregate){Ie(A4e);continue}}if(s===Cs&&(n?"fill"in e:"stroke"in e)){Ie(TQ("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Ay||s===Ey&&!ge(a)&&!yo(a)||s===nh&&ge(a))a&&(r[s]=Pe(a).reduce((o,l)=>(Me(l)?o.push(CL(l,s)):Ie(Ox(l,s)),o),[]));else{if(s===nh&&a===null)r[s]=null;else if(!Me(a)&&!Bl(a)&&!yo(a)&&!JS(a)&&!st(a)){Ie(Ox(a,s));continue}r[s]=mZ(a,s,i)}}return r}function nE(e,t){const n={};for(const i of Ae(e)){const r=mZ(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function T6e(e){const t=[];for(const n of Ae(e))if(Rd(e,n)){const i=e[n],r=Pe(i);for(const s of r)Me(s)?t.push(s):QS(s)&&t.push(s.condition)}return t}function xL(e,t,n){if(!!e)for(const i of Ae(e)){const r=e[i];if(ge(r))for(const s of r)t.call(n,s,i);else t.call(n,r,i)}}function k6e(e,t,n,i){return e?Ae(e).reduce((r,s)=>{const a=e[s];return ge(a)?a.reduce((o,l)=>t.call(i,o,l,s),r):t.call(i,r,a,s)},n):n}function EZ(e,t){return Ae(t).reduce((n,i)=>{switch(i){case li:case Ki:case PS:case jS:case BS:case Ao:case Ml:case Sf:case nm:case Oo:case Lu:case Dl:case Ru:case Rl:case Ll:case Co:case Ia:case Sy:case Is:case Ah:case nh:return n;case Ey:if(e==="line"||e==="trail")return n;case Ay:case FS:{const r=t[i];if(ge(r)||Me(r))for(const s of Pe(r))s.aggregate||n.push(De(s,{}));return n}case Nu:if(e==="trail")return n;case Cs:case Nl:case Fl:case Fu:case Ef:case Af:case Cf:case Of:{const r=Sl(t[i]);return r&&!r.aggregate&&n.push(De(r,{})),n}}},[])}var AZ=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function M6e(e){const{tooltip:t}=e,n=AZ(e,["tooltip"]);if(!t)return{filteredEncoding:n};let i,r;if(ge(t)){for(const s of t)s.aggregate?(i||(i=[]),i.push(s)):(r||(r=[]),r.push(s));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return ge(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function Dx(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:a,titlePrefix:o})=>{const l=i?` of ${TL(t)}`:"";return{field:a+t.field,type:t.type,title:st(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),s=T6e(n).map(d6e);return{tooltip:[...r,...tl(s,un)]}}function TL(e){const{title:t,field:n}=e;return Oi(t,n)}function kL(e,t,n,i,r){const{scale:s,axis:a}=n;return({partName:o,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=TL(n);return OZ(e,o,r,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},d!==void 0?{title:d}:{}),s!==void 0?{scale:s}:{}),a!==void 0?{axis:a}:{})},Fe(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{}),i),f)})}}function OZ(e,t,n,i){const{clip:r,color:s,opacity:a}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),r?{clip:r}:{}),s?{color:s}:{}),a?{opacity:a}:{}),wl(i.mark)?i.mark:{type:i.mark}),{style:`${o}-${t}`}),pf(e[t])?{}:e[t])})]:[]}function CZ(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",s=i[r],a=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:Ib(s,n),continuousAxisChannelDef2:Ib(a,n),continuousAxisChannelDefError:Ib(o,n),continuousAxisChannelDefError2:Ib(l,n),continuousAxis:r}}function Ib(e,t){if(e?.aggregate){const{aggregate:n}=e,i=AZ(e,["aggregate"]);return n!==t&&Ie(eFe(n,t)),i}else return e}function IZ(e,t){const{mark:n,encoding:i}=e,{x:r,y:s}=i;if(wl(n)&&n.orient)return n.orient;if(nl(r)){if(nl(s)){const a=Me(r)&&r.aggregate,o=Me(s)&&s.aggregate;if(!a&&o===t)return"vertical";if(!o&&a===t)return"horizontal";if(a===t&&o===t)throw new Error("Both x and y cannot have aggregate");return Sg(s)&&!Sg(r)?"horizontal":"vertical"}return"horizontal"}else{if(nl(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var wv=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const N2="boxplot",D6e=["box","median","outliers","rule","ticks"],R6e=new tE(N2,TZ);function xZ(e){return Un(e)?"tukey":e}function TZ(e,{config:t}){var n,i;e=Object.assign(Object.assign({},e),{encoding:nE(e.encoding,t)});const{mark:r,encoding:s,params:a,projection:o}=e,l=wv(e,["mark","encoding","params","projection"]),u=wl(r)?r:{type:r};a&&Ie(IQ("boxplot"));const c=(n=u.extent)!==null&&n!==void 0?n:t.boxplot.extent,f=Dn("size",u,t),d=xZ(c),{bins:h,timeUnits:p,transform:g,continuousAxisChannelDef:m,continuousAxis:y,groupby:b,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:w}=L6e(e,c,t),{color:O,size:D}=_,x=wv(_,["color","size"]),A=tt=>kL(u,y,m,tt,t.boxplot),C=A(x),I=A(_),L=A(Object.assign(Object.assign({},x),D?{size:D}:{})),k=Dx([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),M={type:"tick",color:"black",opacity:1,orient:S,invalid:null,aria:!1},N=d==="min-max"?k:Dx([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),R=[...C({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...C({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...C({partName:"ticks",mark:M,positionPrefix:"lower_whisker",extraEncoding:N}),...C({partName:"ticks",mark:M,positionPrefix:"upper_whisker",extraEncoding:N})],T=[...d!=="tukey"?R:[],...I({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:E,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:k}),...L({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Ye(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{orient:S,aria:!1}),positionPrefix:"mid_box",extraEncoding:k})];if(d==="min-max")return Object.assign(Object.assign({},l),{transform:((i=l.transform)!==null&&i!==void 0?i:[]).concat(g),layer:T});const z=`datum["lower_box_${m.field}"]`,Y=`datum["upper_box_${m.field}"]`,H=`(${Y} - ${z})`,oe=`${z} - ${c} * ${H}`,_e=`${Y} + ${c} * ${H}`,re=`datum["${m.field}"]`,pe={joinaggregate:kZ(m.field),groupby:b},Oe={transform:[{filter:`(${oe} <= ${re}) && (${re} <= ${_e})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:b}],layer:R},Re=wv(x,["tooltip"]),{scale:W,axis:q}=m,ve=TL(m),ce=Ys(q,["title"]),fe=OZ(u,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${oe}) || (${re} > ${_e})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[y]:Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},ve!==void 0?{title:ve}:{}),W!==void 0?{scale:W}:{}),jn(ce)?{}:{axis:ce})},Re),O?{color:O}:{}),w?{tooltip:w}:{})})[0];let we;const Xe=[...h,...p,pe];return fe?we={transform:Xe,layer:[fe,Oe]}:(we=Oe,we.transform.unshift(...Xe)),Object.assign(Object.assign({},l),{layer:[we,{transform:g,layer:T}]})}function kZ(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function L6e(e,t,n){const i=IZ(e,N2),{continuousAxisChannelDef:r,continuousAxis:s}=CZ(e,i,N2),a=r.field,o=xZ(t),l=[...kZ(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(o==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(o==="min-max"?"upper_whisker_":"max_")+a}],u=o==="min-max"||o==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],c=e.encoding,f=s;c[f];const d=wv(c,[typeof f=="symbol"?f:f+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=M6e(d),{bins:g,timeUnits:m,aggregate:y,groupby:b,encoding:v}=SZ(p,n),_=i==="vertical"?"horizontal":"vertical",S=i,E=[...g,...m,{aggregate:[...y,...l],groupby:b},...u];return{bins:g,timeUnits:m,transform:E,groupby:b,aggregate:y,continuousAxisChannelDef:r,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:S,customTooltipWithoutAggregatedField:h}}var nB=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const ML="errorbar",N6e=["ticks","rule"],F6e=new tE(ML,MZ);function MZ(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:nE(e.encoding,t)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:o,outerSpec:l,tooltipEncoding:u}=DZ(e,ML,t);delete s.size;const c=kL(o,r,i,s,t.errorbar),f=o.thickness,d=o.size,h=Object.assign(Object.assign({type:"tick",orient:a,aria:!1},f!==void 0?{thickness:f}:{}),d!==void 0?{size:d}:{}),p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},f!==void 0?{size:f}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),p.length>1?{layer:p}:Object.assign({},p[0]))}function P6e(e,t){const{encoding:n}=e;if(B6e(n))return{orient:IZ(e,t),inputType:"raw"};const i=j6e(n),r=U6e(n),s=n.x,a=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(Ct(o)&&Ct(l))throw new Error(`${t} cannot have both x2 and y2`);if(Ct(o)){if(nl(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ct(l)){if(nl(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Ct(l)&&!Ct(o))throw new Error(`${t} cannot have xError2 without xError`);if(Ct(c)&&!Ct(u))throw new Error(`${t} cannot have yError2 without yError`);if(Ct(o)&&Ct(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ct(o)){if(nl(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ct(u)){if(nl(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function B6e(e){return(Ct(e.x)||Ct(e.y))&&!Ct(e.x2)&&!Ct(e.y2)&&!Ct(e.xError)&&!Ct(e.xError2)&&!Ct(e.yError)&&!Ct(e.yError2)}function j6e(e){return Ct(e.x2)||Ct(e.y2)}function U6e(e){return Ct(e.xError)||Ct(e.xError2)||Ct(e.yError)||Ct(e.yError2)}function DZ(e,t,n){var i;const{mark:r,encoding:s,params:a,projection:o}=e,l=nB(e,["mark","encoding","params","projection"]),u=wl(r)?r:{type:r};a&&Ie(IQ(t));const{orient:c,inputType:f}=P6e(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:g,continuousAxis:m}=CZ(e,c,t),{errorBarSpecificAggregate:y,postAggregateCalculates:b,tooltipSummary:v,tooltipTitleWithFieldName:_}=z6e(u,d,h,p,g,f,t,n),S=s,E=m;S[E];const w=m==="x"?"x2":"y2";S[w];const O=m==="x"?"xError":"yError";S[O];const D=m==="x"?"xError2":"yError2";S[D];const x=nB(S,[typeof E=="symbol"?E:E+"",typeof w=="symbol"?w:w+"",typeof O=="symbol"?O:O+"",typeof D=="symbol"?D:D+""]),{bins:A,timeUnits:C,aggregate:I,groupby:L,encoding:k}=SZ(x,n),M=[...I,...y],N=f!=="raw"?[]:L,R=Dx(v,d,k,_);return{transform:[...(i=l.transform)!==null&&i!==void 0?i:[],...A,...C,...M.length===0?[]:[{aggregate:M,groupby:N}],...b],groupby:N,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:k,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:R}}function z6e(e,t,n,i,r,s,a,o){let l=[],u=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ie(Z4e(h,p,a)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:_y(h)},{fieldPrefix:"upper_",titlePrefix:iB(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:iB(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Tp({field:c,aggregate:y,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Tp({field:c,aggregate:m,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Tp({field:c,aggregate:g,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ie(Q4e(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],r?u.push({calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:th(th(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function iB(e,t,n){return`${_y(e)} ${n} ${t}`}const DL="errorband",V6e=["band","borders"],$6e=new tE(DL,RZ);function RZ(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:nE(e.encoding,t)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:o,tooltipEncoding:l}=DZ(e,DL,t),u=a,c=kL(u,r,i,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),p),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign(Object.assign({},h),p),{aria:!1})):u.interpolate?Ie(Y8("interpolate")):u.tension&&Ie(Y8("tension")),Object.assign(Object.assign({},o),{transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]})}const LZ={};function RL(e,t,n){const i=new tE(e,t);LZ[e]={normalizer:i,parts:n}}function H6e(){return Ae(LZ)}RL(N2,TZ,D6e);RL(ML,MZ,N6e);RL(DL,RZ,V6e);const W6e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],NZ={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},FZ={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},q6e=Ae(NZ),G6e=Ae(FZ),Y6e={header:1,headerRow:1,headerColumn:1,headerFacet:1},PZ=Ae(Y6e),BZ=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],X6e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},K6e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},v1="_vgsid_",J6e={point:{on:"click",fields:[v1],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function LL(e){return!!e&&(e==="legend"||!!e.legend)}function DO(e){return LL(e)&&Ye(e)}function NL(e){return!!e.select}var Q6e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function jZ(e){const t=[];for(const n of e||[]){if(NL(n))continue;const{expr:i,bind:r}=n,s=Q6e(n,["expr","bind"]);if(r&&i){const a=Object.assign(Object.assign({},s),{bind:r,init:i});t.push(a)}else{const a=Object.assign(Object.assign(Object.assign({},s),i?{update:i}:{}),r?{bind:r}:{});t.push(a)}}return t}function Z6e(e){return iE(e)||PL(e)||FL(e)}function FL(e){return"concat"in e}function iE(e){return"vconcat"in e}function PL(e){return"hconcat"in e}function UZ({step:e,offsetIsDiscrete:t}){var n;return t?(n=e.for)!==null&&n!==void 0?n:"offset":"position"}function El(e){return Ye(e)&&e.step!==void 0}function rB(e){return e.view||e.width||e.height}const sB=20,ePe={align:1,bounds:1,center:1,columns:1,spacing:1},tPe=Ae(ePe);function nPe(e,t,n){var i,r;const s=n[t],a={},{spacing:o,columns:l}=s;o!==void 0&&(a.spacing=o),l!==void 0&&(KS(e)&&!Iy(e.facet)||FL(e))&&(a.columns=l),iE(e)&&(a.columns=1);for(const u of tPe)if(e[u]!==void 0)if(u==="spacing"){const c=e[u];a[u]=Un(c)?c:{row:(i=c.row)!==null&&i!==void 0?i:o,column:(r=c.column)!==null&&r!==void 0?r:o}}else a[u]=e[u];return a}var iPe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Rx(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function F2(e,t){const n=P2(e,t);return El(n)?n.step:zZ}function P2(e,t){var n;const i=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return Oi(i,{step:e.step})}const zZ=20,rPe={continuousWidth:200,continuousHeight:200,step:zZ},sPe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:rPe,mark:XFe,arc:{},area:{},bar:QFe,circle:{},geoshape:{},image:{},line:{},point:{},rect:ZFe,rule:{color:"black"},square:{},text:{color:"black"},tick:e6e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:MFe,projection:{},legend:X6e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:J6e,style:{},title:{},facet:{spacing:sB},concat:{spacing:sB}},Wl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],aB={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},oB={blue:Wl[0],orange:Wl[1],red:Wl[2],teal:Wl[3],green:Wl[4],yellow:Wl[5],purple:Wl[6],pink:Wl[7],brown:Wl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function aPe(e={}){return{signals:[{name:"color",value:Ye(e)?Object.assign(Object.assign({},oB),e):oB}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function oPe(e){return{signals:[{name:"fontSize",value:Ye(e)?Object.assign(Object.assign({},aB),e):aB}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function lPe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function VZ(e){const t=Ae(e||{}),n={};for(const i of t){const r=e[i];n[i]=ky(r)?_Q(r):$s(r)}return n}function uPe(e){const t=Ae(e),n={};for(const i of t)n[i]=VZ(e[i]);return n}const cPe=[...QQ,..._Z,...PZ,"background","padding","legend","lineBreak","scale","style","title","view"];function $Z(e={}){const{color:t,font:n,fontSize:i,selection:r}=e,s=iPe(e,["color","font","fontSize","selection"]),a=zg({},Ft(sPe),n?lPe(n):{},t?aPe(t):{},i?oPe(i):{},s||{});r&&Vg(a,"selection",r,!0);const o=Ys(a,cPe);for(const l of["background","lineBreak","padding"])a[l]&&(o[l]=$s(a[l]));for(const l of QQ)a[l]&&(o[l]=us(a[l]));for(const l of _Z)a[l]&&(o[l]=VZ(a[l]));for(const l of PZ)a[l]&&(o[l]=us(a[l]));return a.legend&&(o.legend=us(a.legend)),a.scale&&(o.scale=us(a.scale)),a.style&&(o.style=uPe(a.style)),a.title&&(o.title=us(a.title)),a.view&&(o.view=us(a.view)),o}const fPe=new Set(["view",...$Fe]),dPe=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],hPe=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},YFe);function pPe(e){e=Ft(e);for(const t of dPe)delete e[t];if(e.axis)for(const t in e.axis)ky(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of W6e)delete e.legend[t];if(e.mark){for(const t of K8)delete e.mark[t];e.mark.tooltip&&Ye(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(jZ(e.params)),delete e.params);for(const t of fPe){for(const i of K8)delete e[t][i];const n=hPe[t];if(n)for(const i of n)delete e[t][i];mPe(e,t)}for(const t of H6e())delete e[t];gPe(e);for(const t in e)Ye(e[t])&&jn(e[t])&&delete e[t];return jn(e)?void 0:e}function gPe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=vQ(e.title);jn(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),jn(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),jn(i)?delete e.title:e.title=i}function mPe(e,t,n,i){const r=i?e[t][i]:e[t];t==="view"&&(n="cell");const s=Object.assign(Object.assign({},r),e.style[n??t]);jn(s)||(e.style[n??t]=s),i||delete e[t]}function rE(e){return"layer"in e}function yPe(e){return"repeat"in e}function bPe(e){return!ge(e.repeat)&&e.repeat.layer}var vPe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class BL{map(t,n){return KS(t)?this.mapFacet(t,n):yPe(t)?this.mapRepeat(t,n):PL(t)?this.mapHConcat(t,n):iE(t)?this.mapVConcat(t,n):FL(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(rE(t))return this.mapLayer(t,n);if(Bu(t))return this.mapUnit(t,n);throw new Error(JR(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(i=>this.map(i,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(i=>this.map(i,n))})}mapConcat(t,n){const{concat:i}=t,r=vPe(t,["concat"]);return Object.assign(Object.assign({},r),{concat:i.map(s=>this.map(s,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const _Pe={zero:1,center:1,normalize:1};function wPe(e){return e in _Pe}const SPe=new Set([YQ,WS,HS,k2,GS,pL,gL,qS,XQ,hL]),EPe=new Set([WS,HS,YQ]);function Gh(e){return Me(e)&&Tx(e)==="quantitative"&&!e.bin}function lB(e,t){var n,i;const r=t==="x"?"y":"radius",s=e[t],a=e[r];if(Me(s)&&Me(a))if(Gh(s)&&Gh(a)){if(s.stack)return t;if(a.stack)return r;const o=Me(s)&&!!s.aggregate,l=Me(a)&&!!a.aggregate;if(o!==l)return o?t:r;{const u=(n=s.scale)===null||n===void 0?void 0:n.type,c=(i=a.scale)===null||i===void 0?void 0:i.type;if(u&&u!=="linear")return r;if(c&&c!=="linear")return t}}else{if(Gh(s))return t;if(Gh(a))return r}else{if(Gh(s))return t;if(Gh(a))return r}}function APe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function HZ(e,t,n={}){var i,r;const s=wl(e)?e.type:e;if(!SPe.has(s))return null;const a=lB(t,"x")||lB(t,"theta");if(!a)return null;const o=t[a],l=Me(o)?De(o,{}):void 0,u=APe(a),c=[],f=new Set;if(t[u]){const p=t[u],g=Me(p)?De(p,{}):void 0;g&&g!==l&&(c.push(u),f.add(g));const m=u==="x"?"xOffset":"yOffset",y=t[m],b=Me(y)?De(y,{}):void 0;b&&b!==l&&(c.push(m),f.add(b))}const d=DNe.reduce((p,g)=>{if(g!=="tooltip"&&Rd(t,g)){const m=t[g];for(const y of Pe(m)){const b=Sl(y);if(b.aggregate)continue;const v=De(b,{});(!v||!f.has(v))&&p.push({channel:g,fieldDef:b})}}return p},[]);let h;if(o.stack!==void 0?pf(o.stack)?h=o.stack?"zero":null:h=o.stack:EPe.has(s)&&(h="zero"),!h||!wPe(h)||IL(t)&&d.length===0)return null;if(((i=o?.scale)===null||i===void 0?void 0:i.type)&&((r=o?.scale)===null||r===void 0?void 0:r.type)!==gs.LINEAR){if(n.disallowNonLinearStack)return null;Ie(X4e(o.scale.type))}return Ct(t[Pu(a)])?(o.stack!==void 0&&Ie(Y4e(a)),null):(Me(o)&&o.aggregate&&!HNe.has(o.aggregate)&&Ie(K4e(o.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:a,impute:o.impute===null?!1:kf(s),stackBy:d,offset:h})}var WZ=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function OPe(e){const t=WZ(e,["point","line"]);return Ae(t).length>1?t:t.type}function CPe(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:Ys(e[t],["point","line"])}));return e}function RO(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ye(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ye(t.point)?t.point:{}:void 0}function uB(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class IPe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Bu(t)){const{mark:i,encoding:r}=t,s=wl(i)?i:{type:i};switch(s.type){case"line":case"rule":case"trail":return!!RO(s,n[s.type],r);case"area":return!!RO(s,n[s.type],r)||!!uB(s,n[s.type])}}return!1}run(t,n,i){const{config:r}=n,{params:s,projection:a,mark:o,encoding:l}=t,u=WZ(t,["params","projection","mark","encoding"]),c=nE(l,r),f=wl(o)?o:{type:o},d=RO(f,r[f.type],c),h=f.type==="area"&&uB(f,r[f.type]),p=[Object.assign(Object.assign({},s?{params:s}:{}),{mark:OPe(Object.assign(Object.assign({},f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{}),f)),encoding:Ys(c,["shape"])})],g=HZ(f,c);let m=c;if(g){const{fieldChannel:y,offset:b}=g;m=Object.assign(Object.assign({},c),{[y]:Object.assign(Object.assign({},c[y]),b?{stack:b}:{})})}return h&&p.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},yg(f,["clip","interpolate","tension","tooltip"])),h),encoding:m})),d&&p.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},yg(f,["clip","tooltip"])),d),encoding:m})),i(Object.assign(Object.assign({},u),{layer:p}),Object.assign(Object.assign({},n),{config:CPe(r)}))}}var xPe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function TPe(e,t){return t?Iy(e)?GZ(e,t):qZ(e,t):e}function LO(e,t){return t?GZ(e,t):e}function Lx(e,t,n){const i=t[e];if(c6e(i)){if(i.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[i.repeat]});Ie(c4e(i.repeat));return}return t}function qZ(e,t){if(e=Lx("field",e,t),e!==void 0){if(e===null)return null;if(SL(e)&&ll(e.sort)){const n=Lx("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function cB(e,t){if(Me(e))return qZ(e,t);{const n=Lx("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function fB(e,t){if(Ct(e)){const n=cB(e,t);if(n)return n;if(JS(e))return{condition:e.condition}}else{if(xy(e)){const n=cB(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):xPe(e,["condition"])}return e}}function GZ(e,t){const n={};for(const i in e)if(at(e,i)){const r=e[i];if(ge(r))n[i]=r.map(s=>fB(s,t)).filter(s=>s);else{const s=fB(r,t);s!==void 0&&(n[i]=s)}}return n}class kPe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Bu(t)){const{encoding:n,mark:i}=t;if(i==="line"||wl(i)&&i.type==="line")for(const r of TNe){const s=Oh(r),a=n[s];if(n[r]&&(Me(a)&&!jr(a.bin)||Bl(a)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:s}=t;return Ie(M4e(!!r.x2,!!r.y2)),i(Object.assign(Object.assign({},t),{mark:Ye(s)?Object.assign(Object.assign({},s),{type:"rule"}):"rule"}),n)}}var Hu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class MPe extends BL{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[R6e,F6e,$6e,new IPe,new kPe]}map(t,n){if(Bu(t)){const i=Rd(t.encoding,du),r=Rd(t.encoding,hu),s=Rd(t.encoding,NS);if(i||r||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,s=LO(t.encoding,n.repeater),a=Object.assign(Object.assign({},t),s?{encoding:s}:{});if(i||r)return this.mapUnitWithParentEncodingOrProjection(a,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,o);return a}mapRepeat(t,n){return bPe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r}=t,s=Hu(t,["repeat","spec"]),{row:a,column:o,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return a||o?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),o?{column:o}:{}),spec:{repeat:{layer:l},spec:r}}),n):Object.assign(Object.assign({},s),{layer:l.map(f=>{const d=Object.assign(Object.assign({},u),{layer:f}),h=`${(r.name||"")+c}child__layer_${ni(f)}`,p=this.mapLayerOrUnit(r,Object.assign(Object.assign({},n),{repeater:d,repeaterPrefix:h}));return p.name=h,p})})}mapNonLayerRepeat(t,n){var i;const{repeat:r,spec:s,data:a}=t,o=Hu(t,["repeat","spec","data"]);!ge(r)&&t.columns&&(t=Ys(t,["columns"]),Ie(H8("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=n,f=!ge(r)&&r.row||[u?u.row:null],d=!ge(r)&&r.column||[u?u.column:null],h=ge(r)&&r||[u?u.repeat:null];for(const g of h)for(const m of f)for(const y of d){const b={repeat:g,row:m,column:y,layer:u.layer},v=(s.name||"")+c+"child__"+(ge(r)?`${ni(g)}`:(r.row?`row_${ni(m)}`:"")+(r.column?`column_${ni(y)}`:"")),_=this.map(s,Object.assign(Object.assign({},n),{repeater:b,repeaterPrefix:v}));_.name=v,l.push(Ys(_,["data"]))}const p=ge(r)?t.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:(i=s.data)!==null&&i!==void 0?i:a,align:"all"},o),{columns:p,concat:l})}mapFacet(t,n){const{facet:i}=t;return Iy(i)&&t.columns&&(t=Ys(t,["columns"]),Ie(H8("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:s,parentProjection:a,config:o}=n,l=hB({parentProjection:a,projection:r}),u=dB({parentEncoding:s,encoding:LO(i,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),l?{projection:l}:{}),u?{encoding:u}:{}),{config:o})}mapFacetedUnit(t,n){const i=t.encoding,{row:r,column:s,facet:a}=i,o=Hu(i,["row","column","facet"]),{mark:l,width:u,projection:c,height:f,view:d,params:h,encoding:p}=t,g=Hu(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:r,column:s,facet:a},n),b=LO(o,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),y),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),f?{height:f}:{}),d?{view:d}:{}),c?{projection:c}:{}),{mark:l,encoding:b}),h?{params:h}:{})}),n)}getFacetMappingAndLayout(t,n){var i;const{row:r,column:s,facet:a}=t;if(r||s){a&&Ie(T4e([...r?[du]:[],...s?[hu]:[]]));const o={},l={};for(const u of[du,hu]){const c=t[u];if(c){const f=Hu(c,["align","center","spacing","columns"]);o[u]=f;for(const d of["align","center","spacing"])c[d]!==void 0&&((i=l[d])!==null&&i!==void 0||(l[d]={}),l[d][u]=c[d])}}return{facetMapping:o,layout:l}}else{const{align:o,center:l,spacing:u,columns:c}=a,f=Hu(a,["align","center","spacing","columns"]);return{facetMapping:TPe(f,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},o?{align:o}:{}),l?{center:l}:{}),u?{spacing:u}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:i,parentProjection:r}=n,s=Hu(n,["parentEncoding","parentProjection"]);const{encoding:a,projection:o}=t,l=Hu(t,["encoding","projection"]),u=Object.assign(Object.assign({},s),{parentEncoding:dB({parentEncoding:i,encoding:a,layer:!0}),parentProjection:hB({parentProjection:r,projection:o})});return super.mapLayer(l,u)}}function dB({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...Ae(e),...Ae(t)]);for(const s of r){const a=t[s],o=e[s];if(Ct(a)){const l=Object.assign(Object.assign({},o),a);i[s]=l}else xy(a)?i[s]=Object.assign(Object.assign({},a),{condition:Object.assign(Object.assign({},o),a.condition)}):a||a===null?i[s]=a:(n||yo(o)||st(o)||Ct(o)||ge(o))&&(i[s]=o)}}else i=t;return!i||jn(i)?void 0:i}function hB(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ie(m4e({parentProjection:t,projection:n})),n??t}function jL(e){return"filter"in e}function DPe(e){return e?.stop!==void 0}function YZ(e){return"lookup"in e}function RPe(e){return"data"in e}function LPe(e){return"param"in e}function NPe(e){return"pivot"in e}function FPe(e){return"density"in e}function PPe(e){return"quantile"in e}function BPe(e){return"regression"in e}function jPe(e){return"loess"in e}function UPe(e){return"sample"in e}function zPe(e){return"window"in e}function VPe(e){return"joinaggregate"in e}function $Pe(e){return"flatten"in e}function HPe(e){return"calculate"in e}function XZ(e){return"bin"in e}function WPe(e){return"impute"in e}function qPe(e){return"timeUnit"in e}function GPe(e){return"aggregate"in e}function YPe(e){return"stack"in e}function XPe(e){return"fold"in e}function KPe(e){return e.map(t=>jL(t)?{filter:Ip(t.filter,EFe)}:t)}var Cc=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class JPe extends BL{map(t,n){var i,r;return(i=n.emptySelections)!==null&&i!==void 0||(n.emptySelections={}),(r=n.selectionPredicates)!==null&&r!==void 0||(n.selectionPredicates={}),t=pB(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=pB(t,n),t.encoding){const i={};for(const[r,s]of Zc(t.encoding))i[r]=KZ(s,n);t=Object.assign(Object.assign({},t),{encoding:i})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const i=t,{selection:r}=i,s=Cc(i,["selection"]);return r?Object.assign(Object.assign({},s),{params:Zc(r).map(([a,o])=>{var l;const u=o,{init:c,bind:f,empty:d}=u,h=Cc(u,["init","bind","empty"]);h.type==="single"?(h.type="point",h.toggle=!1):h.type==="multi"&&(h.type="point"),n.emptySelections[a]=d!=="none";for(const p of xr((l=n.selectionPredicates[a])!==null&&l!==void 0?l:{}))p.empty=d!=="none";return{name:a,value:c,select:h,bind:f}})}):t}}function pB(e,t){const{transform:n}=e,i=Cc(e,["transform"]);if(n){const r=n.map(s=>{if(jL(s))return{filter:Nx(s,t)};if(XZ(s)&&Ch(s.bin))return Object.assign(Object.assign({},s),{bin:JZ(s.bin)});if(YZ(s)){const a=s.from,{selection:o}=a,l=Cc(a,["selection"]);return o?Object.assign(Object.assign({},s),{from:Object.assign({param:o},l)}):s}return s});return Object.assign(Object.assign({},i),{transform:r})}return e}function KZ(e,t){var n,i;const r=Ft(e);if(Me(r)&&Ch(r.bin)&&(r.bin=JZ(r.bin)),xh(r)&&((i=(n=r.scale)===null||n===void 0?void 0:n.domain)===null||i===void 0?void 0:i.selection)){const s=r.scale.domain,{selection:a}=s,o=Cc(s,["selection"]);r.scale.domain=Object.assign(Object.assign({},o),a?{param:a}:{})}if(JS(r))if(ge(r.condition))r.condition=r.condition.map(s=>{const{selection:a,param:o,test:l}=s,u=Cc(s,["selection","param","test"]);return o?s:Object.assign(Object.assign({},u),{test:Nx(s,t)})});else{const s=KZ(r.condition,t),{selection:a,param:o,test:l}=s,u=Cc(s,["selection","param","test"]);r.condition=o?r.condition:Object.assign(Object.assign({},u),{test:Nx(r.condition,t)})}return r}function JZ(e){const t=e.extent;if(t?.selection){const{selection:n}=t,i=Cc(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},i),{param:n})})}return e}function Nx(e,t){const n=i=>Ip(i,r=>{var s,a,o;const l=(s=t.emptySelections[r])!==null&&s!==void 0?s:!0,u={param:r,empty:l};return(a=(o=t.selectionPredicates)[r])!==null&&a!==void 0||(o[r]=[]),t.selectionPredicates[r].push(u),u});return e.selection?n(e.selection):Ip(e.test||e.filter,i=>i.selection?n(i.selection):i)}class Fx extends BL{map(t,n){var i;const r=(i=n.selections)!==null&&i!==void 0?i:[];if(t.params&&!Bu(t)){const s=[];for(const a of t.params)NL(a)?r.push(a):s.push(a);t.params=s}return n.selections=r,super.map(t,QZ(t,n))}mapUnit(t,n){var i;const r=n.selections;if(!r||!r.length)return t;const s=((i=n.path)!==null&&i!==void 0?i:[]).concat(t.name),a=[];for(const o of r)if(!o.views||!o.views.length)a.push(o);else for(const l of o.views)(Fe(l)&&(l===t.name||s.indexOf(l)>=0)||ge(l)&&l.map(u=>s.indexOf(u)).every((u,c,f)=>u!==-1&&(c===0||u>f[c-1])))&&a.push(o);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Fx.prototype[e];Fx.prototype[e]=function(n,i){return t.call(this,n,QZ(n,i))}}function QZ(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:((n=t.path)!==null&&n!==void 0?n:[]).concat(e.name)}):t}function ZZ(e,t){t===void 0&&(t=$Z(e.config));const n=t5e(e,t),{width:i,height:r}=e,s=n5e(n,{width:i,height:r,autosize:e.autosize},t);return Object.assign(Object.assign({},n),s?{autosize:s}:{})}const QPe=new MPe,ZPe=new JPe,e5e=new Fx;function t5e(e,t={}){const n={config:t};return e5e.map(QPe.map(ZPe.map(e,n),n),n)}function gB(e){return Fe(e)?{type:e}:e??{}}function n5e(e,t,n){let{width:i,height:r}=t;const s=Bu(e)||rE(e),a={};s?i=="container"&&r=="container"?(a.type="fit",a.contains="padding"):i=="container"?(a.type="fit-x",a.contains="padding"):r=="container"&&(a.type="fit-y",a.contains="padding"):(i=="container"&&(Ie(U8("width")),i=void 0),r=="container"&&(Ie(U8("height")),r=void 0));const o=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?gB(n.autosize):{}),gB(e.autosize));if(o.type==="fit"&&!s&&(Ie(e4e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&Ie(z8("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&Ie(z8("height")),!el(o,{type:"pad"}))return o}function i5e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function r5e(e){return e?`fit-${US(e)}`:"fit"}const s5e=["background","padding"];function mB(e,t){const n={};for(const i of s5e)e&&e[i]!==void 0&&(n[i]=$s(e[i]));return t&&(n.params=e.params),n}class ju{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ju(Ft(this.explicit),Ft(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return Oi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ae(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function jo(e){return{explicit:!0,value:e}}function Fs(e){return{explicit:!1,value:e}}function eee(e){return(t,n,i,r)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:sE(t,n,i,r)}}function sE(e,t,n,i){return e.explicit&&t.explicit&&Ie(z4e(n,i,e.value,t.value)),e}function tf(e,t,n,i,r=sE){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:el(e.value,t.value)?e:r(e,t,n,i)}class a5e extends ju{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Eg(e){return"url"in e}function _1(e){return"values"in e}function tee(e){return"name"in e&&!Eg(e)&&!_1(e)&&!Ic(e)}function Ic(e){return e&&(nee(e)||iee(e)||UL(e))}function nee(e){return"sequence"in e}function iee(e){return"sphere"in e}function UL(e){return"graticule"in e}var Gn;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Gn||(Gn={}));var o5e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Ag(e,t=!0,n=Tr){if(ge(e)){const i=e.map(r=>Ag(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Ih(e))return n(t?b1(e):dFe(e));return t?n(Yn(e)):e}function l5e(e,t){var n;for(const i of xr((n=e.component.selection)!==null&&n!==void 0?n:{})){const r=i.name;let s=`${r}${sf}, ${i.resolve==="global"?"true":`{unit: ${Og(e)}}`}`;for(const a of oE)!a.defined(i)||(a.signals&&(t=a.signals(e,i,t)),a.modifyExpr&&(s=a.modifyExpr(e,i,s)));t.push({name:r+z5e,on:[{events:{signal:i.name+sf},update:`modify(${ke(i.name+ah)}, ${s})`}]})}return zL(t)}function u5e(e,t){if(e.component.selection&&Ae(e.component.selection).length){const n=ke(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:wf("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return zL(t)}function c5e(e,t){var n;let i=!1;for(const r of xr((n=e.component.selection)!==null&&n!==void 0?n:{})){const s=r.name,a=ke(s+ah);if(t.filter(l=>l.name===s).length===0){const l=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${vee}(${a}, ${ke(l)}${u}`})}i=!0;for(const l of oE)l.defined(r)&&l.topLevelSignals&&(t=l.topLevelSignals(e,r,t))}return i&&t.filter(s=>s.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),zL(t)}function f5e(e,t){var n;const i=[...t];for(const r of xr((n=e.component.selection)!==null&&n!==void 0?n:{})){const s={name:r.name+ah};if(r.init){const o=r.project.items.map(l=>o5e(l,["signals"]));s.values=r.init.map(l=>({unit:Og(e,{escape:!1}),fields:o,values:Ag(l,!1)}))}i.filter(o=>o.name===r.name+ah).length||i.push(s)}return i}function ree(e,t){var n;for(const i of xr((n=e.component.selection)!==null&&n!==void 0?n:{}))for(const r of oE)r.defined(i)&&r.marks&&(t=r.marks(e,i,t));return t}function d5e(e,t){for(const n of e.children)Si(n)&&(t=ree(n,t));return t}function h5e(e,t,n,i){const r=Aee(e,t.param,t);return{signal:ta(n.get("type"))&&ge(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function zL(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Vn{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ie(h4e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class Wr extends Vn{constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${iQ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var yB=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class ul extends Vn{constructor(t,n){super(t),this.formula=n}clone(){return new ul(null,Ft(this.formula))}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s)=>{const{field:a,timeUnit:o}=s;if(o){const l=De(s,{forAs:!0});r[un({as:l,field:a,timeUnit:o})]={as:l,field:a,timeUnit:o}}return r},{});return jn(i)?null:new ul(t,i)}static makeFromTransform(t,n){const i=Object.assign({},n),{timeUnit:r}=i,s=yB(i,["timeUnit"]),a=Kr(r),o=Object.assign(Object.assign({},s),{timeUnit:a});return new ul(t,{[un(o)]:o})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Zc(this.formula))t.has(r.as)||(n[i]=r);this.formula=n}producedFields(){return new Set(xr(this.formula).map(t=>t.as))}dependentFields(){return new Set(xr(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${un(this.formula)}`}assemble(){const t=[];for(const n of xr(this.formula)){const{field:i,as:r,timeUnit:s}=n,a=Kr(s),{unit:o,utc:l}=a,u=yB(a,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Ca(i),type:"timeunit"},o?{units:nL(o)}:{}),l?{timezone:"utc"}:{}),u),{as:[r,`${r}_end`]}))}return t}}var p5e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const My="_tuple_fields";class g5e{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const m5e={defined:()=>!0,parse:(e,t,n)=>{var i;const r=t.name,s=(i=t.project)!==null&&i!==void 0?i:t.project=new g5e,a={},o={},l=new Set,u=(g,m)=>{const y=m==="visual"?g.channel:g.field;let b=ni(`${r}_${y}`);for(let v=1;l.has(b);v++)b=ni(`${r}_${y}_${v}`);return l.add(b),{[m]:b}},c=t.type,f=e.config.selection[c],d=n.value!==void 0?Pe(n.value):null;let{fields:h,encodings:p}=Ye(n.select)?n.select:{};if(!h&&!p&&d){for(const g of d)if(!!Ye(g))for(const m of Ae(g))xNe(m)?(p||(p=[])).push(m):c==="interval"?(Ie(u4e),p=f.encodings):(h||(h=[])).push(m)}!h&&!p&&(p=f.encodings,"fields"in f&&(h=f.fields));for(const g of p??[]){const m=e.fieldDef(g);if(m){let y=m.field;if(m.aggregate){Ie(t4e(g,m.aggregate));continue}else if(!y){Ie($8(g));continue}if(m.timeUnit){y=e.vgField(g);const b={timeUnit:m.timeUnit,as:y,field:m.field};o[un(b)]=b}if(!a[y]){let b="E";if(c==="interval"){const _=e.getScaleComponent(g).get("type");ta(_)&&(b="R")}else m.bin&&(b="R-RE");const v={field:y,channel:g,type:b};v.signals=Object.assign(Object.assign({},u(v,"data")),u(v,"visual")),s.items.push(a[y]=v),s.hasField[y]=s.hasChannel[g]=a[y]}}else Ie($8(g))}for(const g of h??[]){if(s.hasField[g])continue;const m={type:"E",field:g};m.signals=Object.assign({},u(m,"data")),s.items.push(m),s.hasField[g]=m}d&&(t.init=d.map(g=>s.items.map(m=>Ye(g)?g[m.channel]!==void 0?g[m.channel]:g[m.field]:g))),jn(o)||(s.timeUnit=new ul(null,o))},signals:(e,t,n)=>{const i=t.name+My;return n.filter(s=>s.name===i).length>0?n:n.concat({name:i,value:t.project.items.map(s=>{const a=p5e(s,["signals","hasLegend"]);return a.field=Ca(a.field),a})})}},nf={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!If(r))continue;const s=e.getScaleComponent(r),a=s?s.get("type"):void 0;if(!s||!ta(a)){Ie(r4e);continue}s.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(a=>n.filter(o=>o.name===a.signals.data).length===0);if(!e.parent||Bx(e)||i.length===0)return n;const r=n.filter(a=>a.name===t.name)[0];let s=r.update;if(s.indexOf(vee)>=0)r.update=`{${i.map(a=>`${ke(Ca(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of i){const o=`${ke(Ca(a.field))}: ${a.signals.data}`;s.includes(o)||(s=`${s.substring(0,s.length-1)}, ${o}}`)}r.update=s}return n.concat(i.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Bx(e))for(const i of t.scales){const r=n.filter(s=>s.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function Px(e,t){return`domain(${ke(e.scaleName(t))})`}function Bx(e){var t;return e.parent&&cm(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:Bx(e.parent.parent))}var y5e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const kp="_brush",jx="_scale_trigger",b5e={defined:e=>e.type==="interval",signals:(e,t,n)=>{const i=t.name,r=i+My,s=nf.defined(t),a=t.init?t.init[0]:null,o=[],l=[];if(t.translate&&!s){const c=`!event.item || event.item.mark.name !== ${ke(i+kp)}`;see(t,(f,d)=>{var h,p;const g=Pe((h=(p=d.between[0]).filter)!==null&&h!==void 0?h:p.filter=[]);return g.includes(c)||g.push(c),f})}t.project.items.forEach((c,f)=>{const d=c.channel;if(d!==li&&d!==Ki){Ie("Interval selections only support x and y encoding channels.");return}const h=a?a[f]:null,p=v5e(e,t,c,h),g=c.signals.data,m=c.signals.visual,y=ke(e.scaleName(d)),b=e.getScaleComponent(d).get("type"),v=ta(b)?"+":"";n.push(...p),o.push(g),l.push({scaleName:e.scaleName(d),expr:`(!isArray(${g}) || (${v}invert(${y}, ${m})[0] === ${v}${g}[0] && ${v}invert(${y}, ${m})[1] === ${v}${g}[1]))`})}),!s&&l.length&&n.push({name:i+jx,value:{},on:[{events:l.map(c=>({scale:c.scaleName})),update:`${l.map(c=>c.expr).join(" && ")} ? ${i+jx} : {}`}]});const u=`unit: ${Og(e)}, fields: ${r}, values`;return n.concat(Object.assign(Object.assign({name:i+sf},a?{init:`{${u}: ${Ag(a)}}`}:{}),o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${u}: [${o}]} : null`}]}:{}))},marks:(e,t,n)=>{const i=t.name,{x:r,y:s}=t.project.hasChannel,a=r?.signals.visual,o=s?.signals.visual,l=`data(${ke(t.name+ah)})`;if(nf.defined(t)||!r&&!s)return n;const u={x:r!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Ae(u))u[m]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${Og(e)}`},u[m]),{value:0}];const c=t.mark,{fill:f,fillOpacity:d,cursor:h}=c,p=y5e(c,["fill","fillOpacity","cursor"]),g=Ae(p).reduce((m,y)=>(m[y]=[{test:[r!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${o}[0] !== ${o}[1]`].filter(b=>b).join(" && "),value:p[y]},{value:null}],m),{});return[{name:`${i+kp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:u}},...n,{name:i+kp,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),g)}}]}};function v5e(e,t,n,i){const r=n.channel,s=n.signals.visual,a=n.signals.data,o=nf.defined(t),l=ke(e.scaleName(r)),u=e.getScaleComponent(r),c=u?u.get("type"):void 0,f=g=>`scale(${l}, ${g})`,d=e.getSizeSignalRef(r===li?"width":"height").signal,h=`${r}(unit)`,p=see(t,(g,m)=>[...g,{events:m.between[0],update:`[${h}, ${h}]`},{events:m,update:`[${s}[0], clamp(${h}, 0, ${d})]`}]);return p.push({events:{signal:t.name+jx},update:ta(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),o?[{name:a,on:[]}]:[Object.assign(Object.assign({name:s},i?{init:Ag(i,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:a},i?{init:Ag(i)}:{}),{on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${l}, ${s})`}]})]}function see(e,t){return e.events.reduce((n,i)=>i.between?t(n,i):(Ie(`${i} is not an ordered event stream for interval selections.`),n),[])}const _5e={defined:e=>e.type==="point",signals:(e,t,n)=>{var i;const r=t.name,s=r+My,a=t.project,o="(item().isVoronoi ? datum.datum : datum)",l=a.items.map(h=>{const p=e.fieldDef(h.channel);return p?.bin?`[${o}[${ke(e.vgField(h.channel,{}))}], ${o}[${ke(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${o}[${ke(h.field)}]`}).join(", "),u=`unit: ${Og(e)}, fields: ${s}, values`,c=t.events,f=xr((i=e.component.selection)!==null&&i!==void 0?i:{}).reduce((h,p)=>p.type==="interval"?h.concat(p.name+kp):h,[]).map(h=>`indexof(item().mark.name, '${h}') < 0`).join(" && "),d=`datum && item().mark.marktype !== 'group'${f?` && ${f}`:""}`;return n.concat([{name:r+sf,on:c?[{events:c,update:`${d} ? {${u}: [${l}]} : null`,force:!0}]:[]}])}};function am(e,t,n,i){const r=JS(t)&&t.condition,s=i(t);if(r){const o=Pe(r).map(l=>{const u=i(l);if(u6e(l)){const{param:c,empty:f}=l,d=Eee(e,{param:c,empty:f});return Object.assign({test:d},u)}else{const c=U2(e,l.test);return Object.assign({test:c},u)}});return{[n]:[...o,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function VL(e,t="text"){const n=e.encoding[t];return am(e,n,t,i=>aE(i,e.config))}function aE(e,t,n="datum"){if(e){if(yo(e))return Jn(e.value);if(Ct(e)){const{format:i,formatType:r}=R2(e);return vL({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function aee(e,t={}){const{encoding:n,markDef:i,config:r,stack:s}=e,a=n.tooltip;if(ge(a))return{tooltip:bB({tooltip:a},s,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return am(e,a,"tooltip",l=>{const u=aE(l,r,o);if(u)return u;if(l===null)return;let c=Dn("tooltip",i,r);if(c===!0&&(c={content:"encoding"}),Fe(c))return{value:c};if(Ye(c))return st(c)?c:c.content==="encoding"?bB(n,s,r,t):{signal:o}})}}function oee(e,t,n,{reactiveGeom:i}={}){const r={},s=i?"datum.datum":"datum",a=[];function o(u,c){const f=Oh(c),d=xa(u)?u:Object.assign(Object.assign({},u),{type:e[f].type}),h=d.title||OL(d,n),p=Pe(h).join(", ");let g;if(lr(c)){const m=c==="x"?"x2":"y2",y=Sl(e[m]);if(jr(d.bin)&&y){const b=De(d,{expr:s}),v=De(y,{expr:s}),{format:_,formatType:S}=R2(d);g=YS(b,v,_,S,n),r[m]=!0}else if(t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:b,formatType:v}=R2(d);g=vL({fieldOrDatumDef:d,format:b,formatType:v,expr:s,config:n,normalizeStack:!0}).signal}}g??(g=aE(d,n,s).signal),a.push({channel:c,key:p,value:g})}xL(e,(u,c)=>{Me(u)?o(u,c):QS(u)&&o(u.condition,c)});const l={};for(const{channel:u,key:c,value:f}of a)!r[u]&&!l[c]&&(l[c]=f);return l}function bB(e,t,n,{reactiveGeom:i}={}){const r=oee(e,t,n,{reactiveGeom:i}),s=Zc(r).map(([a,o])=>`"${a}": ${o}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function w5e(e){const{markDef:t,config:n}=e,i=Dn("aria",t,n);return i===!1?{}:Object.assign(Object.assign(Object.assign({},i?{aria:i}:{}),S5e(e)),E5e(e))}function S5e(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=Dn("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in JNe?{}:{ariaRoleDescription:{value:t}}}function E5e(e){const{encoding:t,markDef:n,config:i,stack:r}=e,s=t.description;if(s)return am(e,s,"description",l=>aE(l,e.config));const a=Dn("description",n,i);if(a!=null)return{description:Jn(a)};if(i.aria===!1)return{};const o=oee(t,r,i);if(!jn(o))return{description:{signal:Zc(o).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Hi(e,t,n={}){const{markDef:i,encoding:r,config:s}=t,{vgChannel:a}=n;let{defaultRef:o,defaultValue:l}=n;o===void 0&&(l??(l=Dn(e,i,s,{vgChannel:a,ignoreVgConfig:!0})),l!==void 0&&(o=Jn(l)));const u=r[e];return am(t,u,a??e,c=>bL({channel:e,channelDef:c,markDef:i,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:o}))}function lee(e,t={filled:void 0}){var n,i,r,s;const{markDef:a,encoding:o,config:l}=e,{type:u}=a,c=(n=t.filled)!==null&&n!==void 0?n:Dn("filled",a,l),f=cn(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,d=(r=(i=Dn(c===!0?"color":void 0,a,l,{vgChannel:"fill"}))!==null&&i!==void 0?i:l.mark[c===!0&&"color"])!==null&&r!==void 0?r:f,h=(s=Dn(c===!1?"color":void 0,a,l,{vgChannel:"stroke"}))!==null&&s!==void 0?s:l.mark[c===!1&&"color"],p=c?"fill":"stroke",g=Object.assign(Object.assign({},d?{fill:Jn(d)}:{}),h?{stroke:Jn(h)}:{});return a.color&&(c?a.fill:a.stroke)&&Ie(TQ("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),Hi("color",e,{vgChannel:p,defaultValue:c?d:h})),Hi("fill",e,{defaultValue:o.fill?d:void 0})),Hi("stroke",e,{defaultValue:o.stroke?h:void 0}))}function A5e(e){const{encoding:t,mark:n}=e,i=t.order;return!kf(n)&&yo(i)?am(e,i,"zindex",r=>Jn(r.value)):{}}function w1({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const s=`${e}Offset`,a=t[s],o=n[s];if((s==="xOffset"||s==="yOffset")&&o){const u=bL({channel:s,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(s),scale:i.getScaleComponent(s),stack:null,defaultRef:Jn(a),bandPosition:r});return{offsetType:"encoding",offset:u}}const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Sr(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:s,config:a,stack:o}=t,l=r[e],u=r[Pu(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=w1({channel:e,markDef:s,encoding:r,model:t,bandPosition:.5}),p=$L({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&lr(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:O5e({channel:e,channelDef:l,channel2Def:u,markDef:s,config:a,scaleName:c,scale:f,stack:o,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[i||e]:g}:void 0}function O5e(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:s,markDef:a}=e;if(Ct(n)&&r&&t===r.fieldChannel){if(Me(n)){let o=n.bandPosition;if(o===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return M2({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:s})}return Dd(n,i,{suffix:"end"},{offset:s})}return mL(e)}function $L({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:s,config:a}=e;return()=>{const o=Oh(n),l=ef(n),u=Dn(n,s,a,{vgChannel:l});if(u!==void 0)return D0(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const c=r.get("type");if(!cn([gs.LOG,gs.TIME,gs.UTC],c)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(t==="zeroOrMin")return o==="y"?{field:{group:"height"}}:{value:0};switch(o){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[xs(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const C5e={left:"x",center:"xc",right:"x2"},I5e={top:"y",middle:"yc",bottom:"y2"};function uee(e,t,n,i="middle"){if(e==="radius"||e==="theta")return ef(e);const r=e==="x"?"align":"baseline",s=Dn(r,t,n);let a;return st(s)?(Ie(k4e(r)),a=void 0):a=s,e==="x"?C5e[a||(i==="top"?"left":"center")]:I5e[a||i]}function B2(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?cee(e,t,{defaultPos:n,defaultPos2:i}):Sr(e,t,{defaultPos:n})}function cee(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:s}=t,a=Pu(e),o=xs(e),l=x5e(t,i,a),u=l[o]?uee(e,r,s):ef(e);return Object.assign(Object.assign({},Sr(e,t,{defaultPos:n,vgChannel:u})),l)}function x5e(e,t,n){const{encoding:i,mark:r,markDef:s,stack:a,config:o}=e,l=Oh(n),u=xs(n),c=ef(n),f=i[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in i||n in s?w1({channel:n,markDef:s,encoding:i,model:e}):w1({channel:l,markDef:s,encoding:i,model:e});if(!f&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const m=xs(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=T5e({channel:n,channelDef:f,channel2Def:i[n],markDef:s,config:o,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:xb(n,s)||xb(n,{[n]:x2(n,s,o.style),[u]:x2(u,s,o.style)})||xb(n,o[r])||xb(n,o.mark)||{[c]:$L({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function T5e({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:a,stack:o,offset:l,defaultRef:u}){return Ct(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?Dd(t,s,{suffix:"start"},{offset:l}):mL({channel:e,channelDef:n,scaleName:s,scale:a,stack:o,markDef:i,config:r,offset:l,defaultRef:u})}function xb(e,t){const n=xs(e),i=ef(e);if(t[i]!==void 0)return{[i]:D0(e,t[i])};if(t[e]!==void 0)return{[i]:D0(e,t[e])};if(t[n]){const r=t[n];if(sm(r))Ie(E4e(n));else return{[n]:D0(e,r)}}}function rf(e,t){var n,i;const{config:r,encoding:s,markDef:a}=e,o=a.type,l=Pu(t),u=xs(t),c=s[t],f=s[l],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=a.orient,g=(i=(n=s[u])!==null&&n!==void 0?n:s.size)!==null&&i!==void 0?i:Dn("size",a,r,{vgChannel:u}),m=o==="bar"&&(t==="x"?p==="vertical":p==="horizontal");return Me(c)&&(Xn(c.bin)||jr(c.bin)||c.timeUnit&&!f)&&!(g&&!sm(g))&&!Ji(h)?D5e({fieldDef:c,fieldDef2:f,channel:t,model:e}):(Ct(c)&&Ji(h)||m)&&!f?M5e(c,t,e):cee(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function k5e(e,t,n,i,r){if(sm(r))if(n){const a=n.get("type");if(a==="band")return{scale:t,band:r.band};r.band!==1&&(Ie(L4e(a)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(st(r))return r;if(r)return{value:r}}if(n){const a=n.get("range");if(Tf(a)&&Un(a.step))return{value:a.step-2}}return{value:F2(i.view,e)-2}}function M5e(e,t,n){const{markDef:i,encoding:r,config:s,stack:a}=n,o=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=xs(t),f=Pu(t),d=kNe(t),h=n.scaleName(d),p=o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let g;(r.size||i.size)&&(p?g=Hi("size",n,{vgChannel:c,defaultRef:Jn(i.size)}):Ie(B4e(i.type)));const m=uZ({channel:t,fieldDef:e,markDef:i,config:s,scaleType:u?.get("type"),useVlSizeChannel:p});g=g||{[c]:k5e(c,h||l,u,s,m)};const y=u?.get("type")!=="band"||!("band"in g[c])?"middle":"top",b=uee(t,i,s,y),v=b==="xc"||b==="yc",{offset:_,offsetType:S}=w1({channel:t,markDef:i,encoding:r,model:n,bandPosition:v?.5:0}),E=mL({channel:t,channelDef:e,markDef:i,config:s,scaleName:l,scale:u,stack:a,offset:_,defaultRef:$L({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:v?S==="encoding"?0:.5:st(m)?{signal:`(1-${m})/2`}:sm(m)?(1-m.band)/2:0});if(c)return Object.assign({[b]:E},g);{const w=ef(f),O=g[c],D=_?Object.assign(Object.assign({},O),{offset:_}):O;return{[b]:E,[w]:ge(E)?[E[0],Object.assign(Object.assign({},E[1]),{offset:D})]:Object.assign(Object.assign({},E),{offset:D})}}}function Vm(e,t,n,i,r){if(oQ(e))return 0;const s=e==="x"||e==="y2"?-t/2:t/2;if(st(n)||st(r)||st(i)){const a=pu(n),o=pu(r),l=pu(i),u=l?`${l} + `:"",c=a?`(${a} ? -1 : 1) * `:"",f=o?`(${o} + ${s})`:s;return{signal:u+c+f}}else return r=r||0,i+(n?-r-s:+r+s)}function D5e({fieldDef:e,fieldDef2:t,channel:n,model:i}){var r,s,a;const{config:o,markDef:l,encoding:u}=i,c=i.getScaleComponent(n),f=i.scaleName(n),d=c?c.get("type"):void 0,h=c.get("reverse"),p=uZ({channel:n,fieldDef:e,markDef:l,config:o,scaleType:d}),g=(r=i.component.axes[n])===null||r===void 0?void 0:r[0],m=(s=g?.get("translate"))!==null&&s!==void 0?s:.5,y=lr(n)&&(a=Dn("binSpacing",l,o))!==null&&a!==void 0?a:0,b=Pu(n),v=ef(n),_=ef(b),{offset:S}=w1({channel:n,markDef:l,encoding:u,model:i,bandPosition:0}),E=st(p)?{signal:`(1-${p.signal})/2`}:sm(p)?(1-p.band)/2:.5;if(Xn(e.bin)||e.timeUnit)return{[_]:vB({fieldDef:e,scaleName:f,bandPosition:E,offset:Vm(b,y,h,m,S)}),[v]:vB({fieldDef:e,scaleName:f,bandPosition:st(E)?{signal:`1-${E.signal}`}:1-E,offset:Vm(n,y,h,m,S)})};if(jr(e.bin)){const w=Dd(e,f,{},{offset:Vm(b,y,h,m,S)});if(Me(t))return{[_]:w,[v]:Dd(t,f,{},{offset:Vm(n,y,h,m,S)})};if(Ch(e.bin)&&e.bin.step)return{[_]:w,[v]:{signal:`scale("${f}", ${De(e,{expr:"datum"})} + ${e.bin.step})`,offset:Vm(n,y,h,m,S)}}}Ie(DQ(b))}function vB({fieldDef:e,scaleName:t,bandPosition:n,offset:i}){return M2({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i})}const R5e=new Set(["aria","width","height"]);function Ma(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?lee(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},L5e(e.markDef,t)),_B(e,"fill",n)),_B(e,"stroke",i)),Hi("opacity",e)),Hi("fillOpacity",e)),Hi("strokeOpacity",e)),Hi("strokeWidth",e)),Hi("strokeDash",e)),A5e(e)),aee(e)),VL(e,"href")),w5e(e))}function _B(e,t,n){const{config:i,mark:r,markDef:s}=e;if(Dn("invalid",s,i)==="hide"&&n&&!kf(r)){const o=N5e(e,{invalid:!0,channels:zS});if(o)return{[t]:[{test:o,value:null},...Pe(n)]}}return n?{[t]:n}:{}}function L5e(e,t){return KNe.reduce((n,i)=>(!R5e.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=Jn(e[i])),n),{})}function N5e(e,{invalid:t=!1,channels:n}){const i=n.reduce((s,a)=>{const o=e.getScaleComponent(a);if(o){const l=o.get("type"),u=e.vgField(a,{expr:"datum"});u&&ta(l)&&(s[u]=!0)}return s},{}),r=Ae(i);if(r.length>0){const s=t?"||":"&&";return r.map(a=>yL(a,t)).join(` ${s} `)}}function HL(e){const{config:t,markDef:n}=e;if(Dn("invalid",n,t)){const r=F5e(e,{channels:Pl});if(r)return{defined:{signal:r}}}return{}}function F5e(e,{invalid:t=!1,channels:n}){const i=n.reduce((s,a)=>{const o=e.getScaleComponent(a);if(o){const l=o.get("type"),u=e.vgField(a,{expr:"datum"});u&&ta(l)&&(s[u]=!0)}return s},{}),r=Ae(i);if(r.length>0){const s=t?"||":"&&";return r.map(a=>yL(a,t)).join(` ${s} `)}}function wB(e,t){if(t!==void 0)return{[e]:Jn(t)}}const NO="voronoi",fee={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(NO)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,s=e.mark;if(kf(s))return Ie(n4e(s)),n;const a={name:e.getName(NO),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},aee(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((u,c)=>{var f;const d=(f=u.name)!==null&&f!==void 0?f:"";d===e.component.mark[0].name?o=c:d.indexOf(NO)>=0&&(l=!0)}),l||n.splice(o+1,0,a),n}},dee={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!LL(e.bind),parse:(e,t,n)=>_ee(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,s=t.bind,a=t.init&&t.init[0],o=fee.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{var c,f;const d=ni(`${i}_${l.field}`);n.filter(p=>p.name===d).length||n.unshift(Object.assign(Object.assign({name:d},a?{init:Ag(a[u])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${ke(l.field)}] : null`}]:[],bind:(f=(c=s[l.field])!==null&&c!==void 0?c:s[l.channel])!==null&&f!==void 0?f:s}))}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.filter(u=>u.name===i+sf)[0],a=i+My,o=r.items.map(u=>ni(`${i}_${u.field}`)),l=o.map(u=>`${u} !== null`).join(" && ");return o.length&&(s.update=`${l} ? {fields: ${a}, values: [${o.join(", ")}]} : null`),delete s.value,delete s.on,n}},j2="_toggle",hee={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+j2,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+sf,i=t.name+j2;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Og(e)}}, `)+`${i} ? ${n} : null`}},P5e={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Fe(t.clear)?wf(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(dee.defined(t))for(const i of t.project.items){const r=n.findIndex(s=>s.name===ni(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,s){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const r of t.project.items){const s=n.findIndex(a=>a.name===r.signals.visual);if(i(s,"[0, 0]"),s===-1){const a=n.findIndex(o=>o.name===r.signals.data);i(a,"null")}}else{let r=n.findIndex(s=>s.name===t.name+sf);i(r,"null"),hee.defined(t)&&(r=n.findIndex(s=>s.name===t.name+j2),i(r,"false"))}return n}},pee={defined:e=>{const t=e.resolve==="global"&&e.bind&&LL(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==v1;return t&&!n&&Ie(s4e),t&&n},parse:(e,t,n)=>{var i;const r=Ft(n);if(r.select=Fe(r.select)?{type:r.select,toggle:t.toggle}:Object.assign(Object.assign({},r.select),{toggle:t.toggle}),_ee(t,r),Ye(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Pe((i=l.filter)!==null&&i!==void 0?i:[]),l.filter.includes(o)||l.filter.push(o)}const s=DO(t.bind)?t.bind.legend:"click",a=Fe(s)?wf(s,"view"):Pe(s);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=DO(t.bind)&&t.bind.legend,s=a=>o=>{const l=Ft(o);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const o=`${ni(a.field)}_legend`,l=`${i}_${o}`;if(n.filter(c=>c.name===l).length===0){const c=r.merge.map(s(`${o}_symbols`)).concat(r.merge.map(s(`${o}_labels`))).concat(r.merge.map(s(`${o}_entries`)));n.unshift(Object.assign(Object.assign({name:l},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.find(d=>d.name===i+sf),a=i+My,o=r.items.filter(d=>d.hasLegend).map(d=>ni(`${i}_${ni(d.field)}_legend`)),u=`${o.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?s.on.push({events:o.map(d=>({signal:d})),update:u}):o.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(d=>d.name===i+j2),f=DO(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push(Object.assign(Object.assign({},c.on[0]),{events:f})):c.on[0].events=f),n}};function B5e(e,t,n){var i,r,s,a;const o=(i=e.fieldDef(t))===null||i===void 0?void 0:i.field;for(const l of xr((r=e.component.selection)!==null&&r!==void 0?r:{})){const u=(s=l.project.hasField[o])!==null&&s!==void 0?s:l.project.hasChannel[t];if(u&&pee.defined(l)){const c=(a=n.get("selections"))!==null&&a!==void 0?a:[];c.push(l.name),n.set("selections",c,!1),u.hasLegend=!0}}}const gee="_translate_anchor",mee="_translate_delta",j5e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=nf.defined(t),s=i+gee,{x:a,y:o}=t.project.hasChannel;let l=wf(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+kp,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${r?Px(e,li):`slice(${a.signals.visual})`}`:"")+(o!==void 0?`, extent_y: ${r?Px(e,Ki):`slice(${o.signals.visual})`}`:"")+"}"}]},{name:i+mee,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&SB(e,t,a,"width",n),o!==void 0&&SB(e,t,o,"height",n),n}};function SB(e,t,n,i,r){var s,a;const o=t.name,l=o+gee,u=o+mee,c=n.channel,f=nf.defined(t),d=r.filter(w=>w.name===n.signals[f?"data":"visual"])[0],h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),g=p.get("type"),m=p.get("reverse"),y=f?c===li?m?"":"-":m?"-":"":"",b=`${l}.extent_${c}`,v=`${y}${u}.${c} / ${f?`${h}`:`span(${b})`}`,_=f?g==="log"?"panLog":g==="symlog"?"panSymlog":g==="pow"?"panPow":"panLinear":"panLinear",S=f?g==="pow"?`, ${(s=p.get("exponent"))!==null&&s!==void 0?s:1}`:g==="symlog"?`, ${(a=p.get("constant"))!==null&&a!==void 0?a:1}`:"":"",E=`${_}(${b}, ${v}${S})`;d.on.push({events:{signal:u},update:f?E:`clampRange(${E}, 0, ${h})`})}const yee="_zoom_anchor",bee="_zoom_delta",U5e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=nf.defined(t),s=i+bee,{x:a,y:o}=t.project.hasChannel,l=ke(e.scaleName(li)),u=ke(e.scaleName(Ki));let c=wf(t.zoom,"scope");return r||(c=c.map(f=>(f.markname=i+kp,f))),n.push({name:i+yee,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>!!f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&EB(e,t,a,"width",n),o!==void 0&&EB(e,t,o,"height",n),n}};function EB(e,t,n,i,r){var s,a;const o=t.name,l=n.channel,u=nf.defined(t),c=r.filter(_=>_.name===n.signals[u?"data":"visual"])[0],f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(l),h=d.get("type"),p=u?Px(e,l):c.name,g=o+bee,m=`${o}${yee}.${l}`,y=u?h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear":"zoomLinear",b=u?h==="pow"?`, ${(s=d.get("exponent"))!==null&&s!==void 0?s:1}`:h==="symlog"?`, ${(a=d.get("constant"))!==null&&a!==void 0?a:1}`:"":"",v=`${y}(${p}, ${m}, ${g}${b})`;c.on.push({events:{signal:g},update:u?v:`clampRange(${v}, 0, ${f})`})}const ah="_store",sf="_tuple",z5e="_modify",vee="vlSelectionResolve",oE=[_5e,b5e,m5e,hee,dee,nf,pee,P5e,j5e,U5e,fee];function V5e(e){let t=e.parent;for(;t&&!oo(t);)t=t.parent;return t}function Og(e,{escape:t}={escape:!0}){let n=t?ke(e.name):e.name;const i=V5e(e);if(i){const{facet:r}=i;for(const s of ma)r[s]&&(n+=` + '__facet_${s}_' + (facet[${ke(i.vgField(s))}])`)}return n}function WL(e){var t;return xr((t=e.component.selection)!==null&&t!==void 0?t:{}).reduce((n,i)=>n||i.project.items.some(r=>r.field===v1),!1)}function _ee(e,t){(Fe(t.select)||!t.select.on)&&delete e.events,(Fe(t.select)||!t.select.clear)&&delete e.clear,(Fe(t.select)||!t.select.toggle)&&delete e.toggle}function Ux(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Ux(e.object)),t.push(...Ux(e.property))),t)}function wee(e){return e.object.type==="MemberExpression"?wee(e.object):e.object.name==="datum"}function See(e){const t=aR(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&wee(i)&&n.add(Ux(i).slice(1).join("."))}),n}class om extends Vn{constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=U2(this.model,this.filter,this),this._dependentFields=See(this.expr)}clone(){return new om(null,this.model,Ft(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function $5e(e,t){var n;const i={},r=e.config.selection;if(!t||!t.length)return i;for(const s of t){const a=ni(s.name),o=s.select,l=Fe(o)?o:o.type,u=Ye(o)?Ft(o):{type:l},c=r[l];for(const d in c)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]=Object.assign(Object.assign({},c[d]),u[d])),(u[d]===void 0||u[d]===!0)&&(u[d]=(n=c[d])!==null&&n!==void 0?n:u[d]));const f=i[a]=Object.assign(Object.assign({},u),{name:a,type:l,init:s.value,bind:s.bind,events:Fe(u.on)?wf(u.on,"scope"):Pe(Ft(u.on))});for(const d of oE)d.defined(f)&&d.parse&&d.parse(e,f,s)}return i}function Eee(e,t,n,i="datum"){const r=Fe(t)?t:t.param,s=ni(r),a=ke(s+ah);let o;try{o=e.getSelectionComponent(s,r)}catch{return`!!${s}`}if(o.project.timeUnit){const c=n??e.component.data.raw,f=o.project.timeUnit.clone();c.parent?f.insertAsParentOf(c):c.parent=f}const l=`vlSelectionTest(${a}, ${i}${o.resolve==="global"?")":`, ${ke(o.resolve)})`}`,u=`length(data(${a}))`;return t.empty===!1?`${u} && ${l}`:`!${u} || ${l}`}function Aee(e,t,n){const i=ni(t),r=n.encoding;let s=n.field,a;try{a=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!s)s=a.project.items[0].field,a.project.items.length>1&&Ie(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ke(s)}.`);else if(r&&!s){const o=a.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(s=a.project.items[0].field,Ie((o.length?"Multiple ":"No ")+`matching ${ke(r)} encoding found for selection ${ke(n.param)}. Using "field": ${ke(s)}.`)):s=o[0].field}return`${a.name}[${ke(Ca(s))}]`}function H5e(e,t){var n;for(const[i,r]of Zc((n=e.component.selection)!==null&&n!==void 0?n:{})){const s=e.getName(`lookup_${i}`);e.component.data.outputNodes[s]=r.materialized=new Wr(new om(t,e,{param:i}),s,Gn.Lookup,e.component.data.outputNodeRefCounts)}}function U2(e,t,n){return M0(t,i=>Fe(i)?i:_Fe(i)?Eee(e,i,n):UQ(i))}var Tb=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function W5e(e,t){if(!!e)return ge(e)&&!tc(e)?e.map(n=>OL(n,t)).join(", "):e}function FO(e,t,n,i){var r,s,a,o,l;(r=e.encode)!==null&&r!==void 0||(e.encode={}),(s=(o=e.encode)[t])!==null&&s!==void 0||(o[t]={}),(a=(l=e.encode[t]).update)!==null&&a!==void 0||(l.update={}),e.encode[t].update[n]=i}function p0(e,t,n,i={header:!1}){var r,s;const a=e.combine(),{disable:o,orient:l,scale:u,labelExpr:c,title:f,zindex:d}=a,h=Tb(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!o){for(const p in h){const g=E6e[p],m=h[p];if(g&&g!==t&&g!=="both")delete h[p];else if(ky(m)){const{condition:y}=m,b=Tb(m,["condition"]),v=Pe(y),_=eB[p];if(_){const{vgProp:S,part:E}=_,w=[...v.map(O=>{const{test:D}=O,x=Tb(O,["test"]);return Object.assign({test:U2(null,D)},x)}),b];FO(h,E,S,w),delete h[p]}else if(_===null){const S={signal:v.map(E=>{const{test:w}=E,O=Tb(E,["test"]);return`${U2(null,w)} ? ${j8(O)} : `}).join("")+j8(b)};h[p]=S}}else if(st(m)){const y=eB[p];if(y){const{vgProp:b,part:v}=y;FO(h,v,b,m),delete h[p]}}cn(["labelAlign","labelBaseline"],p)&&h[p]===null&&delete h[p]}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:p}=h.encode;h.encode=Object.assign({},p?{grid:p}:{}),jn(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:u,orient:l},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Oi(d,0)})}else{if(!i.header&&e.mainExtracted)return;if(c!==void 0){let g=c;((s=(r=h.encode)===null||r===void 0?void 0:r.labels)===null||s===void 0?void 0:s.update)&&st(h.encode.labels.update.text)&&(g=th(c,"datum.label",h.encode.labels.update.text.signal)),FO(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const g of bZ)e.hasAxisPart(g)||delete h.encode[g];jn(h.encode)&&delete h.encode}const p=W5e(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},p?{title:p}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:Oi(d,0)})}}}function Oee(e){const{axes:t}=e.component,n=[];for(const i of Pl)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const s=i==="x"?"height":"width",a=e.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function q5e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>p0(r,"grid",t)),...i.map(r=>p0(r,"grid",t)),...n.map(r=>p0(r,"main",t)),...i.map(r=>p0(r,"main",t))].filter(r=>r)}function AB(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const s=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Ae(a),...Ae(o)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${s}" ? ${pu(a[c])} : ${pu(o[c])}`};return u}return t[r]})])}function G5e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:HQ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",a=st(n)?"axisOrient":`axis${_y(n)}`,o=[...r,...r.map(u=>s+u.substr(4))],l=["axis",a,s];return{vlOnlyAxisConfig:AB(o,i,e,n),vgAxisConfig:AB(l,i,e,n),axisConfigStyle:Y5e([...l,...o],i)}}function Y5e(e,t){var n;const i=[{}];for(const r of e){let s=(n=t[r])===null||n===void 0?void 0:n.style;if(s){s=Pe(s);for(const a of s)i.push(t.style[a])}}return Object.assign.apply(null,i)}function zx(e,t,n,i={}){var r;const s=SQ(e,n,t);if(s!==void 0)return{configFrom:"style",configValue:s};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((r=i[a])===null||r===void 0?void 0:r[e])!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const OB={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:i,formatType:r}=n;return nZ(e,e.type,i,r,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return iZ(i,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var i;return(i=t.grid)!==null&&i!==void 0?i:X5e(n,e)},gridScale:({model:e,channel:t})=>K5e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||Iee(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||Cee(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var i;return(i=e.labelFlush)!==null&&i!==void 0?i:Q5e(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var i;return(i=e.labelOverlap)!==null&&i!==void 0?i:Z5e(t.type,n,Me(t)&&!!t.timeUnit,Me(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{var s;const a=e==="x"?"width":e==="y"?"height":void 0,o=a?t.getSizeSignalRef(a):void 0;return(s=n.tickCount)!==null&&s!==void 0?s:t8e({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=xee(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),s=n==="x"?"x2":"y2",a=t.fieldDef(s);return AQ(r?[Z8(r)]:[],Me(a)?[Z8(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>n8e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var i;return(i=e.zindex)!==null&&i!==void 0?i:i8e(n,t)}};function X5e(e,t){return!Ji(e)&&Me(t)&&!Xn(t?.bin)&&!jr(t?.bin)}function K5e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function J5e(e,t,n,i,r){const s=t?.labelAngle;if(s!==void 0)return st(s)?s:y1(s);{const{configValue:a}=zx("labelAngle",i,t?.style,r);return a!==void 0?y1(a):n===li&&cn([dL,fL],e.type)&&!(Me(e)&&e.timeUnit)?270:void 0}}function Vx(e){return`(((${e.signal} % 360) + 360) % 360)`}function Cee(e,t,n,i){if(e!==void 0)if(n==="x"){if(st(e)){const r=Vx(e),s=st(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(st(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(st(e)){const r=Vx(e),s=st(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(st(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Iee(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,s=i?"bottom":"left";if(st(e)){const a=Vx(e),o=st(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${r?`(${a} + 90)`:a} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${a} && ${a} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(st(t)){const a=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${a} "${s}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===s)?"left":"right"}function Q5e(e,t){if(t==="x"&&cn(["quantitative","temporal"],e))return!0}function Z5e(e,t,n,i){if(n&&!Ye(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function e8e(e){return e==="x"?"bottom":"left"}function t8e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!Ji(t)&&t!=="log"){if(Me(e)){if(Xn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&cn(["month","hours","day","quarter"],(r=Kr(e.timeUnit))===null||r===void 0?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function xee(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),s=i?i.title:void 0,a=r?r.title:void 0;if(s&&a)return OQ(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function n8e(e,t){const n=e.values;if(ge(n))return yZ(t,n);if(st(n))return n}function i8e(e,t){return e==="rect"&&D2(t)?1:0}class Cg extends Vn{constructor(t,n){super(t),this.transform=n,this._dependentFields=See(this.transform.calculate)}clone(){return new Cg(null,Ft(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(!!xh(i)&&oZ(i.sort)){const{field:s,timeUnit:a}=i,o=i.sort,l=o.map((u,c)=>`${UQ({field:s,timeUnit:a,equal:u})} ? ${c} : `).join("")+o.length;t=new Cg(t,{calculate:l,as:Ig(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${un(this.transform)}`}}function Ig(e,t,n){return De(e,Object.assign({prefix:t,suffix:"sort_index"},n??{}))}function lE(e,t){return cn(["top","bottom"],t)?"column":cn(["left","right"],t)||e==="row"?"row":"column"}function xg(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Oi((t||{})[e],r[e],n.header[e])}function uE(e,t,n,i){const r={};for(const s of e){const a=xg(s,t||{},n,i);a!==void 0&&(r[s]=a)}return r}const qL=["row","column"],GL=["header","footer"];function r8e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:o}=uE(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=lE(t,o),u=y1(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),kee(u,l)),Tee(l,u,s)),Mee(i,r,t,q6e,NZ))}}function Tee(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=Iee(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function kee(e,t){const n=Cee(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function s8e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of GL)if(n[r])for(const s of n[r]){const a=o8e(e,t,r,n,s);a!=null&&i.push(a)}return i}function a8e(e,t){var n;const{sort:i}=e;return ll(i)?{field:De(i,{expr:"datum"}),order:(n=i.order)!==null&&n!==void 0?n:"ascending"}:ge(i)?{field:Ig(e,t,{expr:"datum"}),order:"ascending"}:{field:De(e,{expr:"datum"}),order:i??"ascending"}}function $x(e,t,n){const{format:i,formatType:r,labelAngle:s,labelAnchor:a,labelOrient:o,labelExpr:l}=uE(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=vL({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=lE(t,o);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?th(th(l,"datum.label",u),"datum.value",De(e,{expr:"parent"})):u}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),kee(s,c)),Tee(c,s,a)),Mee(n,e,t,G6e,FZ))}function o8e(e,t,n,i,r){if(r){let s=null;const{facetFieldDef:a}=i,o=e.config?e.config:void 0;if(a&&r.labels){const{labelOrient:f}=uE(["labelOrient"],a.header,o,t);(t==="row"&&!cn(["top","bottom"],f)||t==="column"&&!cn(["left","right"],f))&&(s=$x(a,t,o))}const l=oo(e)&&!Iy(e.facet),u=r.axes,c=u?.length>0;if(s||c){const f=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:a8e(a,t)}:{}),c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),s?{title:s}:{}),r.sizeSignal?{encode:{update:{[f]:r.sizeSignal}}}:{}),c?{axes:u}:{})}}return null}const l8e={column:{start:0,end:1},row:{start:1,end:0}};function u8e(e,t){return l8e[t][e]}function c8e(e,t){const n={};for(const i of ma){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:s,titleOrient:a}=uE(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=lE(i,a),l=u8e(s,o);l!==void 0&&(n[o]=l)}}return jn(n)?void 0:n}function Mee(e,t,n,i,r){const s={};for(const a of i){if(!r[a])continue;const o=xg(a,t?.header,e,n);o!==void 0&&(s[r[a]]=o)}return s}function YL(e){return[...kb(e,"width"),...kb(e,"height"),...kb(e,"childWidth"),...kb(e,"childHeight")]}function kb(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const s=e.getScaleComponent(n);if(s){const a=s.get("type"),o=s.get("range");if(Ji(a)&&Tf(o)){const l=e.scaleName(n);return oo(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[CB(l,o)]:[CB(l,o),{name:r,update:Dee(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const s=r.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",o=Rx(e.config.view,s?"width":"height"),l=`isFinite(${a}) ? ${a} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function CB(e,t){const n=`${e}_step`;return st(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Dee(e,t,n){const i=t.get("type"),r=t.get("padding"),s=Oi(t.get("paddingOuter"),r);let a=t.get("paddingInner");return a=i==="band"?a!==void 0?a:r:1,`bandspace(${n}, ${pu(a)}, ${pu(s)}) * ${e}_step`}function Ree(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Lee(e,t){return Ae(e).reduce((n,i)=>{const r=e[i];return Object.assign(Object.assign({},n),am(t,r,i,s=>Jn(s.value)))},{})}function Nee(e,t){if(oo(t))return e==="theta"?"independent":"shared";if(cm(t))return"shared";if(tN(t))return lr(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function XL(e,t){const n=e.scale[t],i=lr(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&Ie($4e(t)),"independent"):e[i][t]||"shared"}const f8e=Object.assign(Object.assign({},K6e),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Fee=Ae(f8e);class d8e extends ju{}const IB={symbols:h8e,gradient:p8e,labels:g8e,entries:m8e};function h8e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:s}){var a,o,l,u,c,f,d,h;if(s!=="symbol")return;const{markDef:p,encoding:g,config:m,mark:y}=n,b=p.filled&&y!=="trail";let v=Object.assign(Object.assign({},ZNe({},n,qFe)),lee(n,{filled:b}));const _=(a=r.get("symbolOpacity"))!==null&&a!==void 0?a:m.legend.symbolOpacity,S=(o=r.get("symbolFillColor"))!==null&&o!==void 0?o:m.legend.symbolFillColor,E=(l=r.get("symbolStrokeColor"))!==null&&l!==void 0?l:m.legend.symbolStrokeColor,w=_===void 0?(u=Pee(g.opacity))!==null&&u!==void 0?u:p.opacity:void 0;if(v.fill){if(i==="fill"||b&&i===Cs)delete v.fill;else if(v.fill.field)S?delete v.fill:(v.fill=Jn((c=m.legend.symbolBaseFillColor)!==null&&c!==void 0?c:"black"),v.fillOpacity=Jn(w??1));else if(ge(v.fill)){const O=(h=(d=Hx((f=g.fill)!==null&&f!==void 0?f:g.color))!==null&&d!==void 0?d:p.fill)!==null&&h!==void 0?h:b&&p.color;O&&(v.fill=Jn(O))}}if(v.stroke){if(i==="stroke"||!b&&i===Cs)delete v.stroke;else if(v.stroke.field||E)delete v.stroke;else if(ge(v.stroke)){const O=Oi(Hx(g.stroke||g.color),p.stroke,b?p.color:void 0);O&&(v.stroke={value:O})}}if(i!==Fu){const O=Me(t)&&jee(n,r,t);O?v.opacity=[Object.assign({test:O},Jn(w??1)),Jn(m.legend.unselectedOpacity)]:w&&(v.opacity=Jn(w))}return v=Object.assign(Object.assign({},v),e),jn(v)?void 0:v}function p8e(e,{model:t,legendType:n,legendCmpt:i}){var r;if(n!=="gradient")return;const{config:s,markDef:a,encoding:o}=t;let l={};const c=((r=i.get("gradientOpacity"))!==null&&r!==void 0?r:s.legend.gradientOpacity)===void 0?Pee(o.opacity)||a.opacity:void 0;return c&&(l.opacity=Jn(c)),l=Object.assign(Object.assign({},l),e),jn(l)?void 0:l}function g8e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const s=n.legend(i)||{},a=n.config,o=Me(t)?jee(n,r,t):void 0,l=o?[{test:o,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s,f=sh(c)?_L({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):void 0,d=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),f?{text:f}:{}),e);return jn(d)?void 0:d}function m8e(e,{legendCmpt:t}){const n=t.get("selections");return n?.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function Pee(e){return Bee(e,(t,n)=>Math.max(t,n.value))}function Hx(e){return Bee(e,(t,n)=>Oi(t,n.value))}function Bee(e,t){if(f6e(e))return Pe(e.condition).reduce(t,e.value);if(yo(e))return e.value}function jee(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ke(n.field);return i.map(s=>`(!length(data(${ke(ni(s)+ah)})) || (${s}[${r}] && indexof(${s}[${r}], datum.value) >= 0))`).join(" || ")}const xB={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return nZ(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return iZ(i,t,n)},gradientLength:e=>{var t,n;const{legend:i,legendConfig:r}=e;return(n=(t=i.gradientLength)!==null&&t!==void 0?t:r.gradientLength)!==null&&n!==void 0?n:E8e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var i,r;return(r=(i=e.labelOverlap)!==null&&i!==void 0?i:t.labelOverlap)!==null&&r!==void 0?r:A8e(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>{var r;return(r=e.symbolType)!==null&&r!==void 0?r:b8e(t.type,n,i.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>Tp(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(xp(n)&&no(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>y8e(t,e)};function y8e(e,t){const n=e.values;if(ge(n))return yZ(t,n);if(st(n))return n}function b8e(e,t,n,i){var r;if(t!=="shape"){const s=(r=Hx(n))!==null&&r!==void 0?r:i;if(s)return s}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function v8e(e){const{legend:t}=e;return Oi(t.type,_8e(e))}function _8e({channel:e,timeUnit:t,scaleType:n}){if(xp(e)){if(cn(["quarter","month","day"],t))return"symbol";if(no(n))return"gradient"}return"symbol"}function w8e({legendConfig:e,legendType:t,orient:n,legend:i}){var r,s;return(s=(r=i.direction)!==null&&r!==void 0?r:e[t?"gradientDirection":"symbolDirection"])!==null&&s!==void 0?s:S8e(n,t)}function S8e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function E8e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(no(r))return n==="horizontal"?i==="top"||i==="bottom"?TB(t,"width",a,s):a:TB(t,"height",l,o)}function TB(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function A8e(e){if(cn(["quantile","threshold","log","symlog"],e))return"greedy"}function Uee(e){const t=Si(e)?O8e(e):T8e(e);return e.component.legends=t,t}function O8e(e){const{encoding:t}=e,n={};for(const i of[Cs,...BZ]){const r=Pi(t[i]);!r||!e.getScaleComponent(i)||i===Is&&Me(r)&&r.type===rm||(n[i]=x8e(e,i))}return n}function C8e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function I8e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function x8e(e,t){var n,i,r;let s=e.legend(t);const{markDef:a,encoding:o,config:l}=e,u=l.legend,c=new d8e({},C8e(e,t));B5e(e,t,c);const f=s!==void 0?!s:u.disable;if(c.set("disable",f,s!==void 0),f)return c;s=s||{};const d=e.getScaleComponent(t).get("type"),h=Pi(o[t]),p=Me(h)?(n=Kr(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=s.orient||l.legend.orient||"right",m=v8e({legend:s,channel:t,timeUnit:p,scaleType:d}),y=w8e({legend:s,legendType:m,orient:g,legendConfig:u}),b={legend:s,channel:t,model:e,markDef:a,encoding:o,fieldOrDatumDef:h,legendConfig:u,config:l,scaleType:d,orient:g,legendType:m,direction:y};for(const w of Fee){if(m==="gradient"&&w.startsWith("symbol")||m==="symbol"&&w.startsWith("gradient"))continue;const O=w in xB?xB[w](b):s[w];if(O!==void 0){const D=I8e(O,w,s,e.fieldDef(t));(D||l.legend[w]===void 0)&&c.set(w,O,D)}}const v=(i=s?.encoding)!==null&&i!==void 0?i:{},_=c.get("selections"),S={},E={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:m};for(const w of["labels","legend","title","symbols","gradient","entries"]){const O=Lee((r=v[w])!==null&&r!==void 0?r:{},e),D=w in IB?IB[w](O,E):O;D!==void 0&&!jn(D)&&(S[w]=Object.assign(Object.assign(Object.assign({},_?.length&&Me(h)?{name:`${ni(h.field)}_legend_${w}`}:{}),_?.length?{interactive:!!_}:{}),{update:D}))}return jn(S)||c.set("encode",S,!!s?.encoding),c}function T8e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){Uee(i);for(const r of Ae(i.component.legends))n.legend[r]=XL(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=zee(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of Ae(t))for(const r of e.children)!r.component.legends[i]||n.legend[i]==="shared"&&delete r.component.legends[i];return t}function zee(e,t){var n,i,r,s;if(!e)return t.clone();const a=e.getWithExplicit("orient"),o=t.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;let l=!1;for(const u of Fee){const c=tf(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return k8e(f,d);case"title":return CQ(f,d);case"type":return l=!0,Fs("symbol")}return sE(f,d,u,"legend")});e.setWithExplicit(u,c)}return l&&(!((i=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||i===void 0)&&i.gradient&&I2(e.implicit,["encode","gradient"]),!((s=(r=e.explicit)===null||r===void 0?void 0:r.encode)===null||s===void 0)&&s.gradient&&I2(e.explicit,["encode","gradient"])),e}function k8e(e,t){return t.value==="circle"?t:e}var M8e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function D8e(e,t,n,i){var r,s,a,o,l;(r=e.encode)!==null&&r!==void 0||(e.encode={}),(s=(o=e.encode)[t])!==null&&s!==void 0||(o[t]={}),(a=(l=e.encode[t]).update)!==null&&a!==void 0||(l.update={}),e.encode[t].update[n]=i}function Vee(e){const t=e.component.legends,n={};for(const r of Ae(t)){const s=e.getScaleComponent(r),a=Yn(s.get("domains"));if(n[a])for(const o of n[a])zee(o,t[r])||n[a].push(t[r]);else n[a]=[t[r].clone()]}return xr(n).flat().map(r=>R8e(r,e.config)).filter(r=>r!==void 0)}function R8e(e,t){var n,i,r;const s=e.combine(),{disable:a,labelExpr:o,selections:l}=s,u=M8e(s,["disable","labelExpr","selections"]);if(!a){if(t.aria===!1&&u.aria==null&&(u.aria=!1),!((n=u.encode)===null||n===void 0)&&n.symbols){const c=u.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!u.stroke&&(c.stroke={value:"transparent"});for(const f of BZ)u[f]&&delete c[f]}if(u.title||delete u.title,o!==void 0){let c=o;((r=(i=u.encode)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r.update)&&st(u.encode.labels.update.text)&&(c=th(o,"datum.label",u.encode.labels.update.text.signal)),D8e(u,"labels","text",{signal:c})}return u}}function L8e(e){return cm(e)||tN(e)?N8e(e):$ee(e)}function N8e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),$ee(e))}function $ee(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},s=t.data.reduce((a,o)=>{const l=st(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return cn(a,l)||a.push(l),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:i,size:r,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]}},n)]}else return[Object.assign(Object.assign({name:i},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const F8e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Hee extends ju{constructor(t,n,i,r){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Wee(e){e.component.projection=Si(e)?P8e(e):U8e(e)}function P8e(e){var t;if(e.hasProjection){const n=us(e.specifiedProjection),i=!(n&&(n.scale!=null||n.translate!=null)),r=i?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,s=i?B8e(e):void 0,a=new Hee(e.projectionName(!0),Object.assign(Object.assign({},(t=us(e.config.projection))!==null&&t!==void 0?t:{}),n??{}),r,s);return a.get("type")||a.set("type","equalEarth",!1),a}}function B8e(e){const t=[],{encoding:n}=e;for(const i of[[Ll,Rl],[Ia,Co]])(Pi(n[i[0]])||Pi(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Is)&&e.typedFieldDef(Is).type===rm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Gn.Main)),t}function j8e(e,t){const n=BR(F8e,r=>!!(!at(e.explicit,r)&&!at(t.explicit,r)||at(e.explicit,r)&&at(t.explicit,r)&&el(e.get(r),t.get(r))));if(el(e.size,t.size)){if(n)return e;if(el(e.explicit,{}))return t;if(el(t.explicit,{}))return e}return null}function U8e(e){if(e.children.length===0)return;let t;for(const i of e.children)Wee(i);const n=BR(e.children,i=>{const r=i.component.projection;if(r)if(t){const s=j8e(t,r);return s&&(t=s),!!s}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new Hee(i,t.specifiedProjection,t.size,Ft(t.data));for(const s of e.children){const a=s.component.projection;a&&(a.isFit&&r.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),i),a.merged=!0)}return r}}var z8e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function V8e(e,t,n,i){var r,s;if(Ty(t,n)){const a=Si(e)?(s=(r=e.axis(n))!==null&&r!==void 0?r:e.legend(n))!==null&&s!==void 0?s:{}:{},o=De(t,{expr:"datum"}),l=De(t,{expr:"datum",binSuffix:"end"});return{formulaAs:De(t,{binSuffix:"range",forAs:!0}),formula:YS(o,l,a.format,a.formatType,i)}}return{}}function qee(e,t){return`${bQ(e)}_${t}`}function $8e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function KL(e,t,n){var i;const r=(i=ZS(n,void 0))!==null&&i!==void 0?i:{},s=qee(r,t);return e.getName(`${s}_bins`)}function H8e(e){return"as"in e}function kB(e,t,n){let i,r;H8e(e)?i=Fe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[De(e,{forAs:!0}),De(e,{binSuffix:"end",forAs:!0})];const s=Object.assign({},ZS(t,void 0)),a=qee(s,e.field),{signal:o,extentSignal:l}=$8e(n,a);if(VS(s.extent)){const c=s.extent;r=Aee(n,c.param,c),delete s.extent}const u=Object.assign(Object.assign(Object.assign({bin:s,field:e.field,as:[i]},o?{signal:o}:{}),l?{extentSignal:l}:{}),r?{span:r}:{});return{key:a,binComponent:u}}class cl extends Vn{constructor(t,n){super(t),this.bins=n}clone(){return new cl(null,Ft(this.bins))}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,a)=>{if(xa(s)&&Xn(s.bin)){const{key:o,binComponent:l}=kB(s,s.bin,n);r[o]=Object.assign(Object.assign(Object.assign({},l),r[o]),V8e(n,s,a,n.config))}return r},{});return jn(i)?null:new cl(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:s}=kB(n,n.bin,i);return new cl(t,{[r]:s})}merge(t,n){for(const i of Ae(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=tl([...this.bins[i].as,...t.bins[i].as],un)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(xr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(xr(this.bins).map(t=>t.field))}hash(){return`Bin ${un(this.bins)}`}assemble(){return xr(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,s=t.bin,{extent:a}=s,o=z8e(s,["extent"]),l=Object.assign(Object.assign(Object.assign({type:"bin",field:Ca(t.field),as:i,signal:t.signal},VS(a)?{extent:null}:{extent:a}),t.span?{span:{signal:`span(${t.span})`}}:{}),o);!a&&t.extentSignal&&(n.push({type:"extent",field:Ca(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const u of r)for(let c=0;c<2;c++)n.push({type:"formula",expr:De({field:i[c]},{expr:"datum"}),as:u[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function W8e(e,t,n,i){var r;const s=Si(i)?i.encoding[Pu(t)]:void 0;if(xa(n)&&Si(i)&&cZ(n,s,i.markDef,i.config))e.add(De(n,{})),e.add(De(n,{suffix:"end"})),n.bin&&Ty(n,t)&&e.add(De(n,{binSuffix:"range"}));else if(ENe(t)){const a=SNe(t);e.add(i.getName(a))}else e.add(De(n));return xh(n)&&LFe((r=n.scale)===null||r===void 0?void 0:r.range)&&e.add(n.scale.range.field),e}function q8e(e,t){var n;for(const i of Ae(t)){const r=t[i];for(const s of Ae(r))i in e?e[i][s]=new Set([...(n=e[i][s])!==null&&n!==void 0?n:[],...r[s]]):e[i]={[s]:r[s]}}}class ao extends Vn{constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}clone(){return new ao(null,new Set(this.dimensions),Ft(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const r={},s=new Set;return!i||(n.forEachFieldDef((a,o)=>{var l,u,c,f;const{aggregate:d,field:h}=a;if(d)if(d==="count")(l=r["*"])!==null&&l!==void 0||(r["*"]={}),r["*"].count=new Set([De(a,{forAs:!0})]);else{if(Ou(d)||xf(d)){const p=Ou(d)?"argmin":"argmax",g=d[p];(u=r[g])!==null&&u!==void 0||(r[g]={}),r[g][p]=new Set([De({op:p,field:g},{forAs:!0})])}else(c=r[h])!==null&&c!==void 0||(r[h]={}),r[h][d]=new Set([De(a,{forAs:!0})]);If(o)&&n.scaleDomain(o)==="unaggregated"&&((f=r[h])!==null&&f!==void 0||(r[h]={}),r[h].min=new Set([De({field:h,aggregate:"min"},{forAs:!0})]),r[h].max=new Set([De({field:h,aggregate:"max"},{forAs:!0})]))}else W8e(s,o,a,n)}),s.size+Ae(r).length===0)?null:new ao(t,s,r)}static makeFromTransform(t,n){var i,r,s;const a=new Set,o={};for(const l of n.aggregate){const{op:u,field:c,as:f}=l;u&&(u==="count"?((i=o["*"])!==null&&i!==void 0||(o["*"]={}),o["*"].count=new Set([f||De(l,{forAs:!0})])):((r=o[c])!==null&&r!==void 0||(o[c]={}),o[c][u]=new Set([f||De(l,{forAs:!0})])))}for(const l of(s=n.groupby)!==null&&s!==void 0?s:[])a.add(l);return a.size+Ae(o).length===0?null:new ao(t,a,o)}merge(t){return eQ(this.dimensions,t.dimensions)?(q8e(this.measures,t.measures),!0):(sFe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ae(this.measures)])}producedFields(){const t=new Set;for(const n of Ae(this.measures))for(const i of Ae(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${un({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const s of Ae(this.measures))for(const a of Ae(this.measures[s]))for(const o of this.measures[s][a])i.push(o),t.push(a),n.push(s==="*"?null:Ca(s));return{type:"aggregate",groupby:[...this.dimensions].map(Ca),ops:t,fields:n,as:i}}}class lm extends Vn{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const s of ma){const a=n.facet[s];if(a){const{bin:o,sort:l}=a;this[s]=Object.assign({name:n.getName(`${s}_domain`),fields:[De(a),...Xn(o)?[De(a,{binSuffix:"end"})]:[]]},ll(l)?{sortField:l}:ge(l)?{sortIndexField:Ig(a,s)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of ma)this[n]&&(t+=` ${n.charAt(0)}:${un(this[n])}`);return t}get fields(){var t;const n=[];for(const i of ma)!((t=this[i])===null||t===void 0)&&t.fields&&n.push(...this[i].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of ma)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Pl){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),s=i.get("range");if(Ji(r)&&Tf(s)){const a=cE(this.childModel,n),o=eN(a);o?t[n]=o:Ie(QR(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],s=[],a=[],o=[];r&&i&&i[r]&&(n?(s.push(`distinct_${i[r]}`),a.push("max")):(s.push(i[r]),a.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=XS,field:f}=l;s.push(f),a.push(c),o.push(De(l,{forAs:!0}))}else u&&(s.push(u),a.push("max"),o.push(u));return{name:this[t].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},s.length?{fields:s,ops:a,as:o}:{})]}}assembleFacetHeaderData(t){var n,i;const{columns:r}=this.model.layout,{layoutHeaders:s}=this.model.component,a=[],o={};for(const c of qL){for(const f of GL){const d=(n=s[c]&&s[c][f])!==null&&n!==void 0?n:[];for(const h of d)if(((i=h.axes)===null||i===void 0?void 0:i.length)>0){o[c]=!0;break}}if(o[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?r?{signal:`ceil(${f} / ${r})`}:1:r?{signal:`min(${f}, ${r})`}:{signal:f};a.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:l,column:u}=o;return(l||u)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){var t,n;const i=[];let r=null;const s=this.getChildIndependentFieldsWithStep(),{column:a,row:o,facet:l}=this;if(a&&o&&(s.x||s.y)){r=`cross_${this.column.name}_${this.row.name}`;const u=[].concat((t=s.x)!==null&&t!==void 0?t:[],(n=s.y)!==null&&n!==void 0?n:[]),c=u.map(()=>"distinct");i.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[hu,du])this[u]&&i.push(this.assembleRowColumnHeaderData(u,r,s));if(l){const u=this.assembleFacetHeaderData(s);u&&i.push(...u)}return i}}function MB(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function G8e(e,t){const n=zR(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=MB(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=MB(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return Ie(d4e(t)),null}function Y8e(e){const t={};return _v(e.filter,n=>{var i;if(jQ(n)){let r=null;iL(n)?r=$s(n.equal):sL(n)?r=$s(n.lte):rL(n)?r=$s(n.lt):aL(n)?r=$s(n.gt):oL(n)?r=$s(n.gte):lL(n)?r=n.range[0]:uL(n)&&(r=((i=n.oneOf)!==null&&i!==void 0?i:n.in)[0]),r&&(Ih(r)?t[n.field]="date":Un(r)?t[n.field]="number":Fe(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function X8e(e){const t={};function n(i){Sg(i)?t[i.field]="date":i.type==="quantitative"&&$Ne(i.aggregate)?t[i.field]="number":bg(i.field)>1?i.field in t||(t[i.field]="flatten"):xh(i)&&ll(i.sort)&&bg(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Si(e)||oo(e))&&e.forEachFieldDef((i,r)=>{if(xa(i))n(i);else{const s=Oh(r),a=e.fieldDef(s);n(Object.assign(Object.assign({},i),{type:a.type}))}}),Si(e)){const{mark:i,markDef:r,encoding:s}=e;if(kf(i)&&!e.encoding.order){const a=r.orient==="horizontal"?"y":"x",o=s[a];Me(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function K8e(e){const t={};if(Si(e)&&e.component.selection)for(const n of Ae(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&bg(r.field)>1&&(t[r.field]="flatten")}return t}class Er extends Vn{constructor(t,n){super(t),this._parse=n}clone(){return new Er(null,Ft(this._parse))}hash(){return`Parse ${un(this._parse)}`}static makeExplicit(t,n,i){var r;let s={};const a=n.data;return!Ic(a)&&((r=a?.format)===null||r===void 0?void 0:r.parse)&&(s=a.format.parse),this.makeWithAncestors(t,s,{},i)}static makeWithAncestors(t,n,i,r){for(const o of Ae(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:Ie(W8(o,i[o],l.value)))}for(const o of Ae(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:Ie(W8(o,n[o],l)))}const s=new ju(n,i);r.copyAll(s);const a={};for(const o of Ae(s.combine())){const l=s.get(o);l!==null&&(a[o]=l)}return Ae(a).length===0||r.parseNothing?null:new Er(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of Ae(this._parse)){const i=this._parse[n];bg(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(Ae(this._parse))}dependentFields(){return new Set(Ae(this._parse))}assembleTransforms(t=!1){return Ae(this._parse).filter(n=>t?bg(n)>1:!0).map(n=>{const i=G8e(n,this._parse[n]);return i?{type:"formula",expr:i,as:VR(n)}:null}).filter(n=>n!==null)}}class af extends Vn{clone(){return new af(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([v1])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:v1}}}class Dy extends Vn{constructor(t,n){super(t),this.params=n}clone(){return new Dy(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${un(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class Ry extends Vn{constructor(t,n){super(t),this.params=n}clone(){return new Ry(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${un(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class oh extends Vn{constructor(t){super(null),t??(t={name:"source"});let n;if(Ic(t)||(n=t.format?Object.assign({},Ys(t.format,["parse"])):{}),_1(t))this._data={values:t.values};else if(Eg(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];cn(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else iee(t)?this._data={values:[{type:"Sphere"}]}:(tee(t)||Ic(t))&&(this._data={});this._generator=Ic(t),t.name&&(this._name=t.name),n&&!jn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var DB=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},J8e=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},g0;function JL(e){return e instanceof oh||e instanceof Dy||e instanceof Ry}class QL{constructor(){g0.set(this,void 0),DB(this,g0,!1,"f")}setModified(){DB(this,g0,!0,"f")}get modifiedFlag(){return J8e(this,g0,"f")}}g0=new WeakMap;class Th extends QL{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,s)=>s[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class ZL extends QL{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Q8e extends ZL{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of Ae(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class Z8e extends ZL{constructor(t){super(),this.requiresSelectionId=t&&WL(t)}run(t){t instanceof af&&(this.requiresSelectionId&&(JL(t.parent)||t.parent instanceof ao||t.parent instanceof Er)||(this.setModified(),t.remove()))}}class eBe extends QL{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof ul&&(i=t.producedFields(),jR(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class tBe extends ZL{constructor(){super()}run(t){t instanceof Wr&&!t.isRequired()&&(this.setModified(),t.remove())}}class nBe extends Th{run(t){if(!JL(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Er)if(t instanceof Er)this.setModified(),t.merge(n);else{if(UR(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class iBe extends Th{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Er);if(t.numChildren()>1&&i.length>=1){const r={},s=new Set;for(const a of i){const o=a.parse;for(const l of Ae(o))l in r?r[l]!==o[l]&&s.add(l):r[l]=o[l]}for(const a of s)delete r[a];if(!jn(r)){this.setModified();const a=new Er(t,r);for(const o of n){if(o instanceof Er)for(const l of Ae(r))delete o.parse[l];t.removeChild(o),o.parent=a,o instanceof Er&&Ae(o.parse).length===0&&o.remove()}}}}}class rBe extends Th{run(t){t instanceof Wr||t.numChildren()>0||t instanceof lm||t instanceof oh||(this.setModified(),t.remove())}}class sBe extends Th{run(t){const n=t.children.filter(r=>r instanceof ul),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class aBe extends Th{run(t){const n=t.children.filter(r=>r instanceof ao),i={};for(const r of n){const s=un(r.groupBy);s in i||(i[s]=[]),i[s].push(r)}for(const r of Ae(i)){const s=i[r];if(s.length>1){const a=s.pop();for(const o of s)a.merge(o)&&(t.removeChild(o),o.parent=a,o.remove(),this.setModified())}}}}class oBe extends Th{constructor(t){super(),this.model=t}run(t){const n=!(JL(t)||t instanceof om||t instanceof Er||t instanceof af),i=[],r=[];for(const s of t.children)s instanceof cl&&(n&&!UR(t.producedFields(),s.dependentFields())?i.push(s):r.push(s));if(i.length>0){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof cl?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(r.length>1){const s=r.pop();for(const a of r)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class lBe extends Th{run(t){const n=[...t.children];if(!eh(n,a=>a instanceof Wr)||t.numChildren()<=1)return;const r=[];let s;for(const a of n)if(a instanceof Wr){let o=a;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Wr)o=l;else break}r.push(...o.children),s?(t.removeChild(a),a.parent=s.parent,s.parent.removeChild(s),s.parent=o,this.setModified()):s=o}else r.push(a);if(r.length){this.setModified();for(const a of r)a.parent.removeChild(a),a.parent=s}}}class kh extends Vn{constructor(t,n){super(t),this.transform=n}clone(){return new kh(null,Ft(this.transform))}addDimensions(t){this.transform.groupby=tl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:De(t)}hash(){return`JoinAggregateTransform ${un(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const s of this.transform.joinaggregate)n.push(s.op),i.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:i,ops:n,fields:t},r!==void 0?{groupby:r}:{})}}function uBe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=De(i);return r&&t.push(r),t},[])}function cBe(e){return ge(e)&&e.every(t=>Fe(t))&&e.length>1}class gu extends Vn{constructor(t,n){super(t),this._stack=n}clone(){return new gu(null,Ft(this._stack))}static makeFromTransform(t,n){const{stack:i,groupby:r,as:s,offset:a="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const f of n.sort)o.push(f.field),l.push(Oi(f.order,"ascending"));const u={field:o,order:l};let c;return cBe(s)?c=s:Fe(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new gu(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:s,fieldChannel:a,offset:o,impute:l}=i,u=s.map(h=>{const p=r[h];return Sl(p)}).filter(h=>!!h),c=uBe(n),f=n.encoding.order;let d;return ge(f)||Me(f)?d=EQ(f):d=c.reduce((h,p)=>(h.field.push(p),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new gu(t,{dimensionFieldDefs:u,stackField:n.vgField(a),facetby:[],stackby:c,sort:d,offset:o,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${un(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[De(r,{binSuffix:"mid"})]:[De(r,{}),De(r,{binSuffix:"end"})]:[De(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:s,sort:a,offset:o,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:f=.5,bin:d}=c;if(d){const h=De(c,{expr:"datum"}),p=De(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:De(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...s,...n],key:De(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:a,as:u,offset:o}),t}}class um extends Vn{constructor(t,n){super(t),this.transform=n}clone(){return new um(null,Ft(this.transform))}addDimensions(t){this.transform.groupby=tl(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const i=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(i.add,i),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(r=>i.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(i.add,i),i}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:De(t)}hash(){return`WindowTransform ${un(this.transform)}`}assemble(){var t;const n=[],i=[],r=[],s=[];for(const d of this.transform.window)i.push(d.op),r.push(this.getDefaultName(d)),s.push(d.param===void 0?null:d.param),n.push(d.field===void 0?null:d.field);const a=this.transform.frame,o=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&i.every(d=>XR(d)))return Object.assign({type:"joinaggregate",as:r,ops:i,fields:n},o!==void 0?{groupby:o}:{});const l=[],u=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)l.push(d.field),u.push((t=d.order)!==null&&t!==void 0?t:"ascending");const c={field:l,order:u},f=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:s,as:r,ops:i,fields:n,sort:c},f!==void 0?{ignorePeers:f}:{}),o!==void 0?{groupby:o}:{}),a!==void 0?{frame:a}:{})}}function fBe(e){function t(n){if(!(n instanceof lm)){const i=n.clone();if(i instanceof Wr){const r=qx+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ao||i instanceof gu||i instanceof um||i instanceof kh)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function Wx(e){if(e instanceof lm)if(e.numChildren()===1&&!(e.children[0]instanceof Wr)){const t=e.children[0];(t instanceof ao||t instanceof gu||t instanceof um||t instanceof kh)&&t.addDimensions(e.fields),t.swapWithParent(),Wx(e)}else{const t=e.model.component.data.main;Gee(t);const n=fBe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(Wx)}function Gee(e){if(e instanceof Wr&&e.type===Gn.Main&&e.numChildren()===1){const t=e.children[0];t instanceof lm||(t.swapWithParent(),Gee(e))}}const qx="scale_",Mb=5;function Gx(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Gx(t.children))return!1}return!0}function Da(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function RB(e,t,n){let i=e.sources,r=!1;return r=Da(new tBe,i)||r,r=Da(new Z8e(t),i)||r,i=i.filter(s=>s.numChildren()>0),r=Da(new rBe,i)||r,i=i.filter(s=>s.numChildren()>0),n||(r=Da(new nBe,i)||r,r=Da(new oBe(t),i)||r,r=Da(new eBe,i)||r,r=Da(new iBe,i)||r,r=Da(new aBe,i)||r,r=Da(new sBe,i)||r,r=Da(new Q8e,i)||r,r=Da(new lBe,i)||r),e.sources=i,r}function dBe(e,t){Gx(e.sources);let n=0,i=0;for(let r=0;r<Mb&&RB(e,t,!0);r++)n++;e.sources.map(Wx);for(let r=0;r<Mb&&RB(e,t,!1);r++)i++;Gx(e.sources),Math.max(n,i)===Mb&&Ie(`Maximum optimization runs(${Mb}) reached.`)}class ms{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ms(()=>t(n))}}var hBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Yee(e){Si(e)?pBe(e):gBe(e)}function pBe(e){const t=e.component.scales;for(const n of Ae(t)){const i=yBe(e,n);if(t[n].setWithExplicit("domains",i),vBe(e,n),e.component.data.isFaceted){let s=e;for(;!oo(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const o of i.value)ou(o)&&(o.data=qx+o.data.replace(qx,""))}}}function gBe(e){for(const n of e.children)Yee(n);const t=e.component.scales;for(const n of Ae(t)){let i,r=null;for(const s of e.children){const a=s.component.scales[n];if(a){i===void 0?i=a.getWithExplicit("domains"):i=tf(i,a.getWithExplicit("domains"),"domains","scale",Yx);const o=a.get("selectionExtent");r&&o&&r.param!==o.param&&Ie(l4e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function mBe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:s}=LB(t,n);if(!r){Ie(s);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=LB(t,n);if(r)return"unaggregated"}return e}function yBe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=mBe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:r})),t==="x"&&Pi(i.x2)?Pi(i.x)?tf(Yu(n,r,e,"x"),Yu(n,r,e,"x2"),"domain","scale",Yx):Yu(n,r,e,"x2"):t==="y"&&Pi(i.y2)?Pi(i.y)?tf(Yu(n,r,e,"y"),Yu(n,r,e,"y2"),"domain","scale",Yx):Yu(n,r,e,"y2"):Yu(n,r,e,t)}function bBe(e,t,n){return e.map(i=>({signal:`{data: ${eE(i,{timeUnit:n,type:t})}}`}))}function PO(e,t,n){var i;const r=(i=Kr(n))===null||i===void 0?void 0:i.unit;return t==="temporal"||r?bBe(e,t,r):[e]}function Yu(e,t,n,i){const{encoding:r}=n,s=Pi(r[i]),{type:a}=s,o=s.timeUnit;if(RFe(t)){const f=Yu(e,void 0,n,i),d=PO(t.unionWith,a,o);return jo([...f.value,...d])}else{if(st(t))return jo([t]);if(t&&t!=="unaggregated"&&!qQ(t))return jo(PO(t,a,o))}const l=n.stack;if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Fs([[0,1]]);const f=n.requestDataName(Gn.Main);return Fs([{data:f,field:n.vgField(i,{suffix:"start"})},{data:f,field:n.vgField(i,{suffix:"end"})}])}const u=If(i)&&Me(s)?_Be(n,i,e):void 0;if(Bl(s)){const f=PO([s.datum],a,o);return Fs(f)}const c=s;if(t==="unaggregated"){const f=n.requestDataName(Gn.Main),{field:d}=s;return Fs([{data:f,field:De({field:d,aggregate:"min"})},{data:f,field:De({field:d,aggregate:"max"})}])}else if(Xn(c.bin)){if(Ji(e))return Fs(e==="bin-ordinal"?[]:[{data:m1(u)?n.requestDataName(Gn.Main):n.requestDataName(Gn.Raw),field:n.vgField(i,Ty(c,i)?{binSuffix:"range"}:{}),sort:u===!0||!Ye(u)?{field:n.vgField(i,{}),op:"min"}:u}]);{const{bin:f}=c;if(Xn(f)){const d=KL(n,c.field,f);return Fs([new ms(()=>{const h=n.getSignalName(d);return`[${h}.start, ${h}.stop]`})])}else return Fs([{data:n.requestDataName(Gn.Main),field:n.vgField(i,{})}])}}else if(c.timeUnit&&cn(["time","utc"],e)&&cZ(c,Si(n)?n.encoding[Pu(i)]:void 0,n.markDef,n.config)){const f=n.requestDataName(Gn.Main);return Fs([{data:f,field:n.vgField(i)},{data:f,field:n.vgField(i,{suffix:"end"})}])}else return Fs(u?[{data:m1(u)?n.requestDataName(Gn.Main):n.requestDataName(Gn.Raw),field:n.vgField(i),sort:u}]:[{data:n.requestDataName(Gn.Main),field:n.vgField(i)}])}function BO(e,t){const{op:n,field:i,order:r}=e;return Object.assign(Object.assign({op:n??(t?"sum":XS)},i?{field:Ca(i)}:{}),r?{order:r}:{})}function vBe(e,t){var n;const i=e.component.scales[t],r=e.specifiedScales[t].domain,s=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,a=qQ(r)&&r,o=Ch(s)&&VS(s.extent)&&s.extent;(a||o)&&i.set("selectionExtent",a??o,!0)}function _Be(e,t,n){if(!Ji(n))return;const i=e.fieldDef(t),r=i.sort;if(oZ(r))return{op:"min",field:Ig(i,t),order:"ascending"};const{stack:s}=e,a=s?new Set([...s.groupbyFields,...s.stackBy.map(o=>o.fieldDef.field)]):void 0;if(ll(r)){const o=s&&!a.has(r.field);return BO(r,o)}else if(aZ(r)){const{encoding:o,order:l}=r,u=e.fieldDef(o),{aggregate:c,field:f}=u,d=s&&!a.has(f);if(Ou(c)||xf(c))return BO({field:De(u),order:l},d);if(XR(c)||!c)return BO({op:c,field:f,order:l},d)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(cn(["ascending",void 0],r))return!0}}function LB(e,t){const{aggregate:n,type:i}=e;return n?Fe(n)&&!WNe.has(n)?{valid:!1,reason:F4e(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:P4e(e)}:{valid:!0}:{valid:!1,reason:N4e(e)}}function Yx(e,t,n,i){return e.explicit&&t.explicit&&Ie(V4e(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function wBe(e){const t=tl(e.map(a=>ou(a)?hBe(a,["sort"]):a),un),n=tl(e.map(a=>{if(ou(a)){const o=a.sort;return o!==void 0&&!m1(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(a=>a!==void 0),un);if(t.length===0)return;if(t.length===1){const a=e[0];if(ou(a)&&n.length>0){let o=n[0];if(n.length>1)Ie(G8),o=!0;else if(Ye(o)&&"field"in o){const l=o.field;a.field===l&&(o=o.order?{order:o.order}:!0)}return Object.assign(Object.assign({},a),{sort:o})}return a}const i=tl(n.map(a=>m1(a)||!("op"in a)||Fe(a.op)&&a.op in zNe?a:(Ie(H4e(a)),!0)),un);let r;i.length===1?r=i[0]:i.length>1&&(Ie(G8),r=!0);const s=tl(e.map(a=>ou(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?Object.assign({data:s[0],fields:t.map(o=>o.field)},r?{sort:r}:{}):Object.assign({fields:t},r?{sort:r}:{})}function eN(e){if(ou(e)&&Fe(e.field))return e.field;if(GNe(e)){let t;for(const n of e.fields)if(ou(n)&&Fe(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ie(W4e),t}return Ie(q4e),t}else if(YNe(e)){Ie(G4e);const t=e.fields[0];return Fe(t)?t:void 0}}function cE(e,t){const i=e.component.scales[t].get("domains").map(r=>(ou(r)&&(r.data=e.lookupDataSource(r.data)),r));return wBe(i)}var SBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Xee(e){return cm(e)||tN(e)?e.children.reduce((t,n)=>t.concat(Xee(n)),NB(e)):NB(e)}function NB(e){return Ae(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:s,type:a,selectionExtent:o,domains:l,range:u,reverse:c}=r,f=SBe(r,["name","type","selectionExtent","domains","range","reverse"]),d=EBe(r.range,s,n,e),h=cE(e,n),p=o?h5e(e,o,i,h):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:s,type:a},h?{domain:h}:{}),p?{domainRaw:p}:{}),{range:d}),c!==void 0?{reverse:c}:{}),f)),t},[])}function EBe(e,t,n,i){if(lr(n)){if(Tf(e))return{step:{signal:`${t}_step`}}}else if(Ye(e)&&ou(e))return Object.assign(Object.assign({},e),{data:i.lookupDataSource(e.data)});return e}class Kee extends ju{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:eh(this.get("domains"),t=>ge(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const ABe=["range","scheme"];function OBe(e){const t=e.component.scales;for(const n of zS){const i=t[n];if(!i)continue;const r=CBe(n,e);i.setWithExplicit("range",r)}}function FB(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,s=xs(t),a=e.getName(s);if(Ye(i)&&i.binned&&i.step!==void 0)return new ms(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(a)} / (${l})`});if(Xn(i)){const o=KL(e,r,i);return new ms(()=>{const l=e.getSignalName(o),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${u})`})}}}function CBe(e,t){const n=t.specifiedScales[e],{size:i}=t,s=t.getScaleComponent(e).get("type");for(const f of ABe)if(n[f]!==void 0){const d=Ix(s,f),h=GQ(e,f);if(!d)Ie(kQ(s,f,e));else if(h)Ie(h);else switch(f){case"range":{const p=n.range;if(ge(p)){if(lr(e))return jo(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return ms.fromName(y,m)}return g}))}else if(Ye(p))return jo({data:t.requestDataName(Gn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return jo(p)}case"scheme":return jo(IBe(n[f]))}}const a=e===li||e==="xOffset"?"width":"height",o=i[a];if(El(o)){if(lr(e))if(Ji(s)){const f=Jee(o,t,e);if(f)return jo({step:f})}else Ie(MQ(a));else if(im(e)){const f=e===Sf?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Qee(o,s);if(p)return jo(p)}}}const{rangeMin:l,rangeMax:u}=n,c=xBe(e,t);return(l!==void 0||u!==void 0)&&Ix(s,"rangeMin")&&ge(c)&&c.length===2?jo([l??c[0],u??c[1]]):Fs(c)}function IBe(e){return DFe(e)?Object.assign({scheme:e.name},Ys(e,["name"])):{scheme:e}}function xBe(e,t){const{size:n,config:i,mark:r,encoding:s}=t,a=t.getSignalName.bind(t),{type:o}=Pi(s[e]),u=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case li:case Ki:{if(cn(["point","band"],u)){const p=Zee(e,n,i.view);if(El(p))return{step:Jee(p,t,e)}}const d=xs(e),h=t.getName(d);return e===Ki&&ta(u)?[ms.fromName(a,h),0]:[0,ms.fromName(a,h)]}case Sf:case nm:return TBe(e,t,u);case Nu:{const d=t.component.scales[e].get("zero"),h=ete(r,d,i),p=DBe(r,n,t,i);return wg(u)?MBe(h,p,kBe(u,i,c,e)):[h,p]}case Oo:return[0,Math.PI*2];case Ah:return[0,360];case Dl:return[0,new ms(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Of:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Cf:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Is:return"symbol";case Cs:case Nl:case Fl:return u==="ordinal"?o==="nominal"?"category":"ordinal":f!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Fu:case Ef:case Af:return[i.scale.minOpacity,i.scale.maxOpacity]}}function Jee(e,t,n){var i,r,s,a,o;const{encoding:l}=t,u=t.getScaleComponent(n),c=fQ(n),f=l[c];if(UZ({step:e,offsetIsDiscrete:Ct(f)&&zQ(f.type)})==="offset"&&wZ(l,c)){const h=t.getScaleComponent(c);let g=`domain('${t.scaleName(c)}').length`;if(h.get("type")==="band"){const y=(r=(i=h.get("paddingInner"))!==null&&i!==void 0?i:h.get("padding"))!==null&&r!==void 0?r:0,b=(a=(s=h.get("paddingOuter"))!==null&&s!==void 0?s:h.get("padding"))!==null&&a!==void 0?a:0;g=`bandspace(${g}, ${y}, ${b})`}const m=(o=u.get("paddingInner"))!==null&&o!==void 0?o:u.get("padding");return{signal:`${e.step} * ${g} / (1-${QNe(m)})`}}else return e.step}function Qee(e,t){if(UZ({step:e,offsetIsDiscrete:Ji(t)})==="offset")return{step:e.step}}function TBe(e,t,n){const i=e===Sf?"x":"y",s=t.getScaleComponent(i).get("type"),a=t.scaleName(i);if(s==="band"){const o=Zee(i,t.size,t.config.view);if(El(o)){const l=Qee(o,n);if(l)return l}return[0,{signal:`bandwidth('${a}')`}]}else return QJ(`Cannot use ${e} scale if ${i} scale is not discrete.`)}function Zee(e,t,n){const i=e===li?"width":"height",r=t[i];return r||P2(n,i)}function kBe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ge(n)?n.length+1:(Ie(nFe(i)),3)}}function MBe(e,t,n){const i=()=>{const r=pu(t),s=pu(e),a=`(${r} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${r} + ${a}, ${a})`};return st(t)?new ms(i):{signal:i()}}function ete(e,t,n){if(t)return st(t)?{signal:`${t.signal} ? 0 : ${ete(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error($S("size",e))}const PB=.95;function DBe(e,t,n,i){const r={x:FB(n,"x"),y:FB(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const s=BB(t,r,i.view);return Un(s)?s-1:new ms(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const s=BB(t,r,i.view);return Un(s)?Math.pow(PB*s,2):new ms(()=>`pow(${PB} * ${s.signal}, 2)`)}}throw new Error($S("size",e))}function BB(e,t,n){const i=El(e.width)?e.width.step:F2(n,"width"),r=El(e.height)?e.height.step:F2(n,"height");return t.x||t.y?new ms(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function tte(e,t){Si(e)?RBe(e,t):ite(e,t)}function RBe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:s,specifiedScales:a}=e;for(const o of Ae(n)){const l=a[o],u=n[o],c=e.getScaleComponent(o),f=Pi(r[o]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=Ix(h,t),y=GQ(o,t);if(d!==void 0&&(m?y&&Ie(y):Ie(kQ(h,t,o))),m&&y===void 0)if(d!==void 0){const b=f.timeUnit,v=f.type;switch(t){case"domainMax":case"domainMin":Ih(l[t])||v==="temporal"||b?u.set(t,{signal:eE(l[t],{type:v,timeUnit:b})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const b=t in jB?jB[t]({model:e,channel:o,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:i,hasNestedOffsetScale:Mx(r,o)}):i.scale[t];b!==void 0&&u.set(t,b,!1)}}}const jB={bins:({model:e,fieldOrDatumDef:t})=>Me(t)?LBe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>NBe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:s})=>FBe(e,t,n,i,r,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>PBe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:s})=>BBe(e,t,n.type,i,r.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:s})=>jBe(e,t,n,i,r.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=Me(e)?e.sort:void 0;return UBe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r})=>zBe(e,t,n,i,r)};function nte(e){Si(e)?OBe(e):ite(e,"range")}function ite(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?nte(i):tte(i,t);for(const i of Ae(n)){let r;for(const s of e.children){const a=s.component.scales[i];if(a){const o=a.getWithExplicit(t);r=tf(r,o,t,"scale",eee((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function LBe(e,t){const n=t.bin;if(Xn(n)){const i=KL(e,t.field,n);return new ms(()=>e.getSignalName(i))}else if(jr(n)&&Ch(n)&&n.step!==void 0)return{step:n.step}}function NBe(e,t){if(cn([Cs,Nl,Fl],e)&&t!=="nominal")return"hcl"}function FBe(e,t,n,i,r,s){var a;if(!(((a=Sl(s))===null||a===void 0?void 0:a.bin)||ge(n)||r!=null||i!=null||cn([gs.TIME,gs.UTC],e)))return lr(t)?!0:void 0}function PBe(e,t,n,i,r,s){if(lr(e)){if(no(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:o}=r;if(a==="bar"&&!(Me(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===gs.POINT)return n.pointPadding}}function BBe(e,t,n,i,r,s=!1){if(e===void 0){if(lr(t)){const{bandPaddingInner:a,barBandPaddingInner:o,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=r;return s?u:Oi(a,n==="bar"?o:l)}else if(im(t)&&i===gs.BAND)return r.offsetBandPaddingInner}}function jBe(e,t,n,i,r,s=!1){if(e===void 0){if(lr(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:o}=r;if(s)return o;if(n===gs.BAND)return Oi(a,st(i)?{signal:`${i.signal}/2`}:i/2)}else if(im(t)){if(n===gs.POINT)return .5;if(n===gs.BAND)return r.offsetBandPaddingOuter}}}function UBe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ta(e)&&t==="descending"?st(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ta(e)&&t==="descending")return!0}function zBe(e,t,n,i,r){if(!!n&&n!=="unaggregated"&&ta(r)){if(ge(n)){const a=n[0],o=n[n.length-1];if(a<=0&&o>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!wg(r))return!0;if(!(Me(t)&&t.bin)&&cn([...Pl,...RNe],e)){const{orient:a,type:o}=i;return!(cn(["bar","area","line","trail"],o)&&(a==="horizontal"&&e==="y"||a==="vertical"&&e==="x"))}return!1}function VBe(e,t,n,i,r=!1){const s=$Be(t,n,i,r),{type:a}=e;return If(t)?a!==void 0?jFe(t,a)?Me(n)&&!BFe(a,n.type)?(Ie(U4e(a,s)),s):a:(Ie(j4e(t,a,s)),s):s:null}function $Be(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(xp(e)||kO(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ie(MO(e,"ordinal")),"ordinal";if(lr(e)||im(e)){if(cn(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&e in YR)return"band";const s=n[xs(e)];return sm(s)||EL(t)&&((r=t.axis)===null||r===void 0?void 0:r.tickBand)?"band":"point"}case"temporal":return xp(e)?"time":kO(e)==="discrete"?(Ie(MO(e,"temporal")),"ordinal"):Me(t)&&t.timeUnit&&Kr(t.timeUnit).utc?"utc":"time";case"quantitative":return xp(e)?Me(t)&&Xn(t.bin)?"bin-ordinal":"linear":kO(e)==="discrete"?(Ie(MO(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(xQ(t.type))}function HBe(e,{ignoreRange:t}={}){rte(e),Yee(e);for(const n of PFe)tte(e,n);t||nte(e)}function rte(e){Si(e)?e.component.scales=WBe(e):e.component.scales=GBe(e)}function WBe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const s of zS){const a=Pi(t[s]);if(a&&n===KQ&&s===Is&&a.type===rm)continue;let o=a&&a.scale;if(im(s)){const l=dQ(s);if(!Mx(t,l)){o&&Ie(O4e(s));continue}}if(a&&o!==null&&o!==!1){o??(o={});const l=Mx(t,s),u=VBe(o,s,a,i,l);r[s]=new Kee(e.scaleName(`${s}`,!0),{value:u,explicit:o.type===u})}}return r}const qBe=eee((e,t)=>X8(e)-X8(t));function GBe(e){var t,n;const i=e.component.scales={},r={},s=e.component.resolve;for(const a of e.children){rte(a);for(const o of Ae(a.component.scales))if((t=(n=s.scale)[o])!==null&&t!==void 0||(n[o]=Nee(o,e)),s.scale[o]==="shared"){const l=r[o],u=a.component.scales[o].getWithExplicit("type");l?IFe(l.value,u.value)?r[o]=tf(l,u,"type","scale",qBe):(s.scale[o]="independent",delete r[o]):r[o]=u}}for(const a of Ae(r)){const o=e.scaleName(a,!0),l=r[a];i[a]=new Kee(o,l);for(const u of e.children){const c=u.component.scales[a];c&&(u.renameScale(c.get("name"),o),c.merged=!0)}}return i}var jO=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class UO{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Si(e){return e?.type==="unit"}function oo(e){return e?.type==="facet"}function tN(e){return e?.type==="concat"}function cm(e){return e?.type==="layer"}class nN{constructor(t,n,i,r,s,a,o){var l,u;this.type=n,this.parent=i,this.config=s,this.correctDataNames=c=>{var f,d,h;return!((f=c.from)===null||f===void 0)&&f.data&&(c.from.data=this.lookupDataSource(c.from.data)),!((h=(d=c.from)===null||d===void 0?void 0:d.facet)===null||h===void 0)&&h.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=i,this.config=s,this.view=us(o),this.name=(l=t.name)!==null&&l!==void 0?l:r,this.title=tc(t.title)?{text:t.title}:t.title?us(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new UO,this.projectionNameMap=i?i.projectionNameMap:new UO,this.signalNameMap=i?i.signalNameMap:new UO,this.data=t.data,this.description=t.description,this.transforms=KPe((u=t.transform)!==null&&u!==void 0?u:[]),this.layout=n==="layer"||n==="unit"?{}:nPe(t,n,s),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:KS(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new ju,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?Ft(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){HBe(this)}parseProjection(){Wee(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Uee(this)}assembleEncodeFromView(t){const n=jO(t,["style"]),i={};for(const r of Ae(n)){const s=n[r];s!==void 0&&(i[r]=Jn(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Jn(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):jn(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,i=jO(t,["spacing"]),{component:r,config:s}=this,a=c8e(r.layoutHeaders,s);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),i),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of ma)t[i].title&&n.push(r8e(this,i));for(const i of qL)n=n.concat(s8e(this,i));return n}assembleAxes(){return q5e(this.component.axes,this.config)}assembleLegends(){return Vee(this)}assembleProjections(){return L8e(this)}assembleTitle(){var t,n,i;const r=(t=this.title)!==null&&t!==void 0?t:{},{encoding:s}=r,a=jO(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},vQ(this.config.title).nonMarkTitleProperties),a),s?{encode:{update:s}}:{});if(o.text)return cn(["unit","layer"],this.type)?cn(["middle",void 0],o.anchor)&&((n=o.frame)!==null&&n!==void 0||(o.frame="group")):(i=o.anchor)!==null&&i!==void 0||(o.anchor="start"),jn(o)?void 0:o}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||oo(this.parent)?Xee(this):[];r.length>0&&(n.scales=r);const s=this.assembleAxes();s.length>0&&(n.axes=s);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return ni((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Gn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(oo(this.parent)){const n=Ree(t),i=US(n),r=this.component.scales[i];if(r&&!r.merged){const s=r.get("type"),a=r.get("range");if(Ji(s)&&Tf(a)){const o=r.get("name"),l=cE(this,i),u=eN(l);if(u){const c=De({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Dee(o,r,c)}}else return Ie(QR(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(uQ(t)&&If(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(i4e(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(i=>i.hasOrientSignalRef()))}}class ste extends nN{vgField(t,n={}){const i=this.fieldDef(t);if(!!i)return De(i,n)}reduceFieldDef(t,n){return k6e(this.getMapping(),(i,r,s)=>{const a=Sl(r);return a?t(i,a,s):i},n)}forEachFieldDef(t,n){xL(this.getMapping(),(i,r)=>{const s=Sl(i);s&&t(s,r)},n)}}var YBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class fE extends Vn{constructor(t,n){var i,r,s;super(t),this.transform=n,this.transform=Ft(n);const a=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=a[0])!==null&&r!==void 0?r:"value",(s=a[1])!==null&&s!==void 0?s:"density"]}clone(){return new fE(null,Ft(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${un(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,i=YBe(t,["density"]);return Object.assign({type:"kde",field:n},i)}}class S1 extends Vn{constructor(t,n){super(t),this.filter=n}clone(){return new S1(null,Object.assign({},this.filter))}static make(t,n){const{config:i,mark:r,markDef:s}=n;if(Dn("invalid",s,i)!=="filter")return null;const o=n.reduceFieldDef((l,u,c)=>{const f=If(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ta(d)&&u.aggregate!=="count"&&!kf(r)&&(l[u.field]=u)}return l},{});return Ae(o).length?new S1(t,o):null}dependentFields(){return new Set(Ae(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${un(this.filter)}`}assemble(){const t=Ae(this.filter).reduce((n,i)=>{const r=this.filter[i],s=De(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):r.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class dE extends Vn{constructor(t,n){super(t),this.transform=n,this.transform=Ft(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((s,a)=>{var o;return(o=r[a])!==null&&o!==void 0?o:s})}clone(){return new dE(this.parent,Ft(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${un(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class hE extends Vn{constructor(t,n){var i,r,s;super(t),this.transform=n,this.transform=Ft(n);const a=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=a[0])!==null&&r!==void 0?r:"key",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new hE(null,Ft(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${un(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Mp extends Vn{constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}clone(){return new Mp(null,Ft(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ll,Rl],[Ia,Co]]){const s=r.map(a=>{const o=Pi(n.encoding[a]);return Me(o)?o.field:Bl(o)?{expr:`${o.datum}`}:yo(o)?{expr:`${o.value}`}:void 0});(s[0]||s[1])&&(t=new Mp(t,s,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Is)){const r=n.typedFieldDef(Is);r.type===rm&&(t=new Mp(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(Fe);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${un(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class E1 extends Vn{constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}clone(){return new E1(null,this.projection,Ft(this.fields),Ft(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ll,Rl],[Ia,Co]]){const r=i.map(a=>{const o=Pi(n.encoding[a]);return Me(o)?o.field:Bl(o)?{expr:`${o.datum}`}:yo(o)?{expr:`${o.value}`}:void 0}),s=i[0]===Ia?"2":"";(r[0]||r[1])&&(t=new E1(t,n.projectionName(),r,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Fe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${un(this.fields)} ${un(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ld extends Vn{constructor(t,n){super(t),this.transform=n}clone(){return new Ld(null,Ft(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ld(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,s=i.y;if(Me(r)&&Me(s)){const a=r.impute?r:s.impute?s:void 0;if(a===void 0)return;const o=r.impute?s:s.impute?r:void 0,{method:l,value:u,frame:c,keyvals:f}=a.impute,d=EZ(n.mark,i);return new Ld(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:o.field},l?{method:l}:{}),u!==void 0?{value:u}:{}),c?{frame:c}:{}),f!==void 0?{keyvals:f}:{}),d.length?{groupby:d}:{}))}return null}hash(){return`Impute ${un(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:s,value:a,frame:o=[null,null]}=this.transform,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},i?{keyvals:DPe(i)?this.processSequence(i):i}:{}),{method:"value"}),s?{groupby:s}:{}),{value:!r||r==="value"?a:null});if(r&&r!=="value"){const u=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1},s?{groupby:s}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}var XBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class pE extends Vn{constructor(t,n){var i,r,s;super(t),this.transform=n,this.transform=Ft(n);const a=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=a[0])!==null&&r!==void 0?r:n.on,(s=a[1])!==null&&s!==void 0?s:n.loess]}clone(){return new pE(null,Ft(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${un(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:i}=t,r=XBe(t,["loess","on"]);return Object.assign({type:"loess",x:i,y:n},r)}}class A1 extends Vn{constructor(t,n,i){super(t),this.transform=n,this.secondary=i}clone(){return new A1(null,Ft(this.transform),this.secondary)}static make(t,n,i,r){const s=n.component.data.sources,{from:a}=i;let o=null;if(RPe(a)){let l=lte(a.data,s);l||(l=new oh(a.data),s.push(l));const u=n.getName(`lookup_${r}`);o=new Wr(l,u,Gn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=o}else if(LPe(a)){const l=a.param;i=Object.assign({as:l},i);let u;try{u=n.getSelectionComponent(ni(l),l)}catch{throw new Error(a4e(l))}if(o=u.materialized,!o)throw new Error(o4e(l))}return new A1(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${un({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Pe(this.transform.as)}:{});else{let n=this.transform.as;Fe(n)||(Ie(g4e),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var KBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class gE extends Vn{constructor(t,n){var i,r,s;super(t),this.transform=n,this.transform=Ft(n);const a=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=a[0])!==null&&r!==void 0?r:"prob",(s=a[1])!==null&&s!==void 0?s:"value"]}clone(){return new gE(null,Ft(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${un(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,i=KBe(t,["quantile"]);return Object.assign({type:"quantile",field:n},i)}}var JBe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class mE extends Vn{constructor(t,n){var i,r,s;super(t),this.transform=n,this.transform=Ft(n);const a=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=a[0])!==null&&r!==void 0?r:n.on,(s=a[1])!==null&&s!==void 0?s:n.regression]}clone(){return new mE(null,Ft(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${un(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:i}=t,r=JBe(t,["regression","on"]);return Object.assign({type:"regression",x:i,y:n},r)}}class yE extends Vn{constructor(t,n){super(t),this.transform=n}clone(){return new yE(null,Ft(this.transform))}addDimensions(t){var n;this.transform.groupby=tl(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),i=>i)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${un(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:s}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},r!==void 0?{limit:r}:{}),s!==void 0?{op:s}:{}),i!==void 0?{groupby:i}:{})}}class bE extends Vn{constructor(t,n){super(t),this.transform=n}clone(){return new bE(null,Ft(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${un(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function ate(e){let t=0;function n(i,r){var s;if(i instanceof oh&&!i.isGenerator&&!Eg(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Er&&(i.parent instanceof oh&&!r.source?(r.format=Object.assign(Object.assign({},(s=r.format)!==null&&s!==void 0?s:{}),{parse:i.assembleFormatParse()}),r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof lm){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof Dy||i instanceof Ry||i instanceof S1||i instanceof om||i instanceof Cg||i instanceof E1||i instanceof ao||i instanceof A1||i instanceof um||i instanceof kh||i instanceof hE||i instanceof dE||i instanceof fE||i instanceof pE||i instanceof gE||i instanceof mE||i instanceof af||i instanceof bE||i instanceof yE)&&r.transform.push(i.assemble()),(i instanceof cl||i instanceof ul||i instanceof Ld||i instanceof gu||i instanceof Mp)&&r.transform.push(...i.assemble()),i instanceof Wr&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Wr?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Wr&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const o of i.children)n(o,{name:null,source:a,transform:[]});break}}}return n}function QBe(e){const t=[],n=ate(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function ZBe(e,t){var n,i;const r=[],s=ate(r);let a=0;for(const l of e.sources){l.hasName()||(l.dataName=`source_${a++}`);const u=l.assemble();s(l,u)}for(const l of r)l.transform.length===0&&delete l.transform;let o=0;for(const[l,u]of r.entries())((n=u.transform)!==null&&n!==void 0?n:[]).length===0&&!u.source&&r.splice(o++,0,r.splice(l,1)[0]);for(const l of r)for(const u of(i=l.transform)!==null&&i!==void 0?i:[])u.type==="lookup"&&(u.from=e.outputNodes[u.from].getSource());for(const l of r)l.name in t&&(l.values=t[l.name]);return r}function e9e(e){return e==="top"||e==="left"||st(e)?"header":"footer"}function t9e(e){for(const t of ma)n9e(e,t);UB(e,"x"),UB(e,"y")}function n9e(e,t){var n;const{facet:i,config:r,child:s,component:a}=e;if(e.channelHasField(t)){const o=i[t],l=xg("title",null,r,t);let u=Tp(o,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});s.component.layoutHeaders[t].title&&(u=ge(u)?u.join(", "):u,u+=` / ${s.component.layoutHeaders[t].title}`,s.component.layoutHeaders[t].title=null);const c=xg("labelOrient",o.header,r,t),f=o.header!==null?Oi((n=o.header)===null||n===void 0?void 0:n.labels,r.header.labels,!0):!1,d=cn(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:o.header!==null?u:null,facetFieldDef:o,[d]:t==="facet"?[]:[ote(e,t,f)]}}}function ote(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function UB(e,t){var n;const{child:i}=e;if(i.component.axes[t]){const{layoutHeaders:r,resolve:s}=e.component;if(s.axis[t]=XL(s,t),s.axis[t]==="shared"){const a=t==="x"?"column":"row",o=r[a];for(const l of i.component.axes[t]){const u=e9e(l.get("orient"));(n=o[u])!==null&&n!==void 0||(o[u]=[ote(e,a,!1)]);const c=p0(l,"main",e.config,{header:!0});c&&o[u][0].axes.push(c),l.mainExtracted=!0}}}}function i9e(e){iN(e),z2(e,"width"),z2(e,"height")}function r9e(e){iN(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";z2(e,t),z2(e,n)}function iN(e){for(const t of e.children)t.parseLayoutSize()}function z2(e,t){var n;const i=Ree(t),r=US(i),s=e.component.resolve,a=e.component.layoutSize;let o;for(const l of e.children){const u=l.component.layoutSize.getWithExplicit(i),c=(n=s.scale[r])!==null&&n!==void 0?n:Nee(r,e);if(c==="independent"&&u.value==="step"){o=void 0;break}if(o){if(c==="independent"&&o.value!==u.value){o=void 0;break}o=tf(o,u,i,"")}else o=u}if(o){for(const l of e.children)e.renameSignal(l.getName(i),e.getName(t)),l.component.layoutSize.set(i,"merged",!1);a.setWithExplicit(t,o)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function s9e(e){const{size:t,component:n}=e;for(const i of Pl){const r=xs(i);if(t[r]){const s=t[r];n.layoutSize.set(r,El(s)?"step":s,!0)}else{const s=a9e(e,r);n.layoutSize.set(r,s,!1)}}}function a9e(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const s=r.get("type"),a=r.get("range");if(Ji(s)){const o=P2(i.view,t);return Tf(a)||El(o)?"step":o}else return Rx(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return Rx(i.view,t);{const s=P2(i.view,t);return El(s)?s.step:s}}}function Xx(e,t,n){return De(t,Object.assign({suffix:`by_${De(e)}`},n??{}))}class R0 extends ste{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=lN(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Iy(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ae(t),i={};for(const r of n){if(![du,hu].includes(r)){Ie($S(r,"facet"));break}const s=t[r];if(s.field===void 0){Ie(Ox(s,r));break}i[r]=this.initFacetFieldDef(s,r)}return i}initFacetFieldDef(t,n){const i=CL(t,n);return i.header?i.header=us(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=vE(this),this.child.parseData()}parseLayoutSize(){iN(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),t9e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,i;const r={};for(const s of ma)for(const a of GL){const o=this.component.layoutHeaders[s],l=o[a],{facetFieldDef:u}=o;if(u){const c=xg("titleOrient",u.header,this.config,s);if(["right","bottom"].includes(c)){const f=lE(s,c);(t=r.titleAnchor)!==null&&t!==void 0||(r.titleAnchor={}),r.titleAnchor[f]="end"}}if(l?.[0]){const c=s==="row"?"height":"width",f=a==="header"?"headerBand":"footerBand";s!=="facet"&&!this.child.component.layoutSize.get(c)&&((n=r[f])!==null&&n!==void 0||(r[f]={}),r[f][s]=.5),o.title&&((i=r.offset)!==null&&i!==void 0||(r.offset={}),r.offset[s==="row"?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),i?{columns:i}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof R0))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof R0?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:De(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof R0){if(this.child.channelHasField("column")){const r=De(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Pl){const s=this.child.component.scales[r];if(s&&!s.merged){const a=s.get("type"),o=s.get("range");if(Ji(a)&&Tf(o)){const l=cE(this.child,r),u=eN(l);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):Ie(QR(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:s,ops:a,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const c of ma){const f=this.facet[c];if(f){l.push(De(f));const{bin:d,sort:h}=f;if(Xn(d)&&l.push(De(f,{binSuffix:"end"})),ll(h)){const{field:p,op:g=XS}=h,m=Xx(f,h);i&&r?(s.push(m),a.push("max"),o.push(m)):(s.push(p),a.push(g),o.push(m))}else if(ge(h)){const p=Ig(f,c);s.push(p),a.push("max"),o.push(p)}}}const u=!!i&&!!r;return Object.assign({name:t,data:n,groupby:l},u||s.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),s.length?{fields:s,ops:a,as:o}:{})}:{})}facetSortFields(t){const{facet:n}=this,i=n[t];return i?ll(i.sort)?[Xx(i,i.sort,{expr:"datum"})]:ge(i.sort)?[Ig(i,t,{expr:"datum"})]:[De(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(ll(r)?r.order:!ge(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:i}=this;if(n.facet)return $x(n.facet,"facet",i);const r={row:["top","bottom"],column:["left","right"]};for(const s of qL)if(n[s]){const a=xg("labelOrient",(t=n[s])===null||t===void 0?void 0:t.header,i,s);if(r[s].includes(a))return $x(n[s],s,i)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=QBe(n),r=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},s?{title:s}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:ma.map(l=>this.facetSortFields(l)).flat(),order:ma.map(l=>this.facetSortOrder(l)).flat()}}),i.length>0?{data:i}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(u5e(this,[])))]}getMapping(){return this.facet}}function o9e(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const s of[n,i])if(ll(s.sort)){const{field:a,op:o=XS}=s.sort;e=r=new kh(e,{joinaggregate:[{op:o,field:a,as:Xx(s,s.sort,{forAs:!0})}],groupby:[De(s)]})}return r}return null}function lte(e,t){var n,i,r,s;for(const a of t){const o=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)===null||n===void 0?void 0:n.mesh,u=(i=o.format)===null||i===void 0?void 0:i.feature;if(l&&u)continue;const c=(r=e.format)===null||r===void 0?void 0:r.feature;if((c||u)&&c!==u)continue;const f=(s=o.format)===null||s===void 0?void 0:s.mesh;if(!((l||f)&&l!==f)){if(_1(e)&&_1(o)){if(el(e.values,o.values))return a}else if(Eg(e)&&Eg(o)){if(e.url===o.url)return a}else if(tee(e)&&e.name===a.dataName)return a}}return null}function l9e(e,t){if(e.data||!e.parent){if(e.data===null){const i=new oh({values:[]});return t.push(i),i}const n=lte(e.data,t);if(n)return Ic(e.data)||(n.data.format=ZJ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new oh(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function u9e(e,t,n){var i,r;let s=0;for(const a of t.transforms){let o,l;if(HPe(a))l=e=new Cg(e,a),o="derived";else if(jL(a)){const u=Y8e(a);l=e=(i=Er.makeWithAncestors(e,{},u,n))!==null&&i!==void 0?i:e,e=new om(e,t,a.filter)}else if(XZ(a))l=e=cl.makeFromTransform(e,a,t),o="number";else if(qPe(a))o="date",n.getWithExplicit(a.field).value===void 0&&(e=new Er(e,{[a.field]:o}),n.set(a.field,o,!1)),l=e=ul.makeFromTransform(e,a);else if(GPe(a))l=e=ao.makeFromTransform(e,a),o="number",WL(t)&&(e=new af(e));else if(YZ(a))l=e=A1.make(e,t,a,s++),o="derived";else if(zPe(a))l=e=new um(e,a),o="number";else if(VPe(a))l=e=new kh(e,a),o="number";else if(YPe(a))l=e=gu.makeFromTransform(e,a),o="derived";else if(XPe(a))l=e=new hE(e,a),o="derived";else if($Pe(a))l=e=new dE(e,a),o="derived";else if(NPe(a))l=e=new yE(e,a),o="derived";else if(UPe(a))e=new bE(e,a);else if(WPe(a))l=e=Ld.makeFromTransform(e,a),o="derived";else if(FPe(a))l=e=new fE(e,a),o="derived";else if(PPe(a))l=e=new gE(e,a),o="derived";else if(BPe(a))l=e=new mE(e,a),o="derived";else if(jPe(a))l=e=new pE(e,a),o="derived";else{Ie(p4e(a));continue}if(l&&o!==void 0)for(const u of(r=l.producedFields())!==null&&r!==void 0?r:[])n.set(u,o,!1)}return e}function vE(e){var t,n,i,r,s,a,o,l,u,c;let f=l9e(e,e.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=e.component.data,p=e.data,m=!(p&&(Ic(p)||Eg(p)||_1(p)))&&e.parent?e.parent.component.data.ancestorParse.clone():new a5e;Ic(p)?(nee(p)?f=new Ry(f,p.sequence):UL(p)&&(f=new Dy(f,p.graticule)),m.parseNothing=!0):((t=p?.format)===null||t===void 0?void 0:t.parse)===null&&(m.parseNothing=!0),f=(n=Er.makeExplicit(f,e,m))!==null&&n!==void 0?n:f,f=new af(f);const y=e.parent&&cm(e.parent);(Si(e)||oo(e))&&y&&(f=(i=cl.makeFromEncoding(f,e))!==null&&i!==void 0?i:f),e.transforms.length>0&&(f=u9e(f,e,m));const b=K8e(e),v=X8e(e);f=(r=Er.makeWithAncestors(f,{},Object.assign(Object.assign({},b),v),m))!==null&&r!==void 0?r:f,Si(e)&&(f=Mp.parseAll(f,e),f=E1.parseAll(f,e)),(Si(e)||oo(e))&&(y||(f=(s=cl.makeFromEncoding(f,e))!==null&&s!==void 0?s:f),f=(a=ul.makeFromEncoding(f,e))!==null&&a!==void 0?a:f,f=Cg.parseAllForSortIndex(f,e));const _=e.getDataName(Gn.Raw),S=new Wr(f,_,Gn.Raw,h);if(d[_]=S,f=S,Si(e)){const D=ao.makeFromEncoding(f,e);D&&(f=D,WL(e)&&(f=new af(f))),f=(o=Ld.makeFromEncoding(f,e))!==null&&o!==void 0?o:f,f=(l=gu.makeFromEncoding(f,e))!==null&&l!==void 0?l:f}Si(e)&&(f=(u=S1.make(f,e))!==null&&u!==void 0?u:f);const E=e.getDataName(Gn.Main),w=new Wr(f,E,Gn.Main,h);d[E]=w,f=w,Si(e)&&H5e(e,w);let O=null;if(oo(e)){const D=e.getName("facet");f=(c=o9e(f,e.facet))!==null&&c!==void 0?c:f,O=new lm(f,e,D,w.getSource()),d[D]=O}return Object.assign(Object.assign({},e.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:S,main:w,facetRoot:O,ancestorParse:m})}class c9e extends nN{constructor(t,n,i,r){var s,a,o,l;super(t,"concat",n,i,r,t.resolve),(((a=(s=t.resolve)===null||s===void 0?void 0:s.axis)===null||a===void 0?void 0:a.x)==="shared"||((l=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||l===void 0?void 0:l.y)==="shared")&&Ie(f4e),this.children=this.getChildren(t).map((u,c)=>lN(u,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=vE(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ae(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return iE(t)?t.vconcat:PL(t)?t.hconcat:t.concat}parseLayoutSize(){r9e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=YL(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),i?{style:i}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function f9e(e){return e===!1||e===null}const d9e=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},vZ),{labelExpr:1,encode:1}),ute=Ae(d9e);class rN extends ju{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new rN(Ft(this.explicit),Ft(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!f9e(this.get(t))}hasOrientSignalRef(){return st(this.explicit.orient)}}function h9e(e,t,n){var i;const{encoding:r,config:s}=e,a=(i=Pi(r[t]))!==null&&i!==void 0?i:Pi(r[Pu(t)]),o=e.axis(t)||{},{format:l,formatType:u}=o;return sh(u)?Object.assign({text:_L({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:u,config:s})},n):n}function p9e(e){return Pl.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[w9e(n,e)]),t),{})}const g9e={bottom:"top",top:"bottom",left:"right",right:"left"};function m9e(e){var t;const{axes:n,resolve:i}=e.component,r={top:0,bottom:0,right:0,left:0};for(const s of e.children){s.parseAxesAndHeaders();for(const a of Ae(s.component.axes))i.axis[a]=XL(e.component.resolve,a),i.axis[a]==="shared"&&(n[a]=y9e(n[a],s.component.axes[a]),n[a]||(i.axis[a]="independent",delete n[a]))}for(const s of Pl){for(const a of e.children)if(!!a.component.axes[s]){if(i.axis[s]==="independent"){n[s]=((t=n[s])!==null&&t!==void 0?t:[]).concat(a.component.axes[s]);for(const o of a.component.axes[s]){const{value:l,explicit:u}=o.getWithExplicit("orient");if(!st(l)){if(r[l]>0&&!u){const c=g9e[l];r[l]>r[c]&&o.set("orient",c,!1)}r[l]++}}}delete a.component.axes[s]}if(i.axis[s]==="independent"&&n[s]&&n[s].length>1)for(const a of n[s])!!a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function y9e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],s=t[i];if(!!r!=!!s)return;if(r&&s){const a=r.getWithExplicit("orient"),o=s.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;e[i]=b9e(r,s)}}}else return t.map(n=>n.clone());return e}function b9e(e,t){for(const n of ute){const i=tf(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,s)=>{switch(n){case"title":return CQ(r,s);case"gridScale":return{explicit:r.explicit,value:Oi(r.value,s.value)}}return sE(r,s,n,"axis")});e.setWithExplicit(n,i)}return e}function v9e(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(st(n.labelAngle)?n.labelAngle:y1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===xee(i,r))return!0}return e===n[t]}const _9e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function w9e(e,t){var n,i,r;let s=t.axis(e);const a=new rN,o=Pi(t.encoding[e]),{mark:l,config:u}=t,c=s?.orient||((n=u[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((i=u.axis)===null||i===void 0?void 0:i.orient)||e8e(e),f=t.getScaleComponent(e).get("type"),d=G5e(e,f,c,t.config),h=s!==void 0?!s:zx("disable",u.style,s?.style,d).configValue;if(a.set("disable",h,s!==void 0),h)return a;s=s||{};const p=J5e(o,s,e,u.style,d),g={fieldOrDatumDef:o,axis:s,channel:e,model:t,scaleType:f,orient:c,labelAngle:p,mark:l,config:u};for(const b of ute){const v=b in OB?OB[b](g):tB(b)?s[b]:void 0,_=v!==void 0,S=v9e(v,b,s,t,e);if(_&&S)a.set(b,v,S);else{const{configValue:E=void 0,configFrom:w=void 0}=tB(b)&&b!=="values"?zx(b,u.style,s.style,d):{},O=E!==void 0;_&&!O?a.set(b,v,S):(w!=="vgAxisConfig"||_9e.has(b)&&O||ky(E)||st(E))&&a.set(b,E,!1)}}const m=(r=s.encoding)!==null&&r!==void 0?r:{},y=bZ.reduce((b,v)=>{var _;if(!a.hasAxisPart(v))return b;const S=Lee((_=m[v])!==null&&_!==void 0?_:{},t),E=v==="labels"?h9e(t,e,S):S;return E!==void 0&&!jn(E)&&(b[v]={update:E}),b},{});return jn(y)||a.set("encode",y,!!s.encoding||s.labelAngle!==void 0),a}function S9e({encoding:e,size:t}){for(const n of Pl){const i=xs(n);El(t[i])&&nl(e[n])&&(delete t[i],Ie(MQ(i)))}return t}function E9e(e,t,n){const i=us(e),r=Dn("orient",i,n);if(i.orient=I9e(i.type,t,r),r!==void 0&&r!==i.orient&&Ie(D4e(i.orient,r)),i.type==="bar"&&i.orient){const o=Dn("cornerRadiusEnd",i,n);if(o!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:JFe[i.orient];for(const u of l)i[u]=o;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Dn("opacity",i,n)===void 0&&(i.opacity=O9e(i.type,t)),Dn("cursor",i,n)===void 0&&(i.cursor=A9e(i,t,n)),i}function A9e(e,t,n){return t.href||e.href||Dn("href",e,n)?"pointer":e.cursor}function O9e(e,t){if(cn([GS,hL,pL,gL],e)&&!IL(t))return .7}function C9e(e,t,{graticule:n}){if(n)return!1;const i=ih("filled",e,t),r=e.type;return Oi(i,r!==GS&&r!==qS&&r!==k2)}function I9e(e,t,n){switch(e){case GS:case pL:case gL:case XQ:case zFe:case UFe:return}const{x:i,y:r,x2:s,y2:a}=t;switch(e){case WS:if(Me(i)&&(jr(i.bin)||Me(r)&&r.aggregate&&!i.aggregate))return"vertical";if(Me(r)&&(jr(r.bin)||Me(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s&&(Me(i)&&i.type===rh&&!Xn(i.bin)||kx(i)))return"horizontal";if(!a&&(Me(r)&&r.type===rh&&!Xn(r.bin)||kx(r)))return"vertical"}case k2:if(s&&!(Me(i)&&jr(i.bin))&&a&&!(Me(r)&&jr(r.bin)))return;case HS:if(a)return Me(r)&&jr(r.bin)?"horizontal":"vertical";if(s)return Me(i)&&jr(i.bin)?"vertical":"horizontal";if(e===k2){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case qS:case hL:{const o=nl(i),l=nl(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l){const u=i,c=r,f=u.type===_g,d=c.type===_g;return f&&!d?e!=="tick"?"vertical":"horizontal":!f&&d?e!=="tick"?"horizontal":"vertical":!u.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":u.aggregate&&!c.aggregate&&e!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const x9e={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Sr("x",e,{defaultPos:"mid"})),Sr("y",e,{defaultPos:"mid"})),rf(e,"radius")),rf(e,"theta"))},T9e={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),B2("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),B2("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),HL(e))},k9e={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rf(e,"x")),rf(e,"y"))},M9e={vgMark:"shape",encodeEntry:e=>Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&Me(n)&&n.type===rm?{field:De(n,{expr:"datum"})}:{})]}},D9e={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),rf(e,"x")),rf(e,"y")),VL(e,"url"))},R9e={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Sr("x",e,{defaultPos:"mid"})),Sr("y",e,{defaultPos:"mid"})),Hi("size",e,{vgChannel:"strokeWidth"})),HL(e))},L9e={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Sr("x",e,{defaultPos:"mid"})),Sr("y",e,{defaultPos:"mid"})),Hi("size",e)),HL(e))};function sN(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Sr("x",e,{defaultPos:"mid"})),Sr("y",e,{defaultPos:"mid"})),Hi("size",e)),Hi("angle",e)),N9e(e,n,t))}function N9e(e,t,n){return n?{shape:{value:n}}:Hi("shape",e)}const F9e={vgMark:"symbol",encodeEntry:e=>sN(e)},P9e={vgMark:"symbol",encodeEntry:e=>sN(e,"circle")},B9e={vgMark:"symbol",encodeEntry:e=>sN(e,"square")},j9e={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),rf(e,"x")),rf(e,"y"))},U9e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),B2("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),B2("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),Hi("size",e,{vgChannel:"strokeWidth"}))}},z9e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Sr("x",e,{defaultPos:"mid"})),Sr("y",e,{defaultPos:"mid"})),VL(e)),Hi("size",e,{vgChannel:"fontSize"})),Hi("angle",e)),wB("align",V9e(e.markDef,n,t))),wB("baseline",$9e(e.markDef,n,t))),Sr("radius",e,{defaultPos:null})),Sr("theta",e,{defaultPos:null}))}};function V9e(e,t,n){if(Dn("align",e,n)===void 0)return"center"}function $9e(e,t,n){if(Dn("baseline",e,n)===void 0)return"middle"}const H9e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",s=i==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ma(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Sr("x",e,{defaultPos:"mid",vgChannel:"xc"})),Sr("y",e,{defaultPos:"mid",vgChannel:"yc"})),Hi("size",e,{defaultValue:W9e(e),vgChannel:r})),{[s]:Jn(Dn("thickness",n,t))})}};function W9e(e){var t;const{config:n,markDef:i}=e,{orient:r}=i,s=r==="horizontal"?"width":"height",a=e.getScaleComponent(r==="horizontal"?"x":"y"),o=(t=Dn("size",i,n,{vgChannel:s}))!==null&&t!==void 0?t:n.tick.bandSize;if(o!==void 0)return o;{const l=a?a.get("range"):void 0;return l&&Tf(l)&&Un(l.step)?l.step*3/4:F2(n.view,s)*3/4}}const Db={arc:x9e,area:T9e,bar:k9e,circle:P9e,geoshape:M9e,image:D9e,line:R9e,point:F9e,rect:j9e,rule:U9e,square:B9e,text:z9e,tick:H9e,trail:L9e};function q9e(e){if(cn([qS,HS,VFe],e.mark)){const t=EZ(e.mark,e.encoding);if(t.length>0)return G9e(e,t)}else if(e.mark===WS){const t=Ax.some(n=>Dn(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Y9e(e)}return aN(e)}const zB="faceted_path_";function G9e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:zB+e.requestDataName(Gn.Main),data:e.requestDataName(Gn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:aN(e,{fromPrefix:zB})}]}const VB="stack_group_";function Y9e(e){var t;const[n]=aN(e,{fromPrefix:VB}),i=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),s=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${i}',${h})`).join(",")})`};let a,o;e.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},yg(n.encode.update,["y","yc","y2","height",...Ax])),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},Ys(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},yg(n.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},Ys(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const c of Ax){const f=ih(c,e.markDef,e.config);n.encode.update[c]?(a[c]=n.encode.update[c],delete n.encode.update[c]):f&&(a[c]=Jn(f)),f&&(n.encode.update[c]={value:0})}const l=[];if(((t=e.stack.groupbyChannels)===null||t===void 0?void 0:t.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=De(f);d&&l.push(d),(f?.bin||f?.timeUnit)&&l.push(De(f,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(n.encode.update[f])return Object.assign(Object.assign({},c),{[f]:n.encode.update[f]});{const d=ih(f,e.markDef,e.config);return d!==void 0?Object.assign(Object.assign({},c),{[f]:Jn(d)}):c}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Gn.Main),name:VB+e.requestDataName(Gn.Main),groupby:l,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[n]}]}]}function X9e(e){var t;const{encoding:n,stack:i,mark:r,markDef:s,config:a}=e,o=n.order;if(!(!ge(o)&&yo(o)&&Sx(o.value)||!o&&Sx(Dn("order",s,a)))){if((ge(o)||Me(o))&&!i)return EQ(o,{expr:"datum"});if(kf(r)){const l=s.orient==="horizontal"?"y":"x",u=n[l];if(Me(u)){const c=u.sort;if(ge(c))return{field:De(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(ll(c))return{field:De({aggregate:IL(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(aZ(c)){const f=e.fieldDef(c.encoding);return{field:De(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:De(u,{binSuffix:!((t=e.stack)===null||t===void 0)&&t.impute?"mid":void 0,expr:"datum"})}}return}}}function aN(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:s}=e,a=Oi(i.clip,K9e(e),J9e(e)),o=wQ(i),l=r.key,u=X9e(e),c=Q9e(e),f=Dn("aria",i,s),d=Db[n].postEncodingTransform?Db[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:Db[n].vgMark},a?{clip:!0}:{}),o?{style:o}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),f===!1?{aria:f}:{}),{from:{data:t.fromPrefix+e.requestDataName(Gn.Main)},encode:{update:Db[n].encodeEntry(e)}}),d?{transform:d}:{})]}function K9e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function J9e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Q9e(e){if(!e.component.selection)return null;const t=Ae(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=Ae(i.component.selection).length,i=i.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class cte extends ste{constructor(t,n,i,r={},s){var a;super(t,"unit",n,i,s,void 0,rB(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=wl(t.mark)?Object.assign({},t.mark):{type:t.mark},l=o.type;o.filled===void 0&&(o.filled=C9e(o,s,{graticule:t.data&&UL(t.data)}));const u=this.encoding=x6e(t.encoding||{},l,o.filled,s);this.markDef=E9e(o,u,s),this.size=S9e({encoding:u,size:rB(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=HZ(l,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=((a=t.params)!==null&&a!==void 0?a:[]).filter(c=>NL(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===KQ,i=t&&ANe.some(r=>Ct(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return zS.reduce((i,r)=>{var s;const a=Pi(n[r]);return a&&(i[r]=this.initScale((s=a.scale)!==null&&s!==void 0?s:{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=us(t);return ge(n)&&(r.domain=n.map($s)),ge(i)&&(r.range=i.map($s)),r}initAxes(t){return Pl.reduce((n,i)=>{const r=t[i];if(Ct(r)||i===li&&Ct(t.x2)||i===Ki&&Ct(t.y2)){const s=Ct(r)?r.axis:void 0;n[i]=s&&this.initAxis(Object.assign({},s))}return n},{})}initAxis(t){const n=Ae(t),i={};for(const r of n){const s=t[r];i[r]=ky(s)?_Q(s):$s(s)}return i}initLegends(t){return LNe.reduce((n,i)=>{const r=Pi(t[i]);if(r&&FNe(i)){const s=r.legend;n[i]=s&&us(s)}return n},{})}parseData(){this.component.data=vE(this)}parseLayoutSize(){s9e(this)}parseSelections(){this.component.selection=$5e(this,this.selection)}parseMarkGroup(){this.component.mark=q9e(this)}parseAxesAndHeaders(){this.component.axes=p9e(this)}assembleSelectionTopLevelSignals(t){return c5e(this,t)}assembleSignals(){return[...Oee(this),...l5e(this,[])]}assembleSelectionData(t){return f5e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return YL(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!cm(this.parent))&&(n=ree(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};if(t!==void 0)return t;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Rd(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Sl(n)}typedFieldDef(t){const n=this.fieldDef(t);return xa(n)?n:null}}class oN extends nN{constructor(t,n,i,r,s){super(t,"layer",n,i,s,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((o,l)=>{if(rE(o))return new oN(o,this,this.getName(`layer_${l}`),a,s);if(Bu(o))return new cte(o,this,this.getName(`layer_${l}`),a,s);throw new Error(JR(o))})}parseData(){this.component.data=vE(this);for(const t of this.children)t.parseData()}parseLayoutSize(){i9e(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ae(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){m9e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Oee(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),YL(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Pe(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return d5e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Vee(this))}}function lN(e,t,n,i,r){if(KS(e))return new R0(e,t,n,r);if(rE(e))return new oN(e,t,n,i,r);if(Bu(e))return new cte(e,t,n,i,r);if(Z6e(e))return new c9e(e,t,n,r);throw new Error(JR(e))}var Z9e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function e7e(e,t={}){t.logger&&iFe(t.logger),t.fieldTitle&&gZ(t.fieldTitle);try{const n=$Z(zg(t.config,e.config)),i=ZZ(e,n),r=lN(i,null,"",void 0,n);return r.parse(),dBe(r.component.data,r),{spec:n7e(r,t7e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&rFe(),t.fieldTitle&&b6e()}}function t7e(e,t,n,i){const r=i.component.layoutSize.get("width"),s=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Fe(t)&&(t={type:t}),r&&s&&i5e(t.type)){if(r==="step"&&s==="step")Ie(V8()),t.type="pad";else if(r==="step"||s==="step"){const a=r==="step"?"width":"height";Ie(V8(US(a)));const o=a==="width"?"height":"width";t.type=r5e(o)}}return Object.assign(Object.assign(Object.assign({},Ae(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),mB(n,!1)),mB(e,!0))}function n7e(e,t,n={},i){const r=e.config?pPe(e.config):void 0,s=[].concat(e.assembleSelectionData([]),ZBe(e.component.data,n)),a=e.assembleProjections(),o=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f}=t,d=Z9e(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),d),o?{title:o}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:s}),a.length>0?{projections:a}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...jZ(f)])),r?{config:r}:{}),i?{usermeta:i}:{})}const i7e=gNe.version;var r7e=Object.freeze(Object.defineProperty({__proto__:null,version:i7e,compile:e7e,normalize:ZZ,deepEqual:el,duplicate:Ft,never:QJ,pick:yg,omit:Ys,stringify:Yn,hash:un,isNullOrFalse:Sx,contains:cn,some:eh,every:BR,mergeDeep:ZJ,unique:tl,isEqual:bNe,setEqual:eQ,hasIntersection:jR,prefixGenerator:Ex,fieldIntersection:UR,isEmpty:jn,keys:Ae,vals:xr,entries:Zc,isBoolean:m1,varName:ni,logicalExpr:M0,deleteNestedProperty:I2,titleCase:_y,accessPathWithDatum:zR,flatAccessWithDatum:tQ,replacePathInField:Ca,replaceAll:th,removePathFromField:VR,accessPathDepth:bg,getFirstDefined:Oi,uniqueId:iQ,resetIdCounter:_Ne,internalField:rQ,isInternalField:sQ,normalizeAngle:y1,isNumeric:LS},Symbol.toStringTag,{value:"Module"}));function fte(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var s7e="vega-themes",a7e="2.10.0",o7e="Themes for stylized Vega and Vega-Lite visualizations.",l7e=["vega","vega-lite","themes","style"],u7e="BSD-3-Clause",c7e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},f7e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],d7e="build/vega-themes.js",uN="build/vega-themes.module.js",h7e="build/vega-themes.min.js",p7e="build/vega-themes.min.js",g7e="build/vega-themes.module.d.ts",m7e={type:"git",url:"https://github.com/vega/vega-themes.git"},y7e=["src","build"],b7e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase"},v7e={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.0","@wessberg/rollup-plugin-ts":"^1.3.8","browser-sync":"^2.26.14",concurrently:"^6.0.0","gh-pages":"^3.1.0",rollup:"^2.39.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.2.2",vega:"^5.19.1","vega-lite":"^5.0.0","vega-lite-dev-config":"^0.16.1"},_7e={vega:"*","vega-lite":"*"},w7e={name:s7e,version:a7e,description:o7e,keywords:l7e,license:u7e,author:c7e,contributors:f7e,main:d7e,module:uN,unpkg:h7e,jsdelivr:p7e,types:g7e,repository:m7e,files:y7e,scripts:b7e,devDependencies:v7e,peerDependencies:_7e};const Yh="#fff",S7e="#888",E7e={background:"#333",title:{color:Yh,subtitleColor:Yh},style:{"guide-label":{fill:Yh},"guide-title":{fill:Yh}},axis:{domainColor:Yh,gridColor:S7e,tickColor:Yh}},zf="#4572a7",A7e={background:"#fff",arc:{fill:zf},area:{fill:zf},line:{stroke:zf,strokeWidth:2},path:{stroke:zf},rect:{fill:zf},shape:{stroke:zf},symbol:{fill:zf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Vf="#30a2da",zO="#cbcbcb",O7e="#999",C7e="#333",$B="#f0f0f0",HB="#333",I7e={arc:{fill:Vf},area:{fill:Vf},axis:{domainColor:zO,grid:!0,gridColor:zO,gridWidth:1,labelColor:O7e,labelFontSize:10,titleColor:C7e,tickColor:zO,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:$B,group:{fill:$B},legend:{labelColor:HB,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:HB,titleFontSize:14,titlePadding:10},line:{stroke:Vf,strokeWidth:2},path:{stroke:Vf,strokeWidth:.5},rect:{fill:Vf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Vf},bar:{binSpacing:2,fill:Vf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},$f="#000",x7e={group:{fill:"#e5e5e5"},arc:{fill:$f},area:{fill:$f},line:{stroke:$f},path:{stroke:$f},rect:{fill:$f},shape:{stroke:$f},symbol:{fill:$f,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},T7e=22,k7e="normal",WB="Benton Gothic, sans-serif",qB=11.5,M7e="normal",Hf="#82c6df",VO="Benton Gothic Bold, sans-serif",GB="normal",YB=13,$m={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},D7e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:VO,fontSize:T7e,fontWeight:k7e},arc:{fill:Hf},area:{fill:Hf},line:{stroke:Hf,strokeWidth:2},path:{stroke:Hf},rect:{fill:Hf},shape:{stroke:Hf},symbol:{fill:Hf,size:30},axis:{labelFont:WB,labelFontSize:qB,labelFontWeight:M7e,titleFont:VO,titleFontSize:YB,titleFontWeight:GB},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:WB,labelFontSize:qB,symbolType:"square",titleFont:VO,titleFontSize:YB,titleFontWeight:GB},range:{category:$m["category-6"],diverging:$m["fireandice-6"],heatmap:$m["fire-7"],ordinal:$m["fire-7"],ramp:$m["fire-7"]}},Wf="#ab5787",Rb="#979797",R7e={background:"#f9f9f9",arc:{fill:Wf},area:{fill:Wf},line:{stroke:Wf},path:{stroke:Wf},rect:{fill:Wf},shape:{stroke:Wf},symbol:{fill:Wf,size:30},axis:{domainColor:Rb,domainWidth:.5,gridWidth:.2,labelColor:Rb,tickColor:Rb,tickWidth:.2,titleColor:Rb},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},qf="#3e5c69",L7e={background:"#fff",arc:{fill:qf},area:{fill:qf},line:{stroke:qf},path:{stroke:qf},rect:{fill:qf},shape:{stroke:qf},symbol:{fill:qf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},aa="#1696d2",XB="#000000",N7e="#FFFFFF",Lb="Lato",$O="Lato",F7e="Lato",P7e="#DEDDDD",B7e=18,Hm={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},j7e={background:N7e,title:{anchor:"start",fontSize:B7e,font:Lb},axisX:{domain:!0,domainColor:XB,domainWidth:1,grid:!1,labelFontSize:12,labelFont:$O,labelAngle:0,tickColor:XB,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Lb},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:P7e,gridWidth:1,labelFontSize:12,labelFont:$O,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Lb,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:$O,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Lb,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Hm["six-groups-cat-1"],diverging:Hm["diverging-colors"],heatmap:Hm["diverging-colors"],ordinal:Hm["six-groups-seq"],ramp:Hm["shades-blue"]},area:{fill:aa},rect:{fill:aa},line:{color:aa,stroke:aa,strokeWidth:5},trail:{color:aa,stroke:aa,strokeWidth:0,size:1},path:{stroke:aa,strokeWidth:.5},point:{filled:!0},text:{font:F7e,color:aa,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:aa,stroke:null}},arc:{fill:aa},shape:{stroke:aa},symbol:{fill:aa,size:30}},Gf="#3366CC",KB="#ccc",Nb="Arial, sans-serif",U7e={arc:{fill:Gf},area:{fill:Gf},path:{stroke:Gf},rect:{fill:Gf},shape:{stroke:Gf},symbol:{stroke:Gf},circle:{fill:Gf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Nb,fontSize:12},"guide-title":{font:Nb,fontSize:12},"group-title":{font:Nb,fontSize:12}},title:{font:Nb,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:KB,tickColor:KB,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},z7e=w7e.version;var V7e=Object.freeze(Object.defineProperty({__proto__:null,dark:E7e,excel:A7e,fivethirtyeight:I7e,ggplot2:x7e,googlecharts:U7e,latimes:D7e,quartz:R7e,urbaninstitute:j7e,version:z7e,vox:L7e},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function $7e(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function H7e(e,t,n){if(ge(e))return`[${e.map(i=>t(Fe(i)?i:JB(i,n))).join(", ")}]`;if(Ye(e)){let i="";const r=e,{title:s,image:a}=r,o=$7e(r,["title","image"]);s&&(i+=`<h2>${t(s)}</h2>`),a&&(i+=`<img src="${t(a)}">`);const l=Object.keys(o);if(l.length>0){i+="<table>";for(const u of l){let c=o[u];c!==void 0&&(Ye(c)&&(c=JB(c,n)),i+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function W7e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function JB(e,t){return JSON.stringify(e,W7e(t))}var q7e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element img {
  max-width: 200px;
  max-height: 200px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const dte="vg-tooltip-element",G7e={offsetX:10,offsetY:10,id:dte,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Y7e,maxDepth:2,formatTooltip:H7e};function Y7e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function X7e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return q7e.toString().replace(dte,e)}function K7e(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let s=e.clientY+i;return s+t.height>window.innerHeight&&(s=+e.clientY-i-t.height),{x:r,y:s}}class J7e{constructor(t){this.options=Object.assign(Object.assign({},G7e),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=X7e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){var s;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),((s=document.fullscreenElement)!==null&&s!==void 0?s:document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=K7e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${a}px`)}}function Q7e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QB(e,t,n,i,r,s,a){try{var o=e[s](a),l=o.value}catch(u){n(u);return}o.done?t(l):Promise.resolve(l).then(i,r)}function V2(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function a(l){QB(s,i,r,a,o,"next",l)}function o(l){QB(s,i,r,a,o,"throw",l)}a(void 0)})}}var hte=Object.prototype,_d=hte.hasOwnProperty,Jo,cN=typeof Symbol=="function"?Symbol:{},_E=cN.iterator||"@@iterator",Z7e=cN.asyncIterator||"@@asyncIterator",$2=cN.toStringTag||"@@toStringTag";function pte(e,t,n,i){var r=t&&t.prototype instanceof Kx?t:Kx,s=Object.create(r.prototype),a=new Jx(i||[]);return s._invoke=rje(e,n,a),s}function fN(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}var ZB="suspendedStart",eje="suspendedYield",e9="executing",Fb="completed",Xa={};function Kx(){}function wE(){}function Tg(){}var dN={};dN[_E]=function(){return this};var HO=Object.getPrototypeOf,Pb=HO&&HO(HO(hN([])));Pb&&Pb!==hte&&_d.call(Pb,_E)&&(dN=Pb);var fm=Tg.prototype=Kx.prototype=Object.create(dN);wE.prototype=fm.constructor=Tg;Tg.constructor=wE;Tg[$2]=wE.displayName="GeneratorFunction";function gte(e){["next","throw","return"].forEach(function(t){e[t]=function(n){return this._invoke(t,n)}})}function mte(e){var t=typeof e=="function"&&e.constructor;return t?t===wE||(t.displayName||t.name)==="GeneratorFunction":!1}function tje(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,Tg):(e.__proto__=Tg,$2 in e||(e[$2]="GeneratorFunction")),e.prototype=Object.create(fm),e}function nje(e){return{__await:e}}function SE(e,t){function n(s,a,o,l){var u=fN(e[s],e,a);if(u.type==="throw")l(u.arg);else{var c=u.arg,f=c.value;return f&&typeof f=="object"&&_d.call(f,"__await")?t.resolve(f.__await).then(function(d){n("next",d,o,l)},function(d){n("throw",d,o,l)}):t.resolve(f).then(function(d){c.value=d,o(c)},function(d){return n("throw",d,o,l)})}}var i;function r(s,a){function o(){return new t(function(l,u){n(s,a,l,u)})}return i=i?i.then(o,o):o()}this._invoke=r}gte(SE.prototype);SE.prototype[Z7e]=function(){return this};function ije(e,t,n,i,r){r===void 0&&(r=Promise);var s=new SE(pte(e,t,n,i),r);return mte(t)?s:s.next().then(function(a){return a.done?a.value:s.next()})}function rje(e,t,n){var i=ZB;return function(s,a){if(i===e9)throw new Error("Generator is already running");if(i===Fb){if(s==="throw")throw a;return bte()}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var l=yte(o,n);if(l){if(l===Xa)continue;return l}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(i===ZB)throw i=Fb,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);i=e9;var u=fN(e,t,n);if(u.type==="normal"){if(i=n.done?Fb:eje,u.arg===Xa)continue;return{value:u.arg,done:n.done}}else u.type==="throw"&&(i=Fb,n.method="throw",n.arg=u.arg)}}}function yte(e,t){var n=e.iterator[t.method];if(n===Jo){if(t.delegate=null,t.method==="throw"){if(e.iterator.return&&(t.method="return",t.arg=Jo,yte(e,t),t.method==="throw"))return Xa;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return Xa}var i=fN(n,e.iterator,t.arg);if(i.type==="throw")return t.method="throw",t.arg=i.arg,t.delegate=null,Xa;var r=i.arg;if(!r)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,Xa;if(r.done)t[e.resultName]=r.value,t.next=e.nextLoc,t.method!=="return"&&(t.method="next",t.arg=Jo);else return r;return t.delegate=null,Xa}gte(fm);fm[$2]="Generator";fm[_E]=function(){return this};fm.toString=function(){return"[object Generator]"};function sje(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function WO(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Jx(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(sje,this),this.reset(!0)}function aje(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var r=t.pop();if(r in e)return i.value=r,i.done=!1,i}return i.done=!0,i}}function hN(e){if(e){var t=e[_E];if(t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(_d.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=Jo,r.done=!0,r};return i.next=i}}return{next:bte}}function bte(){return{value:Jo,done:!0}}Jx.prototype={constructor:Jx,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Jo,this.done=!1,this.delegate=null,this.method="next",this.arg=Jo,this.tryEntries.forEach(WO),!t)for(var n in this)n.charAt(0)==="t"&&_d.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=Jo)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(u,c){return a.type="throw",a.arg=t,n.next=u,c&&(n.method="next",n.arg=Jo),!!c}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if(s.tryLoc==="root")return i("end");if(s.tryLoc<=this.prev){var o=_d.call(s,"catchLoc"),l=_d.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else if(l){if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&_d.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&(t==="break"||t==="continue")&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=n,s?(this.method="next",this.next=s.finallyLoc,Xa):this.complete(a)},complete:function(t,n){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&n&&(this.next=n),Xa},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),WO(i),Xa}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var r=i.completion;if(r.type==="throw"){var s=r.arg;WO(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:hN(t),resultName:n,nextLoc:i},this.method==="next"&&(this.arg=Jo),Xa}};var il={wrap:pte,isGeneratorFunction:mte,AsyncIterator:SE,mark:tje,awrap:nje,async:ije,keys:aje,values:hN},oje=On;On.Node=lh;On.create=On;function On(e){var t=this;if(t instanceof On||(t=new On),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}On.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};On.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};On.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};On.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)uje(this,arguments[e]);return this.length};On.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)cje(this,arguments[e]);return this.length};On.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};On.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};On.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};On.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};On.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};On.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};On.prototype.map=function(e,t){t=t||this;for(var n=new On,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};On.prototype.mapReverse=function(e,t){t=t||this;for(var n=new On,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};On.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};On.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};On.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};On.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};On.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new On;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};On.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new On;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};On.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var r=[],n=0;i&&n<t;n++)r.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)i=lje(this,i,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return r};On.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function lje(e,t,n){var i=t===e.head?new lh(n,null,t,e):new lh(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function uje(e,t){e.tail=new lh(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function cje(e,t){e.head=new lh(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function lh(e,t,n,i){if(!(this instanceof lh))return new lh(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{On.prototype[Symbol.iterator]=il.mark(function e(){var t;return il.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=this.head;case 1:if(!t){i.next=7;break}return i.next=4,t.value;case 4:t=t.next,i.next=1;break;case 7:case"end":return i.stop()}},e,this)})}catch{}var fje=oje,sd=Symbol("max"),Ql=Symbol("length"),Xh=Symbol("lengthCalculator"),L0=Symbol("allowStale"),wd=Symbol("maxAge"),Yl=Symbol("dispose"),t9=Symbol("noDisposeOnSet"),Vi=Symbol("lruList"),Fa=Symbol("cache"),vte=Symbol("updateAgeOnGet"),qO=()=>1;class dje{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[sd]=t.max||1/0;var n=t.length||qO;if(this[Xh]=typeof n!="function"?qO:n,this[L0]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[wd]=t.maxAge||0,this[Yl]=t.dispose,this[t9]=t.noDisposeOnSet||!1,this[vte]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[sd]=t||1/0,Wm(this)}get max(){return this[sd]}set allowStale(t){this[L0]=!!t}get allowStale(){return this[L0]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[wd]=t,Wm(this)}get maxAge(){return this[wd]}set lengthCalculator(t){typeof t!="function"&&(t=qO),t!==this[Xh]&&(this[Xh]=t,this[Ql]=0,this[Vi].forEach(n=>{n.length=this[Xh](n.value,n.key),this[Ql]+=n.length})),Wm(this)}get lengthCalculator(){return this[Xh]}get length(){return this[Ql]}get itemCount(){return this[Vi].length}rforEach(t,n){n=n||this;for(var i=this[Vi].tail;i!==null;){var r=i.prev;n9(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(var i=this[Vi].head;i!==null;){var r=i.next;n9(this,t,i,n),i=r}}keys(){return this[Vi].toArray().map(t=>t.key)}values(){return this[Vi].toArray().map(t=>t.value)}reset(){this[Yl]&&this[Vi]&&this[Vi].length&&this[Vi].forEach(t=>this[Yl](t.key,t.value)),this[Fa]=new Map,this[Vi]=new fje,this[Ql]=0}dump(){return this[Vi].map(t=>H2(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Vi]}set(t,n,i){if(i=i||this[wd],i&&typeof i!="number")throw new TypeError("maxAge must be a number");var r=i?Date.now():0,s=this[Xh](n,t);if(this[Fa].has(t)){if(s>this[sd])return Dp(this,this[Fa].get(t)),!1;var a=this[Fa].get(t),o=a.value;return this[Yl]&&(this[t9]||this[Yl](t,o.value)),o.now=r,o.maxAge=i,o.value=n,this[Ql]+=s-o.length,o.length=s,this.get(t),Wm(this),!0}var l=new hje(t,n,s,r,i);return l.length>this[sd]?(this[Yl]&&this[Yl](t,n),!1):(this[Ql]+=l.length,this[Vi].unshift(l),this[Fa].set(t,this[Vi].head),Wm(this),!0)}has(t){if(!this[Fa].has(t))return!1;var n=this[Fa].get(t).value;return!H2(this,n)}get(t){return GO(this,t,!0)}peek(t){return GO(this,t,!1)}pop(){var t=this[Vi].tail;return t?(Dp(this,t),t.value):null}del(t){Dp(this,this[Fa].get(t))}load(t){this.reset();for(var n=Date.now(),i=t.length-1;i>=0;i--){var r=t[i],s=r.e||0;if(s===0)this.set(r.k,r.v);else{var a=s-n;a>0&&this.set(r.k,r.v,a)}}}prune(){this[Fa].forEach((t,n)=>GO(this,n,!1))}}var GO=(e,t,n)=>{var i=e[Fa].get(t);if(i){var r=i.value;if(H2(e,r)){if(Dp(e,i),!e[L0])return}else n&&(e[vte]&&(i.value.now=Date.now()),e[Vi].unshiftNode(i));return r.value}},H2=(e,t)=>{if(!t||!t.maxAge&&!e[wd])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[wd]&&n>e[wd]},Wm=e=>{if(e[Ql]>e[sd])for(var t=e[Vi].tail;e[Ql]>e[sd]&&t!==null;){var n=t.prev;Dp(e,t),t=n}},Dp=(e,t)=>{if(t){var n=t.value;e[Yl]&&e[Yl](n.key,n.value),e[Ql]-=n.length,e[Fa].delete(n.key),e[Vi].removeNode(t)}};class hje{constructor(t,n,i,r,s){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=s||0}}var n9=(e,t,n,i)=>{var r=n.value;H2(e,r)&&(Dp(e,n),e[L0]||(r=void 0)),r&&t.call(i,r.value,r.key,e)},pje=dje,gje=["includePrerelease","loose","rtl"],mje=e=>e?typeof e!="object"?{loose:!0}:gje.filter(t=>e[t]).reduce((t,n)=>(t[n]=!0,t),{}):{},pN=mje,Ka={exports:{}},yje="2.0.0",bje=256,vje=Number.MAX_SAFE_INTEGER||9007199254740991,_je=16,gN={SEMVER_SPEC_VERSION:yje,MAX_LENGTH:bje,MAX_SAFE_INTEGER:vje,MAX_SAFE_COMPONENT_LENGTH:_je},wje=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{},EE=wje;(function(e,t){var n=gN.MAX_SAFE_COMPONENT_LENGTH,i=EE;t=e.exports={};var r=t.re=[],s=t.src=[],a=t.t={},o=0,l=(u,c,f)=>{var d=o++;i(u,d,c),a[u]=d,s[d]=c,r[d]=new RegExp(c,f?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION","(".concat(s[a.NUMERICIDENTIFIER],")\\.")+"(".concat(s[a.NUMERICIDENTIFIER],")\\.")+"(".concat(s[a.NUMERICIDENTIFIER],")")),l("MAINVERSIONLOOSE","(".concat(s[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(s[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(s[a.NUMERICIDENTIFIERLOOSE],")")),l("PRERELEASEIDENTIFIER","(?:".concat(s[a.NUMERICIDENTIFIER],"|").concat(s[a.NONNUMERICIDENTIFIER],")")),l("PRERELEASEIDENTIFIERLOOSE","(?:".concat(s[a.NUMERICIDENTIFIERLOOSE],"|").concat(s[a.NONNUMERICIDENTIFIER],")")),l("PRERELEASE","(?:-(".concat(s[a.PRERELEASEIDENTIFIER],"(?:\\.").concat(s[a.PRERELEASEIDENTIFIER],")*))")),l("PRERELEASELOOSE","(?:-?(".concat(s[a.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(s[a.PRERELEASEIDENTIFIERLOOSE],")*))")),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD","(?:\\+(".concat(s[a.BUILDIDENTIFIER],"(?:\\.").concat(s[a.BUILDIDENTIFIER],")*))")),l("FULLPLAIN","v?".concat(s[a.MAINVERSION]).concat(s[a.PRERELEASE],"?").concat(s[a.BUILD],"?")),l("FULL","^".concat(s[a.FULLPLAIN],"$")),l("LOOSEPLAIN","[v=\\s]*".concat(s[a.MAINVERSIONLOOSE]).concat(s[a.PRERELEASELOOSE],"?").concat(s[a.BUILD],"?")),l("LOOSE","^".concat(s[a.LOOSEPLAIN],"$")),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE","".concat(s[a.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),l("XRANGEIDENTIFIER","".concat(s[a.NUMERICIDENTIFIER],"|x|X|\\*")),l("XRANGEPLAIN","[v=\\s]*(".concat(s[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIER],")")+"(?:".concat(s[a.PRERELEASE],")?").concat(s[a.BUILD],"?")+")?)?"),l("XRANGEPLAINLOOSE","[v=\\s]*(".concat(s[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(s[a.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(s[a.PRERELEASELOOSE],")?").concat(s[a.BUILD],"?")+")?)?"),l("XRANGE","^".concat(s[a.GTLT],"\\s*").concat(s[a.XRANGEPLAIN],"$")),l("XRANGELOOSE","^".concat(s[a.GTLT],"\\s*").concat(s[a.XRANGEPLAINLOOSE],"$")),l("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),l("COERCERTL",s[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM","(\\s*)".concat(s[a.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",l("TILDE","^".concat(s[a.LONETILDE]).concat(s[a.XRANGEPLAIN],"$")),l("TILDELOOSE","^".concat(s[a.LONETILDE]).concat(s[a.XRANGEPLAINLOOSE],"$")),l("LONECARET","(?:\\^)"),l("CARETTRIM","(\\s*)".concat(s[a.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",l("CARET","^".concat(s[a.LONECARET]).concat(s[a.XRANGEPLAIN],"$")),l("CARETLOOSE","^".concat(s[a.LONECARET]).concat(s[a.XRANGEPLAINLOOSE],"$")),l("COMPARATORLOOSE","^".concat(s[a.GTLT],"\\s*(").concat(s[a.LOOSEPLAIN],")$|^$")),l("COMPARATOR","^".concat(s[a.GTLT],"\\s*(").concat(s[a.FULLPLAIN],")$|^$")),l("COMPARATORTRIM","(\\s*)".concat(s[a.GTLT],"\\s*(").concat(s[a.LOOSEPLAIN],"|").concat(s[a.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE","^\\s*(".concat(s[a.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(s[a.XRANGEPLAIN],")")+"\\s*$"),l("HYPHENRANGELOOSE","^\\s*(".concat(s[a.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(s[a.XRANGEPLAINLOOSE],")")+"\\s*$"),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ka,Ka.exports);var i9=/^[0-9]+$/,_te=(e,t)=>{var n=i9.test(e),i=i9.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},Sje=(e,t)=>_te(t,e),Eje={compareIdentifiers:_te,rcompareIdentifiers:Sje},Bb=EE,r9=gN.MAX_LENGTH,jb=gN.MAX_SAFE_INTEGER,s9=Ka.exports.re,a9=Ka.exports.t,Aje=pN,Kh=Eje.compareIdentifiers;class Pa{constructor(t,n){if(n=Aje(n),t instanceof Pa){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: ".concat(t));if(t.length>r9)throw new TypeError("version is longer than ".concat(r9," characters"));Bb("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var i=t.trim().match(n.loose?s9[a9.LOOSE]:s9[a9.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>jb||this.major<0)throw new TypeError("Invalid major version");if(this.minor>jb||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>jb||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){var s=+r;if(s>=0&&s<jb)return s}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(Bb("SemVer.compare",this.version,this.options,t),!(t instanceof Pa)){if(typeof t=="string"&&t===this.version)return 0;t=new Pa(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Pa||(t=new Pa(t,this.options)),Kh(this.major,t.major)||Kh(this.minor,t.minor)||Kh(this.patch,t.patch)}comparePre(t){if(t instanceof Pa||(t=new Pa(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var i=this.prerelease[n],r=t.prerelease[n];if(Bb("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Kh(i,r)}while(++n)}compareBuild(t){t instanceof Pa||(t=new Pa(t,this.options));var n=0;do{var i=this.build[n],r=t.build[n];if(Bb("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return Kh(i,r)}while(++n)}inc(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);i===-1&&this.prerelease.push(0)}n&&(Kh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}}var mN=Pa,o9=mN,Oje=(e,t,n)=>new o9(e,n).compare(new o9(t,n)),dm=Oje,Cje=dm,Ije=(e,t,n)=>Cje(e,t,n)===0,xje=Ije,Tje=dm,kje=(e,t,n)=>Tje(e,t,n)!==0,Mje=kje,Dje=dm,Rje=(e,t,n)=>Dje(e,t,n)>0,Lje=Rje,Nje=dm,Fje=(e,t,n)=>Nje(e,t,n)>=0,Pje=Fje,Bje=dm,jje=(e,t,n)=>Bje(e,t,n)<0,Uje=jje,zje=dm,Vje=(e,t,n)=>zje(e,t,n)<=0,$je=Vje,Hje=xje,Wje=Mje,qje=Lje,Gje=Pje,Yje=Uje,Xje=$je,Kje=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Hje(e,n,i);case"!=":return Wje(e,n,i);case">":return qje(e,n,i);case">=":return Gje(e,n,i);case"<":return Yje(e,n,i);case"<=":return Xje(e,n,i);default:throw new TypeError("Invalid operator: ".concat(t))}},Jje=Kje,YO,l9;function Qje(){if(l9)return YO;l9=1;var e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}a("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){var f=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],d=c.match(f);if(!d)throw new TypeError("Invalid comparator: ".concat(c));this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new o(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new o(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");if((!f||typeof f!="object")&&(f={loose:!!f,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new l(c.value,f).test(this.value);if(c.operator==="")return c.value===""?!0:new l(this.value,f).test(c.semver);var d=(this.operator===">="||this.operator===">")&&(c.operator===">="||c.operator===">"),h=(this.operator==="<="||this.operator==="<")&&(c.operator==="<="||c.operator==="<"),p=this.semver.version===c.semver.version,g=(this.operator===">="||this.operator==="<=")&&(c.operator===">="||c.operator==="<="),m=s(this.semver,"<",c.semver,f)&&(this.operator===">="||this.operator===">")&&(c.operator==="<="||c.operator==="<"),y=s(this.semver,">",c.semver,f)&&(this.operator==="<="||this.operator==="<")&&(c.operator===">="||c.operator===">");return d||h||p&&g||m||y}}YO=t;var n=pN,i=Ka.exports.re,r=Ka.exports.t,s=Jje,a=EE,o=mN,l=wte();return YO}function u9(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Zje(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return s=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function Zje(e,t){if(!!e){if(typeof e=="string")return c9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c9(e,t)}}function c9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var XO,f9;function wte(){if(f9)return XO;f9=1;class e{constructor(C,I){if(I=i(I),C instanceof e)return C.loose===!!I.loose&&C.includePrerelease===!!I.includePrerelease?C:new e(C.raw,I);if(C instanceof r)return this.raw=C.value,this.set=[[C]],this.format(),this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=C,this.set=C.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(C));if(this.set.length>1){var L=this.set[0];if(this.set=this.set.filter(R=>!d(R[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){var k=u9(this.set),M;try{for(k.s();!(M=k.n()).done;){var N=M.value;if(N.length===1&&h(N[0])){this.set=[N];break}}}catch(R){k.e(R)}finally{k.f()}}}this.format()}format(){return this.range=this.set.map(C=>C.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(C){C=C.trim();var I=Object.keys(this.options).join(","),L="parseRange:".concat(I,":").concat(C),k=n.get(L);if(k)return k;var M=this.options.loose,N=M?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];C=C.replace(N,D(this.options.includePrerelease)),s("hyphen replace",C),C=C.replace(o[l.COMPARATORTRIM],u),s("comparator trim",C),C=C.replace(o[l.TILDETRIM],c),C=C.replace(o[l.CARETTRIM],f),C=C.split(/\s+/).join(" ");var R=C.split(" ").map(re=>g(re,this.options)).join(" ").split(/\s+/).map(re=>O(re,this.options));M&&(R=R.filter(re=>(s("loose invalid filter",re,this.options),!!re.match(o[l.COMPARATORLOOSE])))),s("range list",R);var T=new Map,z=R.map(re=>new r(re,this.options)),Y=u9(z),H;try{for(Y.s();!(H=Y.n()).done;){var oe=H.value;if(d(oe))return[oe];T.set(oe.value,oe)}}catch(re){Y.e(re)}finally{Y.f()}T.size>1&&T.has("")&&T.delete("");var _e=[...T.values()];return n.set(L,_e),_e}intersects(C,I){if(!(C instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>p(L,I)&&C.set.some(k=>p(k,I)&&L.every(M=>k.every(N=>M.intersects(N,I)))))}test(C){if(!C)return!1;if(typeof C=="string")try{C=new a(C,this.options)}catch{return!1}for(var I=0;I<this.set.length;I++)if(x(this.set[I],C,this.options))return!0;return!1}}XO=e;var t=pje,n=new t({max:1e3}),i=pN,r=Qje(),s=EE,a=mN,o=Ka.exports.re,l=Ka.exports.t,u=Ka.exports.comparatorTrimReplace,c=Ka.exports.tildeTrimReplace,f=Ka.exports.caretTrimReplace,d=A=>A.value==="<0.0.0-0",h=A=>A.value==="",p=(A,C)=>{for(var I=!0,L=A.slice(),k=L.pop();I&&L.length;)I=L.every(M=>k.intersects(M,C)),k=L.pop();return I},g=(A,C)=>(s("comp",A,C),A=v(A,C),s("caret",A),A=y(A,C),s("tildes",A),A=S(A,C),s("xrange",A),A=w(A,C),s("stars",A),A),m=A=>!A||A.toLowerCase()==="x"||A==="*",y=(A,C)=>A.trim().split(/\s+/).map(I=>b(I,C)).join(" "),b=(A,C)=>{var I=C.loose?o[l.TILDELOOSE]:o[l.TILDE];return A.replace(I,(L,k,M,N,R)=>{s("tilde",A,L,k,M,N,R);var T;return m(k)?T="":m(M)?T=">=".concat(k,".0.0 <").concat(+k+1,".0.0-0"):m(N)?T=">=".concat(k,".").concat(M,".0 <").concat(k,".").concat(+M+1,".0-0"):R?(s("replaceTilde pr",R),T=">=".concat(k,".").concat(M,".").concat(N,"-").concat(R," <").concat(k,".").concat(+M+1,".0-0")):T=">=".concat(k,".").concat(M,".").concat(N," <").concat(k,".").concat(+M+1,".0-0"),s("tilde return",T),T})},v=(A,C)=>A.trim().split(/\s+/).map(I=>_(I,C)).join(" "),_=(A,C)=>{s("caret",A,C);var I=C.loose?o[l.CARETLOOSE]:o[l.CARET],L=C.includePrerelease?"-0":"";return A.replace(I,(k,M,N,R,T)=>{s("caret",A,k,M,N,R,T);var z;return m(M)?z="":m(N)?z=">=".concat(M,".0.0").concat(L," <").concat(+M+1,".0.0-0"):m(R)?M==="0"?z=">=".concat(M,".").concat(N,".0").concat(L," <").concat(M,".").concat(+N+1,".0-0"):z=">=".concat(M,".").concat(N,".0").concat(L," <").concat(+M+1,".0.0-0"):T?(s("replaceCaret pr",T),M==="0"?N==="0"?z=">=".concat(M,".").concat(N,".").concat(R,"-").concat(T," <").concat(M,".").concat(N,".").concat(+R+1,"-0"):z=">=".concat(M,".").concat(N,".").concat(R,"-").concat(T," <").concat(M,".").concat(+N+1,".0-0"):z=">=".concat(M,".").concat(N,".").concat(R,"-").concat(T," <").concat(+M+1,".0.0-0")):(s("no pr"),M==="0"?N==="0"?z=">=".concat(M,".").concat(N,".").concat(R).concat(L," <").concat(M,".").concat(N,".").concat(+R+1,"-0"):z=">=".concat(M,".").concat(N,".").concat(R).concat(L," <").concat(M,".").concat(+N+1,".0-0"):z=">=".concat(M,".").concat(N,".").concat(R," <").concat(+M+1,".0.0-0")),s("caret return",z),z})},S=(A,C)=>(s("replaceXRanges",A,C),A.split(/\s+/).map(I=>E(I,C)).join(" ")),E=(A,C)=>{A=A.trim();var I=C.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return A.replace(I,(L,k,M,N,R,T)=>{s("xRange",A,L,k,M,N,R,T);var z=m(M),Y=z||m(N),H=Y||m(R),oe=H;return k==="="&&oe&&(k=""),T=C.includePrerelease?"-0":"",z?k===">"||k==="<"?L="<0.0.0-0":L="*":k&&oe?(Y&&(N=0),R=0,k===">"?(k=">=",Y?(M=+M+1,N=0,R=0):(N=+N+1,R=0)):k==="<="&&(k="<",Y?M=+M+1:N=+N+1),k==="<"&&(T="-0"),L="".concat(k+M,".").concat(N,".").concat(R).concat(T)):Y?L=">=".concat(M,".0.0").concat(T," <").concat(+M+1,".0.0-0"):H&&(L=">=".concat(M,".").concat(N,".0").concat(T," <").concat(M,".").concat(+N+1,".0-0")),s("xRange return",L),L})},w=(A,C)=>(s("replaceStars",A,C),A.trim().replace(o[l.STAR],"")),O=(A,C)=>(s("replaceGTE0",A,C),A.trim().replace(o[C.includePrerelease?l.GTE0PRE:l.GTE0],"")),D=A=>(C,I,L,k,M,N,R,T,z,Y,H,oe,_e)=>(m(L)?I="":m(k)?I=">=".concat(L,".0.0").concat(A?"-0":""):m(M)?I=">=".concat(L,".").concat(k,".0").concat(A?"-0":""):N?I=">=".concat(I):I=">=".concat(I).concat(A?"-0":""),m(z)?T="":m(Y)?T="<".concat(+z+1,".0.0-0"):m(H)?T="<".concat(z,".").concat(+Y+1,".0-0"):oe?T="<=".concat(z,".").concat(Y,".").concat(H,"-").concat(oe):A?T="<".concat(z,".").concat(Y,".").concat(+H+1,"-0"):T="<=".concat(T),"".concat(I," ").concat(T).trim()),x=(A,C,I)=>{for(var L=0;L<A.length;L++)if(!A[L].test(C))return!1;if(C.prerelease.length&&!I.includePrerelease){for(var k=0;k<A.length;k++)if(s(A[k].semver),A[k].semver!==r.ANY&&A[k].semver.prerelease.length>0){var M=A[k].semver;if(M.major===C.major&&M.minor===C.minor&&M.patch===C.patch)return!0}return!1}return!0};return XO}var eUe=wte(),tUe=(e,t,n)=>{try{t=new eUe(t,n)}catch{return!1}return t.test(e)},Ste=tUe;function nUe(e,t,n){var i=e.open(t),r=1e4,s=250,a=new URL(t),o=a.origin,l=~~(r/s);function u(f){f.source===i&&(l=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function c(){l<=0||(i.postMessage(n,o),setTimeout(c,s),l-=1)}setTimeout(c,s)}var iUe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function Ete(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,s=n;r<s.length;r++){var a=s[r];rUe(e,a)}return e}function rUe(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Vg(e,r,t[r],!0)}}var KO;function sUe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=aUe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return s=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function aUe(e,t){if(!!e){if(typeof e=="string")return d9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d9(e,t)}}function d9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h9(Object(n),!0).forEach(function(i){Q7e(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h9(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}var Ba=FLe,O1=r7e,Ub=typeof window<"u"?window:void 0;O1===void 0&&Ub!==null&&Ub!==void 0&&(KO=Ub.vl)!==null&&KO!==void 0&&KO.compile&&(O1=Ub.vl);var oUe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},lUe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},m0={vega:"Vega","vega-lite":"Vega-Lite"},W2={vega:Ba.version,"vega-lite":O1?O1.version:"not available"},uUe={vega:e=>e,"vega-lite":(e,t)=>O1.compile(e,{config:t}).spec},cUe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,fUe="chart-wrapper";function dUe(e){return typeof e=="function"}function p9(e,t,n,i){var r="<html><head>".concat(t,'</head><body><pre><code class="json">'),s="</code></pre>".concat(n,"</body></html>"),a=window.open("");a.document.write(r+e+s),a.document.title="".concat(m0[i]," JSON Source")}function hUe(e,t){if(e.$schema){var n=fte(e.$schema);if(t&&t!==n.library){var i;console.warn("The given visualization spec is written in ".concat(m0[n.library],", but mode argument sets ").concat((i=m0[t])!==null&&i!==void 0?i:t,"."))}var r=n.library;return Ste(W2[r],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(m0[r]," ").concat(n.version,", but the current version of ").concat(m0[r]," is v").concat(W2[r],".")),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function pUe(e){return!!(e&&"load"in e)}function g9(e){return pUe(e)?e:Ba.loader(e)}function gUe(e){var t,n,i=(t=(n=e.usermeta)===null||n===void 0?void 0:n.embedOptions)!==null&&t!==void 0?t:{};return Fe(i.defaultStyle)&&(i.defaultStyle=!1),i}function mUe(e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=V2(il.mark(function e(t,n){var i,r,s,a,o,l,u,c,f,d,h,p=arguments;return il.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s=p.length>2&&p[2]!==void 0?p[2]:{},!Fe(n)){m.next=10;break}return o=g9(s.loader),m.t0=JSON,m.next=6,o.load(n);case 6:m.t1=m.sent,a=m.t0.parse.call(m.t0,m.t1),m.next=11;break;case 10:a=n;case 11:return l=gUe(a),u=l.loader,(!o||u)&&(o=g9((c=s.loader)!==null&&c!==void 0?c:u)),m.next=16,m9(l,o);case 16:return f=m.sent,m.next=19,m9(s,o);case 19:return d=m.sent,h=xc(xc({},Ete(d,f)),{},{config:zg((i=d.config)!==null&&i!==void 0?i:{},(r=f.config)!==null&&r!==void 0?r:{})}),m.next=23,bUe(t,a,h,o);case 23:return m.abrupt("return",m.sent);case 24:case"end":return m.stop()}},e)})),Qx.apply(this,arguments)}function m9(e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=V2(il.mark(function e(t,n){var i,r,s;return il.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!Fe(t.config)){o.next=8;break}return o.t1=JSON,o.next=4,n.load(t.config);case 4:o.t2=o.sent,o.t0=o.t1.parse.call(o.t1,o.t2),o.next=9;break;case 8:o.t0=(i=t.config)!==null&&i!==void 0?i:{};case 9:if(r=o.t0,!Fe(t.patch)){o.next=18;break}return o.t4=JSON,o.next=14,n.load(t.patch);case 14:o.t5=o.sent,o.t3=o.t4.parse.call(o.t4,o.t5),o.next=19;break;case 18:o.t3=t.patch;case 19:return s=o.t3,o.abrupt("return",xc(xc(xc({},t),s?{patch:s}:{}),r?{config:r}:{}));case 21:case"end":return o.stop()}},e)})),Zx.apply(this,arguments)}function yUe(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function bUe(e,t){return eT.apply(this,arguments)}function eT(){return eT=V2(il.mark(function e(t,n){var i,r,s,a,o,l,u,c,f,d,h,p,g,m,y,b,v,_,S,E,w,O,D,x,A,C,I,L,k,M,N,R,T,z,Y,H,oe,_e,re,pe,Oe,Re,W,q,ve,ce,fe,we,Xe,tt,ct,yn=arguments;return il.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(ct=function(){_e&&document.removeEventListener("click",_e),R.finalize()},c=yn.length>2&&yn[2]!==void 0?yn[2]:{},f=yn.length>3?yn[3]:void 0,d=c.theme?zg(V7e[c.theme],(i=c.config)!==null&&i!==void 0?i:{}):c.config,h=pf(c.actions)?c.actions:Ete({},oUe,(r=c.actions)!==null&&r!==void 0?r:{}),p=xc(xc({},lUe),c.i18n),g=(s=c.renderer)!==null&&s!==void 0?s:"canvas",m=(a=c.logLevel)!==null&&a!==void 0?a:Ba.Warn,y=(o=c.downloadFileName)!==null&&o!==void 0?o:"visualization",b=typeof t=="string"?document.querySelector(t):t,b){se.next=12;break}throw new Error("".concat(t," does not exist"));case 12:if(c.defaultStyle!==!1&&(v="vega-embed-style",_=yUe(b),S=_.root,E=_.rootContainer,S.getElementById(v)||(w=document.createElement("style"),w.id=v,w.innerHTML=c.defaultStyle===void 0||c.defaultStyle===!0?iUe.toString():c.defaultStyle,E.appendChild(w))),O=hUe(n,c.mode),D=uUe[O](n,d),O==="vega-lite"&&D.$schema&&(x=fte(D.$schema),Ste(W2.vega,"^".concat(x.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(x.version,", but current version is v").concat(W2.vega,"."))),b.classList.add("vega-embed"),h&&b.classList.add("has-actions"),b.innerHTML="",A=b,h&&(C=document.createElement("div"),C.classList.add(fUe),b.appendChild(C),A=C),I=c.patch,I&&(D=I instanceof Function?I(D):Ow(D,I,!0,!1).newDocument),c.formatLocale&&Ba.formatLocale(c.formatLocale),c.timeFormatLocale&&Ba.timeFormatLocale(c.timeFormatLocale),c.expressionFunctions)for(L in c.expressionFunctions)k=c.expressionFunctions[L],"fn"in k?Ba.expressionFunction(L,k.fn,k.visitor):k instanceof Function&&Ba.expressionFunction(L,k);return M=c.ast,N=Ba.parse(D,O==="vega-lite"?{}:d,{ast:M}),R=new(c.viewClass||Ba.View)(N,xc({loader:f,logLevel:m,renderer:g},M?{expr:(l=(u=Ba.expressionInterpreter)!==null&&u!==void 0?u:c.expr)!==null&&l!==void 0?l:qLe}:{})),R.addSignalListener("autosize",(Ne,V)=>{var X=V.type;X=="fit-x"?(A.classList.add("fit-x"),A.classList.remove("fit-y")):X=="fit-y"?(A.classList.remove("fit-x"),A.classList.add("fit-y")):X=="fit"?A.classList.add("fit-x","fit-y"):A.classList.remove("fit-x","fit-y")}),c.tooltip!==!1&&(T=dUe(c.tooltip)?c.tooltip:new J7e(c.tooltip===!0?{}:c.tooltip).call,R.tooltip(T)),z=c.hover,z===void 0&&(z=O==="vega"),z&&(Y=typeof z=="boolean"?{}:z,H=Y.hoverSet,oe=Y.updateSet,R.hover(H,oe)),c&&(c.width!=null&&R.width(c.width),c.height!=null&&R.height(c.height),c.padding!=null&&R.padding(c.padding)),se.next=37,R.initialize(A,c.bind).runAsync();case 37:if(h!==!1){if(re=b,c.defaultStyle!==!1&&(pe=document.createElement("details"),pe.title=p.CLICK_TO_VIEW_ACTIONS,b.append(pe),re=pe,Oe=document.createElement("summary"),Oe.innerHTML=cUe,pe.append(Oe),_e=Ne=>{pe.contains(Ne.target)||pe.removeAttribute("open")},document.addEventListener("click",_e)),Re=document.createElement("div"),re.append(Re),Re.classList.add("vega-actions"),h===!0||h.export!==!1){W=sUe(["svg","png"]);try{for(ve=function(){var V=q.value;if(h===!0||h.export===!0||h.export[V]){var X=p["".concat(V.toUpperCase(),"_ACTION")],Ze=document.createElement("a");Ze.text=X,Ze.href="#",Ze.target="_blank",Ze.download="".concat(y,".").concat(V),Ze.addEventListener("mousedown",function(){var Ot=V2(il.mark(function le(Ge){var me;return il.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Ge.preventDefault(),Je.next=3,R.toImageURL(V,c.scaleFactor);case 3:me=Je.sent,this.href=me;case 5:case"end":return Je.stop()}},le,this)}));return function(le){return Ot.apply(this,arguments)}}()),Re.append(Ze)}},W.s();!(q=W.n()).done;)ve()}catch(Ne){W.e(Ne)}finally{W.f()}}(h===!0||h.source!==!1)&&(ce=document.createElement("a"),ce.text=p.SOURCE_ACTION,ce.href="#",ce.addEventListener("click",function(Ne){var V,X;p9(AA(n),(V=c.sourceHeader)!==null&&V!==void 0?V:"",(X=c.sourceFooter)!==null&&X!==void 0?X:"",O),Ne.preventDefault()}),Re.append(ce)),O==="vega-lite"&&(h===!0||h.compiled!==!1)&&(fe=document.createElement("a"),fe.text=p.COMPILED_ACTION,fe.href="#",fe.addEventListener("click",function(Ne){var V,X;p9(AA(D),(V=c.sourceHeader)!==null&&V!==void 0?V:"",(X=c.sourceFooter)!==null&&X!==void 0?X:"","vega"),Ne.preventDefault()}),Re.append(fe)),(h===!0||h.editor!==!1)&&(Xe=(we=c.editorUrl)!==null&&we!==void 0?we:"https://vega.github.io/editor/",tt=document.createElement("a"),tt.text=p.EDITOR_ACTION,tt.href="#",tt.addEventListener("click",function(Ne){nUe(window,Xe,{config:d,mode:O,renderer:g,spec:AA(n)}),Ne.preventDefault()}),Re.append(tt))}return se.abrupt("return",{view:R,spec:n,vgSpec:D,finalize:ct,embedOptions:c});case 39:case"end":return se.stop()}},e)})),eT.apply(this,arguments)}const vUe=new Set(["width","height"]);function _Ue(e,t){Object.keys(t).forEach(n=>{const i=t[n];i&&(!!i&&{}.toString.call(i)==="[object Function]"?i(e.data(n)):e.change(n,Ba.changeset().remove(()=>!0).insert(i)))})}function zb(e={},t={},n=new Set){const i=Object.keys(e),r=Object.keys(t);return e===t||i.length===r.length&&i.filter(s=>!n.has(s)).every(s=>e[s]===t[s])}function y9(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function JO(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}function wUe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(i=>{t.add(i)})}),t}function SUe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in e||"width"in t,r="height"in e||"height"in t;return i&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),[...wUe([e,t])].filter(a=>a!=="width"&&a!=="height").some(a=>!(a in e)||!(a in t)||!JJ(e[a],t[a]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function b9(e,t){const{width:n,height:i}=t;return typeof n<"u"&&typeof i<"u"?Object.assign(Object.assign({},e),{width:n,height:i}):typeof n<"u"?Object.assign(Object.assign({},e),{width:n}):typeof i<"u"?Object.assign(Object.assign({},e),{height:i}):e}function EUe(e){let t;return{c(){t=K("div")},m(n,i){U(n,t,i),e[11](t)},p:xt,i:xt,o:xt,d(n){n&&j(t),e[11](null)}}}function AUe(e,t,n){let{options:i}=t,{spec:r}=t,{view:s}=t,{signalListeners:a={}}=t,{data:o={}}=t;const l=gj();let u,c={},f={},d={},h={},p;na(()=>{m()});async function g(){m();try{n(6,u=await mUe(p,r,i)),n(1,s=u.view),JO(s,a)&&s.runAsync(),b(s)}catch(S){y(S)}}function m(){u&&(u.finalize(),n(6,u=void 0),n(1,s=void 0))}function y(S){l("onError",{error:S}),console.warn(S)}function b(S){v(),l("onNewView",{view:S})}async function v(){o&&Object.keys(o).length>0&&u!==void 0&&(n(1,s=u.view),_Ue(s,o),await s.resize().runAsync())}function _(S){be[S?"unshift":"push"](()=>{p=S,n(0,p)})}return e.$$set=S=>{"options"in S&&n(2,i=S.options),"spec"in S&&n(3,r=S.spec),"view"in S&&n(1,s=S.view),"signalListeners"in S&&n(4,a=S.signalListeners),"data"in S&&n(5,o=S.data)},e.$$.update=()=>{if(e.$$.dirty&1056&&(zb(o,h)||v(),n(10,h=o)),e.$$.dirty&991&&p!==void 0){if(!zb(i,c,vUe))g();else{const S=SUe(b9(r,i),b9(d,c)),E=a,w=f;if(S){if(S.isExpensive)g();else if(u!==void 0){const O=!zb(E,w);n(1,s=u.view),S.width!==!1&&s.width(S.width),S.height!==!1&&s.height(S.height),O&&(w&&y9(s,w),E&&JO(s,E)),s.runAsync()}}else!zb(E,w)&&u!==void 0&&(n(1,s=u.view),w&&y9(s,w),E&&JO(s,E),s.runAsync())}n(7,c=i),n(8,f=a),n(9,d=r)}},[p,s,i,r,a,o,u,c,f,d,h,_]}class OUe extends qe{constructor(t){super(),We(this,t,AUe,EUe,He,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function CUe(e){let t,n,i;function r(a){e[6](a)}let s={spec:e[1],data:e[2],signalListeners:e[3],options:e[4]};return e[0]!==void 0&&(s.view=e[0]),t=new OUe({props:s}),be.push(()=>In(t,"view",r)),t.$on("onNewView",e[7]),t.$on("onError",e[8]),{c(){ie(t.$$.fragment)},m(a,o){te(t,a,o),i=!0},p(a,[o]){const l={};o&2&&(l.spec=a[1]),o&4&&(l.data=a[2]),o&8&&(l.signalListeners=a[3]),o&16&&(l.options=a[4]),!n&&o&1&&(n=!0,l.view=a[0],Cn(()=>n=!1)),t.$set(l)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){P(t.$$.fragment,a),i=!1},d(a){ne(t,a)}}}const IUe="vega-lite";function xUe(e,t,n){let i,{spec:r}=t,{options:s={}}=t,{data:a={}}=t,{signalListeners:o={}}=t,{view:l=void 0}=t;function u(d){l=d,n(0,l)}function c(d){lo.call(this,e,d)}function f(d){lo.call(this,e,d)}return e.$$set=d=>{"spec"in d&&n(1,r=d.spec),"options"in d&&n(5,s=d.options),"data"in d&&n(2,a=d.data),"signalListeners"in d&&n(3,o=d.signalListeners),"view"in d&&n(0,l=d.view)},e.$$.update=()=>{e.$$.dirty&32&&n(4,i=Object.assign(Object.assign({},s),{mode:IUe}))},[l,r,a,o,i,s,u,c,f]}class TUe extends qe{constructor(t){super(),We(this,t,xUe,CUe,He,{spec:1,options:5,data:2,signalListeners:3,view:0})}}const v9={$schema:"https://vega.github.io/schema/vega-lite/v5.json",data:{name:"table"},view:{stroke:"transparent"},width:350,height:40,layer:[{params:[{name:"brush",select:{type:"interval",encodings:["x"]}}],mark:"bar",encoding:{x:{field:"data",bin:{maxbins:20},axis:{title:"",grid:!1,tickCount:2,labelColor:"rgba(0, 0, 0, 0.6)"}},y:{aggregate:"count",axis:{title:"",tickCount:2,labelColor:"rgba(0, 0, 0, 0.6)"}},color:{value:"#ddd"}}},{transform:[{filter:{param:"brush"}}],mark:{type:"bar",fill:"#9b51e0",opacity:.5},encoding:{x:{field:"data",bin:{maxbins:20}},y:{aggregate:"count"}}}]},_9={$schema:"https://vega.github.io/schema/vega-lite/v5.json",data:{name:"table"},view:{stroke:"transparent"},width:350,height:40,params:[{name:"highlight",select:{type:"point",on:"mouseover"}},{name:"select",select:{type:"point",encodings:["x"]}}],mark:{type:"bar",fill:"#9b51e0",opacity:.5},encoding:{x:{field:"data",type:"ordinal",axis:{title:"",grid:!1,tickCount:2,labelColor:"rgba(0, 0, 0, 0.6)"}},y:{aggregate:"count",axis:{title:"",tickCount:2,labelColor:"rgba(0, 0, 0, 0.6)"}},fillOpacity:{condition:{param:"select",value:1},value:.3},strokeWidth:{condition:[{param:"select",empty:!1,value:2},{param:"highlight",empty:!1,value:1}],value:0}}};function w9(e){let t,n,i,r,s=e[5].filter(`d => d["${e[1]}"] == 1`).count().object().count+"",a,o,l,u,c,f=e[5].filter(`d => d["${e[1]}"] == 0`).count().object().count+"",d,h;return i=new o_({props:{variant:"outlined",$$slots:{default:[MUe]},$$scope:{ctx:e}}}),i.$on("click",e[9]),u=new o_({props:{variant:"outlined",$$slots:{default:[RUe]},$$scope:{ctx:e}}}),u.$on("click",e[10]),{c(){t=K("div"),n=K("div"),ie(i.$$.fragment),r=ae(),a=ye(s),o=ae(),l=K("div"),ie(u.$$.fragment),c=ae(),d=ye(f),J(n,"class","binary-button svelte-16s3us9"),J(l,"class","binary-button svelte-16s3us9"),vn(t,"display","flex",!1)},m(p,g){U(p,t,g),G(t,n),te(i,n,null),G(n,r),G(n,a),G(t,o),G(t,l),te(u,l,null),G(l,c),G(l,d),h=!0},p(p,g){const m={};g&16384&&(m.$$scope={dirty:g,ctx:p}),i.$set(m),(!h||g&34)&&s!==(s=p[5].filter(`d => d["${p[1]}"] == 1`).count().object().count+"")&&et(a,s);const y={};g&16384&&(y.$$scope={dirty:g,ctx:p}),u.$set(y),(!h||g&34)&&f!==(f=p[5].filter(`d => d["${p[1]}"] == 0`).count().object().count+"")&&et(d,f)},i(p){h||(F(i.$$.fragment,p),F(u.$$.fragment,p),h=!0)},o(p){P(i.$$.fragment,p),P(u.$$.fragment,p),h=!1},d(p){p&&j(t),ne(i),ne(u)}}}function kUe(e){let t;return{c(){t=ye("Is")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function MUe(e){let t,n;return t=new X2({props:{$$slots:{default:[kUe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function DUe(e){let t;return{c(){t=ye("Is Not")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function RUe(e){let t,n;return t=new X2({props:{$$slots:{default:[DUe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function S9(e){let t,n=e[6]?e[6][1].toFixed(2)+" - ":"",i,r,s=(e[6]?e[6][2].toFixed(2):"")+"",a;return{c(){t=K("span"),i=ye(n),r=ae(),a=ye(s)},m(o,l){U(o,t,l),G(t,i),G(t,r),G(t,a)},p(o,l){l&64&&n!==(n=o[6]?o[6][1].toFixed(2)+" - ":"")&&et(i,n),l&64&&s!==(s=(o[6]?o[6][2].toFixed(2):"")+"")&&et(a,s)},d(o){o&&j(t)}}}function E9(e){let t,n,i=e[5].rollup({unique:`d => op.distinct(d["${e[1]}"])`}).object().unique+"",r;return{c(){t=K("span"),n=ye("unique values: "),r=ye(i),vn(t,"margin-right","5px",!1)},m(s,a){U(s,t,a),G(t,n),G(t,r)},p(s,a){a&34&&i!==(i=s[5].rollup({unique:`d => op.distinct(d["${s[1]}"])`}).object().unique+"")&&et(r,i)},d(s){s&&j(t)}}}function A9(e){let t,n,i,r,s,a;function o(u){e[11](u)}let l={spec:e[3]===e[2].Histogram?v9:_9,data:e[7],options:{tooltip:!0,actions:!1,theme:"vox"}};return e[4]!==void 0&&(l.view=e[4]),n=new TUe({props:l}),be.push(()=>In(n,"view",o)),{c(){t=K("div"),ie(n.$$.fragment),J(t,"id","histogram")},m(u,c){U(u,t,c),te(n,t,null),r=!0,s||(a=[Ke(t,"mouseup",e[8]),Ke(t,"mouseout",e[8]),Ke(t,"click",e[8]),Ke(t,"blur",e[8])],s=!0)},p(u,c){const f={};c&12&&(f.spec=u[3]===u[2].Histogram?v9:_9),c&128&&(f.data=u[7]),!i&&c&16&&(i=!0,f.view=u[4],Cn(()=>i=!1)),n.$set(f)},i(u){r||(F(n.$$.fragment,u),r=!0)},o(u){P(n.$$.fragment,u),r=!1},d(u){u&&j(t),ne(n),s=!1,pt(a)}}}function LUe(e){let t,n,i,r,s,a,o,l=e[5].column(e[1])&&e[3]===e[2].Other,u,c,f=e[3]===e[2].Binary&&w9(e),d=e[6]&&e[6][0]==="range"&&S9(e),h=l&&E9(e),p=e[7].table.length>0&&(e[3]===e[2].Histogram||e[3]===e[2].Count)&&A9(e);return{c(){t=K("div"),n=K("div"),i=K("span"),r=ye(e[0]),s=ae(),f&&f.c(),a=ae(),d&&d.c(),o=ae(),h&&h.c(),u=ae(),p&&p.c(),J(n,"id","info"),J(n,"class","svelte-16s3us9"),J(t,"class","cell svelte-16s3us9")},m(g,m){U(g,t,m),G(t,n),G(n,i),G(i,r),G(n,s),f&&f.m(n,null),G(n,a),d&&d.m(n,null),G(n,o),h&&h.m(n,null),G(t,u),p&&p.m(t,null),c=!0},p(g,[m]){(!c||m&1)&&et(r,g[0]),g[3]===g[2].Binary?f?(f.p(g,m),m&12&&F(f,1)):(f=w9(g),f.c(),F(f,1),f.m(n,a)):f&&(Be(),P(f,1,1,()=>{f=null}),je()),g[6]&&g[6][0]==="range"?d?d.p(g,m):(d=S9(g),d.c(),d.m(n,o)):d&&(d.d(1),d=null),m&46&&(l=g[5].column(g[1])&&g[3]===g[2].Other),l?h?h.p(g,m):(h=E9(g),h.c(),h.m(n,null)):h&&(h.d(1),h=null),g[7].table.length>0&&(g[3]===g[2].Histogram||g[3]===g[2].Count)?p?(p.p(g,m),m&140&&F(p,1)):(p=A9(g),p.c(),F(p,1),p.m(t,null)):p&&(Be(),P(p,1,1,()=>{p=null}),je())},i(g){c||(F(f),F(p),c=!0)},o(g){P(f),P(p),c=!1},d(g){g&&j(t),f&&f.d(),d&&d.d(),h&&h.d(),p&&p.d()}}}function NUe(e,t,n){let i;Qe(e,Bd,y=>n(5,i=y));let{name:r}=t,{col:s}=t;var a;(function(y){y[y.Count=0]="Count",y[y.Histogram=1]="Histogram",y[y.Binary=2]="Binary",y[y.Other=3]="Other"})(a||(a={}));let o,l,u,c,f={table:[]};function d(y){if((o===a.Count||o===a.Histogram)&&y.column(s)){let b=y.array(s);isNaN(Number(b[0]))||(b=b.map(v=>Number(v))),n(7,f={table:b})}}Bd.subscribe(y=>{if(y.column(s)){let b=isNaN(Number(y.column(s).get(0))),v=y.rollup({unique:`d => op.distinct(d["${s}"])`}).object().unique;if(!b&&v===2){let _=y.orderby(s).rollup({a:`d => op.array_agg_distinct(d["${s}"])`}).object().a;Number(_[0])===0&&Number(_[1])===1&&n(3,o=a.Binary)}else b?n(3,o=v>20?a.Other:a.Count):n(3,o=v<20?a.Count:a.Histogram)}}),Ad.subscribe(y=>{!y.has(s)&&c&&(c.getState().signals.brush_data&&(c.signal("brush",{}),c.signal("brush_data",{}),c.signal("brush_x",[]),c.runAsync()),c.getState().signals.select_tuple&&(c.signal("select",{}),c.signal("select_modify",void 0),c.signal("select_toggle",!1),c.signal("select_tuple",void 0),c.signal("highlight",{}),c.signal("highlight_modify",void 0),c.signal("highlight_toggle",!1),c.signal("highlight_tuple",void 0),c.runAsync()))});function h(){l!==u&&(u=l,Ad.update(y=>u?(y.set(s,{name:r,type:u[0],values:u.slice(1)}),y):(y.delete(s),y)))}const p=()=>{n(6,l=l&&l[1]==="is"?void 0:["binary","is"]),h()},g=()=>{n(6,l=l&&l[1]==="is not"?void 0:["binary","is not"]),h()};function m(y){c=y,n(4,c)}return e.$$set=y=>{"name"in y&&n(0,r=y.name),"col"in y&&n(1,s=y.col)},e.$$.update=()=>{e.$$.dirty&35&&d(i),e.$$.dirty&28&&c&&(o===a.Histogram?c.addSignalListener("brush",(...y)=>n(6,l=y[1].data?["range",...y[1].data]:void 0)):o===a.Count&&c.addSignalListener("select",(...y)=>n(6,l=y[1].data?["points",...y[1].data]:void 0)))},[r,s,a,o,c,i,l,f,h,p,g,m]}class yN extends qe{constructor(t){super(),We(this,t,NUe,LUe,He,{name:0,col:1})}}function FUe(e){const t=e-1;return t*t*t+1}function O9(e,{delay:t=0,duration:n=400,easing:i=FUe}={}){const r=getComputedStyle(e),s=+r.opacity,a=parseFloat(r.height),o=parseFloat(r.paddingTop),l=parseFloat(r.paddingBottom),u=parseFloat(r.marginTop),c=parseFloat(r.marginBottom),f=parseFloat(r.borderTopWidth),d=parseFloat(r.borderBottomWidth);return{delay:t,duration:n,easing:i,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*s};height: ${h*a}px;padding-top: ${h*o}px;padding-bottom: ${h*l}px;margin-top: ${h*u}px;margin-bottom: ${h*c}px;border-top-width: ${h*f}px;border-bottom-width: ${h*d}px;`}}function C9(e,t,n){const i=e.slice();return i[15]=t[n],i[17]=n,i}function PUe(e){let t,n;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",n=e[4]?wN:_N)},m(i,r){U(i,t,r)},p(i,r){r&16&&n!==(n=i[4]?wN:_N)&&J(t,"d",n)},d(i){i&&j(t)}}}function I9(e){let t,n=e[5].toFixed(2)+"",i;return{c(){t=K("span"),i=ye(n),vn(t,"margin-right","10px",!1)},m(r,s){U(r,t,s),G(t,i)},p(r,s){s&32&&n!==(n=r[5].toFixed(2)+"")&&et(i,n)},d(r){r&&j(t)}}}function BUe(e){let t;return{c(){t=ye("edit")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function jUe(e){let t;return{c(){t=ye("delete")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function x9(e){let t,n,i,r,s=e[6].predicates,a=[];for(let o=0;o<s.length;o+=1)a[o]=T9(C9(e,s,o));return{c(){t=K("div");for(let o=0;o<a.length;o+=1)a[o].c();J(t,"class","details svelte-pc4e1h")},m(o,l){U(o,t,l);for(let u=0;u<a.length;u+=1)a[u].m(t,null);r=!0},p(o,l){if(l&64){s=o[6].predicates;let u;for(u=0;u<s.length;u+=1){const c=C9(o,s,u);a[u]?a[u].p(c,l):(a[u]=T9(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},i(o){r||(Rp(()=>{i&&i.end(1),n=$te(t,O9,{}),n.start()}),r=!0)},o(o){n&&n.invalidate(),i=Hte(t,O9,{}),r=!1},d(o){o&&j(t),Rn(a,o),o&&i&&i.end()}}}function T9(e){let t,n,i=e[15].groupIndicator==="start"?"(":"",r,s,a=(e[17]===0?"":e[15].join)+"",o,l,u=e[15].name+"",c,f,d=e[15].operation+"",h,p,g=(isNaN(Number(e[15].value))?e[15].value:Number(e[15].value).toFixed(2))+"",m,y,b=e[15].groupIndicator==="end"?")":"",v,_;return{c(){t=K("div"),n=K("span"),r=ye(i),s=ae(),o=ye(a),l=ae(),c=ye(u),f=ae(),h=ye(d),p=ae(),m=ye(g),y=ae(),v=ye(b),_=ae(),J(t,"class","meta-chip svelte-pc4e1h")},m(S,E){U(S,t,E),G(t,n),G(n,r),G(n,s),G(n,o),G(n,l),G(n,c),G(n,f),G(n,h),G(n,p),G(n,m),G(n,y),G(n,v),G(t,_)},p(S,E){E&64&&i!==(i=S[15].groupIndicator==="start"?"(":"")&&et(r,i),E&64&&a!==(a=(S[17]===0?"":S[15].join)+"")&&et(o,a),E&64&&u!==(u=S[15].name+"")&&et(c,u),E&64&&d!==(d=S[15].operation+"")&&et(h,d),E&64&&g!==(g=(isNaN(Number(S[15].value))?S[15].value:Number(S[15].value).toFixed(2))+"")&&et(m,g),E&64&&b!==(b=S[15].groupIndicator==="end"?")":"")&&et(v,b)},d(S){S&&j(t)}}}function UUe(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g,m,y,b,v,_,S;a=new rl({props:{component:of,viewBox:"0 0 24 24",class:"material-icons",$$slots:{default:[PUe]},$$scope:{ctx:e}}}),a.$on("click",e[12]);let E=e[5]&&I9(e);p=new rl({props:{class:"material-icons",$$slots:{default:[BUe]},$$scope:{ctx:e}}}),p.$on("click",e[13]),m=new rl({props:{class:"material-icons",$$slots:{default:[jUe]},$$scope:{ctx:e}}}),m.$on("click",e[14]);let w=e[4]&&x9(e);return{c(){t=K("div"),n=K("div"),i=K("div"),r=K("div"),s=K("div"),ie(a.$$.fragment),o=ae(),l=K("div"),u=ye(e[0]),c=ae(),f=K("div"),E&&E.c(),d=ae(),h=K("div"),ie(p.$$.fragment),g=ae(),ie(m.$$.fragment),y=ae(),w&&w.c(),vn(s,"width","24px",!1),vn(s,"height","24px",!1),vn(s,"cursor","pointer",!1),vn(s,"margin-right","10px",!1),J(r,"class","group svelte-pc4e1h"),vn(r,"width","max-content",!1),vn(h,"cursor","pointer",!1),J(f,"class","group svelte-pc4e1h"),J(i,"class","group svelte-pc4e1h"),vn(i,"width","100%",!1),J(n,"class","group svelte-pc4e1h"),vn(n,"width","100%",!1),J(t,"class",b="cell parent "+(e[1]?"selected":"")+" svelte-pc4e1h")},m(O,D){U(O,t,D),G(t,n),G(n,i),G(i,r),G(r,s),te(a,s,null),G(r,o),G(r,l),G(l,u),G(i,c),G(i,f),E&&E.m(f,null),G(f,d),G(f,h),te(p,h,null),G(h,g),te(m,h,null),G(t,y),w&&w.m(t,null),v=!0,_||(S=[Ee(uo.call(null,t,{surface:!0,color:"primary"})),Ke(t,"click",function(){rt(e[2])&&e[2].apply(this,arguments)})],_=!0)},p(O,[D]){e=O;const x={};D&262160&&(x.$$scope={dirty:D,ctx:e}),a.$set(x),(!v||D&1)&&et(u,e[0]),e[5]?E?E.p(e,D):(E=I9(e),E.c(),E.m(f,d)):E&&(E.d(1),E=null);const A={};D&262144&&(A.$$scope={dirty:D,ctx:e}),p.$set(A);const C={};D&262144&&(C.$$scope={dirty:D,ctx:e}),m.$set(C),e[4]?w?(w.p(e,D),D&16&&F(w,1)):(w=x9(e),w.c(),F(w,1),w.m(t,null)):w&&(Be(),P(w,1,1,()=>{w=null}),je()),(!v||D&2&&b!==(b="cell parent "+(e[1]?"selected":"")+" svelte-pc4e1h"))&&J(t,"class",b)},i(O){v||(F(a.$$.fragment,O),F(p.$$.fragment,O),F(m.$$.fragment,O),F(w),v=!0)},o(O){P(a.$$.fragment,O),P(p.$$.fragment,O),P(m.$$.fragment,O),P(w),v=!1},d(O){O&&j(t),ne(a),E&&E.d(),ne(p),ne(m),w&&w.d(),_=!1,pt(S)}}}function zUe(e,t,n){let i,r,s,a,o,l;Qe(e,Su,b=>n(8,s=b)),Qe(e,Yp,b=>n(9,a=b)),Qe(e,ww,b=>n(10,o=b)),Qe(e,ml,b=>n(11,l=b));let{name:u}=t,{fullName:c=u}=t,{selected:f=!1}=t,{setSelected:d}=t,{editSlice:h}=t,p=!1;const g=b=>{b.stopPropagation(),n(4,p=!p)},m=b=>{b.stopPropagation(),h(i)},y=b=>{b.stopPropagation(),ml.update(v=>(v.delete(u),v)),fetch("/api/delete-slice/"+encodeURIComponent(u))};return e.$$set=b=>{"name"in b&&n(0,u=b.name),"fullName"in b&&n(7,c=b.fullName),"selected"in b&&n(1,f=b.selected),"setSelected"in b&&n(2,d=b.setSelected),"editSlice"in b&&n(3,h=b.editSlice)},e.$$.update=()=>{e.$$.dirty&2176&&n(6,i=l.get(c)),e.$$.dirty&1920&&n(5,r=o.get({slice:c,metric:a,model:s}))},[u,f,d,h,p,r,i,c,s,a,o,l,g,m,y]}class VUe extends qe{constructor(t){super(),We(this,t,zUe,UUe,He,{name:0,fullName:7,selected:1,setSelected:2,editSlice:3})}}function $Ue(e){const t=n=>{e&&!e.contains(n.target)&&!n.defaultPrevented&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function k9(e,t,n){const i=e.slice();return i[8]=t[n],i}function M9(e,t,n){const i=e.slice();return i[8]=t[n],i}function D9(e,t,n){const i=e.slice();return i[8]=t[n],i}function R9(e,t,n){const i=e.slice();return i[27]=t[n],i[29]=n,i}function HUe(e){let t;return{c(){t=ye("New Slice")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function L9(e){let t,n,i,r,s,a,o,l,u,c;function f(m){e[11](m)}function d(m){e[12](m)}function h(m){e[13](m)}function p(m){e[14](m)}let g={metadataSelections:e[4]};return e[0]!==void 0&&(g.newSlice=e[0]),e[2]!==void 0&&(g.predicates=e[2]),e[1]!==void 0&&(g.mode=e[1]),e[8]!==void 0&&(g.name=e[8]),n=new ume({props:g}),be.push(()=>In(n,"newSlice",f)),be.push(()=>In(n,"predicates",d)),be.push(()=>In(n,"mode",h)),be.push(()=>In(n,"name",p)),{c(){t=K("div"),ie(n.$$.fragment)},m(m,y){U(m,t,y),te(n,t,null),l=!0,u||(c=[Ee(o=$Ue.call(null,t)),Ke(t,"click_outside",e[15])],u=!0)},p(m,y){const b={};y&16&&(b.metadataSelections=m[4]),!i&&y&1&&(i=!0,b.newSlice=m[0],Cn(()=>i=!1)),!r&&y&4&&(r=!0,b.predicates=m[2],Cn(()=>r=!1)),!s&&y&2&&(s=!0,b.mode=m[1],Cn(()=>s=!1)),!a&&y&256&&(a=!0,b.name=m[8],Cn(()=>a=!1)),n.$set(b)},i(m){l||(F(n.$$.fragment,m),l=!0)},o(m){P(n.$$.fragment,m),l=!1},d(m){m&&j(t),ne(n),u=!1,pt(c)}}}function N9(e){let t,n;function i(){return e[16](e[27])}return t=new VUe({props:{name:e[27].name,fullName:e[27].name,editSlice:e[9],selected:e[6].includes(e[27].name),setSelected:i}}),{c(){ie(t.$$.fragment)},m(r,s){te(t,r,s),n=!0},p(r,s){e=r;const a={};s&32&&(a.name=e[27].name),s&32&&(a.fullName=e[27].name),s&96&&(a.selected=e[6].includes(e[27].name)),s&96&&(a.setSelected=i),t.$set(a)},i(r){n||(F(t.$$.fragment,r),n=!0)},o(r){P(t.$$.fragment,r),n=!1},d(r){ne(t,r)}}}function F9(e){let t,n;return t=new yN({props:{name:e[8],col:e[8]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8&&(s.name=i[8]),r&8&&(s.col=i[8]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function P9(e){let t,n;return t=new yN({props:{name:e[8].slice(8),col:e[8]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8&&(s.name=i[8].slice(8)),r&8&&(s.col=i[8]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function B9(e){let t,n,i=e[3].metadata.filter(e[17]),r=[];for(let a=0;a<i.length;a+=1)r[a]=j9(k9(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&136){i=a[3].metadata.filter(a[17]);let l;for(l=0;l<i.length;l+=1){const u=k9(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=j9(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function j9(e){let t,n;return t=new yN({props:{name:e[8].slice(10+e[7].length),col:e[8]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&136&&(s.name=i[8].slice(10+i[7].length)),r&136&&(s.col=i[8]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function WUe(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g,m,y,b;a=new o_({props:{variant:"outlined",$$slots:{default:[HUe]},$$scope:{ctx:e}}}),a.$on("click",e[10]);let v=e[0]&&L9(e),_=[...e[5].values()],S=[];for(let L=0;L<_.length;L+=1)S[L]=N9(R9(e,_,L));const E=L=>P(S[L],1,1,()=>{S[L]=null});let w=e[3].metadata.filter(U9),O=[];for(let L=0;L<w.length;L+=1)O[L]=F9(D9(e,w,L));const D=L=>P(O[L],1,1,()=>{O[L]=null});let x=e[3].metadata.filter(z9),A=[];for(let L=0;L<x.length;L+=1)A[L]=P9(M9(e,x,L));const C=L=>P(A[L],1,1,()=>{A[L]=null});let I=e[7]&&B9(e);return{c(){t=K("div"),n=K("div"),i=K("h4"),i.textContent="Slices",r=ae(),s=K("div"),ie(a.$$.fragment),o=ae(),v&&v.c(),l=ae();for(let L=0;L<S.length;L+=1)S[L].c();u=ae(),c=K("h4"),c.textContent="Metadata",f=ae();for(let L=0;L<O.length;L+=1)O[L].c();d=ae(),h=K("h4"),h.textContent="Distilled Metadata",p=ae();for(let L=0;L<A.length;L+=1)A[L].c();g=ae(),I&&I.c(),m=ae(),y=K("div"),J(i,"class","svelte-11msn18"),vn(s,"margin-right","28px",!1),J(n,"class","inline svelte-11msn18"),J(c,"class","svelte-11msn18"),J(h,"class","svelte-11msn18"),vn(y,"height","50px",!1),J(t,"class","side-container svelte-11msn18")},m(L,k){U(L,t,k),G(t,n),G(n,i),G(n,r),G(n,s),te(a,s,null),G(t,o),v&&v.m(t,null),G(t,l);for(let M=0;M<S.length;M+=1)S[M].m(t,null);G(t,u),G(t,c),G(t,f);for(let M=0;M<O.length;M+=1)O[M].m(t,null);G(t,d),G(t,h),G(t,p);for(let M=0;M<A.length;M+=1)A[M].m(t,null);G(t,g),I&&I.m(t,null),G(t,m),G(t,y),b=!0},p(L,[k]){const M={};if(k&1073741824&&(M.$$scope={dirty:k,ctx:L}),a.$set(M),L[0]?v?(v.p(L,k),k&1&&F(v,1)):(v=L9(L),v.c(),F(v,1),v.m(t,l)):v&&(Be(),P(v,1,1,()=>{v=null}),je()),k&608){_=[...L[5].values()];let N;for(N=0;N<_.length;N+=1){const R=R9(L,_,N);S[N]?(S[N].p(R,k),F(S[N],1)):(S[N]=N9(R),S[N].c(),F(S[N],1),S[N].m(t,u))}for(Be(),N=_.length;N<S.length;N+=1)E(N);je()}if(k&8){w=L[3].metadata.filter(U9);let N;for(N=0;N<w.length;N+=1){const R=D9(L,w,N);O[N]?(O[N].p(R,k),F(O[N],1)):(O[N]=F9(R),O[N].c(),F(O[N],1),O[N].m(t,d))}for(Be(),N=w.length;N<O.length;N+=1)D(N);je()}if(k&8){x=L[3].metadata.filter(z9);let N;for(N=0;N<x.length;N+=1){const R=M9(L,x,N);A[N]?(A[N].p(R,k),F(A[N],1)):(A[N]=P9(R),A[N].c(),F(A[N],1),A[N].m(t,g))}for(Be(),N=x.length;N<A.length;N+=1)C(N);je()}L[7]?I?(I.p(L,k),k&128&&F(I,1)):(I=B9(L),I.c(),F(I,1),I.m(t,m)):I&&(Be(),P(I,1,1,()=>{I=null}),je())},i(L){if(!b){F(a.$$.fragment,L),F(v);for(let k=0;k<_.length;k+=1)F(S[k]);for(let k=0;k<w.length;k+=1)F(O[k]);for(let k=0;k<x.length;k+=1)F(A[k]);F(I),b=!0}},o(L){P(a.$$.fragment,L),P(v),S=S.filter(Boolean);for(let k=0;k<S.length;k+=1)P(S[k]);O=O.filter(Boolean);for(let k=0;k<O.length;k+=1)P(O[k]);A=A.filter(Boolean);for(let k=0;k<A.length;k+=1)P(A[k]);P(I),b=!1},d(L){L&&j(t),ne(a),v&&v.d(),Rn(S,L),Rn(O,L),Rn(A,L),I&&I.d()}}}const U9=e=>!e.startsWith("zeno"),z9=e=>e.startsWith("zenopre");function qUe(e,t,n){let i,r,s,a,o,l,u;Qe(e,_o,O=>n(3,i=O)),Qe(e,Ad,O=>n(4,r=O)),Qe(e,ml,O=>n(5,s=O)),Qe(e,hd,O=>n(6,a=O)),Qe(e,Bd,O=>n(18,o=O)),Qe(e,_w,O=>n(19,l=O)),Qe(e,Su,O=>n(7,u=O));let c="",f=!1,d="create",h=[];Bd.subscribe(O=>p(O)),Ad.subscribe(()=>p(o)),hd.subscribe(()=>p(o));function p(O){if(!l||o.size===0)return;let D=O;a.forEach(x=>{let A=Sw(s.get(x).predicates);D=D.filter(`(d) => ${A}`)}),[...r.entries()].forEach(x=>{let[A,C]=x;C.type==="range"?D=D.filter(`(r) => r["${A}"] > ${C.values[0]} && r["${A}"] < ${C.values[1]}`):C.type==="binary"?C.values[0]==="is"?D=D.filter(`(r) => r["${A}"] == 1`):D=D.filter(`(r) => r["${A}"] == 0`):(typeof D.column(A).get(0)=="bigint"&&(C.values=C.values.map(I=>BigInt(I))),D=D.filter(_de(I=>xre.includes(C.values,I[A],0))))}),jd.set(D),Mk([{name:"",predicates:[],idxs:D.array(i.idColumn)}])}function g(O){n(2,h=O.predicates),n(8,c=O.name),n(1,d="edit"),n(0,f=!0)}const m=()=>{n(2,h=[]),n(8,c=""),n(0,f=!0)};function y(O){f=O,n(0,f)}function b(O){h=O,n(2,h)}function v(O){d=O,n(1,d)}function _(O){c=O,n(8,c)}return[f,d,h,i,r,s,a,u,c,g,m,y,b,v,_,()=>{n(1,d="create"),n(0,f=!1)},O=>{a.includes(O.name)?hd.update(D=>(D.splice(D.indexOf(O.name),1),[...D])):hd.update(D=>[...D,O.name])},O=>O.startsWith("zenopost_"+u+"_")]}class Ate extends qe{constructor(t){super(),We(this,t,qUe,WUe,He,{})}}function GUe(e){let t,n,i,r,s,a,o;const l=e[7].default,u=Ue(l,e,e[6],null);let c=[{class:i=xe({[e[1]]:!0,"mdc-chip__icon":!0,"mdc-chip__icon--trailing":!0})},e[4]],f={};for(let d=0;d<c.length;d+=1)f=Q(f,c[d]);return{c(){t=K("span"),n=K("i"),u&&u.c(),Se(n,f),J(t,"role","gridcell")},m(d,h){U(d,t,h),G(t,n),u&&u.m(n,null),e[8](t),s=!0,a||(o=[Ee(r=wt.call(null,t,e[0])),Ee(e[3].call(null,t))],a=!0)},p(d,[h]){u&&u.p&&(!s||h&64)&&Ve(u,l,d,d[6],s?ze(l,d[6],h,null):$e(d[6]),null),Se(n,f=Le(c,[(!s||h&2&&i!==(i=xe({[d[1]]:!0,"mdc-chip__icon":!0,"mdc-chip__icon--trailing":!0})))&&{class:i},h&16&&d[4]])),r&&rt(r.update)&&h&1&&r.update.call(null,d[0])},i(d){s||(F(u,d),s=!0)},o(d){P(u,d),s=!1},d(d){d&&j(t),u&&u.d(d),e[8](null),a=!1,pt(o)}}}function YUe(e,t,n){const i=["use","class","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,c;function f(){return c}function d(h){be[h?"unshift":"push"](()=>{c=h,n(2,c)})}return e.$$set=h=>{t=Q(Q({},t),vt(h)),n(4,r=Ce(t,i)),"use"in h&&n(0,l=h.use),"class"in h&&n(1,u=h.class),"$$scope"in h&&n(6,a=h.$$scope)},[l,u,c,o,r,f,a,s,d]}class XUe extends qe{constructor(t){super(),We(this,t,YUe,GUe,He,{use:0,class:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}const Ote=XUe;function V9(e,t,n){const i=e.slice();return i[9]=t[n][0],i[10]=t[n][1],i}function $9(e,t,n){const i=e.slice();return i[13]=t[n],i}function KUe(e){let t;return{c(){t=ye("cancel")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function H9(e){let t,n=e[13]+"",i,r,s,a;function o(){return e[6](e[13])}return s=new Ote({props:{class:"remove material-icons",$$slots:{default:[KUe]},$$scope:{ctx:e}}}),s.$on("click",o),{c(){t=K("div"),i=ye(n),r=ae(),ie(s.$$.fragment),J(t,"class","meta-chip svelte-1q2q5mi")},m(l,u){U(l,t,u),G(t,i),G(t,r),te(s,t,null),a=!0},p(l,u){e=l,(!a||u&2)&&n!==(n=e[13]+"")&&et(i,n);const c={};u&65536&&(c.$$scope={dirty:u,ctx:e}),s.$set(c)},i(l){a||(F(s.$$.fragment,l),a=!0)},o(l){P(s.$$.fragment,l),a=!1},d(l){l&&j(t),ne(s)}}}function JUe(e){let t=e[10].name+"",n,i,r="==",s,a,o=e[10].values.join(" | ")+"",l;return{c(){n=ye(t),i=ae(),s=ye(r),a=ae(),l=ye(o)},m(u,c){U(u,n,c),U(u,i,c),U(u,s,c),U(u,a,c),U(u,l,c)},p(u,c){c&4&&t!==(t=u[10].name+"")&&et(n,t),c&4&&o!==(o=u[10].values.join(" | ")+"")&&et(l,o)},d(u){u&&j(n),u&&j(i),u&&j(s),u&&j(a),u&&j(l)}}}function QUe(e){let t=e[10].values[0]+"",n,i,r=e[10].name+"",s;return{c(){n=ye(t),i=ae(),s=ye(r)},m(a,o){U(a,n,o),U(a,i,o),U(a,s,o)},p(a,o){o&4&&t!==(t=a[10].values[0]+"")&&et(n,t),o&4&&r!==(r=a[10].name+"")&&et(s,r)},d(a){a&&j(n),a&&j(i),a&&j(s)}}}function ZUe(e){let t=e[10].values[0].toFixed(2)+"",n,i,r="<",s,a,o=e[10].name+"",l,u,c="<",f,d,h=e[10].values[1].toFixed(2)+"",p;return{c(){n=ye(t),i=ae(),s=ye(r),a=ae(),l=ye(o),u=ae(),f=ye(c),d=ae(),p=ye(h)},m(g,m){U(g,n,m),U(g,i,m),U(g,s,m),U(g,a,m),U(g,l,m),U(g,u,m),U(g,f,m),U(g,d,m),U(g,p,m)},p(g,m){m&4&&t!==(t=g[10].values[0].toFixed(2)+"")&&et(n,t),m&4&&o!==(o=g[10].name+"")&&et(l,o),m&4&&h!==(h=g[10].values[1].toFixed(2)+"")&&et(p,h)},d(g){g&&j(n),g&&j(i),g&&j(s),g&&j(a),g&&j(l),g&&j(u),g&&j(f),g&&j(d),g&&j(p)}}}function eze(e){let t;return{c(){t=ye("cancel")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function W9(e){let t,n,i,r,s;function a(c,f){return c[10].type==="range"?ZUe:c[10].type==="binary"?QUe:JUe}let o=a(e),l=o(e);function u(){return e[7](e[9])}return r=new Ote({props:{class:"remove material-icons",$$slots:{default:[eze]},$$scope:{ctx:e}}}),r.$on("click",u),{c(){t=K("div"),n=K("span"),l.c(),i=ae(),ie(r.$$.fragment),J(t,"class","meta-chip svelte-1q2q5mi")},m(c,f){U(c,t,f),G(t,n),l.m(n,null),G(t,i),te(r,t,null),s=!0},p(c,f){e=c,o===(o=a(e))&&l?l.p(e,f):(l.d(1),l=o(e),l&&(l.c(),l.m(n,null)));const d={};f&65536&&(d.$$scope={dirty:f,ctx:e}),r.$set(d)},i(c){s||(F(r.$$.fragment,c),s=!0)},o(c){P(r.$$.fragment,c),s=!1},d(c){c&&j(t),l.d(),ne(r)}}}function q9(e){let t,n,i;return{c(){t=K("span"),t.textContent="clear all",J(t,"class","clear svelte-1q2q5mi")},m(r,s){U(r,t,s),n||(i=Ke(t,"click",e[8]),n=!0)},p:xt,d(r){r&&j(t),n=!1,i()}}}function tze(e){let t,n,i=(e[0]?e[0].toFixed(2):"")+"",r,s,a,o,l,u=e[1],c=[];for(let m=0;m<u.length;m+=1)c[m]=H9($9(e,u,m));const f=m=>P(c[m],1,1,()=>{c[m]=null});let d=[...e[2].entries()],h=[];for(let m=0;m<d.length;m+=1)h[m]=W9(V9(e,d,m));const p=m=>P(h[m],1,1,()=>{h[m]=null});let g=e[2].size+e[1].length>0&&q9(e);return{c(){t=K("div"),n=K("span"),r=ye(i),s=ae();for(let m=0;m<c.length;m+=1)c[m].c();a=ae();for(let m=0;m<h.length;m+=1)h[m].c();o=ae(),g&&g.c(),J(n,"id","metric"),J(n,"class","svelte-1q2q5mi"),J(t,"class","chips svelte-1q2q5mi")},m(m,y){U(m,t,y),G(t,n),G(n,r),G(t,s);for(let b=0;b<c.length;b+=1)c[b].m(t,null);G(t,a);for(let b=0;b<h.length;b+=1)h[b].m(t,null);G(t,o),g&&g.m(t,null),l=!0},p(m,[y]){if((!l||y&1)&&i!==(i=(m[0]?m[0].toFixed(2):"")+"")&&et(r,i),y&2){u=m[1];let b;for(b=0;b<u.length;b+=1){const v=$9(m,u,b);c[b]?(c[b].p(v,y),F(c[b],1)):(c[b]=H9(v),c[b].c(),F(c[b],1),c[b].m(t,a))}for(Be(),b=u.length;b<c.length;b+=1)f(b);je()}if(y&4){d=[...m[2].entries()];let b;for(b=0;b<d.length;b+=1){const v=V9(m,d,b);h[b]?(h[b].p(v,y),F(h[b],1)):(h[b]=W9(v),h[b].c(),F(h[b],1),h[b].m(t,o))}for(Be(),b=d.length;b<h.length;b+=1)p(b);je()}m[2].size+m[1].length>0?g?g.p(m,y):(g=q9(m),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(m){if(!l){for(let y=0;y<u.length;y+=1)F(c[y]);for(let y=0;y<d.length;y+=1)F(h[y]);l=!0}},o(m){c=c.filter(Boolean);for(let y=0;y<c.length;y+=1)P(c[y]);h=h.filter(Boolean);for(let y=0;y<h.length;y+=1)P(h[y]);l=!1},d(m){m&&j(t),Rn(c,m),Rn(h,m),g&&g.d()}}}function nze(e,t,n){let i,r,s,a,o,l;Qe(e,Su,d=>n(3,r=d)),Qe(e,Yp,d=>n(4,s=d)),Qe(e,ww,d=>n(5,a=d)),Qe(e,hd,d=>n(1,o=d)),Qe(e,Ad,d=>n(2,l=d));const u=d=>hd.update(h=>(h.splice(h.indexOf(d),1),h)),c=d=>Ad.update(h=>(h.delete(d),h)),f=()=>{Ad.set(new Map),hd.set([])};return e.$$.update=()=>{e.$$.dirty&56&&n(0,i=a.get({slice:"",metric:s,model:r}))},[i,o,l,r,s,a,u,c,f]}class Cte extends qe{constructor(t){super(),We(this,t,nze,tze,He,{})}}function ize(e){let t,n,i,r,s=e[0].size+"",a,o,l,u;return n=new Ate({}),l=new Cte({}),{c(){t=K("div"),ie(n.$$.fragment),i=ae(),r=K("p"),a=ye(s),o=ae(),ie(l.$$.fragment),J(t,"id","main"),J(t,"class","svelte-qg8pxb")},m(c,f){U(c,t,f),te(n,t,null),G(t,i),G(t,r),G(r,a),G(t,o),te(l,t,null),u=!0},p(c,[f]){(!u||f&1)&&s!==(s=c[0].size+"")&&et(a,s)},i(c){u||(F(n.$$.fragment,c),F(l.$$.fragment,c),u=!0)},o(c){P(n.$$.fragment,c),P(l.$$.fragment,c),u=!1},d(c){c&&j(t),ne(n),ne(l)}}}function rze(e,t,n){let i;return Qe(e,jd,r=>n(0,i=r)),jd.subscribe(r=>console.log(r)),[i]}class sze extends qe{constructor(t){super(),We(this,t,rze,ize,He,{})}}function G9(e,t,n){const i=e.slice();return i[6]=t[n],i}function Y9(e,t,n){const i=e.slice();return i[6]=t[n],i}function X9(e){let t,n,i;function r(a){e[4](a)}let s={label:"Model",style:"margin-right: 20px;",$$slots:{default:[oze]},$$scope:{ctx:e}};return e[1]!==void 0&&(s.value=e[1]),t=new Uc({props:s}),be.push(()=>In(t,"value",r)),{c(){ie(t.$$.fragment)},m(a,o){te(t,a,o),i=!0},p(a,o){const l={};o&2049&&(l.$$scope={dirty:o,ctx:a}),!n&&o&2&&(n=!0,l.value=a[1],Cn(()=>n=!1)),t.$set(l)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){P(t.$$.fragment,a),i=!1},d(a){ne(t,a)}}}function aze(e){let t=e[6]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&1&&t!==(t=i[6]+"")&&et(n,t)},d(i){i&&j(n)}}}function K9(e){let t,n;return t=new Za({props:{value:e[6],$$slots:{default:[aze]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&1&&(s.value=i[6]),r&2049&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function oze(e){let t,n,i=e[0],r=[];for(let a=0;a<i.length;a+=1)r[a]=K9(Y9(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&1){i=a[0];let l;for(l=0;l<i.length;l+=1){const u=Y9(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=K9(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function J9(e){let t,n,i;function r(a){e[5](a)}let s={label:"Metric",style:"margin-right: 20px;",$$slots:{default:[uze]},$$scope:{ctx:e}};return e[3]!==void 0&&(s.value=e[3]),t=new Uc({props:s}),be.push(()=>In(t,"value",r)),{c(){ie(t.$$.fragment)},m(a,o){te(t,a,o),i=!0},p(a,o){const l={};o&2052&&(l.$$scope={dirty:o,ctx:a}),!n&&o&8&&(n=!0,l.value=a[3],Cn(()=>n=!1)),t.$set(l)},i(a){i||(F(t.$$.fragment,a),i=!0)},o(a){P(t.$$.fragment,a),i=!1},d(a){ne(t,a)}}}function lze(e){let t=e[6]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&4&&t!==(t=i[6]+"")&&et(n,t)},d(i){i&&j(n)}}}function Q9(e){let t,n;return t=new Za({props:{value:e[6],$$slots:{default:[lze]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&4&&(s.value=i[6]),r&2052&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function uze(e){let t,n,i=e[2],r=[];for(let a=0;a<i.length;a+=1)r[a]=Q9(G9(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&4){i=a[2];let l;for(l=0;l<i.length;l+=1){const u=G9(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=Q9(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function cze(e){let t,n,i,r=e[0]&&X9(e),s=e[2]&&J9(e);return{c(){r&&r.c(),t=ae(),s&&s.c(),n=_t()},m(a,o){r&&r.m(a,o),U(a,t,o),s&&s.m(a,o),U(a,n,o),i=!0},p(a,[o]){a[0]?r?(r.p(a,o),o&1&&F(r,1)):(r=X9(a),r.c(),F(r,1),r.m(t.parentNode,t)):r&&(Be(),P(r,1,1,()=>{r=null}),je()),a[2]?s?(s.p(a,o),o&4&&F(s,1)):(s=J9(a),s.c(),F(s,1),s.m(n.parentNode,n)):s&&(Be(),P(s,1,1,()=>{s=null}),je())},i(a){i||(F(r),F(s),i=!0)},o(a){P(r),P(s),i=!1},d(a){r&&r.d(a),a&&j(t),s&&s.d(a),a&&j(n)}}}function fze(e,t,n){let i,r,s,a;Qe(e,vw,u=>n(0,i=u)),Qe(e,Su,u=>n(1,r=u)),Qe(e,kk,u=>n(2,s=u)),Qe(e,Yp,u=>n(3,a=u));function o(u){r=u,Su.set(r)}function l(u){a=u,Yp.set(a)}return[i,r,s,a,o,l]}class Ite extends qe{constructor(t){super(),We(this,t,fze,cze,He,{})}}function Z9(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function e7(e,t,n){const i=e.slice();return i[7]=t[n],i[9]=n,i}function t7(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p,g;i=new Ite({});function m(_){e[5](_)}let y={label:"Sort By",$$slots:{default:[hze]},$$scope:{ctx:e}};e[0]!==void 0&&(y.value=e[0]),o=new Uc({props:y}),be.push(()=>In(o,"value",m));function b(_){e[6](_)}let v={label:"Group By",$$slots:{default:[gze]},$$scope:{ctx:e}};return e[1]!==void 0&&(v.value=e[1]),f=new Uc({props:v}),be.push(()=>In(f,"value",b)),p=new Cte({}),{c(){t=K("div"),n=K("div"),ie(i.$$.fragment),r=ae(),s=K("div"),a=K("div"),ie(o.$$.fragment),u=ae(),c=K("div"),ie(f.$$.fragment),h=ae(),ie(p.$$.fragment),J(n,"class","options container svelte-1jkgfw8"),J(a,"class","select-div svelte-1jkgfw8"),J(c,"class","select-div svelte-1jkgfw8"),J(s,"id","selects"),J(s,"class","svelte-1jkgfw8"),J(t,"id","options-container"),J(t,"class","svelte-1jkgfw8")},m(_,S){U(_,t,S),G(t,n),te(i,n,null),G(t,r),G(t,s),G(s,a),te(o,a,null),G(s,u),G(s,c),te(f,c,null),U(_,h,S),te(p,_,S),g=!0},p(_,S){const E={};S&2072&&(E.$$scope={dirty:S,ctx:_}),!l&&S&1&&(l=!0,E.value=_[0],Cn(()=>l=!1)),o.$set(E);const w={};S&2072&&(w.$$scope={dirty:S,ctx:_}),!d&&S&2&&(d=!0,w.value=_[1],Cn(()=>d=!1)),f.$set(w)},i(_){g||(F(i.$$.fragment,_),F(o.$$.fragment,_),F(f.$$.fragment,_),F(p.$$.fragment,_),g=!0)},o(_){P(i.$$.fragment,_),P(o.$$.fragment,_),P(f.$$.fragment,_),P(p.$$.fragment,_),g=!1},d(_){_&&j(t),ne(i),ne(o),ne(f),_&&j(h),ne(p,_)}}}function dze(e){let t=e[4][e[9]]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&16&&t!==(t=i[4][i[9]]+"")&&et(n,t)},d(i){i&&j(n)}}}function n7(e){let t,n;return t=new Za({props:{value:e[7],$$slots:{default:[dze]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8&&(s.value=i[7]),r&2064&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function hze(e){let t,n,i=e[3],r=[];for(let a=0;a<i.length;a+=1)r[a]=n7(e7(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&24){i=a[3];let l;for(l=0;l<i.length;l+=1){const u=e7(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=n7(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function pze(e){let t=e[4][e[9]]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&16&&t!==(t=i[4][i[9]]+"")&&et(n,t)},d(i){i&&j(n)}}}function i7(e){let t,n;return t=new Za({props:{value:e[7],$$slots:{default:[pze]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8&&(s.value=i[7]),r&2064&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function gze(e){let t,n,i=e[3],r=[];for(let a=0;a<i.length;a+=1)r[a]=i7(Z9(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&24){i=a[3];let l;for(l=0;l<i.length;l+=1){const u=Z9(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=i7(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function mze(e){let t,n,i=e[2].size>0&&t7(e);return{c(){i&&i.c(),t=_t()},m(r,s){i&&i.m(r,s),U(r,t,s),n=!0},p(r,[s]){r[2].size>0?i?(i.p(r,s),s&4&&F(i,1)):(i=t7(r),i.c(),F(i,1),i.m(t.parentNode,t)):i&&(Be(),P(i,1,1,()=>{i=null}),je())},i(r){n||(F(i),n=!0)},o(r){P(i),n=!1},d(r){i&&i.d(r),r&&j(t)}}}function yze(e,t,n){let i,r,s;Qe(e,jd,c=>n(2,i=c)),Qe(e,r_,c=>n(3,r=c)),Qe(e,s_,c=>n(4,s=c));let a="",o="";function l(c){a=c,n(0,a)}function u(c){o=c,n(1,o)}return[a,o,i,r,s,l,u]}class bze extends qe{constructor(t){super(),We(this,t,yze,mze,He,{})}}/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _i={CELL:"mdc-data-table__cell",CELL_NUMERIC:"mdc-data-table__cell--numeric",CONTENT:"mdc-data-table__content",HEADER_CELL:"mdc-data-table__header-cell",HEADER_CELL_LABEL:"mdc-data-table__header-cell-label",HEADER_CELL_SORTED:"mdc-data-table__header-cell--sorted",HEADER_CELL_SORTED_DESCENDING:"mdc-data-table__header-cell--sorted-descending",HEADER_CELL_WITH_SORT:"mdc-data-table__header-cell--with-sort",HEADER_CELL_WRAPPER:"mdc-data-table__header-cell-wrapper",HEADER_ROW:"mdc-data-table__header-row",HEADER_ROW_CHECKBOX:"mdc-data-table__header-row-checkbox",IN_PROGRESS:"mdc-data-table--in-progress",LINEAR_PROGRESS:"mdc-data-table__linear-progress",PAGINATION_ROWS_PER_PAGE_LABEL:"mdc-data-table__pagination-rows-per-page-label",PAGINATION_ROWS_PER_PAGE_SELECT:"mdc-data-table__pagination-rows-per-page-select",PROGRESS_INDICATOR:"mdc-data-table__progress-indicator",ROOT:"mdc-data-table",ROW:"mdc-data-table__row",ROW_CHECKBOX:"mdc-data-table__row-checkbox",ROW_SELECTED:"mdc-data-table__row--selected",SORT_ICON_BUTTON:"mdc-data-table__sort-icon-button",SORT_STATUS_LABEL:"mdc-data-table__sort-status-label",TABLE_CONTAINER:"mdc-data-table__table-container"},r7={ARIA_SELECTED:"aria-selected",ARIA_SORT:"aria-sort"},vze={COLUMN_ID:"data-column-id",ROW_ID:"data-row-id"},Vb={CONTENT:"."+_i.CONTENT,HEADER_CELL:"."+_i.HEADER_CELL,HEADER_CELL_WITH_SORT:"."+_i.HEADER_CELL_WITH_SORT,HEADER_ROW:"."+_i.HEADER_ROW,HEADER_ROW_CHECKBOX:"."+_i.HEADER_ROW_CHECKBOX,PROGRESS_INDICATOR:"."+_i.PROGRESS_INDICATOR,ROW:"."+_i.ROW,ROW_CHECKBOX:"."+_i.ROW_CHECKBOX,ROW_SELECTED:"."+_i.ROW_SELECTED,SORT_ICON_BUTTON:"."+_i.SORT_ICON_BUTTON,SORT_STATUS_LABEL:"."+_i.SORT_STATUS_LABEL},Yf={ARIA_SELECTED:r7.ARIA_SELECTED,ARIA_SORT:r7.ARIA_SORT,DATA_ROW_ID_ATTR:vze.ROW_ID,HEADER_ROW_CHECKBOX_SELECTOR:Vb.HEADER_ROW_CHECKBOX,ROW_CHECKBOX_SELECTOR:Vb.ROW_CHECKBOX,ROW_SELECTED_SELECTOR:Vb.ROW_SELECTED,ROW_SELECTOR:Vb.ROW},Ps;(function(e){e.ASCENDING="ascending",e.DESCENDING="descending",e.NONE="none",e.OTHER="other"})(Ps||(Ps={}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _ze=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},addClassAtRowIndex:function(){},getAttributeByHeaderCellIndex:function(){return""},getHeaderCellCount:function(){return 0},getHeaderCellElements:function(){return[]},getRowCount:function(){return 0},getRowElements:function(){return[]},getRowIdAtIndex:function(){return""},getRowIndexByChildElement:function(){return 0},getSelectedRowCount:function(){return 0},getTableContainerHeight:function(){return 0},getTableHeaderHeight:function(){return 0},isCheckboxAtRowIndexChecked:function(){return!1},isHeaderRowCheckboxChecked:function(){return!1},isRowsSelectable:function(){return!1},notifyRowSelectionChanged:function(){},notifySelectedAll:function(){},notifySortAction:function(){},notifyUnselectedAll:function(){},notifyRowClick:function(){},registerHeaderRowCheckbox:function(){},registerRowCheckboxes:function(){},removeClass:function(){},removeClassAtRowIndex:function(){},removeClassNameByHeaderCellIndex:function(){},setAttributeAtRowIndex:function(){},setAttributeByHeaderCellIndex:function(){},setClassNameByHeaderCellIndex:function(){},setHeaderRowCheckboxChecked:function(){},setHeaderRowCheckboxIndeterminate:function(){},setProgressIndicatorStyles:function(){},setRowCheckboxCheckedAtIndex:function(){},setSortStatusLabelByHeaderCellIndex:function(){}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){this.adapter.isRowsSelectable()&&(this.adapter.registerHeaderRowCheckbox(),this.adapter.registerRowCheckboxes(),this.setHeaderRowCheckboxState())},t.prototype.layoutAsync=function(){return At(this,void 0,void 0,function(){return Yne(this,function(n){switch(n.label){case 0:return this.adapter.isRowsSelectable()?[4,this.adapter.registerHeaderRowCheckbox()]:[3,3];case 1:return n.sent(),[4,this.adapter.registerRowCheckboxes()];case 2:n.sent(),this.setHeaderRowCheckboxState(),n.label=3;case 3:return[2]}})})},t.prototype.getRows=function(){return this.adapter.getRowElements()},t.prototype.getHeaderCells=function(){return this.adapter.getHeaderCellElements()},t.prototype.setSelectedRowIds=function(n){for(var i=0;i<this.adapter.getRowCount();i++){var r=this.adapter.getRowIdAtIndex(i),s=!1;r&&n.indexOf(r)>=0&&(s=!0),this.adapter.setRowCheckboxCheckedAtIndex(i,s),this.selectRowAtIndex(i,s)}this.setHeaderRowCheckboxState()},t.prototype.getRowIds=function(){for(var n=[],i=0;i<this.adapter.getRowCount();i++)n.push(this.adapter.getRowIdAtIndex(i));return n},t.prototype.getSelectedRowIds=function(){for(var n=[],i=0;i<this.adapter.getRowCount();i++)this.adapter.isCheckboxAtRowIndexChecked(i)&&n.push(this.adapter.getRowIdAtIndex(i));return n},t.prototype.handleHeaderRowCheckboxChange=function(){for(var n=this.adapter.isHeaderRowCheckboxChecked(),i=0;i<this.adapter.getRowCount();i++)this.adapter.setRowCheckboxCheckedAtIndex(i,n),this.selectRowAtIndex(i,n);n?this.adapter.notifySelectedAll():this.adapter.notifyUnselectedAll()},t.prototype.handleRowCheckboxChange=function(n){var i=this.adapter.getRowIndexByChildElement(n.target);if(i!==-1){var r=this.adapter.isCheckboxAtRowIndexChecked(i);this.selectRowAtIndex(i,r),this.setHeaderRowCheckboxState();var s=this.adapter.getRowIdAtIndex(i);this.adapter.notifyRowSelectionChanged({rowId:s,rowIndex:i,selected:r})}},t.prototype.handleSortAction=function(n){for(var i=n.columnId,r=n.columnIndex,s=n.headerCell,a=0;a<this.adapter.getHeaderCellCount();a++)a!==r&&(this.adapter.removeClassNameByHeaderCellIndex(a,_i.HEADER_CELL_SORTED),this.adapter.removeClassNameByHeaderCellIndex(a,_i.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(a,Yf.ARIA_SORT,Ps.NONE),this.adapter.setSortStatusLabelByHeaderCellIndex(a,Ps.NONE));this.adapter.setClassNameByHeaderCellIndex(r,_i.HEADER_CELL_SORTED);var o=this.adapter.getAttributeByHeaderCellIndex(r,Yf.ARIA_SORT),l=Ps.NONE;o===Ps.ASCENDING?(this.adapter.setClassNameByHeaderCellIndex(r,_i.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(r,Yf.ARIA_SORT,Ps.DESCENDING),l=Ps.DESCENDING):o===Ps.DESCENDING?(this.adapter.removeClassNameByHeaderCellIndex(r,_i.HEADER_CELL_SORTED_DESCENDING),this.adapter.setAttributeByHeaderCellIndex(r,Yf.ARIA_SORT,Ps.ASCENDING),l=Ps.ASCENDING):(this.adapter.setAttributeByHeaderCellIndex(r,Yf.ARIA_SORT,Ps.ASCENDING),l=Ps.ASCENDING),this.adapter.setSortStatusLabelByHeaderCellIndex(r,l),this.adapter.notifySortAction({columnId:i,columnIndex:r,headerCell:s,sortValue:l})},t.prototype.handleRowClick=function(n){var i=n.rowId,r=n.row;this.adapter.notifyRowClick({rowId:i,row:r})},t.prototype.showProgress=function(){var n=this.adapter.getTableHeaderHeight(),i=this.adapter.getTableContainerHeight()-n,r=n;this.adapter.setProgressIndicatorStyles({height:i+"px",top:r+"px"}),this.adapter.addClass(_i.IN_PROGRESS)},t.prototype.hideProgress=function(){this.adapter.removeClass(_i.IN_PROGRESS)},t.prototype.setHeaderRowCheckboxState=function(){this.adapter.getSelectedRowCount()===0?(this.adapter.setHeaderRowCheckboxChecked(!1),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):this.adapter.getSelectedRowCount()===this.adapter.getRowCount()?(this.adapter.setHeaderRowCheckboxChecked(!0),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):(this.adapter.setHeaderRowCheckboxIndeterminate(!0),this.adapter.setHeaderRowCheckboxChecked(!1))},t.prototype.selectRowAtIndex=function(n,i){i?(this.adapter.addClassAtRowIndex(n,_i.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(n,Yf.ARIA_SELECTED,"true")):(this.adapter.removeClassAtRowIndex(n,_i.ROW_SELECTED),this.adapter.setAttributeAtRowIndex(n,Yf.ARIA_SELECTED,"false"))},t}(cr);const wze=e=>({}),s7=e=>({}),Sze=e=>({}),a7=e=>({});function o7(e){let t,n,i,r,s;const a=e[33].progress,o=Ue(a,e,e[32],a7);return{c(){t=K("div"),n=K("div"),i=ae(),o&&o.c(),J(n,"class","mdc-data-table__scrim"),J(t,"class","mdc-data-table__progress-indicator"),J(t,"style",r=Object.entries(e[13]).map(l7).join(" "))},m(l,u){U(l,t,u),G(t,n),G(t,i),o&&o.m(t,null),s=!0},p(l,u){o&&o.p&&(!s||u[1]&2)&&Ve(o,a,l,l[32],s?ze(a,l[32],u,Sze):$e(l[32]),a7),(!s||u[0]&8192&&r!==(r=Object.entries(l[13]).map(l7).join(" ")))&&J(t,"style",r)},i(l){s||(F(o,l),s=!0)},o(l){P(o,l),s=!1},d(l){l&&j(t),o&&o.d(l)}}}function Eze(e){let t,n,i,r,s,a,o,l,u,c,f,d,h,p;const g=e[33].default,m=Ue(g,e,e[32],null);let y=[{class:r=xe({[e[6]]:!0,"mdc-data-table__table":!0})},mt(e[22],"table$")],b={};for(let x=0;x<y.length;x+=1)b=Q(b,y[x]);let v=[{class:a=xe({[e[4]]:!0,"mdc-data-table__table-container":!0})},mt(e[22],"container$")],_={};for(let x=0;x<v.length;x+=1)_=Q(_,v[x]);let S=e[21].progress&&o7(e);const E=e[33].paginate,w=Ue(E,e,e[32],s7);let O=[{class:c=xe({[e[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":e[2],...e[12]})},ys(e[22],["container$","table$"])],D={};for(let x=0;x<O.length;x+=1)D=Q(D,O[x]);return{c(){t=K("div"),n=K("div"),i=K("table"),m&&m.c(),l=ae(),S&&S.c(),u=ae(),w&&w.c(),Se(i,b),Se(n,_),Se(t,D)},m(x,A){U(x,t,A),G(t,n),G(n,i),m&&m.m(i,null),e[34](n),G(t,l),S&&S.m(t,null),G(t,u),w&&w.m(t,null),e[35](t),d=!0,h||(p=[Ee(s=wt.call(null,i,e[5])),Ee(o=wt.call(null,n,e[3])),Ee(f=wt.call(null,t,e[0])),Ee(e[15].call(null,t)),Ke(t,"SMUICheckbox:mount",e[36]),Ke(t,"SMUIDataTableHeader:mount",e[37]),Ke(t,"SMUIDataTableHeader:unmount",e[38]),Ke(t,"SMUIDataTableBody:mount",e[39]),Ke(t,"SMUIDataTableBody:unmount",e[40]),Ke(t,"SMUIDataTableHeaderCheckbox:change",e[41]),Ke(t,"SMUIDataTableHeader:click",e[19]),Ke(t,"SMUIDataTableRow:click",e[20]),Ke(t,"SMUIDataTableBodyCheckbox:change",e[42])],h=!0)},p(x,A){m&&m.p&&(!d||A[1]&2)&&Ve(m,g,x,x[32],d?ze(g,x[32],A,null):$e(x[32]),null),Se(i,b=Le(y,[(!d||A[0]&64&&r!==(r=xe({[x[6]]:!0,"mdc-data-table__table":!0})))&&{class:r},A[0]&4194304&&mt(x[22],"table$")])),s&&rt(s.update)&&A[0]&32&&s.update.call(null,x[5]),Se(n,_=Le(v,[(!d||A[0]&16&&a!==(a=xe({[x[4]]:!0,"mdc-data-table__table-container":!0})))&&{class:a},A[0]&4194304&&mt(x[22],"container$")])),o&&rt(o.update)&&A[0]&8&&o.update.call(null,x[3]),x[21].progress?S?(S.p(x,A),A[0]&2097152&&F(S,1)):(S=o7(x),S.c(),F(S,1),S.m(t,u)):S&&(Be(),P(S,1,1,()=>{S=null}),je()),w&&w.p&&(!d||A[1]&2)&&Ve(w,E,x,x[32],d?ze(E,x[32],A,wze):$e(x[32]),s7),Se(t,D=Le(O,[(!d||A[0]&4102&&c!==(c=xe({[x[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":x[2],...x[12]})))&&{class:c},A[0]&4194304&&ys(x[22],["container$","table$"])])),f&&rt(f.update)&&A[0]&1&&f.update.call(null,x[0])},i(x){d||(F(m,x),F(S),F(w,x),d=!0)},o(x){P(m,x),P(S),P(w,x),d=!1},d(x){x&&j(t),m&&m.d(x),e[34](null),S&&S.d(),w&&w.d(x),e[35](null),h=!1,pt(p)}}}const l7=([e,t])=>`${e}: ${t};`;function Aze(e,t,n){const i=["use","class","stickyHeader","sortable","sort","sortDirection","sortAscendingAriaLabel","sortDescendingAriaLabel","container$use","container$class","table$use","table$class","layout","getElement"];let r=Ce(t,i),s,a,o,{$$slots:l={},$$scope:u}=t;const c=q2(l),{closest:f}=Y2,d=St(ft());let{use:h=[]}=t,{class:p=""}=t,{stickyHeader:g=!1}=t,{sortable:m=!1}=t,{sort:y=null}=t,{sortDirection:b="ascending"}=t,{sortAscendingAriaLabel:v="sorted, ascending"}=t,{sortDescendingAriaLabel:_="sorted, descending"}=t,{container$use:S=[]}=t,{container$class:E=""}=t,{table$use:w=[]}=t,{table$class:O=""}=t,D,x,A,C,I,L={},k={height:"auto",top:"initial"},M=Zt("SMUI:addLayoutListener"),N,R=!1,T=oi(!1);Qe(e,T,se=>n(31,s=se));let z=oi(y);Qe(e,z,se=>n(45,o=se));let Y=oi(b);Qe(e,Y,se=>n(44,a=se)),Tt("SMUI:checkbox:context","data-table"),Tt("SMUI:linear-progress:context","data-table"),Tt("SMUI:linear-progress:closed",T),Tt("SMUI:data-table:sortable",m),Tt("SMUI:data-table:sort",z),Tt("SMUI:data-table:sortDirection",Y),Tt("SMUI:data-table:sortAscendingAriaLabel",v),Tt("SMUI:data-table:sortDescendingAriaLabel",_),M&&(N=M(W));let H;Zn(()=>(n(7,x=new _ze({addClass:oe,removeClass:_e,getHeaderCellElements:()=>{var se;return(se=C?.cells.map(Ne=>Ne.element))!==null&&se!==void 0?se:[]},getHeaderCellCount:()=>{var se;return(se=C?.cells.length)!==null&&se!==void 0?se:0},getAttributeByHeaderCellIndex:(se,Ne)=>{var V;return(V=C?.orderedCells[se].getAttr(Ne))!==null&&V!==void 0?V:null},setAttributeByHeaderCellIndex:(se,Ne,V)=>{C?.orderedCells[se].addAttr(Ne,V)},setClassNameByHeaderCellIndex:(se,Ne)=>{C?.orderedCells[se].addClass(Ne)},removeClassNameByHeaderCellIndex:(se,Ne)=>{C?.orderedCells[se].removeClass(Ne)},notifySortAction:se=>{n(23,y=se.columnId),n(24,b=se.sortValue),yt(q(),"SMUIDataTable:sorted",se,void 0,!0)},getTableContainerHeight:()=>A.getBoundingClientRect().height,getTableHeaderHeight:()=>{const se=q().querySelector(".mdc-data-table__header-row");if(!se)throw new Error("MDCDataTable: Table header element not found.");return se.getBoundingClientRect().height},setProgressIndicatorStyles:se=>{n(13,k=se)},addClassAtRowIndex:(se,Ne)=>{I?.orderedRows[se].addClass(Ne)},getRowCount:()=>{var se;return(se=I?.rows.length)!==null&&se!==void 0?se:0},getRowElements:()=>{var se;return(se=I?.rows.map(Ne=>Ne.element))!==null&&se!==void 0?se:[]},getRowIdAtIndex:se=>{var Ne;return(Ne=I?.orderedRows[se].rowId)!==null&&Ne!==void 0?Ne:null},getRowIndexByChildElement:se=>{var Ne;return(Ne=I?.orderedRows.map(V=>V.element).indexOf(f(se,".mdc-data-table__row")))!==null&&Ne!==void 0?Ne:-1},getSelectedRowCount:()=>{var se;return(se=I?.rows.filter(Ne=>Ne.selected).length)!==null&&se!==void 0?se:0},isCheckboxAtRowIndexChecked:se=>{const Ne=I?.orderedRows[se].checkbox;return Ne?Ne.checked:!1},isHeaderRowCheckboxChecked:()=>{const se=C?.checkbox;return se?se.checked:!1},isRowsSelectable:()=>!!q().querySelector(".mdc-data-table__row-checkbox")||!!q().querySelector(".mdc-data-table__header-row-checkbox"),notifyRowSelectionChanged:se=>{const Ne=I?.orderedRows[se.rowIndex];Ne&&yt(q(),"SMUIDataTable:rowSelectionChanged",{row:Ne.element,rowId:Ne.rowId,rowIndex:se.rowIndex,selected:se.selected},void 0,!0)},notifySelectedAll:()=>{re(!1),yt(q(),"SMUIDataTable:selectedAll",void 0,void 0,!0)},notifyUnselectedAll:()=>{re(!1),yt(q(),"SMUIDataTable:unselectedAll",void 0,void 0,!0)},notifyRowClick:se=>{yt(q(),"SMUIDataTable:rowClick",se,void 0,!0)},registerHeaderRowCheckbox:()=>{},registerRowCheckboxes:()=>{},removeClassAtRowIndex:(se,Ne)=>{I?.orderedRows[se].removeClass(Ne)},setAttributeAtRowIndex:(se,Ne,V)=>{I?.orderedRows[se].addAttr(Ne,V)},setHeaderRowCheckboxChecked:se=>{const Ne=C?.checkbox;Ne&&(Ne.checked=se)},setHeaderRowCheckboxIndeterminate:re,setRowCheckboxCheckedAtIndex:(se,Ne)=>{const V=I?.orderedRows[se].checkbox;V&&(V.checked=Ne)},setSortStatusLabelByHeaderCellIndex:(se,Ne)=>{}})),x.init(),x.layout(),n(14,R=!0),()=>{x.destroy()})),na(()=>{N&&N()});function oe(se){L[se]||n(12,L[se]=!0,L)}function _e(se){(!(se in L)||L[se])&&n(12,L[se]=!1,L)}function re(se){const Ne=C?.checkbox;Ne&&(Ne.indeterminate=se)}function pe(se){if(!x||!se.detail.target)return;const Ne=f(se.detail.target,".mdc-data-table__header-cell--with-sort");Ne&&Re(Ne)}function Oe(se){if(!x||!se.detail.target)return;const Ne=f(se.detail.target,".mdc-data-table__row");Ne&&x&&x.handleRowClick({rowId:se.detail.rowId,row:Ne})}function Re(se){var Ne,V;const X=(Ne=C?.orderedCells)!==null&&Ne!==void 0?Ne:[],Ze=X.map(le=>le.element).indexOf(se);if(Ze===-1)return;const Ot=(V=X[Ze].columnId)!==null&&V!==void 0?V:null;x.handleSortAction({columnId:Ot,columnIndex:Ze,headerCell:se})}function W(){return x.layout()}function q(){return D}function ve(se){be[se?"unshift":"push"](()=>{A=se,n(9,A)})}function ce(se){be[se?"unshift":"push"](()=>{D=se,n(8,D)})}const fe=()=>x&&R&&x.layout(),we=se=>n(10,C=se.detail),Xe=()=>n(10,C=void 0),tt=se=>n(11,I=se.detail),ct=()=>n(11,I=void 0),yn=()=>x&&x.handleHeaderRowCheckboxChange(),Nt=se=>x&&x.handleRowCheckboxChange(se);return e.$$set=se=>{t=Q(Q({},t),vt(se)),n(22,r=Ce(t,i)),"use"in se&&n(0,h=se.use),"class"in se&&n(1,p=se.class),"stickyHeader"in se&&n(2,g=se.stickyHeader),"sortable"in se&&n(25,m=se.sortable),"sort"in se&&n(23,y=se.sort),"sortDirection"in se&&n(24,b=se.sortDirection),"sortAscendingAriaLabel"in se&&n(26,v=se.sortAscendingAriaLabel),"sortDescendingAriaLabel"in se&&n(27,_=se.sortDescendingAriaLabel),"container$use"in se&&n(3,S=se.container$use),"container$class"in se&&n(4,E=se.container$class),"table$use"in se&&n(5,w=se.table$use),"table$class"in se&&n(6,O=se.table$class),"$$scope"in se&&n(32,u=se.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&8388608&&yu(z,o=y,o),e.$$.dirty[0]&16777216&&yu(Y,a=b,a),e.$$.dirty[0]&1073741952|e.$$.dirty[1]&1&&c.progress&&x&&H!==s&&(n(30,H=s),s?x.hideProgress():x.showProgress())},[h,p,g,S,E,w,O,x,D,A,C,I,L,k,R,d,T,z,Y,pe,Oe,c,r,y,b,m,v,_,W,q,H,s,u,l,ve,ce,fe,we,Xe,tt,ct,yn,Nt]}class Oze extends qe{constructor(t){super(),We(this,t,Aze,Eze,He,{use:0,class:1,stickyHeader:2,sortable:25,sort:23,sortDirection:24,sortAscendingAriaLabel:26,sortDescendingAriaLabel:27,container$use:3,container$class:4,table$use:5,table$class:6,layout:28,getElement:29},null,[-1,-1])}get layout(){return this.$$.ctx[28]}get getElement(){return this.$$.ctx[29]}}function Cze(e){let t,n,i,r,s;const a=e[9].default,o=Ue(a,e,e[8],null);let l=[e[6]],u={};for(let c=0;c<l.length;c+=1)u=Q(u,l[c]);return{c(){t=K("thead"),o&&o.c(),Se(t,u)},m(c,f){U(c,t,f),o&&o.m(t,null),e[10](t),i=!0,r||(s=[Ee(n=wt.call(null,t,e[0])),Ee(e[3].call(null,t)),Ke(t,"SMUICheckbox:mount",e[11]),Ke(t,"SMUICheckbox:unmount",e[12]),Ke(t,"SMUIDataTableCell:mount",e[4]),Ke(t,"SMUIDataTableCell:unmount",e[5])],r=!0)},p(c,[f]){o&&o.p&&(!i||f&256)&&Ve(o,a,c,c[8],i?ze(a,c[8],f,null):$e(c[8]),null),Se(t,u=Le(l,[f&64&&c[6]])),n&&rt(n.update)&&f&1&&n.update.call(null,c[0])},i(c){i||(F(o,c),i=!0)},o(c){P(o,c),i=!1},d(c){c&&j(t),o&&o.d(c),e[10](null),r=!1,pt(s)}}}function Ize(e,t,n){const i=["use","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,u,c,f=[];const d=new WeakMap;Tt("SMUI:data-table:row:header",!0),Zn(()=>{const _={get cells(){return f},get orderedCells(){return g()},get checkbox(){return c}};return yt(m(),"SMUIDataTableHeader:mount",_),()=>{yt(m(),"SMUIDataTableHeader:unmount",_)}});function h(_){f.push(_.detail),d.set(_.detail.element,_.detail),_.stopPropagation()}function p(_){const S=f.indexOf(_.detail);S!==-1&&(f.splice(S,1),f=f),d.delete(_.detail.element),_.stopPropagation()}function g(){return[...m().querySelectorAll(".mdc-data-table__header-cell")].map(_=>d.get(_)).filter(_=>_&&_._smui_data_table_header_cell_accessor)}function m(){return u}function y(_){be[_?"unshift":"push"](()=>{u=_,n(1,u)})}const b=_=>n(2,c=_.detail),v=()=>n(2,c=void 0);return e.$$set=_=>{t=Q(Q({},t),vt(_)),n(6,r=Ce(t,i)),"use"in _&&n(0,l=_.use),"$$scope"in _&&n(8,a=_.$$scope)},[l,u,c,o,h,p,r,m,a,s,y,b,v]}class xze extends qe{constructor(t){super(),We(this,t,Ize,Cze,He,{use:0,getElement:7})}get getElement(){return this.$$.ctx[7]}}function Tze(e){let t,n,i,r,s,a;const o=e[9].default,l=Ue(o,e,e[8],null);let u=[{class:n=xe({[e[1]]:!0,"mdc-data-table__content":!0})},e[6]],c={};for(let f=0;f<u.length;f+=1)c=Q(c,u[f]);return{c(){t=K("tbody"),l&&l.c(),Se(t,c)},m(f,d){U(f,t,d),l&&l.m(t,null),e[10](t),r=!0,s||(a=[Ee(i=wt.call(null,t,e[0])),Ee(e[3].call(null,t)),Ke(t,"SMUIDataTableRow:mount",e[4]),Ke(t,"SMUIDataTableRow:unmount",e[5])],s=!0)},p(f,[d]){l&&l.p&&(!r||d&256)&&Ve(l,o,f,f[8],r?ze(o,f[8],d,null):$e(f[8]),null),Se(t,c=Le(u,[(!r||d&2&&n!==(n=xe({[f[1]]:!0,"mdc-data-table__content":!0})))&&{class:n},d&64&&f[6]])),i&&rt(i.update)&&d&1&&i.update.call(null,f[0])},i(f){r||(F(l,f),r=!0)},o(f){P(l,f),r=!1},d(f){f&&j(t),l&&l.d(f),e[10](null),s=!1,pt(a)}}}function kze(e,t,n){const i=["use","class","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,c,f=[];const d=new WeakMap;Tt("SMUI:data-table:row:header",!1),Zn(()=>{const b={get rows(){return f},get orderedRows(){return g()}};return yt(m(),"SMUIDataTableBody:mount",b),()=>{yt(m(),"SMUIDataTableBody:unmount",b)}});function h(b){f.push(b.detail),d.set(b.detail.element,b.detail),b.stopPropagation()}function p(b){const v=f.indexOf(b.detail);v!==-1&&(f.splice(v,1),f=f),d.delete(b.detail.element),b.stopPropagation()}function g(){return[...m().querySelectorAll(".mdc-data-table__row")].map(b=>d.get(b)).filter(b=>b&&b._smui_data_table_row_accessor)}function m(){return c}function y(b){be[b?"unshift":"push"](()=>{c=b,n(2,c)})}return e.$$set=b=>{t=Q(Q({},t),vt(b)),n(6,r=Ce(t,i)),"use"in b&&n(0,l=b.use),"class"in b&&n(1,u=b.class),"$$scope"in b&&n(8,a=b.$$scope)},[l,u,c,o,h,p,r,m,a,s,y]}class Mze extends qe{constructor(t){super(),We(this,t,kze,Tze,He,{use:0,class:1,getElement:7})}get getElement(){return this.$$.ctx[7]}}function Dze(e){let t,n,i,r,s,a,o;const l=e[14].default,u=Ue(l,e,e[13],null);let c=[{class:n=xe({[e[1]]:!0,"mdc-data-table__header-row":e[7],"mdc-data-table__row":!e[7],"mdc-data-table__row--selected":!e[7]&&e[3]&&e[3].checked,...e[4]})},{"aria-selected":i=e[3]?e[3].checked?"true":"false":void 0},e[5],e[10]],f={};for(let d=0;d<c.length;d+=1)f=Q(f,c[d]);return{c(){t=K("tr"),u&&u.c(),Se(t,f)},m(d,h){U(d,t,h),u&&u.m(t,null),e[15](t),s=!0,a||(o=[Ee(r=wt.call(null,t,e[0])),Ee(e[6].call(null,t)),Ke(t,"click",e[16]),Ke(t,"SMUICheckbox:mount",e[17]),Ke(t,"SMUICheckbox:unmount",e[18])],a=!0)},p(d,[h]){u&&u.p&&(!s||h&8192)&&Ve(u,l,d,d[13],s?ze(l,d[13],h,null):$e(d[13]),null),Se(t,f=Le(c,[(!s||h&26&&n!==(n=xe({[d[1]]:!0,"mdc-data-table__header-row":d[7],"mdc-data-table__row":!d[7],"mdc-data-table__row--selected":!d[7]&&d[3]&&d[3].checked,...d[4]})))&&{class:n},(!s||h&8&&i!==(i=d[3]?d[3].checked?"true":"false":void 0))&&{"aria-selected":i},h&32&&d[5],h&1024&&d[10]])),r&&rt(r.update)&&h&1&&r.update.call(null,d[0])},i(d){s||(F(u,d),s=!0)},o(d){P(u,d),s=!1},d(d){d&&j(t),u&&u.d(d),e[15](null),a=!1,pt(o)}}}let Rze=0;function Lze(e,t,n){const i=["use","class","rowId","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=St(ft());let{use:l=[]}=t,{class:u=""}=t,{rowId:c="SMUI-data-table-row-"+Rze++}=t,f,d,h={},p={},g=Zt("SMUI:data-table:row:header");Zn(()=>{const A=g?{_smui_data_table_row_accessor:!1,get element(){return E()},get checkbox(){return d},get rowId(){},get selected(){var C;return(C=d&&d.checked)!==null&&C!==void 0?C:!1},addClass:m,removeClass:y,getAttr:b,addAttr:v}:{_smui_data_table_row_accessor:!0,get element(){return E()},get checkbox(){return d},get rowId(){return c},get selected(){var C;return(C=d&&d.checked)!==null&&C!==void 0?C:!1},addClass:m,removeClass:y,getAttr:b,addAttr:v};return yt(E(),"SMUIDataTableRow:mount",A),()=>{yt(E(),"SMUIDataTableRow:unmount",A)}});function m(A){h[A]||n(4,h[A]=!0,h)}function y(A){(!(A in h)||h[A])&&n(4,h[A]=!1,h)}function b(A){var C;return A in p?(C=p[A])!==null&&C!==void 0?C:null:E().getAttribute(A)}function v(A,C){p[A]!==C&&n(5,p[A]=C,p)}function _(A){yt(E(),"SMUIDataTableHeader:click",A)}function S(A){yt(E(),"SMUIDataTableRow:click",{rowId:c,target:A.target})}function E(){return f}function w(A){be[A?"unshift":"push"](()=>{f=A,n(2,f)})}const O=A=>g?_(A):S(A),D=A=>n(3,d=A.detail),x=()=>n(3,d=void 0);return e.$$set=A=>{t=Q(Q({},t),vt(A)),n(10,r=Ce(t,i)),"use"in A&&n(0,l=A.use),"class"in A&&n(1,u=A.class),"rowId"in A&&n(11,c=A.rowId),"$$scope"in A&&n(13,a=A.$$scope)},[l,u,f,d,h,p,o,g,_,S,r,c,E,a,s,w,O,D,x]}class Nze extends qe{constructor(t){super(),We(this,t,Lze,Dze,He,{use:0,class:1,rowId:11,getElement:12})}get getElement(){return this.$$.ctx[12]}}function Fze(e){let t,n,i,r,s,a;const o=e[22].default,l=Ue(o,e,e[21],null);let u=[{class:n=xe({[e[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":e[2],"mdc-data-table__cell--checkbox":e[3],...e[7]})},e[8],e[19]],c={};for(let f=0;f<u.length;f+=1)c=Q(c,u[f]);return{c(){t=K("td"),l&&l.c(),Se(t,c)},m(f,d){U(f,t,d),l&&l.m(t,null),e[25](t),r=!0,s||(a=[Ee(i=wt.call(null,t,e[0])),Ee(e[11].call(null,t)),Ke(t,"change",e[26])],s=!0)},p(f,d){l&&l.p&&(!r||d&2097152)&&Ve(l,o,f,f[21],r?ze(o,f[21],d,null):$e(f[21]),null),Se(t,c=Le(u,[(!r||d&142&&n!==(n=xe({[f[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":f[2],"mdc-data-table__cell--checkbox":f[3],...f[7]})))&&{class:n},d&256&&f[8],d&524288&&f[19]])),i&&rt(i.update)&&d&1&&i.update.call(null,f[0])},i(f){r||(F(l,f),r=!0)},o(f){P(l,f),r=!1},d(f){f&&j(t),l&&l.d(f),e[25](null),s=!1,pt(a)}}}function Pze(e){let t,n,i,r,s,a,o,l,u;const c=[jze,Bze],f=[];function d(g,m){return g[5]?0:1}n=d(e),i=f[n]=c[n](e);let h=[{class:r=xe({[e[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":e[2],"mdc-data-table__header-cell--checkbox":e[3],"mdc-data-table__header-cell--with-sort":e[5],"mdc-data-table__header-cell--sorted":e[5]&&e[9]===e[4],...e[7]})},{role:"columnheader"},{scope:"col"},{"data-column-id":e[4]},{"aria-sort":s=e[5]?e[9]===e[4]?e[10]:"none":void 0},e[8],e[19]],p={};for(let g=0;g<h.length;g+=1)p=Q(p,h[g]);return{c(){t=K("th"),i.c(),Se(t,p)},m(g,m){U(g,t,m),f[n].m(t,null),e[23](t),o=!0,l||(u=[Ee(a=wt.call(null,t,e[0])),Ee(e[11].call(null,t)),Ke(t,"change",e[24])],l=!0)},p(g,m){let y=n;n=d(g),n===y?f[n].p(g,m):(Be(),P(f[y],1,1,()=>{f[y]=null}),je(),i=f[n],i?i.p(g,m):(i=f[n]=c[n](g),i.c()),F(i,1),i.m(t,null)),Se(t,p=Le(h,[(!o||m&702&&r!==(r=xe({[g[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":g[2],"mdc-data-table__header-cell--checkbox":g[3],"mdc-data-table__header-cell--with-sort":g[5],"mdc-data-table__header-cell--sorted":g[5]&&g[9]===g[4],...g[7]})))&&{class:r},{role:"columnheader"},{scope:"col"},(!o||m&16)&&{"data-column-id":g[4]},(!o||m&1584&&s!==(s=g[5]?g[9]===g[4]?g[10]:"none":void 0))&&{"aria-sort":s},m&256&&g[8],m&524288&&g[19]])),a&&rt(a.update)&&m&1&&a.update.call(null,g[0])},i(g){o||(F(i),o=!0)},o(g){P(i),o=!1},d(g){g&&j(t),f[n].d(),e[23](null),l=!1,pt(u)}}}function Bze(e){let t;const n=e[22].default,i=Ue(n,e,e[21],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s&2097152)&&Ve(i,n,r,r[21],t?ze(n,r[21],s,null):$e(r[21]),null)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function jze(e){let t,n,i,r=(e[9]===e[4]?e[10]==="ascending"?e[15]:e[16]:"")+"",s,a,o;const l=e[22].default,u=Ue(l,e,e[21],null);return{c(){t=K("div"),u&&u.c(),n=ae(),i=K("div"),s=ye(r),J(i,"class","mdc-data-table__sort-status-label"),J(i,"aria-hidden","true"),J(i,"id",a=e[4]+"-status-label"),J(t,"class","mdc-data-table__header-cell-wrapper")},m(c,f){U(c,t,f),u&&u.m(t,null),G(t,n),G(t,i),G(i,s),o=!0},p(c,f){u&&u.p&&(!o||f&2097152)&&Ve(u,l,c,c[21],o?ze(l,c[21],f,null):$e(c[21]),null),(!o||f&1552)&&r!==(r=(c[9]===c[4]?c[10]==="ascending"?c[15]:c[16]:"")+"")&&et(s,r),(!o||f&16&&a!==(a=c[4]+"-status-label"))&&J(i,"id",a)},i(c){o||(F(u,c),o=!0)},o(c){P(u,c),o=!1},d(c){c&&j(t),u&&u.d(c)}}}function Uze(e){let t,n,i,r;const s=[Pze,Fze],a=[];function o(l,u){return l[12]?0:1}return t=o(e),n=a[t]=s[t](e),{c(){n.c(),i=_t()},m(l,u){a[t].m(l,u),U(l,i,u),r=!0},p(l,[u]){n.p(l,u)},i(l){r||(F(n),r=!0)},o(l){P(n),r=!1},d(l){a[t].d(l),l&&j(i)}}}let zze=0;function Vze(e,t,n){const i=["use","class","numeric","checkbox","columnId","sortable","getElement"];let r=Ce(t,i),s,a,{$$slots:o={},$$scope:l}=t;const u=St(ft());let c=Zt("SMUI:data-table:row:header"),{use:f=[]}=t,{class:d=""}=t,{numeric:h=!1}=t,{checkbox:p=!1}=t,{columnId:g=c?"SMUI-data-table-column-"+zze++:"SMUI-data-table-unused"}=t,{sortable:m=Zt("SMUI:data-table:sortable")}=t,y,b={},v={},_=Zt("SMUI:data-table:sort");Qe(e,_,T=>n(9,s=T));let S=Zt("SMUI:data-table:sortDirection");Qe(e,S,T=>n(10,a=T));let E=Zt("SMUI:data-table:sortAscendingAriaLabel"),w=Zt("SMUI:data-table:sortDescendingAriaLabel");m&&(Tt("SMUI:label:context","data-table:sortable-header-cell"),Tt("SMUI:icon-button:context","data-table:sortable-header-cell"),Tt("SMUI:icon-button:aria-describedby",g+"-status-label")),Zn(()=>{const T=c?{_smui_data_table_header_cell_accessor:!0,get element(){return L()},get columnId(){return g},addClass:O,removeClass:D,getAttr:x,addAttr:A}:{_smui_data_table_header_cell_accessor:!1,get element(){return L()},get columnId(){},addClass:O,removeClass:D,getAttr:x,addAttr:A};return yt(L(),"SMUIDataTableCell:mount",T),()=>{yt(L(),"SMUIDataTableCell:unmount",T)}});function O(T){b[T]||n(7,b[T]=!0,b)}function D(T){(!(T in b)||b[T])&&n(7,b[T]=!1,b)}function x(T){var z;return T in v?(z=v[T])!==null&&z!==void 0?z:null:L().getAttribute(T)}function A(T,z){v[T]!==z&&n(8,v[T]=z,v)}function C(T){yt(L(),"SMUIDataTableHeaderCheckbox:change",T)}function I(T){yt(L(),"SMUIDataTableBodyCheckbox:change",T)}function L(){return y}function k(T){be[T?"unshift":"push"](()=>{y=T,n(6,y)})}const M=T=>p&&C(T);function N(T){be[T?"unshift":"push"](()=>{y=T,n(6,y)})}const R=T=>p&&I(T);return e.$$set=T=>{t=Q(Q({},t),vt(T)),n(19,r=Ce(t,i)),"use"in T&&n(0,f=T.use),"class"in T&&n(1,d=T.class),"numeric"in T&&n(2,h=T.numeric),"checkbox"in T&&n(3,p=T.checkbox),"columnId"in T&&n(4,g=T.columnId),"sortable"in T&&n(5,m=T.sortable),"$$scope"in T&&n(21,l=T.$$scope)},[f,d,h,p,g,m,y,b,v,s,a,u,c,_,S,E,w,C,I,r,L,l,o,k,M,N,R]}class $ze extends qe{constructor(t){super(),We(this,t,Vze,Uze,He,{use:0,class:1,numeric:2,checkbox:3,columnId:4,sortable:5,getElement:20})}get getElement(){return this.$$.ctx[20]}}const Hze=e=>({}),u7=e=>({}),Wze=e=>({}),c7=e=>({});function f7(e){let t,n;const i=e[10].rowsPerPage,r=Ue(i,e,e[9],c7);return{c(){t=K("div"),r&&r.c(),J(t,"class","mdc-data-table__pagination-rows-per-page")},m(s,a){U(s,t,a),r&&r.m(t,null),n=!0},p(s,a){r&&r.p&&(!n||a&512)&&Ve(r,i,s,s[9],n?ze(i,s[9],a,Wze):$e(s[9]),c7)},i(s){n||(F(r,s),n=!0)},o(s){P(r,s),n=!1},d(s){s&&j(t),r&&r.d(s)}}}function d7(e){let t,n;const i=e[10].total,r=Ue(i,e,e[9],u7);return{c(){t=K("div"),r&&r.c(),J(t,"class","mdc-data-table__pagination-total")},m(s,a){U(s,t,a),r&&r.m(t,null),n=!0},p(s,a){r&&r.p&&(!n||a&512)&&Ve(r,i,s,s[9],n?ze(i,s[9],a,Hze):$e(s[9]),u7)},i(s){n||(F(r,s),n=!0)},o(s){P(r,s),n=!1},d(s){s&&j(t),r&&r.d(s)}}}function qze(e){let t,n,i,r,s,a,o,l,u,c,f,d,h=e[7].rowsPerPage&&f7(e),p=e[7].total&&d7(e);const g=e[10].default,m=Ue(g,e,e[9],null);let y=[{class:a=xe({[e[3]]:!0,"mdc-data-table__pagination-trailing":!0})},mt(e[6],"trailing$")],b={};for(let S=0;S<y.length;S+=1)b=Q(b,y[S]);let v=[{class:l=xe({[e[1]]:!0,"mdc-data-table__pagination":!0})},ys(e[6],["trailing$"])],_={};for(let S=0;S<v.length;S+=1)_=Q(_,v[S]);return{c(){t=K("div"),n=K("div"),h&&h.c(),i=ae(),r=K("div"),p&&p.c(),s=ae(),m&&m.c(),J(r,"class","mdc-data-table__pagination-navigation"),Se(n,b),Se(t,_)},m(S,E){U(S,t,E),G(t,n),h&&h.m(n,null),G(n,i),G(n,r),p&&p.m(r,null),G(r,s),m&&m.m(r,null),e[11](t),c=!0,f||(d=[Ee(o=wt.call(null,n,e[2])),Ee(u=wt.call(null,t,e[0])),Ee(e[5].call(null,t))],f=!0)},p(S,[E]){S[7].rowsPerPage?h?(h.p(S,E),E&128&&F(h,1)):(h=f7(S),h.c(),F(h,1),h.m(n,i)):h&&(Be(),P(h,1,1,()=>{h=null}),je()),S[7].total?p?(p.p(S,E),E&128&&F(p,1)):(p=d7(S),p.c(),F(p,1),p.m(r,s)):p&&(Be(),P(p,1,1,()=>{p=null}),je()),m&&m.p&&(!c||E&512)&&Ve(m,g,S,S[9],c?ze(g,S[9],E,null):$e(S[9]),null),Se(n,b=Le(y,[(!c||E&8&&a!==(a=xe({[S[3]]:!0,"mdc-data-table__pagination-trailing":!0})))&&{class:a},E&64&&mt(S[6],"trailing$")])),o&&rt(o.update)&&E&4&&o.update.call(null,S[2]),Se(t,_=Le(v,[(!c||E&2&&l!==(l=xe({[S[1]]:!0,"mdc-data-table__pagination":!0})))&&{class:l},E&64&&ys(S[6],["trailing$"])])),u&&rt(u.update)&&E&1&&u.update.call(null,S[0])},i(S){c||(F(h),F(p),F(m,S),c=!0)},o(S){P(h),P(p),P(m,S),c=!1},d(S){S&&j(t),h&&h.d(),p&&p.d(),m&&m.d(S),e[11](null),f=!1,pt(d)}}}function Gze(e,t,n){const i=["use","class","trailing$use","trailing$class","getElement"];let r=Ce(t,i),{$$slots:s={},$$scope:a}=t;const o=q2(s),l=St(ft());let{use:u=[]}=t,{class:c=""}=t,{trailing$use:f=[]}=t,{trailing$class:d=""}=t,h;Tt("SMUI:label:context","data-table:pagination"),Tt("SMUI:select:context","data-table:pagination"),Tt("SMUI:icon-button:context","data-table:pagination");function p(){return h}function g(m){be[m?"unshift":"push"](()=>{h=m,n(4,h)})}return e.$$set=m=>{t=Q(Q({},t),vt(m)),n(6,r=Ce(t,i)),"use"in m&&n(0,u=m.use),"class"in m&&n(1,c=m.class),"trailing$use"in m&&n(2,f=m.trailing$use),"trailing$class"in m&&n(3,d=m.trailing$class),"$$scope"in m&&n(9,a=m.$$scope)},[u,c,f,d,h,l,r,o,p,a,s,g]}class Yze extends qe{constructor(t){super(),We(this,t,Gze,qze,He,{use:0,class:1,trailing$use:2,trailing$class:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}const Xze=xze,Kze=Mze,xte=Nze,AE=$ze,Jze=Yze;var Tte={exports:{}};/*!
 * wavesurfer.js 6.2.0 (2022-05-16)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(e,t){(function(i,r){e.exports=r()})(self,()=>(()=>{var n={"./src/drawer.canvasentry.js":(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=f(l("./src/util/style.js")),c=f(l("./src/util/get-id.js"));function f(m){return m&&m.__esModule?m:{default:m}}function d(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function h(m,y){for(var b=0;b<y.length;b++){var v=y[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}function p(m,y,b){return y&&h(m.prototype,y),b&&h(m,b),Object.defineProperty(m,"prototype",{writable:!1}),m}var g=function(){function m(){d(this,m),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,c.default)(typeof this.constructor.name<"u"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return p(m,[{key:"initWave",value:function(b){this.wave=b,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(b){this.progress=b,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(b,v,_,S){this.start=this.wave.offsetLeft/v||0,this.end=this.start+b/v,this.wave.width=_,this.wave.height=S;var E={width:b+"px"};(0,u.default)(this.wave,E),this.hasProgressCanvas&&(this.progress.width=_,this.progress.height=S,(0,u.default)(this.progress,E))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(b,v){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,b),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,v))}},{key:"getFillStyle",value:function(b,v){if(typeof v=="string"||v instanceof CanvasGradient)return v;var _=b.createLinearGradient(0,0,0,b.canvas.height);return v.forEach(function(S,E){return _.addColorStop(E/v.length,S)}),_}},{key:"applyCanvasTransforms",value:function(b){b&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(b,v,_,S,E){this.fillRectToContext(this.waveCtx,b,v,_,S,E),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,b,v,_,S,E)}},{key:"fillRectToContext",value:function(b,v,_,S,E,w){!b||(w?this.drawRoundedRect(b,v,_,S,E,w):b.fillRect(v,_,S,E))}},{key:"drawRoundedRect",value:function(b,v,_,S,E,w){E!==0&&(E<0&&(E*=-1,_-=E),b.beginPath(),b.moveTo(v+w,_),b.lineTo(v+S-w,_),b.quadraticCurveTo(v+S,_,v+S,_+w),b.lineTo(v+S,_+E-w),b.quadraticCurveTo(v+S,_+E,v+S-w,_+E),b.lineTo(v+w,_+E),b.quadraticCurveTo(v,_+E,v,_+E-w),b.lineTo(v,_+w),b.quadraticCurveTo(v,_,v+w,_),b.closePath(),b.fill())}},{key:"drawLines",value:function(b,v,_,S,E,w){this.drawLineToContext(this.waveCtx,b,v,_,S,E,w),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,b,v,_,S,E,w)}},{key:"drawLineToContext",value:function(b,v,_,S,E,w,O){if(!!b){var D=v.length/2,x=Math.round(D*this.start),A=Math.round(D*this.end)+1,C=x,I=A,L=this.wave.width/(I-C-1),k=S+E,M=_/S;b.beginPath(),b.moveTo((C-x)*L,k),b.lineTo((C-x)*L,k-Math.round((v[2*C]||0)/M));var N,R,T;for(N=C;N<I;N++)R=v[2*N]||0,T=Math.round(R/M),b.lineTo((N-x)*L+this.halfPixel,k-T);var z=I-1;for(z;z>=C;z--)R=v[2*z+1]||0,T=Math.round(R/M),b.lineTo((z-x)*L+this.halfPixel,k-T);b.lineTo((C-x)*L,k-Math.round((v[2*C+1]||0)/M)),b.closePath(),b.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(b,v,_){var S=this;if(_==="blob")return new Promise(function(E){S.wave.toBlob(E,b,v)});if(_==="dataURL")return this.wave.toDataURL(b,v)}}]),m}();o.default=g,a.exports=o.default},"./src/drawer.js":(a,o,l)=>{function u(O){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},u(O)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=d(l("./src/util/index.js"));function f(O){if(typeof WeakMap!="function")return null;var D=new WeakMap,x=new WeakMap;return(f=function(C){return C?x:D})(O)}function d(O,D){if(!D&&O&&O.__esModule)return O;if(O===null||u(O)!=="object"&&typeof O!="function")return{default:O};var x=f(D);if(x&&x.has(O))return x.get(O);var A={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in O)if(I!=="default"&&Object.prototype.hasOwnProperty.call(O,I)){var L=C?Object.getOwnPropertyDescriptor(O,I):null;L&&(L.get||L.set)?Object.defineProperty(A,I,L):A[I]=O[I]}return A.default=O,x&&x.set(O,A),A}function h(O,D){if(!(O instanceof D))throw new TypeError("Cannot call a class as a function")}function p(O,D){for(var x=0;x<D.length;x++){var A=D[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}function g(O,D,x){return D&&p(O.prototype,D),x&&p(O,x),Object.defineProperty(O,"prototype",{writable:!1}),O}function m(O,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(D&&D.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),D&&y(O,D)}function y(O,D){return y=Object.setPrototypeOf||function(A,C){return A.__proto__=C,A},y(O,D)}function b(O){var D=S();return function(){var A=E(O),C;if(D){var I=E(this).constructor;C=Reflect.construct(A,arguments,I)}else C=A.apply(this,arguments);return v(this,C)}}function v(O,D){if(D&&(u(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(O)}function _(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(O){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(x){return x.__proto__||Object.getPrototypeOf(x)},E(O)}var w=function(O){m(x,O);var D=b(x);function x(A,C){var I;return h(this,x),I=D.call(this),I.container=c.withOrientation(A,C.vertical),I.params=C,I.width=0,I.height=C.height*I.params.pixelRatio,I.lastPos=0,I.wrapper=null,I}return g(x,[{key:"style",value:function(C,I){return c.style(C,I)}},{key:"createWrapper",value:function(){this.wrapper=c.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(C,I){!I&&C.preventDefault();var L=c.withOrientation(C.targetTouches?C.targetTouches[0]:C,this.params.vertical).clientX,k=this.wrapper.getBoundingClientRect(),M=this.width,N=this.getWidth(),R=this.getProgressPixels(k,L),T;return!this.params.fillParent&&M<N?T=R*(this.params.pixelRatio/M)||0:T=(R+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,c.clamp(T,0,1)}},{key:"getProgressPixels",value:function(C,I){return this.params.rtl?C.right-I:I-C.left}},{key:"setupWrapperEvents",value:function(){var C=this;this.wrapper.addEventListener("click",function(I){var L=c.withOrientation(I,C.params.vertical),k=C.wrapper.offsetHeight-C.wrapper.clientHeight;if(k!==0){var M=C.wrapper.getBoundingClientRect();if(L.clientY>=M.bottom-k)return}C.params.interact&&C.fireEvent("click",I,C.handleEvent(I))}),this.wrapper.addEventListener("dblclick",function(I){C.params.interact&&C.fireEvent("dblclick",I,C.handleEvent(I))}),this.wrapper.addEventListener("scroll",function(I){return C.fireEvent("scroll",I)})}},{key:"drawPeaks",value:function(C,I,L,k){this.setWidth(I)||this.clearWave(),this.params.barWidth?this.drawBars(C,0,L,k):this.drawWave(C,0,L,k)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(C){var I=this.wrapper.scrollWidth*C;this.recenterOnPosition(I,!0)}},{key:"recenterOnPosition",value:function(C,I){var L=this.wrapper.scrollLeft,k=~~(this.wrapper.clientWidth/2),M=this.wrapper.scrollWidth-this.wrapper.clientWidth,N=C-k,R=N-L;if(M!=0){if(!I&&-k<=R&&R<k){var T=this.params.autoCenterRate;T/=k,T*=M,R=Math.max(-T,Math.min(T,R)),N=L+R}N=Math.max(0,Math.min(M,N)),N!=L&&(this.wrapper.scrollLeft=N)}}},{key:"getScrollX",value:function(){var C=0;if(this.wrapper){var I=this.params.pixelRatio;if(C=Math.round(this.wrapper.scrollLeft*I),this.params.scrollParent){var L=~~(this.wrapper.scrollWidth*I-this.getWidth());C=Math.min(L,Math.max(0,C))}}return C}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(C){if(this.width==C)return!1;if(this.width=C,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var I=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:I})}return this.updateSize(),!0}},{key:"setHeight",value:function(C){return C==this.height?!1:(this.height=C,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(C){var I=1/this.params.pixelRatio,L=Math.round(C*this.width)*I;if(L<this.lastPos||L-this.lastPos>=I){if(this.lastPos=L,this.params.scrollParent&&this.params.autoCenter){var k=~~(this.wrapper.scrollWidth*C);this.recenterOnPosition(k,this.params.autoCenterImmediately)}this.updateProgress(L)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(C,I,L,k){}},{key:"drawWave",value:function(C,I,L,k){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(C){}}]),x}(c.Observer);o.default=w,a.exports=o.default},"./src/drawer.multicanvas.js":(a,o,l)=>{function u(A){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(A)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=g(l("./src/drawer.js")),f=p(l("./src/util/index.js")),d=g(l("./src/drawer.canvasentry.js"));function h(A){if(typeof WeakMap!="function")return null;var C=new WeakMap,I=new WeakMap;return(h=function(k){return k?I:C})(A)}function p(A,C){if(!C&&A&&A.__esModule)return A;if(A===null||u(A)!=="object"&&typeof A!="function")return{default:A};var I=h(C);if(I&&I.has(A))return I.get(A);var L={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in A)if(M!=="default"&&Object.prototype.hasOwnProperty.call(A,M)){var N=k?Object.getOwnPropertyDescriptor(A,M):null;N&&(N.get||N.set)?Object.defineProperty(L,M,N):L[M]=A[M]}return L.default=A,I&&I.set(A,L),L}function g(A){return A&&A.__esModule?A:{default:A}}function m(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function y(A,C){for(var I=0;I<C.length;I++){var L=C[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(A,L.key,L)}}function b(A,C,I){return C&&y(A.prototype,C),I&&y(A,I),Object.defineProperty(A,"prototype",{writable:!1}),A}function v(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),C&&_(A,C)}function _(A,C){return _=Object.setPrototypeOf||function(L,k){return L.__proto__=k,L},_(A,C)}function S(A){var C=O();return function(){var L=D(A),k;if(C){var M=D(this).constructor;k=Reflect.construct(L,arguments,M)}else k=L.apply(this,arguments);return E(this,k)}}function E(A,C){if(C&&(u(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(A)}function w(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(A){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},D(A)}var x=function(A){v(I,A);var C=S(I);function I(L,k){var M;return m(this,I),M=C.call(this,L,k),M.maxCanvasWidth=k.maxCanvasWidth,M.maxCanvasElementWidth=Math.round(k.maxCanvasWidth/k.pixelRatio),M.hasProgressCanvas=k.waveColor!=k.progressColor,M.halfPixel=.5/k.pixelRatio,M.canvases=[],M.progressWave=null,M.EntryClass=d.default,M.canvasContextAttributes=k.drawingContextAttributes,M.overlap=2*Math.ceil(k.pixelRatio/2),M.barRadius=k.barRadius||0,M.vertical=k.vertical,M}return b(I,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=f.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var k=this,M=Math.round(this.width/this.params.pixelRatio),N=Math.ceil(M/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<N;)this.addCanvas();for(;this.canvases.length>N;)this.removeCanvas();var R=this.maxCanvasWidth+this.overlap,T=this.canvases.length-1;this.canvases.forEach(function(z,Y){Y==T&&(R=k.width-k.maxCanvasWidth*T),k.updateDimensions(z,R,k.height),z.clearWave()})}},{key:"addCanvas",value:function(){var k=new this.EntryClass;k.canvasContextAttributes=this.canvasContextAttributes,k.hasProgressCanvas=this.hasProgressCanvas,k.halfPixel=this.halfPixel;var M=this.maxCanvasElementWidth*this.canvases.length,N=f.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(N,{position:"absolute",zIndex:2,left:M+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),k.initWave(N),this.hasProgressCanvas){var R=f.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(R,{position:"absolute",left:M+"px",top:0,bottom:0,height:"100%"}),k.initProgress(R)}this.canvases.push(k)}},{key:"removeCanvas",value:function(){var k=this.canvases[this.canvases.length-1];k.wave.parentElement.removeChild(k.wave.domElement),this.hasProgressCanvas&&k.progress.parentElement.removeChild(k.progress.domElement),k&&(k.destroy(),k=null),this.canvases.pop()}},{key:"updateDimensions",value:function(k,M,N){var R=Math.round(M/this.params.pixelRatio),T=Math.round(this.width/this.params.pixelRatio);k.updateDimensions(R,T,M,N),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var k=this;f.frame(function(){k.canvases.forEach(function(M){return M.clearWave()})})()}},{key:"drawBars",value:function(k,M,N,R){var T=this;return this.prepareDraw(k,M,N,R,function(z){var Y=z.absmax,H=z.hasMinVals;z.height;var oe=z.offsetY,_e=z.halfH,re=z.peaks,pe=z.channelIndex;if(N!==void 0){var Oe=H?2:1,Re=re.length/Oe,W=T.params.barWidth*T.params.pixelRatio,q=T.params.barGap===null?Math.max(T.params.pixelRatio,~~(W/2)):Math.max(T.params.pixelRatio,T.params.barGap*T.params.pixelRatio),ve=W+q,ce=Re/T.width,fe=N,we=R,Xe=fe;for(Xe;Xe<we;Xe+=ve){var tt=0,ct=Math.floor(Xe*ce)*Oe,yn=Math.floor((Xe+ve)*ce)*Oe;do{var Nt=Math.abs(re[ct]);Nt>tt&&(tt=Nt),ct+=Oe}while(ct<yn);var se=Math.round(tt/Y*_e);se==0&&T.params.barMinHeight&&(se=T.params.barMinHeight),T.fillRect(Xe+T.halfPixel,_e-se+oe,W+T.halfPixel,se*2,T.barRadius,pe)}}})}},{key:"drawWave",value:function(k,M,N,R){var T=this;return this.prepareDraw(k,M,N,R,function(z){var Y=z.absmax,H=z.hasMinVals;z.height;var oe=z.offsetY,_e=z.halfH,re=z.peaks,pe=z.channelIndex;if(!H){var Oe=[],Re=re.length,W=0;for(W;W<Re;W++)Oe[2*W]=re[W],Oe[2*W+1]=-re[W];re=Oe}N!==void 0&&T.drawLine(re,Y,_e,oe,N,R,pe),T.fillRect(0,_e+oe-T.halfPixel,T.width,T.halfPixel,T.barRadius,pe)})}},{key:"drawLine",value:function(k,M,N,R,T,z,Y){var H=this,oe=this.params.splitChannelsOptions.channelColors[Y]||{},_e=oe.waveColor,re=oe.progressColor;this.canvases.forEach(function(pe,Oe){H.setFillStyles(pe,_e,re),H.applyCanvasTransforms(pe,H.params.vertical),pe.drawLines(k,M,N,R,T,z)})}},{key:"fillRect",value:function(k,M,N,R,T,z){var Y=Math.floor(k/this.maxCanvasWidth),H=Math.min(Math.ceil((k+N)/this.maxCanvasWidth)+1,this.canvases.length),oe=Y;for(oe;oe<H;oe++){var _e=this.canvases[oe],re=oe*this.maxCanvasWidth,pe={x1:Math.max(k,oe*this.maxCanvasWidth),y1:M,x2:Math.min(k+N,oe*this.maxCanvasWidth+_e.wave.width),y2:M+R};if(pe.x1<pe.x2){var Oe=this.params.splitChannelsOptions.channelColors[z]||{},Re=Oe.waveColor,W=Oe.progressColor;this.setFillStyles(_e,Re,W),this.applyCanvasTransforms(_e,this.params.vertical),_e.fillRects(pe.x1-re,pe.y1,pe.x2-pe.x1,pe.y2-pe.y1,T)}}}},{key:"hideChannel",value:function(k){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(k)}},{key:"prepareDraw",value:function(k,M,N,R,T,z,Y){var H=this;return f.frame(function(){if(k[0]instanceof Array){var oe=k;if(H.params.splitChannels){var _e=oe.filter(function(ve,ce){return!H.hideChannel(ce)});H.params.splitChannelsOptions.overlay||H.setHeight(Math.max(_e.length,1)*H.params.height*H.params.pixelRatio);var re;return H.params.splitChannelsOptions&&H.params.splitChannelsOptions.relativeNormalization&&(re=f.max(oe.map(function(ve){return f.absMax(ve)}))),oe.forEach(function(ve,ce){return H.prepareDraw(ve,ce,N,R,T,_e.indexOf(ve),re)})}k=oe[0]}if(!H.hideChannel(M)){var pe=1/H.params.barHeight;H.params.normalize&&(pe=Y===void 0?f.absMax(k):Y);var Oe=[].some.call(k,function(ve){return ve<0}),Re=H.params.height*H.params.pixelRatio,W=Re/2,q=Re*z||0;return H.params.splitChannelsOptions&&H.params.splitChannelsOptions.overlay&&(q=0),T({absmax:pe,hasMinVals:Oe,height:Re,offsetY:q,halfH:W,peaks:k,channelIndex:M})}})()}},{key:"setFillStyles",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;k.setFillStyles(M,N)}},{key:"applyCanvasTransforms",value:function(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;k.applyCanvasTransforms(M)}},{key:"getImage",value:function(k,M,N){if(N==="blob")return Promise.all(this.canvases.map(function(T){return T.getImage(k,M,N)}));if(N==="dataURL"){var R=this.canvases.map(function(T){return T.getImage(k,M,N)});return R.length>1?R:R[0]}}},{key:"updateProgress",value:function(k){this.style(this.progressWave,{width:k+"px"})}}]),I}(c.default);o.default=x,a.exports=o.default},"./src/mediaelement-webaudio.js":(a,o,l)=>{function u(D){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(D)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=f(l("./src/mediaelement.js"));function f(D){return D&&D.__esModule?D:{default:D}}function d(D,x){if(!(D instanceof x))throw new TypeError("Cannot call a class as a function")}function h(D,x){for(var A=0;A<x.length;A++){var C=x[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(D,C.key,C)}}function p(D,x,A){return x&&h(D.prototype,x),A&&h(D,A),Object.defineProperty(D,"prototype",{writable:!1}),D}function g(){return typeof Reflect<"u"&&Reflect.get?g=Reflect.get:g=function(x,A,C){var I=m(x,A);if(!!I){var L=Object.getOwnPropertyDescriptor(I,A);return L.get?L.get.call(arguments.length<3?x:C):L.value}},g.apply(this,arguments)}function m(D,x){for(;!Object.prototype.hasOwnProperty.call(D,x)&&(D=w(D),D!==null););return D}function y(D,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(x&&x.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),x&&b(D,x)}function b(D,x){return b=Object.setPrototypeOf||function(C,I){return C.__proto__=I,C},b(D,x)}function v(D){var x=E();return function(){var C=w(D),I;if(x){var L=w(this).constructor;I=Reflect.construct(C,arguments,L)}else I=C.apply(this,arguments);return _(this,I)}}function _(D,x){if(x&&(u(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(D)}function S(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(D){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},w(D)}var O=function(D){y(A,D);var x=v(A);function A(C){var I;return d(this,A),I=x.call(this,C),I.params=C,I.sourceMediaElement=null,I}return p(A,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(I,L,k){g(w(A.prototype),"_load",this).call(this,I,L,k),this.createMediaElementSource(I)}},{key:"createMediaElementSource",value:function(I){this.sourceMediaElement=this.ac.createMediaElementSource(I),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(I,L){return this.resumeAudioContext(),g(w(A.prototype),"play",this).call(this,I,L)}},{key:"destroy",value:function(){g(w(A.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),A}(c.default);o.default=O,a.exports=o.default},"./src/mediaelement.js":(a,o,l)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},u(C)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=p(l("./src/webaudio.js")),f=h(l("./src/util/index.js"));function d(C){if(typeof WeakMap!="function")return null;var I=new WeakMap,L=new WeakMap;return(d=function(M){return M?L:I})(C)}function h(C,I){if(!I&&C&&C.__esModule)return C;if(C===null||u(C)!=="object"&&typeof C!="function")return{default:C};var L=d(I);if(L&&L.has(C))return L.get(C);var k={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in C)if(N!=="default"&&Object.prototype.hasOwnProperty.call(C,N)){var R=M?Object.getOwnPropertyDescriptor(C,N):null;R&&(R.get||R.set)?Object.defineProperty(k,N,R):k[N]=C[N]}return k.default=C,L&&L.set(C,k),k}function p(C){return C&&C.__esModule?C:{default:C}}function g(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")}function m(C,I){for(var L=0;L<I.length;L++){var k=I[L];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}function y(C,I,L){return I&&m(C.prototype,I),L&&m(C,L),Object.defineProperty(C,"prototype",{writable:!1}),C}function b(){return typeof Reflect<"u"&&Reflect.get?b=Reflect.get:b=function(I,L,k){var M=v(I,L);if(!!M){var N=Object.getOwnPropertyDescriptor(M,L);return N.get?N.get.call(arguments.length<3?I:k):N.value}},b.apply(this,arguments)}function v(C,I){for(;!Object.prototype.hasOwnProperty.call(C,I)&&(C=x(C),C!==null););return C}function _(C,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(I&&I.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),I&&S(C,I)}function S(C,I){return S=Object.setPrototypeOf||function(k,M){return k.__proto__=M,k},S(C,I)}function E(C){var I=D();return function(){var k=x(C),M;if(I){var N=x(this).constructor;M=Reflect.construct(k,arguments,N)}else M=k.apply(this,arguments);return w(this,M)}}function w(C,I){if(I&&(u(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(C)}function O(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(C){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},x(C)}var A=function(C){_(L,C);var I=E(L);function L(k){var M;return g(this,L),M=I.call(this,k),M.params=k,M.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},M.mediaType=k.mediaType.toLowerCase(),M.elementPosition=k.elementPosition,M.peaks=null,M.playbackRate=1,M.volume=1,M.isMuted=!1,M.buffer=null,M.onPlayEnd=null,M.mediaListeners={},M}return y(L,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var M=this;this.mediaListeners.error=function(){M.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){M.fireEvent("canplay")},this.mediaListeners.ended=function(){M.fireEvent("finish")},this.mediaListeners.play=function(){M.fireEvent("play")},this.mediaListeners.pause=function(){M.fireEvent("pause")},this.mediaListeners.seeked=function(N){M.fireEvent("seek")},this.mediaListeners.volumechange=function(N){M.isMuted=M.media.muted,M.isMuted?M.volume=0:M.volume=M.media.volume,M.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(N){M.media.removeEventListener(N,M.mediaListeners[N]),M.media.addEventListener(N,M.mediaListeners[N])})}},{key:"createTimer",value:function(){var M=this,N=function R(){M.isPaused()||(M.fireEvent("audioprocess",M.getCurrentTime()),f.frame(R)())};this.on("play",N),this.on("pause",function(){M.fireEvent("audioprocess",M.getCurrentTime())})}},{key:"load",value:function(M,N,R,T){var z=document.createElement(this.mediaType);z.controls=this.params.mediaControls,z.autoplay=this.params.autoplay||!1,z.preload=T??"auto",z.src=M,z.style.width="100%";var Y=N.querySelector(this.mediaType);Y&&N.removeChild(Y),N.appendChild(z),this._load(z,R,T)}},{key:"loadElt",value:function(M,N){M.controls=this.params.mediaControls,M.autoplay=this.params.autoplay||!1,this._load(M,N,M.preload)}},{key:"_load",value:function(M,N,R){if(!(M instanceof HTMLMediaElement)||typeof M.addEventListener>"u")throw new Error("media parameter is not a valid media element");typeof M.load=="function"&&!(N&&R=="none")&&M.load(),this.media=M,this._setupMediaListeners(),this.peaks=N,this.onPlayEnd=null,this.buffer=null,this.isMuted=M.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var M=(this.buffer||this.media).duration;return M>=1/0&&(M=this.media.seekable.end(0)),M}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(M){this.playbackRate=M||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(M){M!=null&&!isNaN(M)&&(this.media.currentTime=M),this.clearPlayEnd()}},{key:"play",value:function(M,N){this.seekTo(M);var R=this.media.play();return N&&this.setPlayEnd(N),R}},{key:"pause",value:function(){var M;return this.media&&(M=this.media.pause()),this.clearPlayEnd(),M}},{key:"setPlayEnd",value:function(M){var N=this;this.clearPlayEnd(),this._onPlayEnd=function(R){R>=M&&(N.pause(),N.seekTo(M))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(M,N,R){return this.buffer?b(x(L.prototype),"getPeaks",this).call(this,M,N,R):this.peaks||[]}},{key:"setSinkId",value:function(M){return M?this.media.setSinkId?this.media.setSinkId(M):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+M))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(M){this.volume=M,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(M){this.isMuted=this.media.muted=M}},{key:"destroy",value:function(){var M=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(N){M.media&&M.media.removeEventListener(N,M.mediaListeners[N])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),L}(c.default);o.default=A,a.exports=o.default},"./src/peakcache.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;function l(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function u(d,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}function c(d,h,p){return h&&u(d.prototype,h),p&&u(d,p),Object.defineProperty(d,"prototype",{writable:!1}),d}var f=function(){function d(){l(this,d),this.clearPeakCache()}return c(d,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(p,g,m){p!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=p);for(var y=[],b=0;b<this.peakCacheRanges.length&&this.peakCacheRanges[b]<g;)b++;for(b%2==0&&y.push(g);b<this.peakCacheRanges.length&&this.peakCacheRanges[b]<=m;)y.push(this.peakCacheRanges[b]),b++;b%2==0&&y.push(m),y=y.filter(function(_,S,E){return S==0?_!=E[S+1]:S==E.length-1?_!=E[S-1]:_!=E[S-1]&&_!=E[S+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(y),this.peakCacheRanges=this.peakCacheRanges.sort(function(_,S){return _-S}).filter(function(_,S,E){return S==0?_!=E[S+1]:S==E.length-1?_!=E[S-1]:_!=E[S-1]&&_!=E[S+1]});var v=[];for(b=0;b<y.length;b+=2)v.push([y[b],y[b+1]]);return v}},{key:"getCacheRanges",value:function(){var p=[],g;for(g=0;g<this.peakCacheRanges.length;g+=2)p.push([this.peakCacheRanges[g],this.peakCacheRanges[g+1]]);return p}}]),d}();o.default=f,a.exports=o.default},"./src/util/absMax.js":(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=d;var u=f(l("./src/util/max.js")),c=f(l("./src/util/min.js"));function f(h){return h&&h.__esModule?h:{default:h}}function d(h){var p=(0,u.default)(h),g=(0,c.default)(h);return-g>p?-g:p}a.exports=o.default},"./src/util/clamp.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(u,c,f){return Math.min(Math.max(c,u),f)}a.exports=o.default},"./src/util/fetch.js":(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=g;var u=c(l("./src/util/observer.js"));function c(m){return m&&m.__esModule?m:{default:m}}function f(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){for(var b=0;b<y.length;b++){var v=y[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}function h(m,y,b){return y&&d(m.prototype,y),b&&d(m,b),Object.defineProperty(m,"prototype",{writable:!1}),m}var p=function(){function m(y,b,v){f(this,m),this.instance=y,this.instance._reader=v.body.getReader(),this.total=parseInt(b,10),this.loaded=0}return h(m,[{key:"start",value:function(b){var v=this,_=function S(){v.instance._reader.read().then(function(E){var w=E.done,O=E.value;if(w){v.total===0&&v.instance.onProgress.call(v.instance,{loaded:v.loaded,total:v.total,lengthComputable:!1}),b.close();return}v.loaded+=O.byteLength,v.instance.onProgress.call(v.instance,{loaded:v.loaded,total:v.total,lengthComputable:v.total!==0}),b.enqueue(O),S()}).catch(function(E){b.error(E)})};_()}}]),m}();function g(m){if(m){if(!m.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var y=new u.default,b=new Headers,v=new Request(m.url);y.controller=new AbortController,m&&m.requestHeaders&&m.requestHeaders.forEach(function(E){b.append(E.key,E.value)});var _=m.responseType||"json",S={method:m.method||"GET",headers:b,mode:m.mode||"cors",credentials:m.credentials||"same-origin",cache:m.cache||"default",redirect:m.redirect||"follow",referrer:m.referrer||"client",signal:y.controller.signal};return fetch(v,S).then(function(E){y.response=E;var w=!0;E.body||(w=!1);var O=E.headers.get("content-length");return O===null&&(w=!1),w?(y.onProgress=function(D){y.fireEvent("progress",D)},new Response(new ReadableStream(new p(y,O,E)),S)):E}).then(function(E){var w;if(E.ok)switch(_){case"arraybuffer":return E.arrayBuffer();case"json":return E.json();case"blob":return E.blob();case"text":return E.text();default:w="Unknown responseType: "+_;break}throw w||(w="HTTP error status: "+E.status),new Error(w)}).then(function(E){y.fireEvent("success",E)}).catch(function(E){y.fireEvent("error",E)}),y.fetchRequest=v,y}a.exports=o.default},"./src/util/frame.js":(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=f;var u=c(l("./src/util/request-animation-frame.js"));function c(d){return d&&d.__esModule?d:{default:d}}function f(d){return function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return(0,u.default)(function(){return d.apply(void 0,p)})}}a.exports=o.default},"./src/util/get-id.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(u){return u===void 0&&(u="wavesurfer_"),u+Math.random().toString(32).substring(2)}a.exports=o.default},"./src/util/index.js":(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"Observer",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(o,"absMax",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(o,"clamp",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(o,"debounce",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(o,"fetchFile",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(o,"frame",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(o,"getId",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(o,"ignoreSilenceMode",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(o,"max",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(o,"min",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(o,"preventClick",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(o,"requestAnimationFrame",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(o,"style",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(o,"withOrientation",{enumerable:!0,get:function(){return S.default}});var u=w(l("./src/util/get-id.js")),c=w(l("./src/util/max.js")),f=w(l("./src/util/min.js")),d=w(l("./src/util/absMax.js")),h=w(l("./src/util/observer.js")),p=w(l("./src/util/style.js")),g=w(l("./src/util/request-animation-frame.js")),m=w(l("./src/util/frame.js")),y=w(l("./node_modules/debounce/index.js")),b=w(l("./src/util/prevent-click.js")),v=w(l("./src/util/fetch.js")),_=w(l("./src/util/clamp.js")),S=w(l("./src/util/orientation.js")),E=w(l("./src/util/silence-mode.js"));function w(O){return O&&O.__esModule?O:{default:O}}},"./src/util/max.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(u){var c=-1/0;return Object.keys(u).forEach(function(f){u[f]>c&&(c=u[f])}),c}a.exports=o.default},"./src/util/min.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(u){var c=Number(1/0);return Object.keys(u).forEach(function(f){u[f]<c&&(c=u[f])}),c}a.exports=o.default},"./src/util/observer.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;function l(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function u(d,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}function c(d,h,p){return h&&u(d.prototype,h),p&&u(d,p),Object.defineProperty(d,"prototype",{writable:!1}),d}var f=function(){function d(){l(this,d),this._disabledEventEmissions=[],this.handlers=null}return c(d,[{key:"on",value:function(p,g){var m=this;this.handlers||(this.handlers={});var y=this.handlers[p];return y||(y=this.handlers[p]=[]),y.push(g),{name:p,callback:g,un:function(v,_){return m.un(v,_)}}}},{key:"un",value:function(p,g){if(!!this.handlers){var m=this.handlers[p],y;if(m)if(g)for(y=m.length-1;y>=0;y--)m[y]==g&&m.splice(y,1);else m.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(p,g){var m=this,y=function b(){for(var v=arguments.length,_=new Array(v),S=0;S<v;S++)_[S]=arguments[S];g.apply(m,_),setTimeout(function(){m.un(p,b)},0)};return this.on(p,y)}},{key:"setDisabledEventEmissions",value:function(p){this._disabledEventEmissions=p}},{key:"_isDisabledEventEmission",value:function(p){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(p)}},{key:"fireEvent",value:function(p){for(var g=arguments.length,m=new Array(g>1?g-1:0),y=1;y<g;y++)m[y-1]=arguments[y];if(!(!this.handlers||this._isDisabledEventEmission(p))){var b=this.handlers[p];b&&b.forEach(function(v){v.apply(void 0,m)})}}}]),d}();o.default=f,a.exports=o.default},"./src/util/orientation.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=f;var l={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function u(d,h){return Object.prototype.hasOwnProperty.call(l,d)&&h?l[d]:d}var c=Symbol("isProxy");function f(d,h){return d[c]?d:new Proxy(d,{get:function(g,m,y){if(m===c)return!0;if(m==="domElement")return g;if(m==="style")return f(g.style,h);if(m==="canvas")return f(g.canvas,h);if(m==="getBoundingClientRect")return function(){return f(g.getBoundingClientRect.apply(g,arguments),h)};if(m==="getContext")return function(){return f(g.getContext.apply(g,arguments),h)};var b=g[u(m,h)];return typeof b=="function"?b.bind(g):b},set:function(g,m,y){return g[u(m,h)]=y,!0}})}a.exports=o.default},"./src/util/prevent-click.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=u;function l(c){c.stopPropagation(),document.body.removeEventListener("click",l,!0)}function u(c){document.body.addEventListener("click",l,!0)}a.exports=o.default},"./src/util/request-animation-frame.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u,c){return setTimeout(u,1e3/60)}).bind(window);o.default=l,a.exports=o.default},"./src/util/silence-mode.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(){var u="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",c=document.createElement("div");c.innerHTML='<audio x-webkit-airplay="deny"></audio>';var f=c.children.item(0);f.src=u,f.preload="auto",f.type="audio/mpeg",f.disableRemotePlayback=!0,f.play(),f.remove(),c.remove()}a.exports=o.default},"./src/util/style.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=l;function l(u,c){return Object.keys(c).forEach(function(f){u.style[f]!==c[f]&&(u.style[f]=c[f])}),u}a.exports=o.default},"./src/wavesurfer.js":(a,o,l)=>{function u(k){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},u(k)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=b(l("./src/util/index.js")),f=m(l("./src/drawer.multicanvas.js")),d=m(l("./src/webaudio.js")),h=m(l("./src/mediaelement.js")),p=m(l("./src/peakcache.js")),g=m(l("./src/mediaelement-webaudio.js"));function m(k){return k&&k.__esModule?k:{default:k}}function y(k){if(typeof WeakMap!="function")return null;var M=new WeakMap,N=new WeakMap;return(y=function(T){return T?N:M})(k)}function b(k,M){if(!M&&k&&k.__esModule)return k;if(k===null||u(k)!=="object"&&typeof k!="function")return{default:k};var N=y(M);if(N&&N.has(k))return N.get(k);var R={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in k)if(z!=="default"&&Object.prototype.hasOwnProperty.call(k,z)){var Y=T?Object.getOwnPropertyDescriptor(k,z):null;Y&&(Y.get||Y.set)?Object.defineProperty(R,z,Y):R[z]=k[z]}return R.default=k,N&&N.set(k,R),R}function v(k,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(M&&M.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),M&&_(k,M)}function _(k,M){return _=Object.setPrototypeOf||function(R,T){return R.__proto__=T,R},_(k,M)}function S(k){var M=O();return function(){var R=D(k),T;if(M){var z=D(this).constructor;T=Reflect.construct(R,arguments,z)}else T=R.apply(this,arguments);return E(this,T)}}function E(k,M){if(M&&(u(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(k)}function w(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(k){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},D(k)}function x(k,M,N){return M in k?Object.defineProperty(k,M,{value:N,enumerable:!0,configurable:!0,writable:!0}):k[M]=N,k}function A(k,M){if(!(k instanceof M))throw new TypeError("Cannot call a class as a function")}function C(k,M){for(var N=0;N<M.length;N++){var R=M[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}function I(k,M,N){return M&&C(k.prototype,M),N&&C(k,N),Object.defineProperty(k,"prototype",{writable:!1}),k}var L=function(k){v(N,k);var M=S(N);function N(R){var T;if(A(this,N),T=M.call(this),x(w(T),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:f.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}}),x(w(T),"backends",{MediaElement:h.default,WebAudio:d.default,MediaElementWebAudio:g.default}),x(w(T),"util",c),T.params=Object.assign({},T.defaultParams,R),T.params.splitChannelsOptions=Object.assign({},T.defaultParams.splitChannelsOptions,R.splitChannelsOptions),T.container=typeof R.container=="string"?document.querySelector(T.params.container):T.params.container,!T.container)throw new Error("Container element not found");if(T.params.mediaContainer==null?T.mediaContainer=T.container:typeof T.params.mediaContainer=="string"?T.mediaContainer=document.querySelector(T.params.mediaContainer):T.mediaContainer=T.params.mediaContainer,!T.mediaContainer)throw new Error("Media Container element not found");if(T.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(T.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(T.params.rtl===!0&&(T.params.vertical===!0?c.style(T.container,{transform:"rotateX(180deg)"}):c.style(T.container,{transform:"rotateY(180deg)"})),T.params.backgroundColor&&T.setBackgroundColor(T.params.backgroundColor),T.savedVolume=0,T.isMuted=!1,T.tmpEvents=[],T.currentRequest=null,T.arraybuffer=null,T.drawer=null,T.backend=null,T.peakCache=null,typeof T.params.renderer!="function")throw new Error("Renderer parameter is invalid");T.Drawer=T.params.renderer,T.params.backend=="AudioElement"&&(T.params.backend="MediaElement"),(T.params.backend=="WebAudio"||T.params.backend==="MediaElementWebAudio")&&!d.default.prototype.supportsWebAudio.call(null)&&(T.params.backend="MediaElement"),T.Backend=T.backends[T.params.backend],T.initialisedPluginList={},T.isDestroyed=!1,T.isReady=!1;var z=0;return T._onResize=c.debounce(function(){T.drawer.wrapper&&z!=T.drawer.wrapper.clientWidth&&!T.params.scrollParent&&(z=T.drawer.wrapper.clientWidth,z&&T.drawer.fireEvent("redraw"))},typeof T.params.responsive=="number"?T.params.responsive:100),E(T,w(T))}return I(N,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(T){var z=this;return T.forEach(function(Y){return z.addPlugin(Y)}),T.forEach(function(Y){Y.deferInit||z.initPlugin(Y.name)}),this.fireEvent("plugins-registered",T),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(T){var z=this;if(!T.name)throw new Error("Plugin does not have a name!");if(!T.instance)throw new Error("Plugin ".concat(T.name," does not have an instance property!"));T.staticProps&&Object.keys(T.staticProps).forEach(function(oe){z[oe]=T.staticProps[oe]});var Y=T.instance,H=Object.getOwnPropertyNames(c.Observer.prototype);return H.forEach(function(oe){Y.prototype[oe]=c.Observer.prototype[oe]}),this[T.name]=new Y(T.params||{},this),this.fireEvent("plugin-added",T.name),this}},{key:"initPlugin",value:function(T){if(!this[T])throw new Error("Plugin ".concat(T," has not been added yet!"));return this.initialisedPluginList[T]&&this.destroyPlugin(T),this[T].init(),this.initialisedPluginList[T]=!0,this.fireEvent("plugin-initialised",T),this}},{key:"destroyPlugin",value:function(T){if(!this[T])throw new Error("Plugin ".concat(T," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[T])throw new Error("Plugin ".concat(T," is not active and cannot be destroyed!"));if(typeof this[T].destroy!="function")throw new Error("Plugin ".concat(T," does not have a destroy function!"));return this[T].destroy(),delete this.initialisedPluginList[T],this.fireEvent("plugin-destroyed",T),this}},{key:"destroyAllPlugins",value:function(){var T=this;Object.keys(this.initialisedPluginList).forEach(function(z){return T.destroyPlugin(z)})}},{key:"createDrawer",value:function(){var T=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){T.drawBuffer(),T.drawer.progress(T.backend.getPlayedPercents())}),this.drawer.on("click",function(z,Y){setTimeout(function(){return T.seekTo(Y)},0)}),this.drawer.on("scroll",function(z){T.params.partialRender&&T.drawBuffer(),T.fireEvent("scroll",z)})}},{key:"createBackend",value:function(){var T=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){T.drawer.progress(T.backend.getPlayedPercents()),T.fireEvent("finish")}),this.backend.on("play",function(){return T.fireEvent("play")}),this.backend.on("pause",function(){return T.fireEvent("pause")}),this.backend.on("audioprocess",function(z){T.drawer.progress(T.backend.getPlayedPercents()),T.fireEvent("audioprocess",z)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){T.drawer.progress(T.backend.getPlayedPercents())}),this.backend.on("volume",function(){var z=T.getVolume();T.fireEvent("volume",z),T.backend.isMuted!==T.isMuted&&(T.isMuted=T.backend.isMuted,T.fireEvent("mute",T.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new p.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(T){T>=this.getDuration()?this.seekTo(1):this.seekTo(T/this.getDuration())}},{key:"play",value:function(T,z){var Y=this;return this.params.ignoreSilenceMode&&c.ignoreSilenceMode(),this.fireEvent("interaction",function(){return Y.play(T,z)}),this.backend.play(T,z)}},{key:"setPlayEnd",value:function(T){this.backend.setPlayEnd(T)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(T){this.skip(-T||-this.params.skipLength)}},{key:"skipForward",value:function(T){this.skip(T||this.params.skipLength)}},{key:"skip",value:function(T){var z=this.getDuration()||1,Y=this.getCurrentTime()||0;Y=Math.max(0,Math.min(z,Y+(T||0))),this.seekAndCenter(Y/z)}},{key:"seekAndCenter",value:function(T){this.seekTo(T),this.drawer.recenter(T)}},{key:"seekTo",value:function(T){var z=this;if(typeof T!="number"||!isFinite(T)||T<0||T>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return z.seekTo(T)});var Y=this.params.backend==="WebAudio",H=this.backend.isPaused();Y&&!H&&this.backend.pause();var oe=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(T*this.getDuration()),this.drawer.progress(T),Y&&!H&&this.backend.play(),this.params.scrollParent=oe,this.fireEvent("seek",T)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(T){return this.backend.setSinkId(T)}},{key:"setVolume",value:function(T){this.backend.setVolume(T),this.fireEvent("volume",T)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(T){this.backend.setPlaybackRate(T)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(T){if(T===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(T),this.isMuted=T):T?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[T]?this.params.splitChannelsOptions.channelColors[T].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(T){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[z]?this.params.splitChannelsOptions.channelColors[z].waveColor=T:this.params.waveColor=T,this.drawBuffer()}},{key:"getProgressColor",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[T]?this.params.splitChannelsOptions.channelColors[T].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(T,z){this.params.splitChannelsOptions.channelColors[z]?this.params.splitChannelsOptions.channelColors[z].progressColor=T:this.params.progressColor=T,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(T){this.params.backgroundColor=T,c.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(T){this.params.cursorColor=T,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(T){this.params.height=T,this.drawer.setHeight(T*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(T){this.params.splitChannelsOptions.filterChannels=T,this.drawBuffer()}},{key:"drawBuffer",value:function(){var T=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),z=this.drawer.getWidth(),Y=T,H=0,oe=Math.max(H+z,Y);this.params.fillParent&&(!this.params.scrollParent||T<z)&&(Y=z,H=0,oe=Y);var _e;if(this.params.partialRender){var re=this.peakCache.addRangeToPeakCache(Y,H,oe),pe;for(pe=0;pe<re.length;pe++)_e=this.backend.getPeaks(Y,re[pe][0],re[pe][1]),this.drawer.drawPeaks(_e,Y,re[pe][0],re[pe][1])}else _e=this.backend.getPeaks(Y,H,oe),this.drawer.drawPeaks(_e,Y,H,oe);this.fireEvent("redraw",_e,Y)}},{key:"zoom",value:function(T){T?(this.params.minPxPerSec=T,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",T)}},{key:"loadArrayBuffer",value:function(T){var z=this;this.decodeArrayBuffer(T,function(Y){z.isDestroyed||z.loadDecodedBuffer(Y)})}},{key:"loadDecodedBuffer",value:function(T){this.backend.load(T),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(T){var z=this,Y=new FileReader;Y.addEventListener("progress",function(H){return z.onProgress(H)}),Y.addEventListener("load",function(H){return z.loadArrayBuffer(H.target.result)}),Y.addEventListener("error",function(){return z.fireEvent("error","Error reading file")}),Y.readAsArrayBuffer(T),this.empty()}},{key:"load",value:function(T,z,Y,H){if(!T)throw new Error("url parameter cannot be empty");if(this.empty(),Y){var oe={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(Y)===-1,"Peaks are not provided":!z,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof T!="string"},_e=Object.keys(oe).filter(function(re){return oe[re]});_e.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+_e.join(`
	- `)),Y=null)}switch(this.params.backend==="WebAudio"&&T instanceof HTMLMediaElement&&(T=T.src),this.params.backend){case"WebAudio":return this.loadBuffer(T,z,H);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(T,z,Y,H)}}},{key:"loadBuffer",value:function(T,z,Y){var H=this,oe=function(re){return re&&H.tmpEvents.push(H.once("ready",re)),H.getArrayBuffer(T,function(pe){return H.loadArrayBuffer(pe)})};if(z)this.backend.setPeaks(z,Y),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",oe));else return oe()}},{key:"loadMediaElement",value:function(T,z,Y,H){var oe=this,_e=T;if(typeof T=="string")this.backend.load(_e,this.mediaContainer,z,Y);else{var re=T;this.backend.loadElt(re,z),_e=re.src}this.tmpEvents.push(this.backend.once("canplay",function(){oe.backend.destroyed||(oe.drawBuffer(),oe.isReady=!0,oe.fireEvent("ready"))}),this.backend.once("error",function(pe){return oe.fireEvent("error",pe)})),z&&(this.backend.setPeaks(z,H),this.drawBuffer(),this.fireEvent("waveform-ready")),(!z||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(_e,function(pe){oe.decodeArrayBuffer(pe,function(Oe){oe.backend.buffer=Oe,oe.backend.setPeaks(null),oe.drawBuffer(),oe.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(T,z){var Y=this;this.isDestroyed||(this.arraybuffer=T,this.backend.decodeArrayBuffer(T,function(H){!Y.isDestroyed&&Y.arraybuffer==T&&(z(H),Y.arraybuffer=null)},function(){return Y.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(T,z){var Y=this,H=Object.assign({url:T,responseType:"arraybuffer"},this.params.xhr),oe=c.fetchFile(H);return this.currentRequest=oe,this.tmpEvents.push(oe.on("progress",function(_e){Y.onProgress(_e)}),oe.on("success",function(_e){z(_e),Y.currentRequest=null}),oe.on("error",function(_e){Y.fireEvent("error",_e),Y.currentRequest=null})),oe}},{key:"onProgress",value:function(T){var z;T.lengthComputable?z=T.loaded/T.total:z=T.loaded/(T.loaded+1e6),this.fireEvent("loading",Math.round(z*100),T.target)}},{key:"exportPCM",value:function(T,z,Y,H,oe){T=T||1024,H=H||0,z=z||1e4,Y=Y||!1;var _e=this.backend.getPeaks(T,H,oe),re=[].map.call(_e,function(pe){return Math.round(pe*z)/z});return new Promise(function(pe,Oe){if(!Y){var Re=new Blob([JSON.stringify(re)],{type:"application/json;charset=utf-8"}),W=URL.createObjectURL(Re);window.open(W),URL.revokeObjectURL(W)}pe(re)})}},{key:"exportImage",value:function(T,z,Y){return T||(T="image/png"),z||(z=1),Y||(Y="dataURL"),this.drawer.getImage(T,z,Y)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(T){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(T){return T.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(T){var z=new N(T);return z.init()}}]),N}(c.Observer);o.default=L,x(L,"VERSION","6.2.0"),x(L,"util",c),a.exports=o.default},"./src/webaudio.js":(a,o,l)=>{function u(C){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},u(C)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=d(l("./src/util/index.js"));function f(C){if(typeof WeakMap!="function")return null;var I=new WeakMap,L=new WeakMap;return(f=function(M){return M?L:I})(C)}function d(C,I){if(!I&&C&&C.__esModule)return C;if(C===null||u(C)!=="object"&&typeof C!="function")return{default:C};var L=f(I);if(L&&L.has(C))return L.get(C);var k={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in C)if(N!=="default"&&Object.prototype.hasOwnProperty.call(C,N)){var R=M?Object.getOwnPropertyDescriptor(C,N):null;R&&(R.get||R.set)?Object.defineProperty(k,N,R):k[N]=C[N]}return k.default=C,L&&L.set(C,k),k}function h(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")}function p(C,I){for(var L=0;L<I.length;L++){var k=I[L];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}function g(C,I,L){return I&&p(C.prototype,I),L&&p(C,L),Object.defineProperty(C,"prototype",{writable:!1}),C}function m(C,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(I&&I.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),Object.defineProperty(C,"prototype",{writable:!1}),I&&y(C,I)}function y(C,I){return y=Object.setPrototypeOf||function(k,M){return k.__proto__=M,k},y(C,I)}function b(C){var I=S();return function(){var k=E(C),M;if(I){var N=E(this).constructor;M=Reflect.construct(k,arguments,N)}else M=k.apply(this,arguments);return v(this,M)}}function v(C,I){if(I&&(u(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(C)}function _(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(C){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},E(C)}function w(C,I,L){return I in C?Object.defineProperty(C,I,{value:L,enumerable:!0,configurable:!0,writable:!0}):C[I]=L,C}var O="playing",D="paused",x="finished",A=function(C){m(L,C);var I=b(L);function L(k){var M,N,R;return h(this,L),R=I.call(this),w(_(R),"audioContext",null),w(_(R),"offlineAudioContext",null),w(_(R),"stateBehaviors",(M={},w(M,O,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var z=this.getDuration();return this.getCurrentTime()/z||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),w(M,D,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var z=this.getDuration();return this.getCurrentTime()/z||0},getCurrentTime:function(){return this.startPosition}}),w(M,x,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),M)),R.params=k,R.ac=k.audioContext||(R.supportsWebAudio()?R.getAudioContext():{}),R.lastPlay=R.ac.currentTime,R.startPosition=0,R.scheduledPause=null,R.states=(N={},w(N,O,Object.create(R.stateBehaviors[O])),w(N,D,Object.create(R.stateBehaviors[D])),w(N,x,Object.create(R.stateBehaviors[x])),N),R.buffer=null,R.filters=[],R.gainNode=null,R.mergedPeaks=null,R.offlineAc=null,R.peaks=null,R.playbackRate=1,R.analyser=null,R.scriptNode=null,R.source=null,R.splitPeaks=[],R.state=null,R.explicitDuration=k.duration,R.sinkStreamDestination=null,R.sinkAudioElement=null,R.destroyed=!1,R}return g(L,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(M){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,M)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(D),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(M){M&&M.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(M){this.state!==this.states[M]&&(this.state=this.states[M],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var M=arguments.length,N=new Array(M),R=0;R<M;R++)N[R]=arguments[R];this.setFilters(N)}},{key:"setFilters",value:function(M){this.disconnectFilters(),M&&M.length&&(this.filters=M,this.analyser.disconnect(),M.reduce(function(N,R){return N.connect(R),R},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(L.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(L.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var M=this;this.scriptNode.onaudioprocess=function(){var N=M.getCurrentTime();N>=M.getDuration()?(M.setState(x),M.fireEvent("pause")):N>=M.scheduledPause?M.pause():M.state===M.states[O]&&M.fireEvent("audioprocess",N)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(M){return M?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(M)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+M))}},{key:"setVolume",value:function(M){this.gainNode.gain.setValueAtTime(M,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(M,N,R){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(M,function(T){return N(T)},R):this.offlineAc.decodeAudioData(M).then(function(T){return N(T)}).catch(function(T){return R(T)})}},{key:"setPeaks",value:function(M,N){N!=null&&(this.explicitDuration=N),this.peaks=M}},{key:"setLength",value:function(M){if(!(this.mergedPeaks&&M==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var N=this.buffer?this.buffer.numberOfChannels:1,R;for(R=0;R<N;R++)this.splitPeaks[R]=[],this.splitPeaks[R][2*(M-1)]=0,this.splitPeaks[R][2*(M-1)+1]=0;this.mergedPeaks[2*(M-1)]=0,this.mergedPeaks[2*(M-1)+1]=0}}},{key:"getPeaks",value:function(M,N,R){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(N=N||0,R=R||M-1,this.setLength(M),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var T=this.createBuffer(1,4096,this.sampleRate);this.buffer=T.buffer}var z=this.buffer.length/M,Y=~~(z/10)||1,H=this.buffer.numberOfChannels,oe;for(oe=0;oe<H;oe++){var _e=this.splitPeaks[oe],re=this.buffer.getChannelData(oe),pe=void 0;for(pe=N;pe<=R;pe++){var Oe=~~(pe*z),Re=~~(Oe+z),W=re[Oe],q=W,ve=void 0;for(ve=Oe;ve<Re;ve+=Y){var ce=re[ve];ce>q&&(q=ce),ce<W&&(W=ce)}_e[2*pe]=q,_e[2*pe+1]=W,(oe==0||q>this.mergedPeaks[2*pe])&&(this.mergedPeaks[2*pe]=q),(oe==0||W<this.mergedPeaks[2*pe+1])&&(this.mergedPeaks[2*pe+1]=W)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(M){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=M,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[O]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(M,N){if(!!this.buffer)return this.scheduledPause=null,M==null&&(M=this.getCurrentTime(),M>=this.getDuration()&&(M=0)),N==null&&(N=this.getDuration()),this.startPosition=M,this.lastPlay=this.ac.currentTime,this.state===this.states[x]&&this.setState(D),{start:M,end:N}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(M,N){if(!!this.buffer){this.createSource();var R=this.seekTo(M,N);M=R.start,N=R.end,this.scheduledPause=N,this.source.start(0,M),this.resumeAudioContext(),this.setState(O),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(D),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(M){this.playbackRate=M||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(M){this.scheduledPause=M}}]),L}(c.Observer);o.default=A,w(A,"scriptBufferSize",256),a.exports=o.default},"./node_modules/debounce/index.js":a=>{function o(l,u,c){var f,d,h,p,g;u==null&&(u=100);function m(){var b=Date.now()-p;b<u&&b>=0?f=setTimeout(m,u-b):(f=null,c||(g=l.apply(h,d),h=d=null))}var y=function(){h=this,d=arguments,p=Date.now();var b=c&&!f;return f||(f=setTimeout(m,u)),b&&(g=l.apply(h,d),h=d=null),g};return y.clear=function(){f&&(clearTimeout(f),f=null)},y.flush=function(){f&&(g=l.apply(h,d),h=d=null,clearTimeout(f),f=null)},y}o.debounce=o,a.exports=o}},i={};function r(a){var o=i[a];if(o!==void 0)return o.exports;var l=i[a]={exports:{}};return n[a](l,l.exports,r),l.exports}var s=r("./src/wavesurfer.js");return s})())})(Tte);var Qze=Ome(Tte.exports);function h7(e,t,n){const i=e.slice();return i[7]=t[n],i[8]=t,i[9]=n,i}function p7(e,t,n){const i=e.slice();return i[10]=t[n],i}function Zze(e){let t,n;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",n=e[4][e[9]]&&e[4][e[9]].isPlaying()?SN:EN)},m(i,r){U(i,t,r)},p(i,r){r&16&&n!==(n=i[4][i[9]]&&i[4][i[9]].isPlaying()?SN:EN)&&J(t,"d",n)},d(i){i&&j(t)}}}function eVe(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[Zze]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8208&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function g7(e){let t=e[10]+"",n,i,r=e[7][e[10]]+"",s,a,o;return{c(){n=ye(t),i=ye(" : "),s=ye(r),a=ae(),o=K("br")},m(l,u){U(l,n,u),U(l,i,u),U(l,s,u),U(l,a,u),U(l,o,u)},p(l,u){u&1&&t!==(t=l[10]+"")&&et(n,t),u&1&&r!==(r=l[7][l[10]]+"")&&et(s,r)},d(l){l&&j(n),l&&j(i),l&&j(s),l&&j(a),l&&j(o)}}}function tVe(e){let t,n=Object.keys(e[7]).filter(b7),i=[];for(let r=0;r<n.length;r+=1)i[r]=g7(p7(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=_t()},m(r,s){for(let a=0;a<i.length;a+=1)i[a].m(r,s);U(r,t,s)},p(r,s){if(s&1){n=Object.keys(r[7]).filter(b7);let a;for(a=0;a<n.length;a+=1){const o=p7(r,n,a);i[a]?i[a].p(o,s):(i[a]=g7(o),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){Rn(i,r),r&&j(t)}}}function nVe(e){let t,n,i,r,s,a=e[9],o,l,u;function c(){return e[5](e[9])}n=new Ja({props:{$$slots:{default:[eVe]},$$scope:{ctx:e}}}),n.$on("click",c);const f=()=>e[6](r,a),d=()=>e[6](null,a);return l=new hh({props:{$$slots:{default:[tVe]},$$scope:{ctx:e}}}),{c(){t=K("div"),ie(n.$$.fragment),i=ae(),r=K("div"),o=ae(),ie(l.$$.fragment),J(r,"id",s="wave_"+e[7][e[3].idColumn]),vn(r,"width","150px",!1),vn(r,"height","50px",!1),vn(t,"display","flex",!1)},m(h,p){U(h,t,p),te(n,t,null),G(t,i),G(t,r),f(),U(h,o,p),te(l,h,p),u=!0},p(h,p){e=h;const g={};p&8208&&(g.$$scope={dirty:p,ctx:e}),n.$set(g),(!u||p&9&&s!==(s="wave_"+e[7][e[3].idColumn]))&&J(r,"id",s),a!==e[9]&&(d(),a=e[9],f());const m={};p&8193&&(m.$$scope={dirty:p,ctx:e}),l.$set(m)},i(h){u||(F(n.$$.fragment,h),F(l.$$.fragment,h),u=!0)},o(h){P(n.$$.fragment,h),P(l.$$.fragment,h),u=!1},d(h){h&&j(t),ne(n),d(),h&&j(o),ne(l,h)}}}function m7(e){let t,n,i,r,s,a=e[7][e[1]]+"",o;return{c(){t=K("br"),n=ae(),i=K("span"),i.textContent="pred:",r=ae(),s=K("span"),o=ye(a),J(i,"class","label svelte-1brkrke"),J(s,"class","value svelte-1brkrke")},m(l,u){U(l,t,u),U(l,n,u),U(l,i,u),U(l,r,u),U(l,s,u),G(s,o)},p(l,u){u&3&&a!==(a=l[7][l[1]]+"")&&et(o,a)},d(l){l&&j(t),l&&j(n),l&&j(i),l&&j(r),l&&j(s)}}}function y7(e){let t,n,i,r,s,a,o,l=e[7][e[3].labelColumn]+"",u,c,f,d;n=new Ud({props:{$$slots:{default:[nVe]},$$scope:{ctx:e}}});let h=e[1]&&e[7][e[1]]&&m7(e);return{c(){t=K("div"),ie(n.$$.fragment),i=ae(),r=K("br"),s=ae(),a=K("span"),a.textContent="label: ",o=K("span"),u=ye(l),c=ae(),h&&h.c(),f=ae(),J(a,"class","label svelte-1brkrke"),J(o,"class","value svelte-1brkrke"),J(t,"class","box svelte-1brkrke")},m(p,g){U(p,t,g),te(n,t,null),G(t,i),G(t,r),G(t,s),G(t,a),G(t,o),G(o,u),G(t,c),h&&h.m(t,null),G(t,f),d=!0},p(p,g){const m={};g&8221&&(m.$$scope={dirty:g,ctx:p}),n.$set(m),(!d||g&9)&&l!==(l=p[7][p[3].labelColumn]+"")&&et(u,l),p[1]&&p[7][p[1]]?h?h.p(p,g):(h=m7(p),h.c(),h.m(t,f)):h&&(h.d(1),h=null)},i(p){d||(F(n.$$.fragment,p),d=!0)},o(p){P(n.$$.fragment,p),d=!1},d(p){p&&j(t),ne(n),h&&h.d()}}}function iVe(e){let t,n,i=e[0],r=[];for(let a=0;a<i.length;a+=1)r[a]=y7(h7(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,[o]){if(o&31){i=a[0];let l;for(l=0;l<i.length;l+=1){const u=h7(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=y7(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}const b7=e=>!e.startsWith("zeno");function rVe(e,t,n){let i,r;Qe(e,_o,c=>n(3,r=c));let{table:s}=t,{modelCol:a}=t,o=[];const l=c=>{i[c].isPlaying()?i[c].pause():i[c].play()};function u(c,f){be[c?"unshift":"push"](()=>{o[f]=c,n(2,o)})}return e.$$set=c=>{"table"in c&&n(0,s=c.table),"modelCol"in c&&n(1,a=c.modelCol)},e.$$.update=()=>{e.$$.dirty&13&&n(4,i=o.map((c,f)=>{if(c){c.innerHTML="";let d=Qze.create({container:c,waveColor:"violet",progressColor:"purple",mediaControls:!0,height:50});return d.load(`/static/${s[f][r.idColumn]}`),d}}))},[s,a,o,r,i,l,u]}class sVe extends qe{constructor(t){super(),We(this,t,rVe,iVe,He,{table:0,modelCol:1})}}function v7(e,t,n){const i=e.slice();return i[3]=t[n],i}function _7(e,t,n){const i=e.slice();return i[6]=t[n],i}function w7(e){let t=e[6]+"",n,i,r=e[3][e[6]]+"",s,a,o;return{c(){n=ye(t),i=ye(" : "),s=ye(r),a=ae(),o=K("br")},m(l,u){U(l,n,u),U(l,i,u),U(l,s,u),U(l,a,u),U(l,o,u)},p(l,u){u&1&&t!==(t=l[6]+"")&&et(n,t),u&1&&r!==(r=l[3][l[6]]+"")&&et(s,r)},d(l){l&&j(n),l&&j(i),l&&j(s),l&&j(a),l&&j(o)}}}function aVe(e){let t,n=Object.keys(e[3]).filter(A7),i=[];for(let r=0;r<n.length;r+=1)i[r]=w7(_7(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=_t()},m(r,s){for(let a=0;a<i.length;a+=1)i[a].m(r,s);U(r,t,s)},p(r,s){if(s&1){n=Object.keys(r[3]).filter(A7);let a;for(a=0;a<n.length;a+=1){const o=_7(r,n,a);i[a]?i[a].p(o,s):(i[a]=w7(o),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){Rn(i,r),r&&j(t)}}}function oVe(e){let t,n,i,r,s,a;return s=new hh({props:{$$slots:{default:[aVe]},$$scope:{ctx:e}}}),{c(){t=K("img"),r=ae(),ie(s.$$.fragment),mu(t.src,n="/static/"+e[3][e[2].idColumn])||J(t,"src",n),J(t,"alt",i="Image thumbnail for instance "+e[3][e[2].idColumn]),vn(t,"max-width","200px",!1)},m(o,l){U(o,t,l),U(o,r,l),te(s,o,l),a=!0},p(o,l){(!a||l&5&&!mu(t.src,n="/static/"+o[3][o[2].idColumn]))&&J(t,"src",n),(!a||l&5&&i!==(i="Image thumbnail for instance "+o[3][o[2].idColumn]))&&J(t,"alt",i);const u={};l&513&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(F(s.$$.fragment,o),a=!0)},o(o){P(s.$$.fragment,o),a=!1},d(o){o&&j(t),o&&j(r),ne(s,o)}}}function S7(e){let t,n,i,r,s,a=e[3][e[1]]+"",o;return{c(){t=K("br"),n=ae(),i=K("span"),i.textContent="pred:",r=ae(),s=K("span"),o=ye(a),J(i,"class","label svelte-1brkrke"),J(s,"class","value svelte-1brkrke")},m(l,u){U(l,t,u),U(l,n,u),U(l,i,u),U(l,r,u),U(l,s,u),G(s,o)},p(l,u){u&3&&a!==(a=l[3][l[1]]+"")&&et(o,a)},d(l){l&&j(t),l&&j(n),l&&j(i),l&&j(r),l&&j(s)}}}function E7(e){let t,n,i,r,s,a,o,l=e[3][e[2].labelColumn]+"",u,c,f,d;n=new Ud({props:{$$slots:{default:[oVe]},$$scope:{ctx:e}}});let h=e[1]&&e[3][e[1]]&&S7(e);return{c(){t=K("div"),ie(n.$$.fragment),i=ae(),r=K("br"),s=ae(),a=K("span"),a.textContent="label: ",o=K("span"),u=ye(l),c=ae(),h&&h.c(),f=ae(),J(a,"class","label svelte-1brkrke"),J(o,"class","value svelte-1brkrke"),J(t,"class","box svelte-1brkrke")},m(p,g){U(p,t,g),te(n,t,null),G(t,i),G(t,r),G(t,s),G(t,a),G(t,o),G(o,u),G(t,c),h&&h.m(t,null),G(t,f),d=!0},p(p,g){const m={};g&517&&(m.$$scope={dirty:g,ctx:p}),n.$set(m),(!d||g&5)&&l!==(l=p[3][p[2].labelColumn]+"")&&et(u,l),p[1]&&p[3][p[1]]?h?h.p(p,g):(h=S7(p),h.c(),h.m(t,f)):h&&(h.d(1),h=null)},i(p){d||(F(n.$$.fragment,p),d=!0)},o(p){P(n.$$.fragment,p),d=!1},d(p){p&&j(t),ne(n),h&&h.d()}}}function lVe(e){let t,n,i=e[0],r=[];for(let a=0;a<i.length;a+=1)r[a]=E7(v7(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,[o]){if(o&7){i=a[0];let l;for(l=0;l<i.length;l+=1){const u=v7(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=E7(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}const A7=e=>!e.startsWith("zeno");function uVe(e,t,n){let i;Qe(e,_o,a=>n(2,i=a));let{table:r}=t,{modelCol:s}=t;return e.$$set=a=>{"table"in a&&n(0,r=a.table),"modelCol"in a&&n(1,s=a.modelCol)},[r,s,i]}class cVe extends qe{constructor(t){super(),We(this,t,uVe,lVe,He,{table:0,modelCol:1})}}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var fVe={SINGLE_SELECT:"mdc-segmented-button--single-select"};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var dVe=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"defaultAdapter",{get:function(){return{hasClass:function(){return!1},getSegments:function(){return[]},selectSegment:function(){},unselectSegment:function(){},notifySelectedChange:function(){}}},enumerable:!1,configurable:!0}),t.prototype.selectSegment=function(n){this.adapter.selectSegment(n)},t.prototype.unselectSegment=function(n){this.adapter.unselectSegment(n)},t.prototype.getSelectedSegments=function(){return this.adapter.getSegments().filter(function(n){return n.selected})},t.prototype.isSegmentSelected=function(n){return this.adapter.getSegments().some(function(i){return(i.index===n||i.segmentId===n)&&i.selected})},t.prototype.isSingleSelect=function(){return this.adapter.hasClass(fVe.SINGLE_SELECT)},t.prototype.handleSelected=function(n){this.isSingleSelect()&&this.unselectPrevSelected(n.index),this.adapter.notifySelectedChange(n)},t.prototype.unselectPrevSelected=function(n){var i,r;try{for(var s=wi(this.getSelectedSegments()),a=s.next();!a.done;a=s.next()){var o=a.value;o.index!==n&&this.unselectSegment(o.index)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}},t}(cr);function O7(e,t,n){const i=e.slice();return i[30]=t[n],i[32]=n,i}const hVe=e=>({segment:e[0]&4}),C7=e=>({segment:e[30]});function pVe(e){let t;const n=e[16].default,i=Ue(n,e,e[21],C7);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,s){i&&i.p&&(!t||s[0]&2097156)&&Ve(i,n,r,r[21],t?ze(n,r[21],s,hVe):$e(r[21]),C7)},i(r){t||(F(i,r),t=!0)},o(r){P(i,r),t=!1},d(r){i&&i.d(r)}}}function gVe(e){let t,n,i;return t=new Lp({props:{key:"SMUI:segmented-button:segment:initialSelected",value:e[8][e[32]],$$slots:{default:[pVe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=ae()},m(r,s){te(t,r,s),U(r,n,s),i=!0},p(r,s){const a={};s[0]&4&&(a.value=r[8][r[32]]),s[0]&2097156&&(a.$$scope={dirty:s,ctx:r}),t.$set(a)},i(r){i||(F(t.$$.fragment,r),i=!0)},o(r){P(t.$$.fragment,r),i=!1},d(r){ne(t,r),r&&j(n)}}}function I7(e,t){let n,i,r;return i=new Lp({props:{key:"SMUI:segmented-button:segment:index",value:t[32],$$slots:{default:[gVe]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=_t(),ie(i.$$.fragment),this.first=n},m(s,a){U(s,n,a),te(i,s,a),r=!0},p(s,a){t=s;const o={};a[0]&4&&(o.value=t[32]),a[0]&2097156&&(o.$$scope={dirty:a,ctx:t}),i.$set(o)},i(s){r||(F(i.$$.fragment,s),r=!0)},o(s){P(i.$$.fragment,s),r=!1},d(s){s&&j(n),ne(i,s)}}}function mVe(e){let t,n=[],i=new Map,r,s,a,o,l,u,c=e[2];const f=p=>p[3](p[30]);for(let p=0;p<c.length;p+=1){let g=O7(e,c,p),m=f(g);i.set(m,n[p]=I7(m,g))}let d=[{class:r=xe({[e[1]]:!0,"mdc-segmented-button":!0,"mdc-segmented-button--single-select":e[4]})},{role:s=e[4]?"radiogroup":"group"},e[12]],h={};for(let p=0;p<d.length;p+=1)h=Q(h,d[p]);return{c(){t=K("div");for(let p=0;p<n.length;p+=1)n[p].c();Se(t,h)},m(p,g){U(p,t,g);for(let m=0;m<n.length;m+=1)n[m].m(t,null);e[17](t),o=!0,l||(u=[Ee(a=wt.call(null,t,e[0])),Ee(e[7].call(null,t)),Ke(t,"SMUISegmentedButtonSegment:mount",e[18]),Ke(t,"SMUISegmentedButtonSegment:unmount",e[19]),Ke(t,"selected",e[20])],l=!0)},p(p,g){g[0]&2097420&&(c=p[2],Be(),n=Gte(n,g,f,1,p,c,i,t,qte,I7,null,O7),je()),Se(t,h=Le(d,[(!o||g[0]&18&&r!==(r=xe({[p[1]]:!0,"mdc-segmented-button":!0,"mdc-segmented-button--single-select":p[4]})))&&{class:r},(!o||g[0]&16&&s!==(s=p[4]?"radiogroup":"group"))&&{role:s},g[0]&4096&&p[12]])),a&&rt(a.update)&&g[0]&1&&a.update.call(null,p[0])},i(p){if(!o){for(let g=0;g<c.length;g+=1)F(n[g]);o=!0}},o(p){for(let g=0;g<n.length;g+=1)P(n[g]);o=!1},d(p){p&&j(t);for(let g=0;g<n.length;g+=1)n[g].d();e[17](null),l=!1,pt(u)}}}function x7(e,t){let n=new Set(e);for(let i of t)n.delete(i);return n}function yVe(e,t,n){const i=["use","class","segments","key","singleSelect","selected","getElement"];let r=Ce(t,i),s,{$$slots:a={},$$scope:o}=t;const l=St(ft());let{use:u=[]}=t,{class:c=""}=t,{segments:f=[]}=t,{key:d=R=>R}=t,{singleSelect:h=!1}=t,{selected:p=h?void 0:[]}=t,g,m,y={},b=new WeakMap,v=f.map(R=>h&&p===R||!h&&p.indexOf(R)!==-1);Tt("SMUI:icon:context","segmented-button"),Tt("SMUI:label:context","segmented-button");const _=oi(h);Qe(e,_,R=>n(23,s=R)),Tt("SMUI:segmented-button:singleSelect",_);let S=h?p:new Set(p);Zn(()=>(n(5,m=new dVe({hasClass:R=>I().classList.contains(R),getSegments:()=>f.map((R,T)=>({index:T,selected:h?p===R:p.indexOf(R)!==-1})),selectSegment:A,unselectSegment:C,notifySelectedChange:R=>{R.selected?A(R.index):C(R.index),yt(I(),"change",R)}})),m.init(),()=>{m.destroy()}));function E(R){const T=R.detail;D(T.segmentId,T)}function w(R){const T=R.detail;x(T.segmentId)}function O(R){return R instanceof Object?b.get(R):y[R]}function D(R,T){R instanceof Object?b.set(R,T):y[R]=T}function x(R){R instanceof Object?b.delete(R):delete y[R]}function A(R){let T=f.indexOf(R);T===-1&&(T=R),h?p!==f[T]&&n(13,p=f[T]):p.indexOf(f[T])===-1&&(p.push(f[T]),n(13,p));const z=O(f[T]);z&&(z.selected=!0)}function C(R){let T=f.indexOf(R);if(T===-1&&(T=R),h)p===f[T]&&n(13,p=null);else{const Y=p.indexOf(f[T]);Y!==-1&&(p.splice(Y,1),n(13,p))}const z=O(f[T]);z&&(z.selected=!1)}function I(){return g}function L(R){be[R?"unshift":"push"](()=>{g=R,n(6,g)})}const k=R=>E(R),M=R=>w(R),N=R=>m&&m.handleSelected(R.detail);return e.$$set=R=>{t=Q(Q({},t),vt(R)),n(12,r=Ce(t,i)),"use"in R&&n(0,u=R.use),"class"in R&&n(1,c=R.class),"segments"in R&&n(2,f=R.segments),"key"in R&&n(3,d=R.key),"singleSelect"in R&&n(4,h=R.singleSelect),"selected"in R&&n(13,p=R.selected),"$$scope"in R&&n(21,o=R.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&16&&yu(_,s=h,s),e.$$.dirty[0]&41008&&m&&h&&S!==p&&(S!=null&&m.unselectSegment(S),n(15,S=p),p!=null&&m.selectSegment(p)),e.$$.dirty[0]&41012&&m&&!h){const R=new Set(p),T=x7(S,R),z=x7(R,S);if(T.size||z.size){n(15,S=R);for(let Y of T){const H=f.indexOf(Y);H!==-1&&m.unselectSegment(H)}for(let Y of z)m.selectSegment(f.indexOf(Y))}}},[u,c,f,d,h,m,g,l,v,_,E,w,r,p,I,S,a,L,k,M,N,o]}class bVe extends qe{constructor(t){super(),We(this,t,yVe,mVe,He,{use:0,class:1,segments:2,key:3,singleSelect:4,selected:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var T7={TRUE:"true",FALSE:"false"},QO={ARIA_CHECKED:"aria-checked",ARIA_PRESSED:"aria-pressed",DATA_SEGMENT_ID:"data-segment-id"},ZO={SELECTED:"mdc-segmented-button__segment--selected"};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var vVe={bottom:0,height:0,left:0,right:0,top:0,width:0},_Ve=function(e){ur(t,e);function t(n){return e.call(this,en(en({},t.defaultAdapter),n))||this}return Object.defineProperty(t,"defaultAdapter",{get:function(){return{isSingleSelect:function(){return!1},getAttr:function(){return""},setAttr:function(){},addClass:function(){},removeClass:function(){},hasClass:function(){return!1},notifySelectedChange:function(){},getRootBoundingClientRect:function(){return vVe}}},enumerable:!1,configurable:!0}),t.prototype.isSelected=function(){return this.adapter.hasClass(ZO.SELECTED)},t.prototype.setSelected=function(){this.adapter.addClass(ZO.SELECTED),this.setAriaAttr(T7.TRUE)},t.prototype.setUnselected=function(){this.adapter.removeClass(ZO.SELECTED),this.setAriaAttr(T7.FALSE)},t.prototype.getSegmentId=function(){var n;return(n=this.adapter.getAttr(QO.DATA_SEGMENT_ID))!==null&&n!==void 0?n:void 0},t.prototype.handleClick=function(){this.adapter.isSingleSelect()?this.setSelected():this.toggleSelection(),this.adapter.notifySelectedChange(this.isSelected())},t.prototype.getDimensions=function(){return this.adapter.getRootBoundingClientRect()},t.prototype.toggleSelection=function(){this.isSelected()?this.setUnselected():this.setSelected()},t.prototype.setAriaAttr=function(n){this.adapter.isSingleSelect()?this.adapter.setAttr(QO.ARIA_CHECKED,n):this.adapter.setAttr(QO.ARIA_PRESSED,n)},t}(cr);function k7(e){let t;return{c(){t=K("div"),J(t,"class","mdc-segmented-button__ripple")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function M7(e){let t;return{c(){t=K("div"),J(t,"class","mdc-segmented-button__segment__touch")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function wVe(e){let t,n,i,r,s,a,o,l,u,c,f,d,h=e[4]&&k7();const p=e[23].default,g=Ue(p,e,e[22],null);let m=e[5]&&M7(),y=[{class:i=xe({[e[2]]:!0,"mdc-segmented-button__segment":!0,"mdc-segmented-button__segment--touch":e[5],"mdc-segmented-button__segment--selected":e[0],...e[8]})},{style:r=Object.entries(e[9]).map(D7).concat([e[3]]).join(" ")},{role:s=e[14]?"radio":void 0},{"aria-pressed":a=e[14]?void 0:e[0]?"true":"false"},{"aria-checked":o=e[14]?e[0]?"true":"false":void 0},e[10],e[19]],b={};for(let v=0;v<y.length;v+=1)b=Q(b,y[v]);return{c(){t=K("button"),h&&h.c(),n=_t(),g&&g.c(),m&&m.c(),Se(t,b)},m(v,_){U(v,t,_),h&&h.m(t,null),G(t,n),g&&g.m(t,null),m&&m.m(t,null),t.autofocus&&t.focus(),e[24](t),c=!0,f||(d=[Ee(l=uo.call(null,t,{ripple:e[4],unbounded:!1,addClass:e[16],removeClass:e[17],addStyle:e[18]})),Ee(e[11].call(null,t)),Ee(u=wt.call(null,t,e[1])),Ke(t,"click",e[25])],f=!0)},p(v,_){v[4]?h||(h=k7(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),g&&g.p&&(!c||_[0]&4194304)&&Ve(g,p,v,v[22],c?ze(p,v[22],_,null):$e(v[22]),null),v[5]?m||(m=M7(),m.c(),m.m(t,null)):m&&(m.d(1),m=null),Se(t,b=Le(y,[(!c||_[0]&293&&i!==(i=xe({[v[2]]:!0,"mdc-segmented-button__segment":!0,"mdc-segmented-button__segment--touch":v[5],"mdc-segmented-button__segment--selected":v[0],...v[8]})))&&{class:i},(!c||_[0]&520&&r!==(r=Object.entries(v[9]).map(D7).concat([v[3]]).join(" ")))&&{style:r},{role:s},(!c||_[0]&1&&a!==(a=v[14]?void 0:v[0]?"true":"false"))&&{"aria-pressed":a},(!c||_[0]&1&&o!==(o=v[14]?v[0]?"true":"false":void 0))&&{"aria-checked":o},_[0]&1024&&v[10],_[0]&524288&&v[19]])),l&&rt(l.update)&&_[0]&16&&l.update.call(null,{ripple:v[4],unbounded:!1,addClass:v[16],removeClass:v[17],addStyle:v[18]}),u&&rt(u.update)&&_[0]&2&&u.update.call(null,v[1])},i(v){c||(F(g,v),c=!0)},o(v){P(g,v),c=!1},d(v){v&&j(t),h&&h.d(),g&&g.d(v),m&&m.d(),e[24](null),f=!1,pt(d)}}}const D7=([e,t])=>`${e}: ${t};`;function SVe(e,t,n){const i=["use","class","style","segment","ripple","touch","selected","getElement"];let r=Ce(t,i),s,a,o,{$$slots:l={},$$scope:u}=t;const c=St(ft());let f=()=>{};function d(H){return H===f}let{use:h=[]}=t,{class:p=""}=t,{style:g=""}=t,{segment:m}=t,{ripple:y=!0}=t,{touch:b=!1}=t;const v=Zt("SMUI:segmented-button:segment:initialSelected");Qe(e,v,H=>n(28,o=H));let{selected:_=f}=t,S=!d(_);d(_)&&(_=o);let E,w,O={},D={},x={};const A=Zt("SMUI:segmented-button:singleSelect");Qe(e,A,H=>n(27,a=H));const C=Zt("SMUI:segmented-button:segment:index");if(Qe(e,C,H=>n(26,s=H)),!m)throw new Error("The segment property is required! It should be passed down from the SegmentedButton to the Segment.");Zn(()=>{n(6,w=new _Ve({isSingleSelect:()=>a,getAttr:M,setAttr:N,addClass:L,removeClass:k,hasClass:I,notifySelectedChange:oe=>{n(0,_=oe),yt(T(),"selected",{index:s,selected:_,segmentId:m})},getRootBoundingClientRect:()=>T().getBoundingClientRect()}));const H={segmentId:m,get selected(){return _},set selected(oe){_!==oe&&n(0,_=oe)}};return yt(T(),"SMUISegmentedButtonSegment:mount",H),w.init(),()=>{yt(T(),"SMUISegmentedButtonSegment:unmount",H),w.destroy()}});function I(H){return H in O?O[H]:T().classList.contains(H)}function L(H){O[H]||n(8,O[H]=!0,O)}function k(H){(!(H in O)||O[H])&&n(8,O[H]=!1,O)}function M(H){var oe;return H in x?(oe=x[H])!==null&&oe!==void 0?oe:null:T().getAttribute(H)}function N(H,oe){x[H]!==oe&&n(10,x[H]=oe,x)}function R(H,oe){D[H]!=oe&&(oe===""||oe==null?(delete D[H],n(9,D)):n(9,D[H]=oe,D))}function T(){return E}function z(H){be[H?"unshift":"push"](()=>{E=H,n(7,E)})}const Y=H=>!H.defaultPrevented&&w&&!S&&w.handleClick();return e.$$set=H=>{t=Q(Q({},t),vt(H)),n(19,r=Ce(t,i)),"use"in H&&n(1,h=H.use),"class"in H&&n(2,p=H.class),"style"in H&&n(3,g=H.style),"segment"in H&&n(20,m=H.segment),"ripple"in H&&n(4,y=H.ripple),"touch"in H&&n(5,b=H.touch),"selected"in H&&n(0,_=H.selected),"$$scope"in H&&n(22,u=H.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&65&&w&&w.isSelected()&&!_&&w.setUnselected(),e.$$.dirty[0]&65&&w&&!w.isSelected()&&_&&w.setSelected()},[_,h,p,g,y,b,w,E,O,D,x,c,v,S,A,C,L,k,R,r,m,T,u,l,z,Y]}class EVe extends qe{constructor(t){super(),We(this,t,SVe,wVe,He,{use:1,class:2,style:3,segment:20,ripple:4,touch:5,selected:0,getElement:21},null,[-1,-1])}get getElement(){return this.$$.ctx[21]}}const AVe=EVe;function R7(e,t,n){const i=e.slice();return i[6]=t[n],i}function L7(e,t,n){const i=e.slice();return i[9]=t[n],i}function OVe(e){let t=e[12]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&4096&&t!==(t=i[12]+"")&&et(n,t)},d(i){i&&j(n)}}}function CVe(e){let t,n;return t=new X2({props:{$$slots:{default:[OVe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&12288&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function IVe(e){let t,n;return t=new AVe({props:{segment:e[12],$$slots:{default:[CVe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&4096&&(s.segment=i[12]),r&12288&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function N7(e){let t,n,i;return{c(){t=K("img"),J(t,"class","overlay svelte-12tet48"),mu(t.src,n="/static/"+e[6][e[3].labelColumn])||J(t,"src",n),J(t,"alt",i="Image thumbnail for instance "+e[6][e[3].labelColumn]),vn(t,"width","150px",!1),vn(t,"height","150px",!1)},m(r,s){U(r,t,s)},p(r,s){s&9&&!mu(t.src,n="/static/"+r[6][r[3].labelColumn])&&J(t,"src",n),s&9&&i!==(i="Image thumbnail for instance "+r[6][r[3].labelColumn])&&J(t,"alt",i)},d(r){r&&j(t)}}}function F7(e){let t,n,i;return{c(){t=K("img"),J(t,"class","overlay svelte-12tet48"),mu(t.src,n="/cache/"+e[1]+"/"+e[6][e[1]])||J(t,"src",n),J(t,"alt",i="Image thumbnail for instance "+e[6][e[1]]),vn(t,"width","150px",!1),vn(t,"height","150px",!1)},m(r,s){U(r,t,s)},p(r,s){s&3&&!mu(t.src,n="/cache/"+r[1]+"/"+r[6][r[1]])&&J(t,"src",n),s&3&&i!==(i="Image thumbnail for instance "+r[6][r[1]])&&J(t,"alt",i)},d(r){r&&j(t)}}}function P7(e){let t=e[9]+"",n,i,r=e[6][e[9]]+"",s,a,o;return{c(){n=ye(t),i=ye(" : "),s=ye(r),a=ae(),o=K("br")},m(l,u){U(l,n,u),U(l,i,u),U(l,s,u),U(l,a,u),U(l,o,u)},p(l,u){u&1&&t!==(t=l[9]+"")&&et(n,t),u&1&&r!==(r=l[6][l[9]]+"")&&et(s,r)},d(l){l&&j(n),l&&j(i),l&&j(s),l&&j(a),l&&j(o)}}}function xVe(e){let t,n=Object.keys(e[6]).filter(j7),i=[];for(let r=0;r<n.length;r+=1)i[r]=P7(L7(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=_t()},m(r,s){for(let a=0;a<i.length;a+=1)i[a].m(r,s);U(r,t,s)},p(r,s){if(s&1){n=Object.keys(r[6]).filter(j7);let a;for(a=0;a<n.length;a+=1){const o=L7(r,n,a);i[a]?i[a].p(o,s):(i[a]=P7(o),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){Rn(i,r),r&&j(t)}}}function TVe(e){let t,n,i,r,s,a=e[2].includes("Label"),o,l=e[6][e[1]]&&e[2].includes("Model"),u,c,f,d=a&&N7(e),h=l&&F7(e);return c=new hh({props:{$$slots:{default:[xVe]},$$scope:{ctx:e}}}),{c(){t=K("div"),n=K("img"),s=ae(),d&&d.c(),o=ae(),h&&h.c(),u=ae(),ie(c.$$.fragment),mu(n.src,i="/static/"+e[6][e[3].idColumn])||J(n,"src",i),J(n,"alt",r="Image thumbnail for instance "+e[6][e[3].idColumn]),vn(n,"width","150px",!1),vn(n,"height","150px",!1),J(t,"id","overlays"),J(t,"class","svelte-12tet48")},m(p,g){U(p,t,g),G(t,n),G(t,s),d&&d.m(t,null),G(t,o),h&&h.m(t,null),U(p,u,g),te(c,p,g),f=!0},p(p,g){(!f||g&9&&!mu(n.src,i="/static/"+p[6][p[3].idColumn]))&&J(n,"src",i),(!f||g&9&&r!==(r="Image thumbnail for instance "+p[6][p[3].idColumn]))&&J(n,"alt",r),g&4&&(a=p[2].includes("Label")),a?d?d.p(p,g):(d=N7(p),d.c(),d.m(t,o)):d&&(d.d(1),d=null),g&7&&(l=p[6][p[1]]&&p[2].includes("Model")),l?h?h.p(p,g):(h=F7(p),h.c(),h.m(t,null)):h&&(h.d(1),h=null);const m={};g&8193&&(m.$$scope={dirty:g,ctx:p}),c.$set(m)},i(p){f||(F(c.$$.fragment,p),f=!0)},o(p){P(c.$$.fragment,p),f=!1},d(p){p&&j(t),d&&d.d(),h&&h.d(),p&&j(u),ne(c,p)}}}function B7(e){let t,n,i,r;return n=new Ud({props:{$$slots:{default:[TVe]},$$scope:{ctx:e}}}),{c(){t=K("div"),ie(n.$$.fragment),i=ae(),J(t,"class","box svelte-12tet48")},m(s,a){U(s,t,a),te(n,t,null),G(t,i),r=!0},p(s,a){const o={};a&8207&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(F(n.$$.fragment,s),r=!0)},o(s){P(n.$$.fragment,s),r=!1},d(s){s&&j(t),ne(n)}}}function kVe(e){let t,n,i,r,s,a,o,l;function u(p){e[5](p)}let c={segments:e[4],$$slots:{default:[IVe,({segment:p})=>({12:p}),({segment:p})=>p?4096:0]},$$scope:{ctx:e}};e[2]!==void 0&&(c.selected=e[2]),n=new bVe({props:c}),be.push(()=>In(n,"selected",u));let f=e[0],d=[];for(let p=0;p<f.length;p+=1)d[p]=B7(R7(e,f,p));const h=p=>P(d[p],1,1,()=>{d[p]=null});return{c(){t=K("div"),ie(n.$$.fragment),r=ae(),s=K("div"),a=ae();for(let p=0;p<d.length;p+=1)d[p].c();o=_t(),vn(t,"margin-left","10px",!1),J(s,"class","break svelte-12tet48")},m(p,g){U(p,t,g),te(n,t,null),U(p,r,g),U(p,s,g),U(p,a,g);for(let m=0;m<d.length;m+=1)d[m].m(p,g);U(p,o,g),l=!0},p(p,[g]){const m={};if(g&12288&&(m.$$scope={dirty:g,ctx:p}),!i&&g&4&&(i=!0,m.selected=p[2],Cn(()=>i=!1)),n.$set(m),g&15){f=p[0];let y;for(y=0;y<f.length;y+=1){const b=R7(p,f,y);d[y]?(d[y].p(b,g),F(d[y],1)):(d[y]=B7(b),d[y].c(),F(d[y],1),d[y].m(o.parentNode,o))}for(Be(),y=f.length;y<d.length;y+=1)h(y);je()}},i(p){if(!l){F(n.$$.fragment,p);for(let g=0;g<f.length;g+=1)F(d[g]);l=!0}},o(p){P(n.$$.fragment,p),d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)P(d[g]);l=!1},d(p){p&&j(t),ne(n),p&&j(r),p&&j(s),p&&j(a),Rn(d,p),p&&j(o)}}}const j7=e=>!e.startsWith("zeno");function MVe(e,t,n){let i;Qe(e,_o,u=>n(3,i=u));let r=["Label","Model"],s=["Label"],{table:a}=t,{modelCol:o}=t;function l(u){s=u,n(2,s)}return e.$$set=u=>{"table"in u&&n(0,a=u.table),"modelCol"in u&&n(1,o=u.modelCol)},[a,o,s,i,r,l]}class DVe extends qe{constructor(t){super(),We(this,t,MVe,kVe,He,{table:0,modelCol:1})}}function U7(e,t,n){const i=e.slice();return i[7]=t[n],i[8]=t,i[9]=n,i}function z7(e,t,n){const i=e.slice();return i[10]=t[n],i}function V7(e){let t=e[10]+"",n,i,r=e[7][e[10]]+"",s,a,o;return{c(){n=ye(t),i=ye(" : "),s=ye(r),a=ae(),o=K("br")},m(l,u){U(l,n,u),U(l,i,u),U(l,s,u),U(l,a,u),U(l,o,u)},p(l,u){u&1&&t!==(t=l[10]+"")&&et(n,t),u&1&&r!==(r=l[7][l[10]]+"")&&et(s,r)},d(l){l&&j(n),l&&j(i),l&&j(s),l&&j(a),l&&j(o)}}}function RVe(e){let t,n=Object.keys(e[7]).filter(H7),i=[];for(let r=0;r<n.length;r+=1)i[r]=V7(z7(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=_t()},m(r,s){for(let a=0;a<i.length;a+=1)i[a].m(r,s);U(r,t,s)},p(r,s){if(s&1){n=Object.keys(r[7]).filter(H7);let a;for(a=0;a<n.length;a+=1){const o=z7(r,n,a);i[a]?i[a].p(o,s):(i[a]=V7(o),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){Rn(i,r),r&&j(t)}}}function LVe(e){let t,n=e[9],i,r,s;const a=()=>e[3](t,n),o=()=>e[3](null,n);return r=new hh({props:{$$slots:{default:[RVe]},$$scope:{ctx:e}}}),{c(){t=K("canvas"),i=ae(),ie(r.$$.fragment),vn(t,"max-width","200px",!1),vn(t,"max-height","200px",!1)},m(l,u){U(l,t,u),a(),U(l,i,u),te(r,l,u),s=!0},p(l,u){e=l,n!==e[9]&&(o(),n=e[9],a());const c={};u&8193&&(c.$$scope={dirty:u,ctx:e}),r.$set(c)},i(l){s||(F(r.$$.fragment,l),s=!0)},o(l){P(r.$$.fragment,l),s=!1},d(l){l&&j(t),o(),l&&j(i),ne(r,l)}}}function NVe(e){let t,n;return t=new Ud({props:{$$slots:{default:[LVe]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8195&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function $7(e){let t,n,i,r;return n=new Dk({props:{square:!0,$$slots:{default:[NVe]},$$scope:{ctx:e}}}),{c(){t=K("div"),ie(n.$$.fragment),i=ae(),J(t,"class","box svelte-18m8p8h")},m(s,a){U(s,t,a),te(n,t,null),G(t,i),r=!0},p(s,a){const o={};a&8195&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(F(n.$$.fragment,s),r=!0)},o(s){P(n.$$.fragment,s),r=!1},d(s){s&&j(t),ne(n)}}}function FVe(e){let t,n,i=e[0],r=[];for(let a=0;a<i.length;a+=1)r[a]=$7(U7(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,[o]){if(o&3){i=a[0];let l;for(l=0;l<i.length;l+=1){const u=U7(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=$7(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}let PVe=!0;const H7=e=>!e.startsWith("zeno");function BVe(e,t,n){let i;Qe(e,_o,u=>n(5,i=u));let{table:r}=t,{modelCol:s}=t,a=[];function o(){r.map((u,c)=>{let f=new Image;return f.style.maxHeight="200px",f.style.maxWidth="200px",f.onload=()=>{if(a[c]){n(1,a[c].width=f.width,a),n(1,a[c].height=f.height,a);let d=a[c].getContext("2d");d.imageSmoothingEnabled=!0,d.drawImage(f,0,0);{let h=r[c][i.labelColumn];d.strokeStyle="purple",d.lineWidth=3,h.forEach(p=>{d.strokeRect(p[0],p[1],p[2],p[3])})}u[s]&&PVe&&(d.strokeStyle="orange",d.lineWidth=3,u[s].forEach(h=>{d.strokeRect(h[0],h[1],h[2],h[3])}))}},f.src=`/static/${u[i.idColumn]}`,f})}function l(u,c){be[u?"unshift":"push"](()=>{a[c]=u,n(1,a)})}return e.$$set=u=>{"table"in u&&n(0,r=u.table),"modelCol"in u&&n(2,s=u.modelCol)},e.$$.update=()=>{e.$$.dirty&1&&o()},[r,a,s,l]}class jVe extends qe{constructor(t){super(),We(this,t,BVe,FVe,He,{table:0,modelCol:2})}}function W7(e,t,n){const i=e.slice();return i[3]=t[n],i}function q7(e,t,n){const i=e.slice();return i[6]=t[n],i}function G7(e){let t=e[6]+"",n,i,r=e[3][e[6]]+"",s,a,o;return{c(){n=ye(t),i=ye(" : "),s=ye(r),a=ae(),o=K("br")},m(l,u){U(l,n,u),U(l,i,u),U(l,s,u),U(l,a,u),U(l,o,u)},p(l,u){u&1&&t!==(t=l[6]+"")&&et(n,t),u&1&&r!==(r=l[3][l[6]]+"")&&et(s,r)},d(l){l&&j(n),l&&j(i),l&&j(s),l&&j(a),l&&j(o)}}}function UVe(e){let t,n=Object.keys(e[3]).filter(K7),i=[];for(let r=0;r<n.length;r+=1)i[r]=G7(q7(e,n,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();t=_t()},m(r,s){for(let a=0;a<i.length;a+=1)i[a].m(r,s);U(r,t,s)},p(r,s){if(s&1){n=Object.keys(r[3]).filter(K7);let a;for(a=0;a<n.length;a+=1){const o=q7(r,n,a);i[a]?i[a].p(o,s):(i[a]=G7(o),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(r){Rn(i,r),r&&j(t)}}}function zVe(e){let t,n=e[3].content+"",i,r,s,a;return s=new hh({props:{$$slots:{default:[UVe]},$$scope:{ctx:e}}}),{c(){t=K("span"),i=ye(n),r=ae(),ie(s.$$.fragment),vn(t,"max-width","300px",!1)},m(o,l){U(o,t,l),G(t,i),U(o,r,l),te(s,o,l),a=!0},p(o,l){(!a||l&1)&&n!==(n=o[3].content+"")&&et(i,n);const u={};l&513&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(F(s.$$.fragment,o),a=!0)},o(o){P(s.$$.fragment,o),a=!1},d(o){o&&j(t),o&&j(r),ne(s,o)}}}function Y7(e){let t,n,i=e[3][e[1]]+"",r;return{c(){t=K("span"),n=ye("A: "),r=ye(i),J(t,"class","output svelte-6wio3i")},m(s,a){U(s,t,a),G(t,n),G(t,r)},p(s,a){a&3&&i!==(i=s[3][s[1]]+"")&&et(r,i)},d(s){s&&j(t)}}}function VVe(e){let t,n,i,r,s,a=e[3][e[2].labelColumn]+"",o,l,u,c;t=new Ud({props:{$$slots:{default:[zVe]},$$scope:{ctx:e}}});let f=e[1]&&Y7(e);return{c(){ie(t.$$.fragment),n=ae(),i=K("br"),r=ae(),s=K("span"),o=ye(a),l=ae(),f&&f.c(),u=_t(),J(s,"class","label svelte-6wio3i")},m(d,h){te(t,d,h),U(d,n,h),U(d,i,h),U(d,r,h),U(d,s,h),G(s,o),U(d,l,h),f&&f.m(d,h),U(d,u,h),c=!0},p(d,h){const p={};h&513&&(p.$$scope={dirty:h,ctx:d}),t.$set(p),(!c||h&5)&&a!==(a=d[3][d[2].labelColumn]+"")&&et(o,a),d[1]?f?f.p(d,h):(f=Y7(d),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null)},i(d){c||(F(t.$$.fragment,d),c=!0)},o(d){P(t.$$.fragment,d),c=!1},d(d){ne(t,d),d&&j(n),d&&j(i),d&&j(r),d&&j(s),d&&j(l),f&&f.d(d),d&&j(u)}}}function X7(e){let t,n,i,r;return n=new Dk({props:{square:!0,$$slots:{default:[VVe]},$$scope:{ctx:e}}}),{c(){t=K("div"),ie(n.$$.fragment),i=ae(),J(t,"class","box svelte-6wio3i")},m(s,a){U(s,t,a),te(n,t,null),G(t,i),r=!0},p(s,a){const o={};a&519&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(F(n.$$.fragment,s),r=!0)},o(s){P(n.$$.fragment,s),r=!1},d(s){s&&j(t),ne(n)}}}function $Ve(e){let t,n,i=e[0],r=[];for(let a=0;a<i.length;a+=1)r[a]=X7(W7(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,[o]){if(o&7){i=a[0];let l;for(l=0;l<i.length;l+=1){const u=W7(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=X7(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}const K7=e=>!e.startsWith("zeno");function HVe(e,t,n){let i;Qe(e,_o,a=>n(2,i=a));let{table:r}=t,{modelCol:s}=t;return e.$$set=a=>{"table"in a&&n(0,r=a.table),"modelCol"in a&&n(1,s=a.modelCol)},[r,s,i]}class WVe extends qe{constructor(t){super(),We(this,t,HVe,$Ve,He,{table:0,modelCol:1})}}function J7(e){let t,n,i,r;const s=[KVe,XVe,YVe,GVe,qVe],a=[];function o(l,u){return l[8].task==="image-classification"?0:l[8].task==="image-segmentation"?1:l[8].task==="object-detection"?2:l[8].task==="text-classification"?3:l[8].task==="audio-classification"?4:-1}return~(t=o(e))&&(n=a[t]=s[t](e)),{c(){n&&n.c(),i=_t()},m(l,u){~t&&a[t].m(l,u),U(l,i,u),r=!0},p(l,u){let c=t;t=o(l),t===c?~t&&a[t].p(l,u):(n&&(Be(),P(a[c],1,1,()=>{a[c]=null}),je()),~t?(n=a[t],n?n.p(l,u):(n=a[t]=s[t](l),n.c()),F(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(F(n),r=!0)},o(l){P(n),r=!1},d(l){~t&&a[t].d(l),l&&j(i)}}}function qVe(e){let t,n;return t=new sVe({props:{table:e[4].slice(e[3],e[5]).objects(),modelCol:e[6]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&56&&(s.table=i[4].slice(i[3],i[5]).objects()),r&64&&(s.modelCol=i[6]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function GVe(e){let t,n;return t=new WVe({props:{table:e[4].slice(e[3],e[5]).objects(),modelCol:e[6]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&56&&(s.table=i[4].slice(i[3],i[5]).objects()),r&64&&(s.modelCol=i[6]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function YVe(e){let t,n;return t=new jVe({props:{table:e[4].slice(e[3],e[5]).objects(),modelCol:e[6]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&56&&(s.table=i[4].slice(i[3],i[5]).objects()),r&64&&(s.modelCol=i[6]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function XVe(e){let t,n;return t=new DVe({props:{table:e[4].slice(e[3],e[5]).objects(),modelCol:e[6]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&56&&(s.table=i[4].slice(i[3],i[5]).objects()),r&64&&(s.modelCol=i[6]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function KVe(e){let t,n;return t=new cVe({props:{table:e[4].slice(e[3],e[5]).objects(),modelCol:e[6]}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&56&&(s.table=i[4].slice(i[3],i[5]).objects()),r&64&&(s.modelCol=i[6]),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function JVe(e){let t;return{c(){t=ye("first_page")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function QVe(e){let t;return{c(){t=ye("chevron_left")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function ZVe(e){let t;return{c(){t=ye("chevron_right")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function e$e(e){let t;return{c(){t=ye("last_page")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function t$e(e){let t,n,i,r,s,a,o,l;return t=new Ja({props:{class:"material-icons",action:"first-page",title:"First page",disabled:e[1]===0,$$slots:{default:[JVe]},$$scope:{ctx:e}}}),t.$on("click",e[11]),i=new Ja({props:{class:"material-icons",action:"prev-page",title:"Prev page",disabled:e[1]===0,$$slots:{default:[QVe]},$$scope:{ctx:e}}}),i.$on("click",e[12]),s=new Ja({props:{class:"material-icons",action:"next-page",title:"Next page",disabled:e[1]===e[2],$$slots:{default:[ZVe]},$$scope:{ctx:e}}}),s.$on("click",e[13]),o=new Ja({props:{class:"material-icons",action:"last-page",title:"Last page",disabled:e[1]===e[2],$$slots:{default:[e$e]},$$scope:{ctx:e}}}),o.$on("click",e[14]),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment),r=ae(),ie(s.$$.fragment),a=ae(),ie(o.$$.fragment)},m(u,c){te(t,u,c),U(u,n,c),te(i,u,c),U(u,r,c),te(s,u,c),U(u,a,c),te(o,u,c),l=!0},p(u,c){const f={};c&2&&(f.disabled=u[1]===0),c&32768&&(f.$$scope={dirty:c,ctx:u}),t.$set(f);const d={};c&2&&(d.disabled=u[1]===0),c&32768&&(d.$$scope={dirty:c,ctx:u}),i.$set(d);const h={};c&6&&(h.disabled=u[1]===u[2]),c&32768&&(h.$$scope={dirty:c,ctx:u}),s.$set(h);const p={};c&6&&(p.disabled=u[1]===u[2]),c&32768&&(p.$$scope={dirty:c,ctx:u}),o.$set(p)},i(u){l||(F(t.$$.fragment,u),F(i.$$.fragment,u),F(s.$$.fragment,u),F(o.$$.fragment,u),l=!0)},o(u){P(t.$$.fragment,u),P(i.$$.fragment,u),P(s.$$.fragment,u),P(o.$$.fragment,u),l=!1},d(u){ne(t,u),u&&j(n),ne(i,u),u&&j(r),ne(s,u),u&&j(a),ne(o,u)}}}function n$e(e){let t;return{c(){t=ye("Rows Per Page")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function i$e(e){let t;return{c(){t=ye("15")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function r$e(e){let t;return{c(){t=ye("30")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function s$e(e){let t;return{c(){t=ye("60")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function a$e(e){let t;return{c(){t=ye("100")},m(n,i){U(n,t,i)},d(n){n&&j(t)}}}function o$e(e){let t,n,i,r,s,a,o,l;return t=new Za({props:{value:15,$$slots:{default:[i$e]},$$scope:{ctx:e}}}),i=new Za({props:{value:30,$$slots:{default:[r$e]},$$scope:{ctx:e}}}),s=new Za({props:{value:60,$$slots:{default:[s$e]},$$scope:{ctx:e}}}),o=new Za({props:{value:100,$$slots:{default:[a$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment),r=ae(),ie(s.$$.fragment),a=ae(),ie(o.$$.fragment)},m(u,c){te(t,u,c),U(u,n,c),te(i,u,c),U(u,r,c),te(s,u,c),U(u,a,c),te(o,u,c),l=!0},p(u,c){const f={};c&32768&&(f.$$scope={dirty:c,ctx:u}),t.$set(f);const d={};c&32768&&(d.$$scope={dirty:c,ctx:u}),i.$set(d);const h={};c&32768&&(h.$$scope={dirty:c,ctx:u}),s.$set(h);const p={};c&32768&&(p.$$scope={dirty:c,ctx:u}),o.$set(p)},i(u){l||(F(t.$$.fragment,u),F(i.$$.fragment,u),F(s.$$.fragment,u),F(o.$$.fragment,u),l=!0)},o(u){P(t.$$.fragment,u),P(i.$$.fragment,u),P(s.$$.fragment,u),P(o.$$.fragment,u),l=!1},d(u){ne(t,u),u&&j(n),ne(i,u),u&&j(r),ne(s,u),u&&j(a),ne(o,u)}}}function l$e(e){let t,n,i,r,s;t=new X2({props:{$$slots:{default:[n$e]},$$scope:{ctx:e}}});function a(l){e[10](l)}let o={variant:"outlined",noLabel:!0,$$slots:{default:[o$e]},$$scope:{ctx:e}};return e[0]!==void 0&&(o.value=e[0]),i=new Uc({props:o}),be.push(()=>In(i,"value",a)),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment)},m(l,u){te(t,l,u),U(l,n,u),te(i,l,u),s=!0},p(l,u){const c={};u&32768&&(c.$$scope={dirty:u,ctx:l}),t.$set(c);const f={};u&32768&&(f.$$scope={dirty:u,ctx:l}),!r&&u&1&&(r=!0,f.value=l[0],Cn(()=>r=!1)),i.$set(f)},i(l){s||(F(t.$$.fragment,l),F(i.$$.fragment,l),s=!0)},o(l){P(t.$$.fragment,l),P(i.$$.fragment,l),s=!1},d(l){ne(t,l),l&&j(n),ne(i,l)}}}function u$e(e){let t=e[3]+1+"",n,i,r,s,a=e[4].size+"",o;return{c(){n=ye(t),i=ye("-"),r=ye(e[5]),s=ye(" of "),o=ye(a)},m(l,u){U(l,n,u),U(l,i,u),U(l,r,u),U(l,s,u),U(l,o,u)},p(l,u){u&8&&t!==(t=l[3]+1+"")&&et(n,t),u&32&&et(r,l[5]),u&16&&a!==(a=l[4].size+"")&&et(o,a)},d(l){l&&j(n),l&&j(i),l&&j(r),l&&j(s),l&&j(o)}}}function c$e(e){let t,n,i,r,s=e[7]&&J7(e);return i=new Jze({props:{slot:"paginate",class:"pagination",$$slots:{total:[u$e],rowsPerPage:[l$e],default:[t$e]},$$scope:{ctx:e}}}),{c(){t=K("div"),s&&s.c(),n=ae(),ie(i.$$.fragment),J(t,"class","container sample-container svelte-1jfu50c")},m(a,o){U(a,t,o),s&&s.m(t,null),U(a,n,o),te(i,a,o),r=!0},p(a,[o]){a[7]?s?(s.p(a,o),o&128&&F(s,1)):(s=J7(a),s.c(),F(s,1),s.m(t,null)):s&&(Be(),P(s,1,1,()=>{s=null}),je());const l={};o&32831&&(l.$$scope={dirty:o,ctx:a}),i.$set(l)},i(a){r||(F(s),F(i.$$.fragment,a),r=!0)},o(a){P(s),P(i.$$.fragment,a),r=!1},d(a){a&&j(t),s&&s.d(),a&&j(n),ne(i,a)}}}function f$e(e,t,n){let i,r,s,a,o,l,u,c;Qe(e,jd,b=>n(4,o=b)),Qe(e,Su,b=>n(9,l=b)),Qe(e,_w,b=>n(7,u=b)),Qe(e,_o,b=>n(8,c=b));let f=15,d=0;function h(b){f=b,n(0,f)}const p=()=>n(1,d=0),g=()=>n(1,d--,d),m=()=>n(1,d++,d),y=()=>n(1,d=a);return e.$$.update=()=>{e.$$.dirty&512&&n(6,i="zenomodel_"+l),e.$$.dirty&17&&n(2,a=Math.max(Math.ceil(o.size/f)-1,0)),e.$$.dirty&6&&d>a&&n(1,d=a),e.$$.dirty&3&&n(3,r=d*f),e.$$.dirty&25&&n(5,s=Math.min(r+f,o.size))},[f,d,a,r,o,s,i,u,c,l,h,p,g,m,y]}class d$e extends qe{constructor(t){super(),We(this,t,f$e,c$e,He,{})}}function Q7(e){let t,n,i,r,s,a,o;return i=new bze({}),a=new d$e({}),{c(){t=K("div"),n=K("div"),ie(i.$$.fragment),r=ae(),s=K("div"),ie(a.$$.fragment),J(n,"id","sample-options"),J(n,"class","svelte-197x0wy"),J(s,"id","samples"),J(s,"class","svelte-197x0wy"),vn(t,"margin-left","10px",!1)},m(l,u){U(l,t,u),G(t,n),te(i,n,null),G(t,r),G(t,s),te(a,s,null),o=!0},i(l){o||(F(i.$$.fragment,l),F(a.$$.fragment,l),o=!0)},o(l){P(i.$$.fragment,l),P(a.$$.fragment,l),o=!1},d(l){l&&j(t),ne(i),ne(a)}}}function h$e(e){let t,n,i,r;n=new Ate({});let s=e[0]&&Q7();return{c(){t=K("div"),ie(n.$$.fragment),i=ae(),s&&s.c(),J(t,"id","container"),J(t,"class","svelte-197x0wy")},m(a,o){U(a,t,o),te(n,t,null),G(t,i),s&&s.m(t,null),r=!0},p(a,[o]){a[0]?s?o&1&&F(s,1):(s=Q7(),s.c(),F(s,1),s.m(t,null)):s&&(Be(),P(s,1,1,()=>{s=null}),je())},i(a){r||(F(n.$$.fragment,a),F(s),r=!0)},o(a){P(n.$$.fragment,a),P(s),r=!1},d(a){a&&j(t),ne(n),s&&s.d()}}}function p$e(e,t,n){let i;return Qe(e,jd,r=>n(0,i=r)),[i]}class eC extends qe{constructor(t){super(),We(this,t,p$e,h$e,He,{})}}function Z7(e,t,n){const i=e.slice();return i[4]=t[n],i}function ej(e,t,n){const i=e.slice();i[7]=t[n];const r=i[2].get({slice:i[4].name,metric:i[3],model:i[7]});return i[8]=r,i}function tj(e,t,n){const i=e.slice();return i[7]=t[n],i}function g$e(e){let t="",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p:xt,d(i){i&&j(n)}}}function m$e(e){let t=e[7]+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&1&&t!==(t=i[7]+"")&&et(n,t)},d(i){i&&j(n)}}}function nj(e){let t,n;return t=new AE({props:{$$slots:{default:[m$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8193&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function y$e(e){let t,n,i,r;t=new AE({props:{$$slots:{default:[g$e]},$$scope:{ctx:e}}});let s=e[0],a=[];for(let l=0;l<s.length;l+=1)a[l]=nj(tj(e,s,l));const o=l=>P(a[l],1,1,()=>{a[l]=null});return{c(){ie(t.$$.fragment),n=ae();for(let l=0;l<a.length;l+=1)a[l].c();i=_t()},m(l,u){te(t,l,u),U(l,n,u);for(let c=0;c<a.length;c+=1)a[c].m(l,u);U(l,i,u),r=!0},p(l,u){const c={};if(u&8192&&(c.$$scope={dirty:u,ctx:l}),t.$set(c),u&1){s=l[0];let f;for(f=0;f<s.length;f+=1){const d=tj(l,s,f);a[f]?(a[f].p(d,u),F(a[f],1)):(a[f]=nj(d),a[f].c(),F(a[f],1),a[f].m(i.parentNode,i))}for(Be(),f=s.length;f<a.length;f+=1)o(f);je()}},i(l){if(!r){F(t.$$.fragment,l);for(let u=0;u<s.length;u+=1)F(a[u]);r=!0}},o(l){P(t.$$.fragment,l),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)P(a[u]);r=!1},d(l){ne(t,l),l&&j(n),Rn(a,l),l&&j(i)}}}function b$e(e){let t,n;return t=new xte({props:{$$slots:{default:[y$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8193&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function v$e(e){let t=e[4].name+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&2&&t!==(t=i[4].name+"")&&et(n,t)},d(i){i&&j(n)}}}function _$e(e){let t=(e[8]?e[8].toFixed(2):"")+"",n;return{c(){n=ye(t)},m(i,r){U(i,n,r)},p(i,r){r&15&&t!==(t=(i[8]?i[8].toFixed(2):"")+"")&&et(n,t)},d(i){i&&j(n)}}}function ij(e){let t,n;return t=new AE({props:{$$slots:{default:[_$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8207&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function w$e(e){let t,n,i,r;t=new AE({props:{$$slots:{default:[v$e]},$$scope:{ctx:e}}});let s=e[0],a=[];for(let l=0;l<s.length;l+=1)a[l]=ij(ej(e,s,l));const o=l=>P(a[l],1,1,()=>{a[l]=null});return{c(){ie(t.$$.fragment),n=ae();for(let l=0;l<a.length;l+=1)a[l].c();i=ae()},m(l,u){te(t,l,u),U(l,n,u);for(let c=0;c<a.length;c+=1)a[c].m(l,u);U(l,i,u),r=!0},p(l,u){const c={};if(u&8194&&(c.$$scope={dirty:u,ctx:l}),t.$set(c),u&15){s=l[0];let f;for(f=0;f<s.length;f+=1){const d=ej(l,s,f);a[f]?(a[f].p(d,u),F(a[f],1)):(a[f]=ij(d),a[f].c(),F(a[f],1),a[f].m(i.parentNode,i))}for(Be(),f=s.length;f<a.length;f+=1)o(f);je()}},i(l){if(!r){F(t.$$.fragment,l);for(let u=0;u<s.length;u+=1)F(a[u]);r=!0}},o(l){P(t.$$.fragment,l),a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)P(a[u]);r=!1},d(l){ne(t,l),l&&j(n),Rn(a,l),l&&j(i)}}}function rj(e){let t,n;return t=new xte({props:{$$slots:{default:[w$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&8207&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function S$e(e){let t,n,i=[...e[1].values()],r=[];for(let a=0;a<i.length;a+=1)r[a]=rj(Z7(e,i,a));const s=a=>P(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=_t()},m(a,o){for(let l=0;l<r.length;l+=1)r[l].m(a,o);U(a,t,o),n=!0},p(a,o){if(o&15){i=[...a[1].values()];let l;for(l=0;l<i.length;l+=1){const u=Z7(a,i,l);r[l]?(r[l].p(u,o),F(r[l],1)):(r[l]=rj(u),r[l].c(),F(r[l],1),r[l].m(t.parentNode,t))}for(Be(),l=i.length;l<r.length;l+=1)s(l);je()}},i(a){if(!n){for(let o=0;o<i.length;o+=1)F(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)P(r[o]);n=!1},d(a){Rn(r,a),a&&j(t)}}}function E$e(e){let t,n,i,r;return t=new Xze({props:{$$slots:{default:[b$e]},$$scope:{ctx:e}}}),i=new Kze({props:{$$slots:{default:[S$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment)},m(s,a){te(t,s,a),U(s,n,a),te(i,s,a),r=!0},p(s,a){const o={};a&8193&&(o.$$scope={dirty:a,ctx:s}),t.$set(o);const l={};a&8207&&(l.$$scope={dirty:a,ctx:s}),i.$set(l)},i(s){r||(F(t.$$.fragment,s),F(i.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),P(i.$$.fragment,s),r=!1},d(s){ne(t,s),s&&j(n),ne(i,s)}}}function A$e(e){let t,n,i,r,s;return t=new Ite({}),r=new Oze({props:{"table$aria-label":"People list",style:"max-width: 100%;",$$slots:{default:[E$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=ae(),i=K("div"),ie(r.$$.fragment)},m(a,o){te(t,a,o),U(a,n,o),U(a,i,o),te(r,i,null),s=!0},p(a,[o]){const l={};o&8207&&(l.$$scope={dirty:o,ctx:a}),r.$set(l)},i(a){s||(F(t.$$.fragment,a),F(r.$$.fragment,a),s=!0)},o(a){P(t.$$.fragment,a),P(r.$$.fragment,a),s=!1},d(a){ne(t,a),a&&j(n),a&&j(i),ne(r)}}}function O$e(e,t,n){let i,r,s,a;return Qe(e,vw,o=>n(0,i=o)),Qe(e,ml,o=>n(1,r=o)),Qe(e,ww,o=>n(2,s=o)),Qe(e,Yp,o=>n(3,a=o)),[i,r,s,a]}class C$e extends qe{constructor(t){super(),We(this,t,O$e,A$e,He,{})}}function I$e(e){let t;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",Qte),J(t,"class","svelte-psfvui")},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function x$e(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[I$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function T$e(e){let t,n;return t=new Ja({props:{$$slots:{default:[x$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function k$e(e){let t;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",Kte),J(t,"class","svelte-psfvui")},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function M$e(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[k$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function D$e(e){let t,n;return t=new Ja({props:{$$slots:{default:[M$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function R$e(e){let t;return{c(){t=$r("path"),J(t,"fill","currentColor"),J(t,"d",Jte),J(t,"class","svelte-psfvui")},m(n,i){U(n,t,i)},p:xt,d(n){n&&j(t)}}}function L$e(e){let t,n;return t=new rl({props:{component:of,viewBox:"0 0 24 24",$$slots:{default:[R$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function N$e(e){let t,n;return t=new Ja({props:{$$slots:{default:[L$e]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,r){te(t,i,r),n=!0},p(i,r){const s={};r&256&&(s.$$scope={dirty:r,ctx:i}),t.$set(s)},i(i){n||(F(t.$$.fragment,i),n=!0)},o(i){P(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function F$e(e){let t,n,i,r,s,a,o,l,u,c,f,d;return t=new yc({props:{activated:e[0]==="discovery",$$slots:{default:[T$e]},$$scope:{ctx:e}}}),t.$on("SMUI:action",e[2]),i=new eA({}),s=new yc({props:{activated:e[0]==="exploration",$$slots:{default:[D$e]},$$scope:{ctx:e}}}),s.$on("SMUI:action",e[3]),o=new eA({}),u=new yc({props:{activated:e[0]==="analysis",$$slots:{default:[N$e]},$$scope:{ctx:e}}}),u.$on("SMUI:action",e[4]),f=new eA({}),{c(){ie(t.$$.fragment),n=ae(),ie(i.$$.fragment),r=ae(),ie(s.$$.fragment),a=ae(),ie(o.$$.fragment),l=ae(),ie(u.$$.fragment),c=ae(),ie(f.$$.fragment)},m(h,p){te(t,h,p),U(h,n,p),te(i,h,p),U(h,r,p),te(s,h,p),U(h,a,p),te(o,h,p),U(h,l,p),te(u,h,p),U(h,c,p),te(f,h,p),d=!0},p(h,p){const g={};p&1&&(g.activated=h[0]==="discovery"),p&256&&(g.$$scope={dirty:p,ctx:h}),t.$set(g);const m={};p&1&&(m.activated=h[0]==="exploration"),p&256&&(m.$$scope={dirty:p,ctx:h}),s.$set(m);const y={};p&1&&(y.activated=h[0]==="analysis"),p&256&&(y.$$scope={dirty:p,ctx:h}),u.$set(y)},i(h){d||(F(t.$$.fragment,h),F(i.$$.fragment,h),F(s.$$.fragment,h),F(o.$$.fragment,h),F(u.$$.fragment,h),F(f.$$.fragment,h),d=!0)},o(h){P(t.$$.fragment,h),P(i.$$.fragment,h),P(s.$$.fragment,h),P(o.$$.fragment,h),P(u.$$.fragment,h),P(f.$$.fragment,h),d=!1},d(h){ne(t,h),h&&j(n),ne(i,h),h&&j(r),ne(s,h),h&&j(a),ne(o,h),h&&j(l),ne(u,h),h&&j(c),ne(f,h)}}}function P$e(e){let t,n,i,r,s,a,o,l,u;return t=new Jde({}),s=new iT({props:{class:"demo-list",iconList:!0,$$slots:{default:[F$e]},$$scope:{ctx:e}}}),l=new Kie({props:{routes:e[1]}}),{c(){ie(t.$$.fragment),n=ae(),i=K("main"),r=K("div"),ie(s.$$.fragment),a=ae(),o=K("div"),ie(l.$$.fragment),J(r,"id","side-menu"),J(r,"class","svelte-psfvui"),J(o,"id","main"),J(o,"class","svelte-psfvui"),J(i,"class","svelte-psfvui")},m(c,f){te(t,c,f),U(c,n,f),U(c,i,f),G(i,r),te(s,r,null),G(i,a),G(i,o),te(l,o,null),u=!0},p(c,[f]){const d={};f&257&&(d.$$scope={dirty:f,ctx:c}),s.$set(d)},i(c){u||(F(t.$$.fragment,c),F(s.$$.fragment,c),F(l.$$.fragment,c),u=!0)},o(c){P(t.$$.fragment,c),P(s.$$.fragment,c),P(l.$$.fragment,c),u=!1},d(c){ne(t,c),c&&j(n),c&&j(i),ne(s),ne(l)}}}function B$e(e,t,n){let i,r,s;Qe(e,kk,f=>n(5,i=f)),Qe(e,vw,f=>n(6,r=f)),Qe(e,NN,f=>n(7,s=f));let a=s.split("/")[1];a||(a="results");const o={"/":eC,"/discovery/":sze,"/exploration/":eC,"/analysis/":C$e,"*":eC};return NN.subscribe(f=>{n(0,a=f.split("/")[1]),a||n(0,a="exploration")}),R$.subscribe(f=>Ede(f)),Zn(()=>wde()),_w.subscribe(f=>{f&&(Su.set(r[0]),Yp.set(i[0]))}),[a,o,()=>n(0,a=bA("discovery")),()=>n(0,a=bA("exploration")),()=>n(0,a=bA("analysis"))]}class j$e extends qe{constructor(t){super(),We(this,t,B$e,P$e,He,{})}}new j$e({target:document.getElementById("app")})});export default U$e();
